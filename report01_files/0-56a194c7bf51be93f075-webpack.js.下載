webpackJsonp([0,3],[,function(t,e,n){"use strict";t.exports=n(485)},,,,,,function(t,e,n){"use strict";function o(t,e,n,o,i,r,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,i,r,a,s],c=0;l=new Error(e.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=o},,,function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return r(t)?t:O(t)}function n(t){return a(t)?t:I(t)}function o(t){return s(t)?t:P(t)}function i(t){return r(t)&&!l(t)?t:L(t)}function r(t){return!(!t||!t[un])}function a(t){return!(!t||!t[cn])}function s(t){return!(!t||!t[hn])}function l(t){return a(t)||s(t)}function u(t){return!(!t||!t[pn])}function c(t){return t.value=!1,t}function h(t){t&&(t.value=!0)}function p(){}function d(t,e){e=e||0;for(var n=Math.max(0,t.length-e),o=new Array(n),i=0;n>i;i++)o[i]=t[i+e];return o}function f(t){return void 0===t.size&&(t.size=t.__iterate(m)),t.size}function g(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return 0>e?f(t)+e:e}function m(){return!0}function v(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function y(t,e){return _(t,e,0)}function b(t,e){return _(t,e,e)}function _(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function x(t){this.next=t}function w(t,e,n,o){var i=0===t?e:1===t?n:[e,n];return o?o.value=i:o={value:i,done:!1},o}function S(){return{value:void 0,done:!0}}function C(t){return!!k(t)}function E(t){return t&&"function"==typeof t.next}function T(t){var e=k(t);return e&&e.call(t)}function k(t){var e=t&&(Sn&&t[Sn]||t[Cn]);return"function"==typeof e?e:void 0}function M(t){return t&&"number"==typeof t.length}function O(t){return null===t||void 0===t?R():r(t)?t.toSeq():z(t)}function I(t){return null===t||void 0===t?R().toKeyedSeq():r(t)?a(t)?t.toSeq():t.fromEntrySeq():H(t)}function P(t){return null===t||void 0===t?R():r(t)?a(t)?t.entrySeq():t.toIndexedSeq():F(t)}function L(t){return(null===t||void 0===t?R():r(t)?a(t)?t.entrySeq():t:F(t)).toSetSeq()}function D(t){this._array=t,this.size=t.length}function A(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function N(t){this._iterable=t,this.size=t.length||t.size}function B(t){this._iterator=t,this._iteratorCache=[]}function j(t){return!(!t||!t[Tn])}function R(){return kn||(kn=new D([]))}function H(t){var e=Array.isArray(t)?new D(t).fromEntrySeq():E(t)?new B(t).fromEntrySeq():C(t)?new N(t).fromEntrySeq():"object"==typeof t?new A(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function F(t){var e=V(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function z(t){var e=V(t)||"object"==typeof t&&new A(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function V(t){return M(t)?new D(t):E(t)?new B(t):C(t)?new N(t):void 0}function U(t,e,n,o){var i=t._cache;if(i){for(var r=i.length-1,a=0;r>=a;a++){var s=i[n?r-a:a];if(e(s[1],o?s[0]:a,t)===!1)return a+1}return a}return t.__iterateUncached(e,n)}function W(t,e,n,o){var i=t._cache;if(i){var r=i.length-1,a=0;return new x(function(){var t=i[n?r-a:a];return a++>r?S():w(e,o?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,n)}function G(t,e){return e?$(e,t,"",{"":t}):K(t)}function $(t,e,n,o){return Array.isArray(e)?t.call(o,n,P(e).map(function(n,o){return $(t,n,o,e)})):q(e)?t.call(o,n,I(e).map(function(n,o){return $(t,n,o,e)})):e}function K(t){return Array.isArray(t)?P(t).map(K).toList():q(t)?I(t).map(K).toMap():t}function q(t){return t&&(t.constructor===Object||void 0===t.constructor)}function Y(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Z(t,e){if(t===e)return!0;if(!r(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||s(t)!==s(e)||u(t)!==u(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!l(t);if(u(t)){var o=t.entries();return e.every(function(t,e){var i=o.next().value;return i&&Y(i[1],t)&&(n||Y(i[0],e))})&&o.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var c=t;t=e,e=c}var h=!0,p=e.__iterate(function(e,o){return(n?t.has(e):i?Y(e,t.get(o,vn)):Y(t.get(o,vn),e))?void 0:(h=!1,!1)});return h&&t.size===p}function X(t,e){if(!(this instanceof X))return new X(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Mn)return Mn;Mn=this}}function J(t,e){if(!t)throw new Error(e)}function Q(t,e,n){if(!(this instanceof Q))return new Q(t,e,n);if(J(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(On)return On;On=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function ot(){}function it(t){return t>>>1&1073741824|3221225471&t}function rt(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return it(n)}if("string"===e)return t.length>jn?at(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return lt(t);if("function"==typeof t.toString)return st(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=Fn[t];return void 0===e&&(e=st(t),Hn===Rn&&(Hn=0,Fn={}),Hn++,Fn[t]=e),e}function st(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return it(e)}function lt(t){var e;if(An&&(e=In.get(t),void 0!==e))return e;if(e=t[Bn],void 0!==e)return e;if(!Dn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Bn],void 0!==e)return e;if(e=ut(t),void 0!==e)return e}if(e=++Nn,1073741824&Nn&&(Nn=0),An)In.set(t,e);else{if(void 0!==Ln&&Ln(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dn)Object.defineProperty(t,Bn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Bn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Bn]=e}}return e}function ut(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ct(t){J(t!==1/0,"Cannot perform this action with an infinite size.")}function ht(t){return null===t||void 0===t?wt():pt(t)&&!u(t)?t:wt().withMutations(function(e){var o=n(t);ct(o.size),o.forEach(function(t,n){return e.set(n,t)})})}function pt(t){return!(!t||!t[zn])}function dt(t,e){this.ownerID=t,this.entries=e}function ft(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function gt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function mt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function yt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&_t(t._root)}function bt(t,e){return w(t,e[0],e[1])}function _t(t,e){return{node:t,index:0,__prev:e}}function xt(t,e,n,o){var i=Object.create(Vn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=o,i.__altered=!1,i}function wt(){return Un||(Un=xt(0))}function St(t,e,n){var o,i;if(t._root){var r=c(yn),a=c(bn);if(o=Ct(t._root,t.__ownerID,0,void 0,e,n,r,a),!a.value)return t;i=t.size+(r.value?n===vn?-1:1:0)}else{if(n===vn)return t;i=1,o=new dt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=o,t.__hash=void 0,t.__altered=!0,t):o?xt(i,o):wt()}function Ct(t,e,n,o,i,r,a,s){return t?t.update(e,n,o,i,r,a,s):r===vn?t:(h(s),h(a),new vt(e,o,[i,r]))}function Et(t){return t.constructor===vt||t.constructor===mt}function Tt(t,e,n,o,i){if(t.keyHash===o)return new mt(e,o,[t.entry,i]);var r,a=(0===n?t.keyHash:t.keyHash>>>n)&mn,s=(0===n?o:o>>>n)&mn,l=a===s?[Tt(t,e,n+fn,o,i)]:(r=new vt(e,o,i),s>a?[t,r]:[r,t]);return new ft(e,1<<a|1<<s,l)}function kt(t,e,n,o){t||(t=new p);for(var i=new vt(t,rt(n),[n,o]),r=0;r<e.length;r++){var a=e[r];i=i.update(t,0,void 0,a[0],a[1])}return i}function Mt(t,e,n,o){for(var i=0,r=0,a=new Array(n),s=0,l=1,u=e.length;u>s;s++,l<<=1){var c=e[s];void 0!==c&&s!==o&&(i|=l,a[r++]=c)}return new ft(t,i,a)}function Ot(t,e,n,o,i){for(var r=0,a=new Array(gn),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[r++]:void 0;return a[o]=i,new gt(t,r+1,a)}function It(t,e,o){for(var i=[],a=0;a<o.length;a++){var s=o[a],l=n(s);r(s)||(l=l.map(function(t){return G(t)})),i.push(l)}return Dt(t,e,i)}function Pt(t,e,n){return t&&t.mergeDeep&&r(e)?t.mergeDeep(e):Y(t,e)?t:e}function Lt(t){return function(e,n,o){if(e&&e.mergeDeepWith&&r(n))return e.mergeDeepWith(t,n);var i=t(e,n,o);return Y(e,i)?e:i}}function Dt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var o=e?function(n,o){t.update(o,vn,function(t){return t===vn?n:e(t,n,o)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(o)}):t.constructor(n[0])}function At(t,e,n,o){var i=t===vn,r=e.next();if(r.done){var a=i?n:t,s=o(a);return s===a?t:s}J(i||t&&t.set,"invalid keyPath");var l=r.value,u=i?vn:t.get(l,vn),c=At(u,e,n,o);return c===u?t:c===vn?t.remove(l):(i?wt():t).set(l,c)}function Nt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function Bt(t,e,n,o){var i=o?t:d(t);return i[e]=n,i}function jt(t,e,n,o){var i=t.length+1;if(o&&e+1===i)return t[e]=n,t;for(var r=new Array(i),a=0,s=0;i>s;s++)s===e?(r[s]=n,a=-1):r[s]=t[s+a];return r}function Rt(t,e,n){var o=t.length-1;if(n&&e===o)return t.pop(),t;for(var i=new Array(o),r=0,a=0;o>a;a++)a===e&&(r=1),i[a]=t[a+r];return i}function Ht(t){var e=Wt();if(null===t||void 0===t)return e;if(Ft(t))return t;var n=o(t),i=n.size;return 0===i?e:(ct(i),i>0&&gn>i?Ut(0,i,fn,null,new zt(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function Ft(t){return!(!t||!t[Kn])}function zt(t,e){this.array=t,this.ownerID=e}function Vt(t,e){function n(t,e,n){return 0===e?o(t,n):i(t,e,n)}function o(t,n){var o=n===s?l&&l.array:t&&t.array,i=n>r?0:r-n,u=a-n;return u>gn&&(u=gn),function(){if(i===u)return Zn;var t=e?--u:i++;return o&&o[t]}}function i(t,o,i){var s,l=t&&t.array,u=i>r?0:r-i>>o,c=(a-i>>o)+1;return c>gn&&(c=gn),function(){for(;;){if(s){var t=s();if(t!==Zn)return t;s=null}if(u===c)return Zn;var r=e?--c:u++;s=n(l&&l[r],o-fn,i+(r<<o))}}}var r=t._origin,a=t._capacity,s=Xt(a),l=t._tail;return n(t._root,t._level,0)}function Ut(t,e,n,o,i,r,a){var s=Object.create(qn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=o,s._tail=i,s.__ownerID=r,s.__hash=a,s.__altered=!1,s}function Wt(){return Yn||(Yn=Ut(0,0,fn))}function Gt(t,e,n){if(e=g(t,e),e!==e)return t;if(e>=t.size||0>e)return t.withMutations(function(t){0>e?Yt(t,e).set(0,n):Yt(t,0,e+1).set(e,n)});e+=t._origin;var o=t._tail,i=t._root,r=c(bn);return e>=Xt(t._capacity)?o=$t(o,t.__ownerID,0,e,n,r):i=$t(i,t.__ownerID,t._level,e,n,r),r.value?t.__ownerID?(t._root=i,t._tail=o,t.__hash=void 0,t.__altered=!0,t):Ut(t._origin,t._capacity,t._level,i,o):t}function $t(t,e,n,o,i,r){var a=o>>>n&mn,s=t&&a<t.array.length;if(!s&&void 0===i)return t;var l;if(n>0){var u=t&&t.array[a],c=$t(u,e,n-fn,o,i,r);return c===u?t:(l=Kt(t,e),l.array[a]=c,l)}return s&&t.array[a]===i?t:(h(r),l=Kt(t,e),void 0===i&&a===l.array.length-1?l.array.pop():l.array[a]=i,l)}function Kt(t,e){return e&&t&&e===t.ownerID?t:new zt(t?t.array.slice():[],e)}function qt(t,e){if(e>=Xt(t._capacity))return t._tail;if(e<1<<t._level+fn){for(var n=t._root,o=t._level;n&&o>0;)n=n.array[e>>>o&mn],o-=fn;return n}}function Yt(t,e,n){void 0!==e&&(e=0|e),void 0!==n&&(n=0|n);var o=t.__ownerID||new p,i=t._origin,r=t._capacity,a=i+e,s=void 0===n?r:0>n?r+n:i+n;if(a===i&&s===r)return t;if(a>=s)return t.clear();for(var l=t._level,u=t._root,c=0;0>a+c;)u=new zt(u&&u.array.length?[void 0,u]:[],o),l+=fn,c+=1<<l;c&&(a+=c,i+=c,s+=c,r+=c);for(var h=Xt(r),d=Xt(s);d>=1<<l+fn;)u=new zt(u&&u.array.length?[u]:[],o),l+=fn;var f=t._tail,g=h>d?qt(t,s-1):d>h?new zt([],o):f;if(f&&d>h&&r>a&&f.array.length){u=Kt(u,o);for(var m=u,v=l;v>fn;v-=fn){var y=h>>>v&mn;m=m.array[y]=Kt(m.array[y],o)}m.array[h>>>fn&mn]=f}if(r>s&&(g=g&&g.removeAfter(o,0,s)),a>=d)a-=d,s-=d,l=fn,u=null,g=g&&g.removeBefore(o,0,a);else if(a>i||h>d){for(c=0;u;){var b=a>>>l&mn;if(b!==d>>>l&mn)break;b&&(c+=(1<<l)*b),l-=fn,u=u.array[b]}u&&a>i&&(u=u.removeBefore(o,l,a-c)),u&&h>d&&(u=u.removeAfter(o,l,d-c)),c&&(a-=c,s-=c)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=l,t._root=u,t._tail=g,t.__hash=void 0,t.__altered=!0,t):Ut(a,s,l,u,g)}function Zt(t,e,n){for(var i=[],a=0,s=0;s<n.length;s++){var l=n[s],u=o(l);u.size>a&&(a=u.size),r(l)||(u=u.map(function(t){return G(t)})),i.push(u)}return a>t.size&&(t=t.setSize(a)),Dt(t,e,i)}function Xt(t){return gn>t?0:t-1>>>fn<<fn}function Jt(t){return null===t||void 0===t?ee():Qt(t)?t:ee().withMutations(function(e){var o=n(t);ct(o.size),o.forEach(function(t,n){return e.set(n,t)})})}function Qt(t){return pt(t)&&u(t)}function te(t,e,n,o){var i=Object.create(Jt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=o,i}function ee(){return Xn||(Xn=te(wt(),Wt()))}function ne(t,e,n){var o,i,r=t._map,a=t._list,s=r.get(e),l=void 0!==s;if(n===vn){if(!l)return t;a.size>=gn&&a.size>=2*r.size?(i=a.filter(function(t,e){return void 0!==t&&s!==e}),o=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=i.__ownerID=t.__ownerID)):(o=r.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(l){if(n===a.get(s)[1])return t;o=r,i=a.set(s,[e,n])}else o=r.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=i,t.__hash=void 0,t):te(o,i)}function oe(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function re(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function se(t){var e=Me(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Oe,e.__iterateUncached=function(e,n){var o=this;return t.__iterate(function(t,n){return e(n,t,o)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===wn){var o=t.__iterator(e,n);return new x(function(){var t=o.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===xn?_n:xn,n)},e}function le(t,e,n){var o=Me(t);return o.size=t.size,o.has=function(e){return t.has(e)},o.get=function(o,i){var r=t.get(o,vn);return r===vn?i:e.call(n,r,o,t)},o.__iterateUncached=function(o,i){var r=this;return t.__iterate(function(t,i,a){return o(e.call(n,t,i,a),i,r)!==!1},i)},o.__iteratorUncached=function(o,i){var r=t.__iterator(wn,i);return new x(function(){var i=r.next();if(i.done)return i;var a=i.value,s=a[0];return w(o,s,e.call(n,a[1],s,t),i)})},o}function ue(t,e){var n=Me(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,o){return t.get(e?n:-1-n,o)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Oe,n.__iterate=function(e,n){var o=this;return t.__iterate(function(t,n){return e(t,n,o)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function ce(t,e,n,o){var i=Me(t);return o&&(i.has=function(o){var i=t.get(o,vn);return i!==vn&&!!e.call(n,i,o,t)},i.get=function(o,i){var r=t.get(o,vn);return r!==vn&&e.call(n,r,o,t)?r:i}),i.__iterateUncached=function(i,r){var a=this,s=0;return t.__iterate(function(t,r,l){return e.call(n,t,r,l)?(s++,i(t,o?r:s-1,a)):void 0},r),s},i.__iteratorUncached=function(i,r){var a=t.__iterator(wn,r),s=0;return new x(function(){for(;;){var r=a.next();if(r.done)return r;var l=r.value,u=l[0],c=l[1];if(e.call(n,c,u,t))return w(i,o?u:s++,c,r)}})},i}function he(t,e,n){var o=ht().asMutable();return t.__iterate(function(i,r){o.update(e.call(n,i,r,t),0,function(t){return t+1})}),o.asImmutable()}function pe(t,e,n){var o=a(t),i=(u(t)?Jt():ht()).asMutable();t.__iterate(function(r,a){i.update(e.call(n,r,a,t),function(t){return t=t||[],t.push(o?[a,r]:r),t})});var r=ke(t);return i.map(function(e){return Ce(t,r(e))})}function de(t,e,n,o){var i=t.size;if(void 0!==e&&(e=0|e),void 0!==n&&(n=n===1/0?i:0|n),v(e,n,i))return t;var r=y(e,i),a=b(n,i);if(r!==r||a!==a)return de(t.toSeq().cacheResult(),e,n,o);var s,l=a-r;l===l&&(s=0>l?0:l);var u=Me(t);return u.size=0===s?s:t.size&&s||void 0,!o&&j(t)&&s>=0&&(u.get=function(e,n){return e=g(this,e),e>=0&&s>e?t.get(e+r,n):n}),u.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,l=!0,u=0;return t.__iterate(function(t,n){return l&&(l=a++<r)?void 0:(u++,e(t,o?n:u-1,i)!==!1&&u!==s)}),u},u.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var i=0!==s&&t.__iterator(e,n),a=0,l=0;return new x(function(){for(;a++<r;)i.next();if(++l>s)return S();var t=i.next();return o||e===xn?t:e===_n?w(e,l-1,void 0,t):w(e,l-1,t.value[1],t)})},u}function fe(t,e,n){var o=Me(t);return o.__iterateUncached=function(o,i){var r=this;if(i)return this.cacheResult().__iterate(o,i);var a=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++a&&o(t,i,r)}),a},o.__iteratorUncached=function(o,i){var r=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(wn,i),s=!0;return new x(function(){if(!s)return S();var t=a.next();if(t.done)return t;var i=t.value,l=i[0],u=i[1];return e.call(n,u,l,r)?o===wn?t:w(o,l,u,t):(s=!1,S())})},o}function ge(t,e,n,o){var i=Me(t);return i.__iterateUncached=function(i,r){var a=this;if(r)return this.cacheResult().__iterate(i,r);var s=!0,l=0;return t.__iterate(function(t,r,u){return s&&(s=e.call(n,t,r,u))?void 0:(l++,i(t,o?r:l-1,a))}),l},i.__iteratorUncached=function(i,r){var a=this;if(r)return this.cacheResult().__iterator(i,r);var s=t.__iterator(wn,r),l=!0,u=0;return new x(function(){var t,r,c;do{if(t=s.next(),t.done)return o||i===xn?t:i===_n?w(i,u++,void 0,t):w(i,u++,t.value[1],t);var h=t.value;r=h[0],c=h[1],l&&(l=e.call(n,c,r,a))}while(l);return i===wn?t:w(i,r,c,t)})},i}function me(t,e){var o=a(t),i=[t].concat(e).map(function(t){return r(t)?o&&(t=n(t)):t=o?H(t):F(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var l=i[0];if(l===t||o&&a(l)||s(t)&&s(l))return l}var u=new D(i);return o?u=u.toKeyedSeq():s(t)||(u=u.toSetSeq()),u=u.flatten(!0),u.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),u}function ve(t,e,n){var o=Me(t);return o.__iterateUncached=function(o,i){function a(t,u){var c=this;t.__iterate(function(t,i){return(!e||e>u)&&r(t)?a(t,u+1):o(t,n?i:s++,c)===!1&&(l=!0),!l},i)}var s=0,l=!1;return a(t,0),s},o.__iteratorUncached=function(o,i){var a=t.__iterator(o,i),s=[],l=0;return new x(function(){for(;a;){var t=a.next();if(t.done===!1){var u=t.value;if(o===wn&&(u=u[1]),e&&!(s.length<e)||!r(u))return n?t:w(o,l++,u,t);s.push(a),a=u.__iterator(o,i)}else a=s.pop()}return S()})},o}function ye(t,e,n){var o=ke(t);return t.toSeq().map(function(i,r){return o(e.call(n,i,r,t))}).flatten(!0)}function be(t,e){var n=Me(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,o){var i=this,r=0;return t.__iterate(function(t,o){return(!r||n(e,r++,i)!==!1)&&n(t,r++,i)!==!1},o),r},n.__iteratorUncached=function(n,o){var i,r=t.__iterator(xn,o),a=0;return new x(function(){return(!i||a%2)&&(i=r.next(),i.done)?i:a%2?w(n,a++,e):w(n,a++,i.value,i)})},n}function _e(t,e,n){e||(e=Ie);var o=a(t),i=0,r=t.toSeq().map(function(e,o){return[o,e,i++,n?n(e,o,t):e]}).toArray();return r.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(o?function(t,e){r[e].length=2}:function(t,e){r[e]=t[1]}),o?I(r):s(t)?P(r):L(r)}function xe(t,e,n){if(e||(e=Ie),n){var o=t.toSeq().map(function(e,o){return[e,n(e,o,t)]}).reduce(function(t,n){return we(e,t[1],n[1])?n:t});return o&&o[0]}return t.reduce(function(t,n){return we(e,t,n)?n:t})}function we(t,e,n){var o=t(n,e);return 0===o&&n!==e&&(void 0===n||null===n||n!==n)||o>0}function Se(t,n,o){var i=Me(t);return i.size=new D(o).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,o=this.__iterator(xn,e),i=0;!(n=o.next()).done&&t(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(t,i){var r=o.map(function(t){return t=e(t),T(i?t.reverse():t)}),a=0,s=!1;return new x(function(){var e;return s||(e=r.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?S():w(t,a++,n.apply(null,e.map(function(t){return t.value})))})},i}function Ce(t,e){return j(t)?e:t.constructor(e)}function Ee(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Te(t){return ct(t.size),f(t)}function ke(t){return a(t)?n:s(t)?o:i}function Me(t){return Object.create((a(t)?I:s(t)?P:L).prototype)}function Oe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function Ie(t,e){return t>e?1:e>t?-1:0}function Pe(t){var n=T(t);if(!n){if(!M(t))throw new TypeError("Expected iterable or array-like: "+t);n=T(e(t))}return n}function Le(t,e){var n,o=function(r){if(r instanceof o)return r;if(!(this instanceof o))return new o(r);if(!n){n=!0;var a=Object.keys(t);Ne(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=ht(r)},i=o.prototype=Object.create(Jn);return i.constructor=o,o}function De(t,e,n){var o=Object.create(Object.getPrototypeOf(t));return o._map=e,o.__ownerID=n,o}function Ae(t){return t._name||t.constructor.name||"Record"}function Ne(t,e){try{e.forEach(Be.bind(void 0,t))}catch(n){}}function Be(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){J(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function je(t){return null===t||void 0===t?ze():Re(t)&&!u(t)?t:ze().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Re(t){return!(!t||!t[Qn])}function He(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Fe(t,e){var n=Object.create(to);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function ze(){return eo||(eo=Fe(wt()))}function Ve(t){return null===t||void 0===t?Ge():Ue(t)?t:Ge().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Ue(t){return Re(t)&&u(t)}function We(t,e){var n=Object.create(no);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ge(){return oo||(oo=We(ee()))}function $e(t){return null===t||void 0===t?Ye():Ke(t)?t:Ye().unshiftAll(t)}function Ke(t){return!(!t||!t[io])}function qe(t,e,n,o){var i=Object.create(ro);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=o,i.__altered=!1,i}function Ye(){return ao||(ao=qe(0))}function Ze(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Xe(t,e){return e}function Je(t,e){return[e,t]}function Qe(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):String(t)}function nn(){return d(arguments)}function on(t,e){return e>t?1:t>e?-1:0}function rn(t){if(t.size===1/0)return 0;var e=u(t),n=a(t),o=e?1:0,i=t.__iterate(n?e?function(t,e){o=31*o+sn(rt(t),rt(e))|0}:function(t,e){o=o+sn(rt(t),rt(e))|0}:e?function(t){o=31*o+rt(t)|0}:function(t){o=o+rt(t)|0});return an(i,o)}function an(t,e){return e=Pn(e,3432918353),e=Pn(e<<15|e>>>-15,461845907),e=Pn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Pn(e^e>>>16,2246822507),e=Pn(e^e>>>13,3266489909),e=it(e^e>>>16)}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var ln=Array.prototype.slice;t(n,e),t(o,e),t(i,e),e.isIterable=r,e.isKeyed=a,e.isIndexed=s,e.isAssociative=l,e.isOrdered=u,e.Keyed=n,e.Indexed=o,e.Set=i;var un="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",hn="@@__IMMUTABLE_INDEXED__@@",pn="@@__IMMUTABLE_ORDERED__@@",dn="delete",fn=5,gn=1<<fn,mn=gn-1,vn={},yn={value:!1},bn={value:!1},_n=0,xn=1,wn=2,Sn="function"==typeof Symbol&&Symbol.iterator,Cn="@@iterator",En=Sn||Cn;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=_n,x.VALUES=xn,x.ENTRIES=wn,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[En]=function(){return this},t(O,e),O.of=function(){return O(arguments)},O.prototype.toSeq=function(){return this},O.prototype.toString=function(){return this.__toString("Seq {","}")},O.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},O.prototype.__iterate=function(t,e){return U(this,t,e,!0)},O.prototype.__iterator=function(t,e){return W(this,t,e,!0)},t(I,O),I.prototype.toKeyedSeq=function(){return this},t(P,O),P.of=function(){return P(arguments)},P.prototype.toIndexedSeq=function(){return this},P.prototype.toString=function(){return this.__toString("Seq [","]")},P.prototype.__iterate=function(t,e){return U(this,t,e,!1)},P.prototype.__iterator=function(t,e){return W(this,t,e,!1)},t(L,O),L.of=function(){return L(arguments)},L.prototype.toSetSeq=function(){return this},O.isSeq=j,O.Keyed=I,O.Set=L,O.Indexed=P;var Tn="@@__IMMUTABLE_SEQ__@@";O.prototype[Tn]=!0,t(D,P),D.prototype.get=function(t,e){return this.has(t)?this._array[g(this,t)]:e},D.prototype.__iterate=function(t,e){for(var n=this._array,o=n.length-1,i=0;o>=i;i++)if(t(n[e?o-i:i],i,this)===!1)return i+1;return i},D.prototype.__iterator=function(t,e){var n=this._array,o=n.length-1,i=0;return new x(function(){return i>o?S():w(t,i,n[e?o-i++:i++])})},t(A,I),A.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},A.prototype.has=function(t){return this._object.hasOwnProperty(t)},A.prototype.__iterate=function(t,e){for(var n=this._object,o=this._keys,i=o.length-1,r=0;i>=r;r++){var a=o[e?i-r:r];if(t(n[a],a,this)===!1)return r+1}return r},A.prototype.__iterator=function(t,e){var n=this._object,o=this._keys,i=o.length-1,r=0;return new x(function(){var a=o[e?i-r:r];return r++>i?S():w(t,a,n[a])})},A.prototype[pn]=!0,t(N,P),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,o=T(n),i=0;if(E(o))for(var r;!(r=o.next()).done&&t(r.value,i++,this)!==!1;);return i},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,o=T(n);if(!E(o))return new x(S);var i=0;return new x(function(){var e=o.next();return e.done?e:w(t,i++,e.value)})},t(B,P),B.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(t(o[i],i++,this)===!1)return i;for(var r;!(r=n.next()).done;){var a=r.value;if(o[i]=a,t(a,i++,this)===!1)break}return i},B.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,o=this._iteratorCache,i=0;return new x(function(){if(i>=o.length){var e=n.next();if(e.done)return e;o[i]=e.value}return w(t,i,o[i++])})};var kn;t(X,P),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(t,e){return this.has(t)?this._value:e},X.prototype.includes=function(t){return Y(this._value,t)},X.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:new X(this._value,b(e,n)-y(t,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(t){return Y(this._value,t)?0:-1},X.prototype.lastIndexOf=function(t){return Y(this._value,t)?this.size:-1},X.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},X.prototype.__iterator=function(t,e){var n=this,o=0;return new x(function(){return o<n.size?w(t,o++,n._value):S()})},X.prototype.equals=function(t){return t instanceof X?Y(this._value,t._value):Z(t)};var Mn;t(Q,P),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Q.prototype.get=function(t,e){return this.has(t)?this._start+g(this,t)*this._step:e},Q.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Q.prototype.slice=function(t,e){return v(t,e,this.size)?this:(t=y(t,this.size),e=b(e,this.size),t>=e?new Q(0,0):new Q(this.get(t,this._end),this.get(e,this._end),this._step))},Q.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(t){return this.indexOf(t)},Q.prototype.__iterate=function(t,e){for(var n=this.size-1,o=this._step,i=e?this._start+n*o:this._start,r=0;n>=r;r++){if(t(i,r,this)===!1)return r+1;i+=e?-o:o}return r},Q.prototype.__iterator=function(t,e){var n=this.size-1,o=this._step,i=e?this._start+n*o:this._start,r=0;return new x(function(){var a=i;return i+=e?-o:o,r>n?S():w(t,r++,a)})},Q.prototype.equals=function(t){return t instanceof Q?this._start===t._start&&this._end===t._end&&this._step===t._step:Z(this,t)};var On;t(tt,e),t(et,tt),t(nt,tt),t(ot,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=ot;var In,Pn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,o=65535&e;return n*o+((t>>>16)*o+n*(e>>>16)<<16>>>0)|0},Ln=Object.isExtensible,Dn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),An="function"==typeof WeakMap;An&&(In=new WeakMap);var Nn=0,Bn="__immutablehash__";"function"==typeof Symbol&&(Bn=Symbol(Bn));var jn=16,Rn=255,Hn=0,Fn={};t(ht,et),ht.of=function(){var t=ln.call(arguments,0);return wt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},ht.prototype.toString=function(){return this.__toString("Map {","}")},ht.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ht.prototype.set=function(t,e){return St(this,t,e)},ht.prototype.setIn=function(t,e){return this.updateIn(t,vn,function(){return e})},ht.prototype.remove=function(t){return St(this,t,vn)},ht.prototype.deleteIn=function(t){return this.updateIn(t,function(){return vn})},ht.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ht.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var o=At(this,Pe(t),e,n);return o===vn?void 0:o},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wt()},ht.prototype.merge=function(){return It(this,void 0,arguments)},ht.prototype.mergeWith=function(t){var e=ln.call(arguments,1);return It(this,t,e)},ht.prototype.mergeIn=function(t){var e=ln.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1];
})},ht.prototype.mergeDeep=function(){return It(this,Pt,arguments)},ht.prototype.mergeDeepWith=function(t){var e=ln.call(arguments,1);return It(this,Lt(t),e)},ht.prototype.mergeDeepIn=function(t){var e=ln.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ht.prototype.sort=function(t){return Jt(_e(this,t))},ht.prototype.sortBy=function(t,e){return Jt(_e(this,e,t))},ht.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ht.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new p)},ht.prototype.asImmutable=function(){return this.__ensureOwner()},ht.prototype.wasAltered=function(){return this.__altered},ht.prototype.__iterator=function(t,e){return new yt(this,t,e)},ht.prototype.__iterate=function(t,e){var n=this,o=0;return this._root&&this._root.iterate(function(e){return o++,t(e[1],e[0],n)},e),o},ht.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ht.isMap=pt;var zn="@@__IMMUTABLE_MAP__@@",Vn=ht.prototype;Vn[zn]=!0,Vn[dn]=Vn.remove,Vn.removeIn=Vn.deleteIn,dt.prototype.get=function(t,e,n,o){for(var i=this.entries,r=0,a=i.length;a>r;r++)if(Y(n,i[r][0]))return i[r][1];return o},dt.prototype.update=function(t,e,n,o,i,r,a){for(var s=i===vn,l=this.entries,u=0,c=l.length;c>u&&!Y(o,l[u][0]);u++);var p=c>u;if(p?l[u][1]===i:s)return this;if(h(a),(s||!p)&&h(r),!s||1!==l.length){if(!p&&!s&&l.length>=Wn)return kt(t,l,o,i);var f=t&&t===this.ownerID,g=f?l:d(l);return p?s?u===c-1?g.pop():g[u]=g.pop():g[u]=[o,i]:g.push([o,i]),f?(this.entries=g,this):new dt(t,g)}},ft.prototype.get=function(t,e,n,o){void 0===e&&(e=rt(n));var i=1<<((0===t?e:e>>>t)&mn),r=this.bitmap;return 0===(r&i)?o:this.nodes[Nt(r&i-1)].get(t+fn,e,n,o)},ft.prototype.update=function(t,e,n,o,i,r,a){void 0===n&&(n=rt(o));var s=(0===e?n:n>>>e)&mn,l=1<<s,u=this.bitmap,c=0!==(u&l);if(!c&&i===vn)return this;var h=Nt(u&l-1),p=this.nodes,d=c?p[h]:void 0,f=Ct(d,t,e+fn,n,o,i,r,a);if(f===d)return this;if(!c&&f&&p.length>=Gn)return Ot(t,p,u,s,f);if(c&&!f&&2===p.length&&Et(p[1^h]))return p[1^h];if(c&&f&&1===p.length&&Et(f))return f;var g=t&&t===this.ownerID,m=c?f?u:u^l:u|l,v=c?f?Bt(p,h,f,g):Rt(p,h,g):jt(p,h,f,g);return g?(this.bitmap=m,this.nodes=v,this):new ft(t,m,v)},gt.prototype.get=function(t,e,n,o){void 0===e&&(e=rt(n));var i=(0===t?e:e>>>t)&mn,r=this.nodes[i];return r?r.get(t+fn,e,n,o):o},gt.prototype.update=function(t,e,n,o,i,r,a){void 0===n&&(n=rt(o));var s=(0===e?n:n>>>e)&mn,l=i===vn,u=this.nodes,c=u[s];if(l&&!c)return this;var h=Ct(c,t,e+fn,n,o,i,r,a);if(h===c)return this;var p=this.count;if(c){if(!h&&(p--,$n>p))return Mt(t,u,p,s)}else p++;var d=t&&t===this.ownerID,f=Bt(u,s,h,d);return d?(this.count=p,this.nodes=f,this):new gt(t,p,f)},mt.prototype.get=function(t,e,n,o){for(var i=this.entries,r=0,a=i.length;a>r;r++)if(Y(n,i[r][0]))return i[r][1];return o},mt.prototype.update=function(t,e,n,o,i,r,a){void 0===n&&(n=rt(o));var s=i===vn;if(n!==this.keyHash)return s?this:(h(a),h(r),Tt(this,t,e,n,[o,i]));for(var l=this.entries,u=0,c=l.length;c>u&&!Y(o,l[u][0]);u++);var p=c>u;if(p?l[u][1]===i:s)return this;if(h(a),(s||!p)&&h(r),s&&2===c)return new vt(t,this.keyHash,l[1^u]);var f=t&&t===this.ownerID,g=f?l:d(l);return p?s?u===c-1?g.pop():g[u]=g.pop():g[u]=[o,i]:g.push([o,i]),f?(this.entries=g,this):new mt(t,this.keyHash,g)},vt.prototype.get=function(t,e,n,o){return Y(n,this.entry[0])?this.entry[1]:o},vt.prototype.update=function(t,e,n,o,i,r,a){var s=i===vn,l=Y(o,this.entry[0]);return(l?i===this.entry[1]:s)?this:(h(a),s?void h(r):l?t&&t===this.ownerID?(this.entry[1]=i,this):new vt(t,this.keyHash,[o,i]):(h(r),Tt(this,t,e,rt(o),[o,i])))},dt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var n=this.entries,o=0,i=n.length-1;i>=o;o++)if(t(n[e?i-o:o])===!1)return!1},ft.prototype.iterate=gt.prototype.iterate=function(t,e){for(var n=this.nodes,o=0,i=n.length-1;i>=o;o++){var r=n[e?i-o:o];if(r&&r.iterate(t,e)===!1)return!1}},vt.prototype.iterate=function(t,e){return t(this.entry)},t(yt,x),yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,o=e.node,i=e.index++;if(o.entry){if(0===i)return bt(t,o.entry)}else if(o.entries){if(n=o.entries.length-1,n>=i)return bt(t,o.entries[this._reverse?n-i:i])}else if(n=o.nodes.length-1,n>=i){var r=o.nodes[this._reverse?n-i:i];if(r){if(r.entry)return bt(t,r.entry);e=this._stack=_t(r,e)}continue}e=this._stack=this._stack.__prev}return S()};var Un,Wn=gn/4,Gn=gn/2,$n=gn/4;t(Ht,nt),Ht.of=function(){return this(arguments)},Ht.prototype.toString=function(){return this.__toString("List [","]")},Ht.prototype.get=function(t,e){if(t=g(this,t),t>=0&&t<this.size){t+=this._origin;var n=qt(this,t);return n&&n.array[t&mn]}return e},Ht.prototype.set=function(t,e){return Gt(this,t,e)},Ht.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ht.prototype.insert=function(t,e){return this.splice(t,0,e)},Ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=fn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Wt()},Ht.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Yt(n,0,e+t.length);for(var o=0;o<t.length;o++)n.set(e+o,t[o])})},Ht.prototype.pop=function(){return Yt(this,0,-1)},Ht.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Yt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},Ht.prototype.shift=function(){return Yt(this,1)},Ht.prototype.merge=function(){return Zt(this,void 0,arguments)},Ht.prototype.mergeWith=function(t){var e=ln.call(arguments,1);return Zt(this,t,e)},Ht.prototype.mergeDeep=function(){return Zt(this,Pt,arguments)},Ht.prototype.mergeDeepWith=function(t){var e=ln.call(arguments,1);return Zt(this,Lt(t),e)},Ht.prototype.setSize=function(t){return Yt(this,0,t)},Ht.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:Yt(this,y(t,n),b(e,n))},Ht.prototype.__iterator=function(t,e){var n=0,o=Vt(this,e);return new x(function(){var e=o();return e===Zn?S():w(t,n++,e)})},Ht.prototype.__iterate=function(t,e){for(var n,o=0,i=Vt(this,e);(n=i())!==Zn&&t(n,o++,this)!==!1;);return o},Ht.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ut(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Ht.isList=Ft;var Kn="@@__IMMUTABLE_LIST__@@",qn=Ht.prototype;qn[Kn]=!0,qn[dn]=qn.remove,qn.setIn=Vn.setIn,qn.deleteIn=qn.removeIn=Vn.removeIn,qn.update=Vn.update,qn.updateIn=Vn.updateIn,qn.mergeIn=Vn.mergeIn,qn.mergeDeepIn=Vn.mergeDeepIn,qn.withMutations=Vn.withMutations,qn.asMutable=Vn.asMutable,qn.asImmutable=Vn.asImmutable,qn.wasAltered=Vn.wasAltered,zt.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var o=n>>>e&mn;if(o>=this.array.length)return new zt([],t);var i,r=0===o;if(e>0){var a=this.array[o];if(i=a&&a.removeBefore(t,e-fn,n),i===a&&r)return this}if(r&&!i)return this;var s=Kt(this,t);if(!r)for(var l=0;o>l;l++)s.array[l]=void 0;return i&&(s.array[o]=i),s},zt.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var o=n-1>>>e&mn;if(o>=this.array.length)return this;var i;if(e>0){var r=this.array[o];if(i=r&&r.removeAfter(t,e-fn,n),i===r&&o===this.array.length-1)return this}var a=Kt(this,t);return a.array.splice(o+1),i&&(a.array[o]=i),a};var Yn,Zn={};t(Jt,ht),Jt.of=function(){return this(arguments)},Jt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Jt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Jt.prototype.set=function(t,e){return ne(this,t,e)},Jt.prototype.remove=function(t){return ne(this,t,vn)},Jt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Jt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Jt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Jt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Jt.isOrderedMap=Qt,Jt.prototype[pn]=!0,Jt.prototype[dn]=Jt.prototype.remove;var Xn;t(oe,I),oe.prototype.get=function(t,e){return this._iter.get(t,e)},oe.prototype.has=function(t){return this._iter.has(t)},oe.prototype.valueSeq=function(){return this._iter.valueSeq()},oe.prototype.reverse=function(){var t=this,e=ue(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},oe.prototype.map=function(t,e){var n=this,o=le(this,t,e);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().map(t,e)}),o},oe.prototype.__iterate=function(t,e){var n,o=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,o)}:(n=e?Te(this):0,function(i){return t(i,e?--n:n++,o)}),e)},oe.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(xn,e),o=e?Te(this):0;return new x(function(){var i=n.next();return i.done?i:w(t,e?--o:o++,i.value,i)})},oe.prototype[pn]=!0,t(ie,P),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this,o=0;return this._iter.__iterate(function(e){return t(e,o++,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e),o=0;return new x(function(){var e=n.next();return e.done?e:w(t,o++,e.value,e)})},t(re,L),re.prototype.has=function(t){return this._iter.includes(t)},re.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},re.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e);return new x(function(){var e=n.next();return e.done?e:w(t,e.value,e.value,e)})},t(ae,I),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ee(e);var o=r(e);return t(o?e.get(1):e[1],o?e.get(0):e[0],n)}},e)},ae.prototype.__iterator=function(t,e){var n=this._iter.__iterator(xn,e);return new x(function(){for(;;){var e=n.next();if(e.done)return e;var o=e.value;if(o){Ee(o);var i=r(o);return w(t,i?o.get(0):o[0],i?o.get(1):o[1],e)}}})},ie.prototype.cacheResult=oe.prototype.cacheResult=re.prototype.cacheResult=ae.prototype.cacheResult=Oe,t(Le,et),Le.prototype.toString=function(){return this.__toString(Ae(this)+" {","}")},Le.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Le.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Le.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=De(this,wt()))},Le.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Ae(this));if(this._map&&!this._map.has(t)){var n=this._defaultValues[t];if(e===n)return this}var o=this._map&&this._map.set(t,e);return this.__ownerID||o===this._map?this:De(this,o)},Le.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:De(this,e)},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterator=function(t,e){var o=this;return n(this._defaultValues).map(function(t,e){return o.get(e)}).__iterator(t,e)},Le.prototype.__iterate=function(t,e){var o=this;return n(this._defaultValues).map(function(t,e){return o.get(e)}).__iterate(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?De(this,e,t):(this.__ownerID=t,this._map=e,this)};var Jn=Le.prototype;Jn[dn]=Jn.remove,Jn.deleteIn=Jn.removeIn=Vn.removeIn,Jn.merge=Vn.merge,Jn.mergeWith=Vn.mergeWith,Jn.mergeIn=Vn.mergeIn,Jn.mergeDeep=Vn.mergeDeep,Jn.mergeDeepWith=Vn.mergeDeepWith,Jn.mergeDeepIn=Vn.mergeDeepIn,Jn.setIn=Vn.setIn,Jn.update=Vn.update,Jn.updateIn=Vn.updateIn,Jn.withMutations=Vn.withMutations,Jn.asMutable=Vn.asMutable,Jn.asImmutable=Vn.asImmutable,t(je,ot),je.of=function(){return this(arguments)},je.fromKeys=function(t){return this(n(t).keySeq())},je.prototype.toString=function(){return this.__toString("Set {","}")},je.prototype.has=function(t){return this._map.has(t)},je.prototype.add=function(t){return He(this,this._map.set(t,!0))},je.prototype.remove=function(t){return He(this,this._map.remove(t))},je.prototype.clear=function(){return He(this,this._map.clear())},je.prototype.union=function(){var t=ln.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},je.prototype.intersect=function(){var t=ln.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},je.prototype.subtract=function(){var t=ln.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},je.prototype.merge=function(){return this.union.apply(this,arguments)},je.prototype.mergeWith=function(t){var e=ln.call(arguments,1);return this.union.apply(this,e)},je.prototype.sort=function(t){return Ve(_e(this,t))},je.prototype.sortBy=function(t,e){return Ve(_e(this,e,t))},je.prototype.wasAltered=function(){return this._map.wasAltered()},je.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,o){return t(o,o,n)},e)},je.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},je.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},je.isSet=Re;var Qn="@@__IMMUTABLE_SET__@@",to=je.prototype;to[Qn]=!0,to[dn]=to.remove,to.mergeDeep=to.merge,to.mergeDeepWith=to.mergeWith,to.withMutations=Vn.withMutations,to.asMutable=Vn.asMutable,to.asImmutable=Vn.asImmutable,to.__empty=ze,to.__make=Fe;var eo;t(Ve,je),Ve.of=function(){return this(arguments)},Ve.fromKeys=function(t){return this(n(t).keySeq())},Ve.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ve.isOrderedSet=Ue;var no=Ve.prototype;no[pn]=!0,no.__empty=Ge,no.__make=We;var oo;t($e,nt),$e.of=function(){return this(arguments)},$e.prototype.toString=function(){return this.__toString("Stack [","]")},$e.prototype.get=function(t,e){var n=this._head;for(t=g(this,t);n&&t--;)n=n.next;return n?n.value:e},$e.prototype.peek=function(){return this._head&&this._head.value},$e.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):qe(t,e)},$e.prototype.pushAll=function(t){if(t=o(t),0===t.size)return this;ct(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):qe(e,n)},$e.prototype.pop=function(){return this.slice(1)},$e.prototype.unshift=function(){return this.push.apply(this,arguments)},$e.prototype.unshiftAll=function(t){return this.pushAll(t)},$e.prototype.shift=function(){return this.pop.apply(this,arguments)},$e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ye()},$e.prototype.slice=function(t,e){if(v(t,e,this.size))return this;var n=y(t,this.size),o=b(e,this.size);if(o!==this.size)return nt.prototype.slice.call(this,t,e);for(var i=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=i,this._head=r,this.__hash=void 0,this.__altered=!0,this):qe(i,r)},$e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?qe(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},$e.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,o=this._head;o&&t(o.value,n++,this)!==!1;)o=o.next;return n},$e.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,o=this._head;return new x(function(){if(o){var e=o.value;return o=o.next,w(t,n++,e)}return S()})},$e.isStack=Ke;var io="@@__IMMUTABLE_STACK__@@",ro=$e.prototype;ro[io]=!0,ro.withMutations=Vn.withMutations,ro.asMutable=Vn.asMutable,ro.asImmutable=Vn.asImmutable,ro.wasAltered=Vn.wasAltered;var ao;e.Iterator=x,Ze(e,{toArray:function(){ct(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new oe(this,!0)},toMap:function(){return ht(this.toKeyedSeq())},toObject:function(){ct(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Jt(this.toKeyedSeq())},toOrderedSet:function(){return Ve(a(this)?this.valueSeq():this)},toSet:function(){return je(a(this)?this.valueSeq():this)},toSetSeq:function(){return new re(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return $e(a(this)?this.valueSeq():this)},toList:function(){return Ht(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=ln.call(arguments,0);return Ce(this,me(this,t))},includes:function(t){return this.some(function(e){return Y(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){ct(this.size);var n=!0;return this.__iterate(function(o,i,r){return t.call(e,o,i,r)?void 0:(n=!1,!1)}),n},filter:function(t,e){return Ce(this,ce(this,t,e,!0))},find:function(t,e,n){var o=this.findEntry(t,e);return o?o[1]:n},forEach:function(t,e){return ct(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ct(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(o){n?n=!1:e+=t,e+=null!==o&&void 0!==o?o.toString():""}),e},keys:function(){return this.__iterator(_n)},map:function(t,e){return Ce(this,le(this,t,e))},reduce:function(t,e,n){ct(this.size);var o,i;return arguments.length<2?i=!0:o=e,this.__iterate(function(e,r,a){i?(i=!1,o=e):o=t.call(n,o,e,r,a)}),o},reduceRight:function(t,e,n){var o=this.toKeyedSeq().reverse();return o.reduce.apply(o,arguments)},reverse:function(){return Ce(this,ue(this,!0))},slice:function(t,e){return Ce(this,de(this,t,e,!0))},some:function(t,e){return!this.every(Qe(t),e)},sort:function(t){return Ce(this,_e(this,t))},values:function(){return this.__iterator(xn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return f(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return he(this,t,e)},equals:function(t){return Z(this,t)},entrySeq:function(){var t=this;if(t._cache)return new D(t._cache);var e=t.toSeq().map(Je).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Qe(t),e)},findEntry:function(t,e,n){var o=n;return this.__iterate(function(n,i,r){return t.call(e,n,i,r)?(o=[i,n],!1):void 0}),o},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(m)},flatMap:function(t,e){return Ce(this,ye(this,t,e))},flatten:function(t){return Ce(this,ve(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find(function(e,n){return Y(n,t)},void 0,e)},getIn:function(t,e){for(var n,o=this,i=Pe(t);!(n=i.next()).done;){var r=n.value;if(o=o&&o.get?o.get(r,vn):vn,o===vn)return e}return o},groupBy:function(t,e){return pe(this,t,e)},has:function(t){return this.get(t,vn)!==vn},hasIn:function(t){return this.getIn(t,vn)!==vn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Y(e,t)})},keySeq:function(){return this.toSeq().map(Xe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return xe(this,t)},maxBy:function(t,e){return xe(this,e,t)},min:function(t){return xe(this,t?tn(t):on)},minBy:function(t,e){return xe(this,e?tn(e):on,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ce(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ce(this,ge(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Qe(t),e)},sortBy:function(t,e){return Ce(this,_e(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ce(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ce(this,fe(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Qe(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var so=e.prototype;so[un]=!0,so[En]=so.values,so.__toJS=so.toArray,so.__toStringMapper=en,so.inspect=so.toSource=function(){return this.toString()},so.chain=so.flatMap,so.contains=so.includes,Ze(n,{flip:function(){return Ce(this,se(this))},mapEntries:function(t,e){var n=this,o=0;return Ce(this,this.toSeq().map(function(i,r){return t.call(e,[r,i],o++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Ce(this,this.toSeq().flip().map(function(o,i){return t.call(e,o,i,n)}).flip())}});var lo=n.prototype;lo[cn]=!0,lo[En]=so.entries,lo.__toJS=so.toObject,lo.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Ze(o,{toKeyedSeq:function(){return new oe(this,!1)},filter:function(t,e){return Ce(this,ce(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ce(this,ue(this,!1))},slice:function(t,e){return Ce(this,de(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=y(t,0>t?this.count():this.size);var o=this.slice(0,t);return Ce(this,1===n?o:o.concat(d(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ce(this,ve(this,t,!1))},get:function(t,e){return t=g(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=g(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ce(this,be(this,t))},interleave:function(){var t=[this].concat(d(arguments)),e=Se(this.toSeq(),P.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Ce(this,n)},keySeq:function(){return Q(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ce(this,ge(this,t,e,!1))},zip:function(){var t=[this].concat(d(arguments));return Ce(this,Se(this,nn,t))},zipWith:function(t){var e=d(arguments);return e[0]=this,Ce(this,Se(this,t,e))}}),o.prototype[hn]=!0,o.prototype[pn]=!0,Ze(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=so.includes,i.prototype.contains=i.prototype.includes,Ze(I,n.prototype),Ze(P,o.prototype),Ze(L,i.prototype),Ze(et,n.prototype),Ze(nt,o.prototype),Ze(ot,i.prototype);var uo={Iterable:e,Seq:O,Collection:tt,Map:ht,OrderedMap:Jt,List:Ht,Stack:$e,Set:je,OrderedSet:Ve,Record:Le,Range:Q,Repeat:X,is:Y,fromJS:G};return uo})},,,,,function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){t=t||1,i.active=!0,setTimeout(function(){for(var e,n=0;t>n&&(e=i.queue[n],e);n++)e.render(),-1===f.indexOf(e)&&f.push(e);i.queue.splice(0,n),i.queue.length?i(t):i.active=!1},0)}function r(t){var e=(0,h.camelize)(t.type);return e=e.charAt(0).toUpperCase()+e.slice(1),new d[e](t)}function a(t){i.queue.push(t),i.active||i()}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){return"number"==typeof t&&isNaN(t)||null===t||"undefined"==typeof t||""===t}function u(t){return!l(t)&&!isNaN(Number(t))}function c(t,e){return arguments.length<2&&(e=""),l(t)?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.getGraphId=e.getChartId=e.collection=e.version=void 0,e.render=i,e.create=r,e.addRenderQueue=a,e.injectFunctions=s,e.isBlank=l,e.isNumber=u,e.replaceBlank=c;var h=n(22),p=n(510),d=o(p),f=(e.version="@@version",e.collection=[]);e.getChartId=(0,h.genId)(0,"chart"),e.getGraphId=(0,h.genId)(0,"graph");i.active=!1,i.queue=[]},function(t,e){"use strict";t.exports=_},,,,,function(t,e,n){"use strict";t.exports=n(624)},function(t,e){"use strict";function n(t,e,n){var o={width:0,height:0,baseLineOffset:0},i=e.append("text").attr({x:99999,y:0});return"object"===("undefined"==typeof n?"undefined":y(n))&&i.style(n),t.constructor!==Array&&(t=[t]),t.forEach(function(t){i.text(t);var e=i.node().getBBox(),n=-e.y;e.width>o.width&&(o.width=Math.ceil(e.width)),e.height>o.height&&(o.height=Math.ceil(e.height)),n>o.baseLineOffset&&(o.baseLineOffset=Math.ceil(n))}),i.remove(),o}function o(t,e,n){var o=[],i=o.max={width:0,height:0,baseLineOffset:0},r=Math.ceil;t.constructor!==Array&&(t=[t]);var a=e.append("text").attr({x:99999,y:0});return"object"===("undefined"==typeof n?"undefined":y(n))&&a.style(n),t.forEach(function(t){a.text(t);var e=a.node().getBBox(),n={width:r(e.width),height:r(e.height),baseLineOffset:r(-e.y)};n.width>i.width&&(i.width=n.width),n.height>i.height&&(i.height=n.height),n.baseLineOffset>i.baseLineOffset&&(i.baseLineOffset=n.baseLineOffset),o.push(n)}),a.remove(),o}function i(t,e){var n=[];return t.constructor!==Array&&(t=[t]),t.forEach(function(t){e.textContent=t;var o={width:e.offsetWidth,height:e.offsetHeight};n.push(o)}),n}function r(t,e,n){var o="number"==typeof n,i="translate(99999, 0)",r=void 0;o&&(i+=" scale("+n+")");var a=e.append("path").attr("transform",i).attr("d",t);return r=o?a.node().getBoundingClientRect():a.node().getBBox(),g(r),a.remove(),r}function a(t,e){return e&&e.length||(e=d3.scale.category20().range()),e[t%e.length]}function s(t){for(var e={},n=0,o=t.length;o>n;n++){if(t[n]in e)return!0;e[t[n]]=t[n]}return!1}function l(t,e){return e=e||"id",function(){return t++,e+"-"+t}}function u(t,e,n,o){var i=e.append("text").attr("x","99999");return"object"===("undefined"==typeof o?"undefined":y(o))&&i.style(o),t.forEach(function(e,o){t[o]=c(e,i,n)}),i.remove(),t}function c(t,e,n,o){return o&&(t=t.substring(0,t.length-3)),""===t?o?"...":t:(e.text(t+(o?"...":"")),e.node().getBBox().width>n?c(t.substring(0,t.length-1)+"...",e,n,!0):o?t+"...":t)}function h(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function p(t){return"number"==typeof t&&isNaN(t)||null===t||"undefined"==typeof t||""===t}function d(t,e){return arguments.length<2&&(e=""),p(t)?e:t}function f(t){var e=document.body;return{x:t.clientX+e.scrollLeft||0,y:t.clientY+e.scrollTop||0}}function g(t){return{x:t.x,y:t.y,x2:t.x+t.width,y2:t.y+t.height,width:t.width,height:t.height}}function m(t,e,n){var o,i=t.length,r=i===e.length;if(r)for(o=0;i>o;o++)if(!n(t[o],e[o])){r=!1;break}return r}function v(t){return Number(t.replace(/(\,)/gi,""))}Object.defineProperty(e,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.getTextDimensions=n,e.getAllTextDimensions=o,e.measureTextHtml=i,e.measurePath=r,e.getColor=a,e.hasRepeatingValues=s,e.genId=l,e.limitTextArr=u,e.limitText=c,e.camelize=h,e.isBlank=p,e.replaceBlank=d,e.getMousePosition=f,e.extendBBox=g,e.compare=m,e.removeComma=v;e.requestAnimationFrame=function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window)}()},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Legend=e.Charts=void 0;var o=n(15);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(30);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(67);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),n(759);var a=n(510),s=n(77);e.Charts={Chart:a.Chart,Bar:a.Bar,BarGrouped:a.BarGrouped,BarStacked:a.BarStacked,Column:a.Column,ColumnGrouped:a.ColumnGrouped,ColumnStacked:a.ColumnStacked,Pie:a.Pie,SemiPie:a.SemiPie,Line:a.Line,Double:a.Double,Area:a.Area,AreaStacked:a.AreaStacked,StreamGraph:a.StreamGraph,AreaStepped:a.AreaStepped,Scatter:a.Scatter,DotPlot:a.DotPlot,Bubble:a.Bubble,PictorialGrid:a.PictorialGrid,PictorialBar:a.PictorialBar,Pyramid:a.Pyramid,Wordcloud:a.Wordcloud,Treemap:a.Treemap,Timer:a.Timer},e.Legend={Legend:s.Legend,TextItemMetrics:s.TextItemMetrics}},,,,function(t,e){"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,o=0;e>o;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=n},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(l){i=!0,r=l}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(138),u=i(l),c=n(48),h=n(77),p=n(22),d=n(15),f=n(518),g=o(f),m=n(764),v=i(m),y=n(431),b=i(y),x=n(67),w=i(x),S=n(761),C=i(S),E=function(){function t(e,n){r(this,t),n=n||"svg",this.isSvg="svg"===n,this.rootTagName=n,this.groupTagName=this.isSvg?"g":"div",this.container=d3.select(e.container),this.svg=this.container.append(n).attr("class","igc-root"),this.options=this.defaults(),this._measureCache={},this.chartId=(0,d.getChartId)(),e.sheetPlayer?this.sheetPlayer=e.sheetPlayer:this.sheetPlayer=C["default"],_.merge(this.options,e),this.options.sheets.forEach(function(t){t.series&&t.series.forEach(function(t){t.rawData=t.data.slice(0),t.data.forEach(this.seriesDataValueParser(t))},this)},this),this.measureSheetIconWidth(),this.detectDimensions(),this.animation=d3.dispatch("start","end"),this.sheetIndex=0}return s(t,[{key:"defaults",value:function(){return{sheets:[],series:{},style:{axisTitle:{"font-family":"arial","font-weight":400,"font-size":"14px","font-style":"normal",color:"#000000"},sheetSwitch:{"font-family":"arial","font-weight":400,"font-size":"16px","font-style":"normal"},legend:{"font-family":"arial","font-weight":400,"font-size":"16px","font-style":"normal",color:"#000000"},axisTick:{"font-family":"arial","font-weight":400,"font-size":"13px","font-style":"normal",color:"#000000"},grid:{color:"#000000"}},sheetSwitch:!0,autoResize:{width:!1,height:!1},animation:{duration:700,ease:"cubic-in-out"}}}},{key:"emptySheetData",value:function(){return{categories:{title:"",colors:[]},series:[{title:"",type:"line",axisIndex:0,data:[],rawData:[]}],axis:[{title:""}],grid:{vertical:!0,verticalZeroHighlight:!1,horizontal:!0,horizontalZeroHighlight:!1},legend:{enabled:!0}}}}]),s(t,[{key:"createAnimationCounter",value:function(t){var e=this;return _.after(t,function(){e.animation.end()})}},{key:"seriesDataValueParser",value:function(t){var e=new b["default"];return function(n,o){t.data[o]=Number(e(n))}}},{key:"detectDimensions",value:function(){if(null===this.svg.node())throw"Error: infographic container not found.";var t=this.options;t.width||(t.autoResize.width=!0);var e="string"==typeof t.container?document.querySelectorAll(t.container)[0]:t.container;if(t.autoResize.width){var n=400;void 0===e?t.width=n:t.width=parseInt(window.getComputedStyle(e).width,10)||n}t.height||(t.autoResize.height=!0),t.autoResize.height&&(t.height=Math.floor(t.width/4*3))}},{key:"measureSheetIconWidth",value:function(){var t=this.container,e=t.insert("span",".igc-root").attr("class","igc-sm-sheet-switch-radio").style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px").append("div").attr("class","igc-sheets").append("div").attr("class","igc-sheet").append("span").attr("class","igc-sheet-ico");this._measureCache.sheetIcoWidth=e.node().offsetWidth,t.select(".igc-sm-sheet-switch-radio").remove()}},{key:"getSheetData",value:function(t){t=void 0===t?this.sheetIndex:t;var e=this.options.sheets[t];return e?(this.sheetIndex=t,_.merge({},this.emptySheetData(),e)):0===t?this.emptySheetData():this.getSheetData(t-1)}},{key:"prepareSheetData",value:function(t){var e=_.merge([],t.axis);return e.forEach(function(e,n){e&&(e.graphs||(e.graphs=[]),t.series.forEach(function(o){if(n===o.axisIndex){var i=t.categories.data.map(function(t,e){var n={x:t,y:0};return o.data&&(n.y=o.data[e]||0),n});e.graphs.push({type:o.type,data:i})}}))}),e}},{key:"sheetSeriesDataEmpty",value:function(t){var e,n=!0;for(e=t.series.length-1;e>=0;e--)if(t.series[e].data.length>0){n=!1;break}return n}},{key:"containerSetup",value:function(){var t=this.groupTagName,e=this.svg;this.isSvg&&e.selectAll("defs").data([0]).enter().append("defs");var n=e.selectAll(".igc").data([0]);n.enter().append(t).attr("class","igc"),n.selectAll(".igc-grid").data([0]).enter().append(t).attr("class","igc-grid"),e.selectAll(".igc-titles").data([0]).enter().append(t).attr("class","igc-titles")}},{key:"graphsSetupClipPath",value:function(t,e,n){var o="#"+n.clipPathId;this.createRectClipPath(e,n),t.selectAll(".igc-graph-group").attr("clip-path","url("+o+")")}},{key:"createRectClipPath",value:function(t,e){var n="#"+e.clipPathId,o=t.selectAll(n);o.remove();var i=t.selectAll(n).data([0]).enter().append("clipPath").attr("id",e.clipPathId),r=i.selectAll("path").data([e]).enter().append("path");r.attr("d",function(t){return u["default"].barToRight(t.x,t.y,t.width,t.height,0)})}},{key:"graphInstanceSetup",value:function(){}},{key:"render",value:function(){}},{key:"getGraphClassByType",value:function(t){var e=(0,p.camelize)(t);return e=e.charAt(0).toUpperCase()+e.slice(1),g[e]}},{key:"renderGraphs",value:function(t,e,n){var o="igc-graph-group",i=this.groupTagName,r=t.selectAll("."+o).data(e);r.enter().append(i).attr("class",o),r.exit().remove(),"function"!=typeof n&&(n=function(t){return t.graphs});var a=r.selectAll(".igc-graph").data(n);a.exit().remove();var s=a.enter(),l=0===a.size()&&s.size()>0;this.graphInstances=[],this.graphInstances.enterCount=0,this.graphInstances.updateCount=0,l?this.graphInstancesSetup(s,e,!0):this.graphInstancesSetup(a,e,!1,s.size()>0?s:void 0),this.renderGraphInstances()}},{key:"graphInstancesSetup",value:function(t,e,n,o){var i=this.groupTagName,r=this.chartId,a=this.getGraphClassByType,s=this.graphInstanceSetup.bind(this),l=this.graphInstances;t.call(function(t){t.forEach(function(t,o){var u=d3.select(t.parentNode),c=e[o];t.forEach(function(t,e){var h=n?u.append(i).attr("class","igc-graph"):u.selectAll(".igc-graph"),p=t.__data__,d=a(p.type);if(d){var f=d().chartId(r);s(f,p,e,c,o),l.push({selection:h,graphObj:p,instance:f,group:c,type:n?"enter":"update"}),n?l.enterCount++:l.updateCount++}})})}),o&&this.graphInstancesSetup(o,e,!0)}},{key:"renderGraphInstances",value:function(){this.graphInstances.forEach(function(t){t.selection.call(t.instance)})}},{key:"renderPart",value:function(t,e,n){var o=this.groupTagName,i=t.selectAll("."+n).data([0]),r=i.enter();return i.empty()?r.call(function(t){t.forEach(function(t){var i=d3.select(t.parentNode),r=i.append(o).attr("class",n);r.call(e)})}):i.call(e)}},{key:"renderSheetTabs",value:function(t){var e=this,n=this.options,o=this.container,i=_.has(t,"insertBefore")?t.insertBefore:".igc-root",r=this;if(this.removeSheetPlayer(),o.selectAll(".igc-tabs, .igc-tab-container").remove(),n.sheets&&n.sheets.length&&1!==n.sheets.length&&n.sheetSwitch!==!1){var a=this.sheetIndex,s=this.previousIndex||0,l=n.sheets.length,u=(t.width-5*(l-1)-6)/l;if(u>100){var c=o.selectAll(".igc-tabs").data([1]).enter().insert("div",i).attr("class","igc-tabs").attr("aria-label","select sheet"),h=c.selectAll(".igc-tab").data(n.sheets).enter().append("div").attr("class","igc-tab").attr("aria-checked",function(t,e){return e===a?"true":"false"}).attr("aria-labelledby",function(t,e){return"igc-tab-content"+e}).attr("class",function(t,e){return e===a?"igc-tab active":"igc-tab"}).style("width",u+"px");h.append("div").attr("class","igc-tab-content").html(function(t){return t.categories.title}).attr("id",function(t,e){return"igc-tab-content"+e}),h.on("click",function(t,e){var n=d3.select(this);r.sheetIndex!==e&&(o.selectAll(".igc-tab.active").attr("class","igc-tab").attr("aria-checked","false"),n.classed("active",!0).attr("aria-checked","true"),r.previousIndex=r.sheetIndex,r.sheetIndex=e,r.render())}),h.on("mousemove",function(){var t=d3.select(this).select(".igc-tab-content");u<t[0][0].scrollWidth-6&&(0,w["default"])().setText(t.text()).setValue("").setPosition((0,p.getMousePosition)(d3.event))}).on("mouseout",function(){(0,w["default"])().hide()}),c.append("div").attr("class","igc-tab-active").style("width",u+"px").style("margin-left",(u+5)*s+"px").transition().style("margin-left",(u+5)*a+"px")}else{var d=o.insert("div",i).attr("class","igc-tab-container").attr("aria-label","select previous sheet"),f=d.insert("div",i).attr("class","igc-tab-switcher igicon-left").attr("aria-label","select previous sheet");u=t.width-88;var g=document.createElement("textarea");g.innerHTML=n.sheets[this.sheetIndex].categories.title;var m=d.insert("div",i).attr("class","igc-tabs igc-tabs-dropdown").attr("aria-label","select previous sheet").append("div").attr("class","igc-tab igicon-sort-down").style("width",u+"px"),v=m.append("select").attr("class","igc-tab-content igc-tab-select"),y=m.append("div").attr("class","igc-tab-name").html(g.value),b=parseInt(y.style("width"),10);y.style("left",(u-b)/2+"px"),b===u-60&&m.on("mousemove",function(){(0,w["default"])().setText(g.value).setValue("").setPosition((0,p.getMousePosition)(d3.event))}).on("mouseout",function(){(0,w["default"])().hide()}),n.sheets.forEach(function(t,n){var o=v.append("option").attr("value",n).html(t.categories.title);n===e.sheetIndex&&o.attr("selected","")}),v.on("change",function(){var t=this.options[this.selectedIndex].value,e=parseInt(t,10);(0,w["default"])().hide(),r.sheetIndex=e,r.render()});var x=d.insert("div",i).attr("class","igc-tab-switcher igicon-right").attr("aria-label","select previous sheet");f.on("click",function(){var t=e.sheetIndex-1;0>t&&(t=l-1),e.sheetIndex=t,e.render()}),x.on("click",function(){var t=e.sheetIndex+1;t>l-1&&(t=0),e.sheetIndex=t,e.render()})}}}},{key:"renderSheetPlayer",value:function(){var t=this.container,e=this.options,n=this.sheetPlayerNode;e.sheets&&e.sheets.length&&1!==e.sheets.length&&e.sheetSwitch!==!1&&(n||(t.selectAll(".igc-sheets, .igc-tabs, .igc-tab-container").remove(),n=t.append("div").attr("class","igc-sheet-player").node(),this.sheetPlayerNode=n),this.sheetPlayer.create({node:n,sheetName:e.sheets[0].categories.title,sheetCount:e.sheets.length}))}},{key:"removeSheetPlayer",value:function(){this.sheetPlayerNode&&(this.sheetPlayer.remove({node:this.sheetPlayerNode}),delete this.sheetPlayerNode)}},{key:"renderSheetSwitch",value:function(t){var e=this.options;if(e.sheetPlayerActive)return void this.renderSheetPlayer();if(e.tabs)return void this.renderSheetTabs(t);var n=this,o=this.container,i=_.has(t,"insertBefore")?t.insertBefore:".igc-root";if(this.removeSheetPlayer(),o.selectAll(".igc-sheets").remove(),e.sheets&&e.sheets.length&&1!==e.sheets.length&&e.sheetSwitch!==!1){var r=this.sheetIndex,a=(0,h.TextItemMetrics)().width(t.width).texts(e.sheets.map(function(t){return t.categories.title})).style(e.style.sheetSwitch).parentContainer(o).reservedSize(this._measureCache.sheetIcoWidth+20)(),s=o.selectAll(".igc-sheets").data([1]).enter().insert("div",i).attr("class","igc-sheets").attr("role","radiogroup").attr("aria-label","select sheet").style("width",t.width+"px"),l=s.selectAll(".igc-sheet").data(e.sheets).enter().append("div").attr("class","igc-sheet").attr("role","radio").attr("aria-checked",function(t,e){return e===r?"true":"false"}).attr("aria-labelledby",function(t,e){return"igc-sheet-label"+e}).attr("class",function(t,e){return e===r?"igc-sheet active":"igc-sheet"}).style("max-width",a.width+"px");l.append("span").attr("class","igc-sheet-ico").attr("role","presentation").attr("id",function(t,e){return"igc-sheet-"+e}),l.append("span").attr("class","igc-sheet-label").html(function(t){return t.categories.title}).attr("id",function(t,e){return"igc-sheet-label"+e}).style(e.style.sheetSwitch).style("height",a.label.height+"px").style("max-width",a.label.width+"px"),l.on("click",function(t,e){var i=d3.select(this);n.sheetIndex!==e&&(o.selectAll(".igc-sheet.active").attr("class","igc-sheet").attr("aria-checked","false"),i.classed("active",!0).attr("aria-checked","true"),n.sheetIndex=e,n.render())})}}},{key:"resetRootElement",value:function(){var t=this.svg;this.isSvg?(t.attr("width",0),t.attr("height",0),t.attr("width",null),t.attr("height",null)):t.style({width:null,height:null}),t.selectAll("*").remove(),d3.select(this.options.container).selectAll(".igc-legend").remove()}},{key:"renderLegend",value:function(t){var e=this.container.selectAll(".igc-legend").data([0]),n=void 0;this.sheetPlayerNode&&(n=".igc-sheet-player"),e.enter().insert("div",n).attr("class","igc-legend"),e.call(t)}},{key:"limitDomain",value:function(t,e,n){var o=!(0,d.isBlank)(t)&&!isNaN(Number(t)),i=!(0,d.isBlank)(e)&&!isNaN(Number(e));n[0]=o?Number(t):n[0],n[1]=i?Number(e):n[1];var r=n[1]<n[0],a=n[r-0],s=n[1-r];return n[0]=a,n[1]=s,i||o}},{key:"forceTicksToDomain",value:function(t,e){var n,o=e.length-1,i=t[0],r=t[1],a=(r-i)/o,s=[i];for(n=1;o>n;n++)s[n]=c.math.preciseNumber(i+n*a);return s[o]=r,s}},{key:"setupNumberFormatter",value:function(t){var e=a(t.axis,2),n=e[0],o=e[1];this.numberFormatX=new v["default"](n&&n.format||{}),this.numberFormatY=new v["default"](o&&o.format||{})}}]),t}();e["default"]=E},function(t,e,n){"use strict";var o=n(71),i=o;t.exports=i},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;10>n;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==o.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=o()?Object.assign:function(t,e){for(var o,a,s=n(t),l=1;l<arguments.length;l++){o=Object(arguments[l]);for(var u in o)i.call(o,u)&&(s[u]=o[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},,,,,function(t,e,n){"use strict";var o=n(562);t.exports=new o.Dispatcher},function(t,e,n){var o,i;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o))t.push(n.apply(null,o));else if("object"===i)for(var a in o)r.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(o=[],i=function(){return n}.apply(e,o),!(void 0!==i&&(t.exports=i)))}()},,,,,function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return C.set(t,{selection:e,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function r(t,e){return t.getBlockMap().map(function(t){return f.generate(t,e)}).toOrderedMap()}function a(t,e,n){var o=t.getCurrentContent().getBlockMap(),i=t.getImmutable().get("treeMap");return i.merge(e.toSeq().filter(function(t,e){return t!==o.get(e)}).map(function(t){return f.generate(t,n)}))}function s(t,e,n,o){return e.merge(t.toSeq().filter(function(t){return n.getDecorations(t)!==o.getDecorations(t)}).map(function(t){return f.generate(t,n)}))}function l(t,e){var n=t.getLastChangeType();return e!==n||"insert-characters"!==e&&"backspace-character"!==e&&"delete-character"!==e}function u(t,e){var n=e.getStartKey(),o=e.getStartOffset(),i=t.getBlockForKey(n);return o>0?i.getInlineStyleAt(o-1):i.getLength()?i.getInlineStyleAt(0):h(t,n)}function c(t,e){var n=e.getStartKey(),o=e.getStartOffset(),i=t.getBlockForKey(n);return o<i.getLength()?i.getInlineStyleAt(o):o>0?i.getInlineStyleAt(o-1):h(t,n)}function h(t,e){for(var n,o=t.getBlockBefore(e);o;){if(n=o.getLength())return o.getInlineStyleAt(n-1);o=t.getBlockBefore(o.getKey())}return b()}var p=n(32),d=p||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=n(573),g=n(460),m=n(917),v=n(10),y=n(186),b=v.OrderedSet,_=v.Record,x=v.Stack,w={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:x(),selection:null,treeMap:null,undoStack:x()},S=_(w),C=function(){function t(e){o(this,t),this._immutable=e}return t.createEmpty=function(e){return t.createWithContent(g.createFromText(""),e)},t.createWithContent=function(e,n){var o=e.getBlockMap().first().getKey();return t.create({currentContent:e,undoStack:x(),redoStack:x(),decorator:n||null,selection:y.createEmpty(o)})},t.create=function(e){var n=e.currentContent,o=e.decorator,i=d({},e,{treeMap:r(n,o),directionMap:m.getDirectionMap(n)});return new t(new S(i))},t.set=function(e,n){var o=e.getImmutable().withMutations(function(t){var o=t.get("decorator"),i=o;null===n.decorator?i=null:n.decorator&&(i=n.decorator);var l=n.currentContent||e.getCurrentContent();if(i!==o){var u,c=t.get("treeMap");return u=i&&o?s(l.getBlockMap(),c,i,o):r(l,i),void t.merge({decorator:i,treeMap:u,nativelyRenderedContent:null})}var h=e.getCurrentContent();l!==h&&t.set("treeMap",a(e,l.getBlockMap(),i)),t.merge(n)});return new t(o)},t.prototype.toJS=function(){return this.getImmutable().toJS()},t.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},t.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},t.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},t.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},t.prototype.getSelection=function(){return this.getImmutable().get("selection")},t.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},t.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},t.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},t.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},t.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},t.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},t.setInlineStyleOverride=function(e,n){return t.set(e,{inlineStyleOverride:n})},t.prototype.getCurrentInlineStyle=function(){var t=this.getInlineStyleOverride();if(null!=t)return t;var e=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?u(e,n):c(e,n)},t.prototype.getBlockTree=function(t){return this.getImmutable().getIn(["treeMap",t])},t.prototype.isSelectionAtStartOfContent=function(){var t=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(t,0,0)},t.prototype.isSelectionAtEndOfContent=function(){var t=this.getCurrentContent(),e=t.getBlockMap(),n=e.last(),o=n.getLength();return this.getSelection().hasEdgeWithin(n.getKey(),o,o)},t.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},t.acceptSelection=function(t,e){return i(t,e,!1)},t.forceSelection=function(t,e){return e.getHasFocus()||(e=e.set("hasFocus",!0)),i(t,e,!0)},t.moveSelectionToEnd=function(e){var n=e.getCurrentContent(),o=n.getLastBlock(),i=o.getKey(),r=o.getLength();return t.acceptSelection(e,new y({anchorKey:i,anchorOffset:r,focusKey:i,focusOffset:r,isBackward:!1}))},t.moveFocusToEnd=function(e){var n=t.moveSelectionToEnd(e);return t.forceSelection(n,n.getSelection())},t.push=function(e,n,o){if(e.getCurrentContent()===n)return e;var i="insert-characters"!==o,r=m.getDirectionMap(n,e.getDirectionMap());if(!e.getAllowUndo())return t.set(e,{currentContent:n,directionMap:r,lastChangeType:o,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:null});var a=e.getSelection(),s=e.getCurrentContent(),u=e.getUndoStack(),c=n;a!==s.getSelectionAfter()||l(e,o)?(u=u.push(s),c=c.set("selectionBefore",a)):"insert-characters"!==o&&"backspace-character"!==o&&"delete-character"!==o||(c=c.set("selectionBefore",s.getSelectionBefore()));var h=e.getInlineStyleOverride();"adjust-depth"!==o&&"change-block-type"!==o&&(h=null);var p={currentContent:c,directionMap:r,undoStack:u,redoStack:x(),lastChangeType:o,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:h};return t.set(e,p)},t.undo=function(e){if(!e.getAllowUndo())return e;var n=e.getUndoStack(),o=n.peek();if(!o)return e;var i=e.getCurrentContent(),r=m.getDirectionMap(o,e.getDirectionMap());return t.set(e,{currentContent:o,directionMap:r,undoStack:n.shift(),redoStack:e.getRedoStack().push(i),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:i.getSelectionBefore()})},t.redo=function(e){if(!e.getAllowUndo())return e;var n=e.getRedoStack(),o=n.peek();if(!o)return e;var i=e.getCurrentContent(),r=m.getDirectionMap(o,e.getDirectionMap());return t.set(e,{currentContent:o,directionMap:r,undoStack:e.getUndoStack().push(i),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:o.getSelectionAfter()})},t.prototype.getImmutable=function(){return this._immutable},t}();t.exports=C},,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var n=t.getCurrentContent(),o=t.getCurrentSelection(),i=(0,l.Set)(n.getEntities().keys()),r=e.getEntities().keys(),a=i.intersect(Array.from(r)),s=o.getEntities().filter(function(t){return a.contains(t)}),u=(0,l.Map)().withMutations(function(n){t.getActiveEntities().forEach(function(t,o){a.contains(o)&&n.set(o,e.getEntity(o))})});return S.set(t,{activeEntities:u,currentSelection:f["default"].createFromArray(s.toArray())})}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(10),u=n(569),c=o(u),h=n(92),p=(o(h),n(142)),d=(o(p),n(408)),f=o(d),g=n(893),m=o(g),v=n(897),y=o(v),b=n(898),_=o(b),x={currentContent:null,pageSize:null,dragging:!1,resizing:!1,pointerDown:!1,arrowKeyDown:!1,activeHandle:null,currentSelection:f["default"].createEmpty(),activeEntities:(0,l.Map)(),hiddenEntityKeys:(0,l.Set)(),editorConfiguration:y["default"].createDefault(),undoStack:(0,l.Stack)(),redoStack:(0,l.Stack)(),index:null},w=(0,l.Record)(x),S=function(){function t(e){i(this,t),this._immutable=e}return s(t,null,[{key:"createEmpty",value:function(){return t.createFromJSONObject({})}},{key:"createFromJSONObject",value:function(e){var n=e.layout||"a4",o=void 0;o="object"===("undefined"==typeof n?"undefined":a(n))?n:m["default"][n];var i=c["default"].createFromJSONObject(e.content);return new t(w({layout:n,pageSize:o,currentContent:i}))}},{key:"set",value:function(e,n){var o=e.getImmutable();return new t(o.merge(n))}},{key:"setConfig",value:function(e,n){var o=e.getEditorConfiguration();return o=o.merge(n),t.set(e,{editorConfiguration:o})}},{key:"setLayout",value:function(e,n){if(!(n in m["default"]))throw new Error("Unknown layout: "+n);var o=m["default"][n];return new t(e.getImmutable().set("pageSize",o))}},{key:"setPageSize",value:function(e,n,o){var i={title:"",screenWidth:n,screenHeight:o};return new t(e.getImmutable().set("pageSize",i))}},{key:"setEntity",value:function(e,n,o){var i=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],r=e.getCurrentContent(),a=r.getEntity(n);if(!a)throw new Error("Entity not found: "+n);a=a.mergeDeep(o),r=r.setIn(["entities",n],a);var s={currentContent:r};if(i){var l=e.getActiveEntities();l.has(n)&&(s.activeEntities=l.set(n,a))}return new t(e.getImmutable().merge(s))}},{key:"undo",value:function(e){var n=e.getUndoStack(),o=n.peek();if(!o)return e;var i=e.getCurrentContent();return e=r(e,o),t.set(e,{currentContent:o,undoStack:n.shift(),redoStack:e.getRedoStack().unshift(i)})}},{key:"redo",value:function(e){var n=e.getRedoStack(),o=n.peek();if(!o)return e;var i=e.getCurrentContent();return e=r(e,o),t.set(e,{currentContent:o,redoStack:n.shift(),undoStack:e.getUndoStack().unshift(i)})}},{key:"push",value:function(e,n){return t.set(e,{currentContent:n,undoStack:e.getUndoStack().unshift(n),redoStack:(0,l.Stack)()})}}]),s(t,[{key:"getLayout",value:function(){return this.getPageSize().title}},{key:"getPageSize",value:function(){return this.getImmutable().get("pageSize")}},{key:"getCurrentContent",value:function(){return this.getImmutable().get("currentContent")}},{key:"getCurrentSelection",value:function(){return this.getImmutable().get("currentSelection")}},{key:"isDragging",value:function(){return this.getImmutable().get("dragging")}},{key:"isResizing",value:function(){return this.getImmutable().get("resizing")}},{key:"isPointerDown",value:function(){return this.getImmutable().get("pointerDown")}},{key:"isArrowKeyDown",value:function(){return this.getImmutable().get("arrowKeyDown")}},{key:"getActiveHandle",value:function(){return this.getImmutable().get("activeHandle")}},{key:"getEditorConfiguration",value:function(){return this.getImmutable().get("editorConfiguration")}},{key:"getEntities",value:function(){return this.getCurrentContent().getEntities()}},{key:"getEntity",value:function(t){return this.getCurrentContent().getEntity(t)}},{key:"getActiveEntities",value:function(){return this.getImmutable().get("activeEntities")}},{key:"getHiddenEntityKeys",value:function(){return this.getImmutable().get("hiddenEntityKeys")}},{key:"entityIsHidden",value:function(t){return this.getHiddenEntityKeys().contains(t)}},{key:"getUndoStack",value:function(){return this.getImmutable().get("undoStack")}},{key:"getRedoStack",value:function(){return this.getImmutable().get("redoStack")}},{key:"contentEquals",value:function(t){if(!t)return!1;var e=this.getPageSize(),n=t.getPageSize(),o=e===n||e.title===n.title&&e.screenWidth===n.screenWidth&&e.screenHeight===n.screenHeight;return o&&this.getCurrentContent()===t.getCurrentContent()}},{key:"getImmutable",value:function(){return this._immutable}},{key:"accessIndex",value:function(){var t=this.getImmutable().get("index");return t||(t=new _["default"],this._immutable=this.getImmutable().set("index",t)),t.update(this),t}}]),t}();e["default"]=S},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.eps=1e-6,e.PI=Math.PI),o=(e.PI2=2*n,e.PIhalf=n/2,e.vect45=Math.cos(45*n/180),e.math={median:function(t){var e=t.slice(0).sort(function(t,e){return t-e}),n=0,o=e.length;return 0===o?0:1===o?e[0]:o%2?(n=o/2-.5+1,e[n]):(n=o/2,(e[n-1]+e[n])/2)},average:function(t){var e=t.length,n=0;if(0===e)return 0;for(var o=0;e>o;o++)n+=t[o];return n/e},closest:function(t,e){for(var n=e[0],o=Math.abs(t-n),i=e.length,r=1;i>r;r++){var a=Math.abs(t-e[r]);o>a&&(o=a,n=e[r])}return n},isPointInsideBBox:function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},isBBoxIntersect:function(t,e){var n=o.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},fitToSize:function(t,e,n,o){var i=t/e;return(t>n||o>e)&&(t=n,e=t/i),(e>o||n>t)&&(e=o,t=e*i),{width:t,height:e}},preciseNumber:function(t){var e=1e6;return Math[0>t?"ceil":"floor"](t*e)/e}})},function(t,e,n){"use strict";var o;o=function(){var t=Backbone.View.prototype.remove,e=Backbone.View.extend({__render:function(t){var e=this,n=_.extend({self:this,template:function(t,o){var i=e["template_"+t];return _.template(i)(_.extend(o||{},n))}},t);return this.$el.empty().html(_.template(this.template)(n)),this},appendSubView:function(t){return this.__subview||(this.__subview=[]),this.__subview.push(t),t},__cleanup:function(){var t;if(this.__subview)for(t=this.__subview.shift();t;)t.unload(),t=this.__subview.shift();return this},remove:function(){return this.__cleanup(),t.call(this)},unload:function(){return this._unload&&this._unload(),this.remove()}});return e}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},,,,,,,function(t,e,n){"use strict";function o(t){for(var e;e=t._renderedComponent;)t=e;return t}function i(t,e){var n=o(t);n._hostNode=e,e[g]=n}function r(t){var e=t._hostNode;e&&(delete e[g],t._hostNode=null)}function a(t,e){if(!(t._flags&f.hasCachedChildNodes)){var n=t._renderedChildren,r=e.firstChild;t:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=o(s)._domID;if(0!==l){for(;null!==r;r=r.nextSibling)if(1===r.nodeType&&r.getAttribute(d)===String(l)||8===r.nodeType&&r.nodeValue===" react-text: "+l+" "||8===r.nodeType&&r.nodeValue===" react-empty: "+l+" "){i(s,r);continue t}c("32",l)}}t._flags|=f.hasCachedChildNodes}}function s(t){if(t[g])return t[g];for(var e=[];!t[g];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,o;t&&(o=t[g]);t=e.pop())n=o,e.length&&a(o,t);return n}function l(t){var e=s(t);return null!=e&&e._hostNode===t?e:null}function u(t){if(void 0===t._hostNode?c("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:c("34"),t=t._hostParent;for(;e.length;t=e.pop())a(t,t._hostNode);return t._hostNode}var c=n(29),h=n(182),p=n(530),d=(n(7),h.ID_ATTRIBUTE_NAME),f=p,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),m={getClosestInstanceFromNode:s,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:i,uncacheNode:r};t.exports=m},,,,,,,,,function(t,e,n){t.exports.Container=n(777),t.exports.MapStore=n(778),t.exports.Mixin=n(779),t.exports.ReduceStore=n(521),t.exports.Store=n(522)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(762);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(763);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(432);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})})},function(t,e){"use strict";function n(t){r=t}function o(){return r}Object.defineProperty(e,"__esModule",{value:!0}),e.setTooltip=n,e["default"]=o;var i=e.tooltipDummy={setText:function(){return this},setValue:function(){return this},setPosition:function(){return this},setColor:function(){return this},setParent:function(){return this},show:function(){return this},hide:function(){return this},self:{css:function(){return!1}}},r=i;e.getTooltip=o},,,,function(t,e){"use strict";function n(t){return function(){return t}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},t.exports=o},,function(t,e,n){"use strict";function o(){}o.prototype={getProfileUserFromTeam:function(t){return this.getTeamUser(t,window.app.profile.id)},getTeamUser:function(t,e){e=e.toString();var n=this.getTeam(t);return n&&n.users&&e in n.users?n.users[e]:void 0},getCurrentTeam:function(){return this.getTeam(window.app.profile.teamId)},getTeam:function(t){t=parseInt(t,10);for(var e=window.app.profile.teams,n=e?e.length:0,o=0;n>o;o++){var i=e[o];if(i.id===t)return i}},updateAvatar:function(t){for(var e=window.app.profile.id.toString(),n=window.app.profile.teams,o=n?n.length:0,i=0;o>i;i++){var r=n[i];e in r.users&&(r.users[e].avatar=t)}},getCurrentProfile:function(){var t=window.app.profile,e=this.getCurrentTeam(),n=$.extend(!0,{},e||t);if(n.isTeam=!!e,n.canPublish=!0,n.canEdit=!0,n.isTeam){n.pro=!0;var o=this.getProfileUserFromTeam(n.id);n.role=o.role,n.canPublish=o.canPublish,n.canEdit=o.canEdit}return n},getLabel:function(t){var e=t||this.getCurrentProfile(),n=[i18n.t("app.account.name")];return e.pro&&e.isEnterprise?n.unshift(i18n.t("app.account.enterprise")):e.pro&&e.isWhiteLabel?n.unshift(i18n.t("app.account.business")):e.pro?n.unshift(i18n.t("app.account.pro")):n.unshift(i18n.t("app.account.free")),e.isTeam&&n.unshift(i18n.t("app.account.team")),n.join(" ")},getShortLabel:function(t){var e=t||this.getCurrentProfile(),n=[];return e.isTeam?n.push(i18n.t("app.account.team")):n.push(i18n.t("app.account.individual")),e.isEnterprise?n.push(i18n.t("app.account.enterprise")):e.isWhiteLabel?n.push(i18n.t("app.account.business")):e.pro?n.push(i18n.t("app.account.pro")):n.push(i18n.t("app.account.free")),n.join(" ")},getLabelFromSubscription:function(t){var e=[i18n.t("app.account.name")];switch(t.plan_group){case"pro":e.unshift(i18n.t("app.account.pro"));break;case"whitepro":e.unshift(i18n.t("app.account.business"));break;case"enterprise":e.unshift(i18n.t("app.account.enterprise"))}return t.userId&&t.userId.match(/^ig_team/)&&e.unshift(i18n.t("app.account.team")),e.join(" ")},getShortLabelFromSubscription:function(t){var e=[];switch(t.userId&&t.userId.match(/^ig_team/)?e.push(i18n.t("app.account.team")):e.push(i18n.t("app.account.individual")),t.plan_group){case"pro":e.push(i18n.t("app.account.pro"));break;case"whitepro":e.push(i18n.t("app.account.business"));break;case"enterprise":e.push(i18n.t("app.account.enterprise"))}return e.join(" ")},getProfileFromSubscriptionUserId:function(t){var e=t.match(/ig_(team_)?(\d+)/),n=!!e[1],o=parseInt(e[2]);return n?_.find(window.app.profile.teams,function(t){if(t.organization_id===o){var e=$.extend(!0,{},t);return e.pro=!0,e.isTeam=!0,e}}):window.app.profile}},t.exports=new o},function(t,e,n){"use strict";var o;o=function(t){function e(t,e,n,o){return function(i){if(i.type===e&&i.objectId===n){var r=Array.prototype.slice.call(arguments);return r.unshift(t),o.apply(this,r)}}}var o=n(49),i=n(184);return o.extend({initialize:function(t){if(o.prototype.initialize.apply(this,arguments),this.options=t||{},this.infographic=this.options.infographic,t&&t.parent&&"viewMode"in t.parent&&"edit"===t.parent.viewMode){if(!this.model)return;var n=this.model.get("type"),i=this.model.get("object_id");this.listenTo(window.app.events,"ElementActions:shrink",e("shrink",n,i,this._handleEvent)),this.listenTo(window.app.events,"ElementActions:unshrink",e("unshrink",n,i,this._handleEvent)),this.listenTo(window.app.events,"ElementActions:duplicate",e("duplicate",n,i,this._handleEvent)),this.listenTo(window.app.events,"ElementActions:edit",e("edit",n,i,this._handleEvent))}},_handleEvent:function(){var t=Array.prototype.slice.apply(arguments),e=t.shift();switch(e){case"shrink":return this._handleShrink.apply(this,t);case"unshrink":return this._handleShrink.apply(this,t),void i.removeMargin(this.$el.parent());case"duplicate":return this._handleDuplicate.apply(this,t);case"edit":return this._handleEdit.apply(this,t)}},_handleShrink:function(){console.log("shrink",arguments)},_handleDuplicate:function(){console.log("duplicate",arguments)},_handleEdit:function(){console.log("edit",arguments)}})}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(723);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(425);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(726);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=n(727);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(728);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(757);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(758);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},function(t,e,n){"use strict";var o=n(97),i=n(906),r=n(10),a=n(922),s=n(943),l=n(412),u=n(948),c=n(949),h=n(7),p=n(960),d=n(591),f=n(961),g=n(963),m=r.OrderedSet,v={replaceText:function(t,e,n,i,r){var a=d(t,e),s=f(a,e),l=o.create({style:i||m(),entity:r||null});return c(s,s.getSelectionAfter(),n,l)},insertText:function(t,e,n,o,i){return e.isCollapsed()?void 0:h(!1),v.replaceText(t,e,n,o,i)},moveText:function(t,e,n){var o=l(t,e),i=v.removeRange(t,e,"backward");return v.replaceWithFragment(i,n,o)},replaceWithFragment:function(t,e,n){var o=d(t,e),i=f(o,e);return u(i,i.getSelectionAfter(),n)},removeRange:function(t,e,n){if(e.getAnchorKey()===e.getFocusKey()){var o=e.getAnchorKey(),i=e.getStartOffset(),r=e.getEndOffset(),a=t.getBlockForKey(o),l=a.getEntityAt(i),u=a.getEntityAt(r-1);if(l&&l===u){var c=s(a,e,n);return f(t,c)}}var h=d(t,e);return f(h,e)},splitBlock:function(t,e){var n=d(t,e),o=f(n,e);return g(o,o.getSelectionAfter())},applyInlineStyle:function(t,e,n){return i.add(t,e,n)},removeInlineStyle:function(t,e,n){return i.remove(t,e,n)},setBlockType:function(t,e,n){return p(t,e,function(t){return t.merge({type:n,depth:0})})},setBlockData:function(t,e,n){return p(t,e,function(t){return t.merge({data:n})})},mergeBlockData:function(t,e,n){return p(t,e,function(t){return t.merge({data:t.getData().merge(n)})})},applyEntity:function(t,e,n){var o=d(t,e);return a(o,e,n)}};t.exports=v},,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(606),l=o(s),u=n(423),c=o(u),h=n(184),p=o(h),d=n(495),f=o(d),g="switchRowsColumns",m="decimalSeparator",v=[".,",".",","],y=r["default"].merge({},f["default"]);e["default"]=y,r["default"].merge(y,{instanceClass:null,instanceType:null,defaultHeight:400,defaultCategoryHeight:40,defaultCategoryWidth:40,defaultShape:"boyPath",initialize:function(t){this.initVariables(t),this.loadShapes().then(function(){return this.setupChartOptions(),this.setupChartOptionsStyle(),this.createInstance()}.bind(this))},loadShapes:function(){var t=this,e=$.Deferred(),n=this.custom,o=InfoCharts.Visuals.ShapeGenerator,i=this.chart.get("chart_type_nr");return 21===i||3===i?!function(){var a="defaultPath";21===i&&(a="path");var s=[r["default"].has(n,a)&&n[a].replace("Path","")||"boy"];t.sheetSettings&&t.sheetSettings.forEach(function(t){t&&t[a]&&s.push(t[a].replace("Path",""))}),o.Func.getPaths(s.join(","),function(){e.resolve()})}():e.resolve(),e},initVariables:function(t){var e=this.chart=t.chart,n=this.theme=t.theme;this.version="Infogram.Charts",this.id=t.id||e.get("chart_id"),this.sheetIndex=t.sheetIndex,this.initializeData(t.data||e.get("data")),this.custom=e.get("custom"),this.colors=e.get("colors"),this.sheetSettings=e.get("sheets_settings"),this.themeColors=n.get("colors"),this.themeFont=n.get("font"),this.themeStyleColor=n.get("color"),this.charts=n.get("charts"),this.chartsLegacy=n.get("chartOptions"),this.displayTabs=!!t.tabs,e.view&&e.view.infographic&&(this.infographic=e.view.infographic),0===this.colors.length&&(this.colors=this.themeColors.slice(0))},initializeData:function(t){t.forEach(function(e,n){e&&e.length||(e=t[n]=[[]]),r["default"].isArray(e[0])||(e[0]=[])}),this.data=t},setupChartOptions:function(){var t=this.chartOptions=this.instanceClass.prototype.defaults();t.sheetnames=this.chart.get("sheetnames"),t.sheetOptions=this.setupChartSheetOptions(),t.container="#Chart_"+this.id,t.type=this.instanceType,t.custom=this.custom,r["default"].has(t.custom,"shrink")&&t.custom.shrink>0&&(t.width=p["default"].chartWidth(t.custom.shrink),$(t.container).css("width",t.width))},setupChartSheetOptions:function(){this.custom&&r["default"].has(this.custom,"colors")&&delete this.custom.colors;var t=this.sheetSettings,e=t&&t.length,n=[this.setupChartSheetOptionsItem(this.custom)];if(e)for(var o,i=0;e>i;i++)o=$.extend(!0,{},this.custom,t[i]),n.push(this.setupChartSheetOptionsItem(o,i));return n},sheetOptionsItemDefaults:function(t){var e=t.grid!==!1;return{categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},series:[{}],grid:{vertical:e,horizontal:e},legend:{enabled:t.showLabels!==!1},axis:[{},{}]}},setupChartSheetOptionsItem:function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},grid:{},axis:[{}]};return e},addPx:function(t){return t+(/px/.test(t)?"":"px")},setupChartOptionsStyle:function(){var t=this.chartOptions,e=$.extend(!0,{},this.themeFont.common||{},this.themeFont.label||{}),n=$.extend(!0,{},this.themeFont.common||{},this.themeFont.legend||{}),o=$.extend({text:this.themeStyleColor.text},this.themeStyleColor.chart||{});t.style.grid.color=o.text,t.style.axisTick["font-family"]=e.fontFamily,t.style.axisTick["font-size"]=this.addPx(e.fontSize),t.style.axisTick["font-weight"]=e.fontWeight,t.style.axisTick["font-style"]=e.fontStyle,t.style.axisTick.color=o.text,t.style.sheetSwitch["font-family"]=e.fontFamily,t.style.legend["font-family"]=n.fontFamily,t.style.legend["font-size"]=this.addPx(n.fontSize),t.style.legend["font-weight"]=n.fontWeight,t.style.legend["font-style"]=n.fontStyle,t.style.legend.color=o.text,t.style.axisTitle["font-family"]=e.fontFamily,t.style.axisTitle.color=o.text},createInstance:function(){var t,e,n=!1,o=this.chartOptions;return this.cleanup(),t=this.getChartInstance(),e=t&&t.instance,e?(n=!0,this.instance=e,e.options=o):this.instance=e=(0,a.create)(o),l["default"].create({chart:e,decimalSeparator:this.getDecimalSeparator(),transpose:this.transposeImport()})["import"](this.data),e.applySheetOptions(o.sheetOptions),void 0!==this.sheetIndex&&(e.sheetIndex=this.sheetIndex,e.options.sheetSwitch=!1),e.options.tabs=this.displayTabs,e.loaded=$.Deferred(),e.animation.on("end",function(){this.loaded.resolve(),this.animation.on("end",null)}.bind(e)),r["default"].delay(function(){n?e.render():(0,a.addRenderQueue)(e)},this.delayVisualInitialization),this},resize:function(t,e){var n=this.instance;n.options.width=t,e&&(n.options.height=e),(0,a.addRenderQueue)(n)},getDecimalSeparator:function(){var t=v[0],e=[];return-1!==v.indexOf(this.custom[m])&&(t=this.custom[m]),e.push(t),this.sheetSettings&&(e=e.concat(this.sheetSettings.map(function(t){return t&&t[m]||null}))),e},transposeImport:function(){return this.custom[g]},updateData:function(t){var e=this.instance;e&&(l["default"].create({chart:e,decimalSeparator:this.getDecimalSeparator(),transpose:this.transposeImport()})["import"](t),e.applySheetOptions(e.options.sheetOptions),e.render())},assignCategoryLabelLayout:function(t,e){"tilted"===e.categoryLayout&&(t.layout="tilted")},assignNumberFormatValues:function(t,e){t.format||(t.format={}),e.groupingSymbol&&(t.format.grouping="none"===e.groupingSymbol?"":e.groupingSymbol);var n=e.decimalSeparator,o=n===!1;t.format.decimal=o?".,":n,t.format.numberParser=new c["default"](o?"legacy":"firstNumber",n);var i=["useSIPrefixes","prefix","suffix"];i.forEach(function(n){void 0!==e[n]&&(t.format[n]=e[n])})},reinitialize:function(){var t=this.instance;t&&($(this.chartOptions.container+" .igc-root").empty(),t.render())}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return t*Math.PI/180}function l(t,e,n){var o=Math.sin(e),i=Math.cos(e),r=t.left-n.left,a=t.top-n.top,s=r*i-a*o,l=r*o+a*i;return{left:s+n.left,top:l+n.top}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=n(10),h=n(570),p=o(h),d=n(205),f=o(d),g={key:"",type:null,blockKey:null,top:null,left:null,width:null,height:null,transform:new p["default"],props:(0,c.Map)()},m=(0,c.Record)(g),v=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),u(e,[{key:"getKey",value:function(){return this.get("key")}},{key:"getBlockKey",value:function(){return this.get("blockKey")}},{key:"getType",value:function(){return this.get("type")}},{key:"getTop",value:function(){return this.get("top")}},{key:"getLeft",value:function(){return this.get("left")}},{key:"getWidth",value:function(){return this.get("width")}},{key:"getHeight",value:function(){return this.get("height")}},{key:"getProps",value:function(){return this.get("props")}},{key:"getTransform",value:function(){return this.get("transform")}},{key:"bounds",value:function(){var t=0,e=this.getTransform();if(t=e.getRotate()){var n=s(-t),o={left:this.getLeft()+.5*this.getWidth(),
top:this.getTop()+.5*this.getHeight()},i=l({left:this.getLeft(),top:this.getTop()},n,o),r=l({left:this.getLeft()+this.getWidth(),top:this.getTop()},n,o),a=l({left:this.getLeft()+this.getWidth(),top:this.getTop()+this.getHeight()},n,o),u=l({left:this.getLeft(),top:this.getTop()+this.getHeight()},n,o),c=[i,r,a,u],h=Math.min.apply(null,c.map(function(t){return t.left})),p=Math.min.apply(null,c.map(function(t){return t.top})),d=Math.max.apply(null,c.map(function(t){return t.left})),f=Math.max.apply(null,c.map(function(t){return t.top}));return{top:Math.round(p),left:Math.round(h),width:Math.round(d-h),height:Math.round(f-p)}}return{top:this.getTop(),left:this.getLeft(),width:this.getWidth(),height:this.getHeight()}}},{key:"getProperty",value:function(t){var e=this.getProps();return e.has(t)?e.get(t):void 0}}],[{key:"fromRawEntity",value:function(t,n){var o=t.type;if(!o)throw new Error('"type" must be defined');var i=t.left;if("undefined"==typeof i)throw new Error('"left" must be defined');var r=t.top;if("undefined"==typeof r)throw new Error('"top" must be defined');var a=t.width;if("undefined"==typeof a)throw new Error('"width" must be defined');var s=t.height;if("undefined"==typeof s)throw new Error('"height" must be defined');var l={type:o,left:i,top:r,width:a,height:s,props:(0,c.fromJS)(t.props||{}),key:t.key||(0,f["default"])("entity")};return t.transform&&(l.transform=p["default"].fromRawTransform(t.transform)),n&&(l.blockKey=n),new e(l)}},{key:"set",value:function(t,e){return t.merge(e)}}]),e}(m);e["default"]=v},function(t,e){"use strict";var n=function(t){if(null!=t)return t;throw new Error("Got unexpected null or undefined")};t.exports=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ELEMENT_MENU_TAB_CHANGE="ELEMENT_MENU_TAB_CHANGE",e.ELEMENT_MENU_CLOSE="ELEMENT_MENU_CLOSE",e.ELEMENT_MENU_DRAG_BEGIN="ELEMENT_MENU_DRAG_BEGIN",e.ELEMENT_MENU_DRAG_END="ELEMENT_MENU_DRAG_END",e.ELEMENT_MENU_DRAG_ENTER="ELEMENT_MENU_DRAG_ENTER",e.ELEMENT_MENU_DRAG_LEAVE="ELEMENT_MENU_DRAG_LEAVE",e.ELEMENT_MENU_CHARTS_FILTER="ELEMENT_MENU_CHARTS_FILTER",e.ELEMENT_MENU_CHARTS_SORTMODE_TYPE=0,e.ELEMENT_MENU_CHARTS_SORTMODE_USECASE=1,e.ELEMENT_MENU_MAPS_FILTER="ELEMENT_MENU_MAPS_FILTER",e.ELEMENT_MENU_MAPS_THUMBS="ELEMENT_MENU_MAPS_THUMBS",e.ELEMENT_MENU_IMAGES_RESET="ELEMENT_MENU_IMAGES_RESET",e.ELEMENT_MENU_IMAGES_LOADING="ELEMENT_MENU_IMAGES_LOADING",e.ELEMENT_MENU_IMAGES_LOADED="ELEMENT_MENU_IMAGES_LOADED",e.ELEMENT_MENU_IMAGE_LOAD_FAILED="ELEMENT_MENU_IMAGE_LOAD_FAILED",e.ELEMENT_MENU_IMAGE_DOWNLOADED="ELEMENT_MENU_IMAGE_DOWNLOADED",e.ELEMENT_MENU_IMAGES_ADDED="ELEMENT_MENU_IMAGES_ADDED",e.ELEMENT_MENU_IMAGE_UPLOAD_STARTED="ELEMENT_MENU_IMAGE_UPLOAD_STARTED",e.ELEMENT_MENU_IMAGE_UPLOAD_FINISHED="ELEMENT_MENU_IMAGE_UPLOAD_FINISHED",e.ELEMENT_MENU_IMAGE_UPLOADED="ELEMENT_MENU_IMAGE_UPLOADED",e.ELEMENT_MENU_IMAGE_UPLOAD_FAILED="ELEMENT_MENU_IMAGE_UPLOAD_FAILED",e.ELEMENT_MENU_IMAGE_DELETE_DIALOG="ELEMENT_MENU_IMAGE_DELETE_DIALOG",e.ELEMENT_MENU_IMAGE_DELETION_CONFIRMED="ELEMENT_MENU_IMAGE_DELETION_CONFIRMED",e.ELEMENT_MENU_IMAGE_DELETED="ELEMENT_MENU_IMAGE_DELETED",e.ELEMENT_MENU_IMAGE_DELETE_FAILED="ELEMENT_MENU_IMAGE_DELETE_FAILED",e.ELEMENT_MENU_IMAGE_INFOGRAPHICS="ELEMENT_MENU_IMAGE_INFOGRAPHICS",e.ELEMENT_MENU_IMAGE_DELETE_DIALOG_CLOSE="ELEMENT_MENU_IMAGE_DELETE_DIALOG_CLOSE",e.ELEMENT_MENU_MAP_LOAD_FAILED="ELEMENT_MENU_MAP_LOAD_FAILED",e.FREE_MAP_GROUP="Free",e.ELEMENT_MENU_MEDIA_LOADING="ELEMENT_MENU_MEDIA_LOADING",e.ELEMENT_MENU_MEDIA_RESULTS="ELEMENT_MENU_MEDIA_RESULTS",e.ELEMENT_MENU_MEDIA_REFRESH="ELEMENT_MENU_MEDIA_REFRESH",e.ELEMENT_MENU_MEDIA_SEARCH_FAILED="ELEMENT_MENU_MEDIA_SEARCH_FAILED",e.ELEMENT_MENU_MEDIA_SEARCH="ELEMENT_MENU_MEDIA_SEARCH",e.ELEMENT_MENU_MEDIA_SOURCE_CHANGE="ELEMENT_MENU_MEDIA_SOURCE_CHANGE",e.ELEMENT_MENU_MEDIA_SOURCE_YOUTUBE=0,e.ELEMENT_MENU_MEDIA_SOURCE_VIMEO=1,e.ELEMENT_MENU_MEDIA_SOURCE_SLIDESHARE=2,e.ELEMENT_MENU_MEDIA_SOURCE_FLICKR=3,e.ELEMENT_MENU_MEDIA_SOURCE_LINK=4,e.ELEMENT_MENU_WORLDSOURCES_LOADING_STARTED="ELEMENT_MENU_WORLDSOURCES_LOADING_STARTED",e.ELEMENT_MENU_WORLDSOURCES_LOADING_ENDED="ELEMENT_MENU_WORLDSOURCES_LOADING_ENDED",e.ELEMENT_MENU_WORLDSOURCES_LOADED="ELEMENT_MENU_WORLDSOURCES_LOADED",e.ELEMENT_MENU_WORLDSOURCES_CLEAR="ELEMENT_MENU_WORLDSOURCES_CLEAR",e.ELEMENT_MENU_WORLDSOURCES_SEARCH="ELEMENT_MENU_WORLDSOURCES_SEARCH",e.ELEMENT_MENU_GOOGLEANALYTICS_LOADING_STARTED="ELEMENT_MENU_GOOGLEANALYTICS_LOADING_STARTED",e.ELEMENT_MENU_GOOGLEANALYTICS_LOADED="ELEMENT_MENU_GOOGLEANALYTICS_LOADED",e.ELEMENT_MENU_GOOGLEANALYTICS_SELECT_CHANGE="ELEMENT_MENU_GOOGLEANALYTICS_SELECT_CHANGE"},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.resetEntities=e.removeEntity=e.addEntity=void 0;var i=n(37),r=o(i),a=n(134),s=o(a),l=function(t,e){r["default"].dispatch({type:s["default"].ENTITY_ADD,id:t,data:e})},u=function(){r["default"].dispatch({type:s["default"].ENTITY_RESET})},c=function(t){r["default"].dispatch({type:s["default"].ENTITY_REMOVE,id:t})};e.addEntity=l,e.removeEntity=c,e.resetEntities=u},function(t,e,n){"use strict";var o=null;t.exports={debugTool:o}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(10),s=a.Map,l=a.OrderedSet,u=a.Record,c=l(),h={style:c,entity:null},p=u(h),d=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.getStyle=function(){return this.get("style")},e.prototype.getEntity=function(){return this.get("entity")},e.prototype.hasStyle=function(t){return this.getStyle().has(t)},e.applyStyle=function(t,n){var o=t.set("style",t.getStyle().add(n));return e.create(o)},e.removeStyle=function(t,n){var o=t.set("style",t.getStyle().remove(n));return e.create(o)},e.applyEntity=function(t,n){var o=t.getEntity()===n?t:t.set("entity",n);return e.create(o)},e.create=function(t){if(!t)return f;var n=s({style:c,entity:null}).merge(t),o=g.get(n);if(o)return o;var i=new e(n);return g=g.set(n,i),i},e}(p),f=new d,g=s([[s(h),f]]);d.EMPTY=f,t.exports=d},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return void 0!==t.ref}function i(t){return void 0!==t.key}var r=n(32),a=n(141),s=(n(31),n(543),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,u={key:!0,ref:!0,__self:!0,__source:!0},c=function(t,e,n,o,i,r,a){var s={$$typeof:l,type:t,key:e,ref:n,props:a,_owner:r};return s};c.createElement=function(t,e,n){var r,l={},h=null,p=null,d=null,f=null;if(null!=e){o(e)&&(p=e.ref),i(e)&&(h=""+e.key),d=void 0===e.__self?null:e.__self,f=void 0===e.__source?null:e.__source;for(r in e)s.call(e,r)&&!u.hasOwnProperty(r)&&(l[r]=e[r])}var g=arguments.length-2;if(1===g)l.children=n;else if(g>1){for(var m=Array(g),v=0;g>v;v++)m[v]=arguments[v+2];l.children=m}if(t&&t.defaultProps){var y=t.defaultProps;for(r in y)void 0===l[r]&&(l[r]=y[r])}return c(t,h,p,d,f,a.current,l)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){var n=c(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},c.cloneElement=function(t,e,n){var l,h=r({},t.props),p=t.key,d=t.ref,f=t._self,g=t._source,m=t._owner;if(null!=e){o(e)&&(d=e.ref,m=a.current),i(e)&&(p=""+e.key);var v;t.type&&t.type.defaultProps&&(v=t.type.defaultProps);for(l in e)s.call(e,l)&&!u.hasOwnProperty(l)&&(void 0===e[l]&&void 0!==v?h[l]=v[l]:h[l]=e[l])}var y=arguments.length-2;if(1===y)h.children=n;else if(y>1){for(var b=Array(y),_=0;y>_;_++)b[_]=arguments[_+2];h.children=b}return c(t.type,p,d,f,g,m,h)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===l},c.REACT_ELEMENT_TYPE=l,t.exports=c},function(t,e,n){"use strict";function o(){k.ReactReconcileTransaction&&x?void 0:c("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=p.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled(!0)}function r(t,e,n,i,r,a){o(),x.batchedUpdates(t,e,n,i,r,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==v.length?c("124",e,v.length):void 0,v.sort(a),y++;for(var n=0;e>n;n++){var o=v[n],i=o._pendingCallbacks;o._pendingCallbacks=null;var r;if(f.logTopLevelRenders){var s=o;o._currentElement.props===o._renderedComponent._currentElement&&(s=o._renderedComponent),r="React update: "+s.getName(),console.time(r)}if(g.performUpdateIfNecessary(o,t.reconcileTransaction,y),r&&console.timeEnd(r),i)for(var l=0;l<i.length;l++)t.callbackQueue.enqueue(i[l],o.getPublicInstance())}}function l(t){return o(),x.isBatchingUpdates?(v.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=y+1))):void x.batchedUpdates(l,t)}function u(t,e){x.isBatchingUpdates?void 0:c("125"),b.enqueue(t,e),_=!0}var c=n(29),h=n(32),p=n(526),d=n(140),f=n(533),g=n(183),m=n(200),v=(n(7),[]),y=0,b=p.getPooled(),_=!1,x=null,w={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),E()):v.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[w,S];h(i.prototype,m.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),d.addPoolingTo(i);var E=function(){for(;v.length||_;){if(v.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(_){_=!1;var e=b;b=p.getPooled(),e.notifyAll(),p.release(e)}}},T={injectReconcileTransaction:function(t){t?void 0:c("126"),k.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:c("127"),"function"!=typeof t.batchedUpdates?c("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?c("129"):void 0,x=t}},k={ReactReconcileTransaction:null,batchedUpdates:r,enqueueUpdate:l,flushBatchedUpdates:E,injection:T,asap:u};t.exports=k},function(t,e){"use strict";function n(){for(var t=void 0;void 0===t||o.hasOwnProperty(t)||!isNaN(+t);)t=Math.floor(Math.random()*i).toString(32);return o[t]=!0,t}var o={},i=Math.pow(2,24);t.exports=n},function(t,e,n){"use strict";function o(t,e,n,o){if(t===n)return!0;if(!n.startsWith(t))return!1;var i=n.slice(t.length);return e?(i=o?o(i):i,a.contains(i,e)):!1}function i(t){return"Windows"===r.platformName?t.replace(/^\s*NT/,""):t}var r=n(969),a=n(970),s=n(977),l=n(560),u={isBrowser:function(t){return o(r.browserName,r.browserFullVersion,t)},isBrowserArchitecture:function(t){return o(r.browserArchitecture,null,t)},isDevice:function(t){return o(r.deviceName,null,t)},isEngine:function(t){return o(r.engineName,r.engineVersion,t)},isPlatform:function(t){return o(r.platformName,r.platformFullVersion,t,i)},isPlatformArchitecture:function(t){return o(r.platformArchitecture,null,t)}};t.exports=s(u,l)},function(t,e,n){"use strict";var o;o=function(t){var e=n(49);return e.extend({className:"upper_panel",events:{"click .bg_layer":function(){return this.options.onlyButtons?void 0:this.remove(!0)},"click [data-action]":function(t){return t.stopPropagation(),this.trigger($(t.target).closest("[data-action]").attr("data-action")),this.remove()},"click [data-role=close]":function(t){return t.stopPropagation(),this.remove(!0)}},initialize:function(t){this.options=t||{}},remove:function(t){return this.$el.removeClass("show_panel"),_.delay(function(){t&&this.trigger("remove"),e.prototype.remove.apply(this,arguments)}.bind(this),100),this},render:function(t){return this.__render(t),this.$el.appendTo(document.body),_.delay(function(){this.$el.addClass("show_panel")}.bind(this),0),this}})}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o=n(401),i=o({bubbled:null,captured:null}),r=o({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:r,PropagationPhases:i};t.exports=a},function(t,e,n){"use strict";function o(t,e,n,o){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s?this[r]=s(n):"target"===r?this.target=o:this[r]=n[r]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(32),r=n(140),a=n(71),s=(n(31),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),o.Interface=l,o.augmentClass=function(t,e){var n=this,o=function(){};o.prototype=n.prototype;var a=new o;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,r.addPoolingTo(t,r.fourArgumentPooler)},r.addPoolingTo(o,r.fourArgumentPooler),t.exports=o},function(t,e,n){"use strict";var o=n(32),i=o||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=n(576),a=n(10),s=n(7),l=a.Map,u=l(),c=0,h={create:function(t,e,n){return h.add(new r({type:t,mutability:e,data:n||{}}))},add:function(t){var e=""+ ++c;return u=u.set(e,t),e},get:function(t){var e=u.get(t);return e?void 0:s(!1),e},mergeData:function(t,e){var n=h.get(t),o=i({},n.getData(),e),r=n.set("data",o);return u=u.set(t,r),r},replaceData:function(t,e){var n=h.get(t),o=n.set("data",e);return u=u.set(t,o),o}};t.exports=h},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){function e(){return o.get("colors")}function n(){return l&&a["default"].has(l,"colors")&&l.colors&&l.colors.length?l.colors:e()}var o=t.chart,i=t.sheetIndex,r=void 0===i,s=o.get("sheets_settings"),l=s[i];return{getColors:function(){return r?e():n()},getCustomValue:function(t,e,n){function i(t,e){return a["default"].has(t,e)&&n(t[e])}var s=this.getCustom();return n=n||function(){return!0},i(s,t)?s[t]:!r&&(s=o.get("custom"),i(s,t))?s[t]:e},getCustom:function(){return l||o.get("custom")},getCustomStrict:function(){return r?o.get("custom"):l||{}},setCustom:function(t){if(r){var e=o.get("custom");a["default"].merge(e,t)}else l||(l=s[i]={}),a["default"].merge(l,t),o.set("sheets_settings",s,{silent:!0})},removeCustom:function(t){r?!function(){var e=o.get("custom");t.forEach(function(t){delete e[t]})}():(l||(l=s[i]={}),t.forEach(function(t){delete l[t]}),o.set("sheets_settings",s,{silent:!0}))}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=o(r);e["default"]=i},,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(37),u=o(l),c=n(134),h=o(c),p=n(65),d={},f=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"getEntity",value:function(t){return d[t]}},{key:"getAllEntities",value:function(){return d}},{key:"__onDispatch",value:function(t){switch(t.type){case h["default"].ENTITY_ADD:d[t.id]=t.data,g.__emitChange();break;case h["default"].ENTITY_REMOVE:delete d[t.id],g.__emitChange();break;case h["default"].ENTITY_RESET:d={},g.__emitChange()}}}]),e}(p.Store),g=new f(u["default"]);e["default"]=g},function(t,e){"use strict";var n={INFOGRAPHIC_PUBLISHED:"INFOGRAPHIC_PUBLISHED",INFOGRAPHIC_CREATED:"INFOGRAPHIC_CREATED",PROFILE_LOADED:"PROFILE_LOADED",ENTITY_ADD:"ENTITY_ADD",ENTITY_RESET:"ENTITY_RESET",ENTITY_REMOVE:"ENTITY_REMOVE",GLOBAL_LOADING_SHOW:"GLOBAL_LOADING_SHOW",GLOBAL_LOADING_HIDE:"GLOBAL_LOADING_HIDE",INFOGRAPHIC_TYPE_RESPONSIVE:0,INFOGRAPHIC_TYPE_FREE_LAYOUT:1,DEFAULT_INFOGRAPHIC_WIDTH:550};t.exports=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(495),s=o(a),l=n(184),u=o(l),c=n(418),h=o(c),p=n(423),d=o(p),f="decimalSeparator",g=["user",".,",".",","],m=r["default"].merge({},s["default"]);e["default"]=m,r["default"].merge(m,{initialize:function(t){this.loadShapes(t).done(function(){return this.initVariables(t),this.createInstance()}.bind(this))},loadShapes:function(t){var e=$.Deferred(),n=h["default"].Visuals.ShapeGenerator,o=t.chart,i=o.get("chart_type_nr"),r=o.get("custom");if(7===i||21===i){var a=r.path||r.defaultPath;7===i&&(a=r.defaultPath||r.path),a||(a=7===i?"circlePath":"boyPath"),n.Func.getPaths(a.replace("Path",""),function(){e.resolve()})}else e.resolve();return e},initVariables:function(t){var e=this.chart=t.chart,n=this.theme=t.theme;this.id=t.id||e.get("chart_id"),this.version="InfoCharts",this.modifier=e.get("modifier"),this.data=t.data||e.get("data"),this.sheetIndex=t.sheetIndex,this.dimensions=e.dimensions(),this.custom=e.get("custom"),this.colors=e.get("colors"),this.themeColors=n.get("colors"),this.themeFont=n.get("font"),this.themeStyleColor=n.get("color"),this.charts=n.get("charts"),this.infographic=e.view.infographic,this.sheetnames=e.get("sheetnames")||[],this.canAnimate="capture"!==e.view.parent.viewMode,this.inlineVals=!this.canAnimate,this.chartOptions=$.extend(!0,{},n.get("chartOptions")),this.animation="bounce",this.chartOptions.common=$.extend(!0,{},this.chartOptions.common,{_labelTextOptions:{chart:n.get("color").chart,font:n.get("font").common}}),0===this.colors.length&&(this.colors=this.themeColors.slice(0)),this.singleColor=this.arrayValuesSame(this.colors),this.toNumber=this.createToNumber(),this.instanceOpts=this.setupChartOptions()},setupChartOptions:function(){return{}},createToNumber:function(){var t=g[0],e=this.infographic&&this.infographic.get("properties")&&this.infographic.get("properties").decimal_separator;-1!==g.indexOf(this.custom[f])&&(t=this.custom[f]),"user"===t&&e&&(t=e);var n="lastDelimiter";return".,"===t&&(n="legacy"),new d["default"](n,t)},importArrayData:function(){return[]},arrayValuesSame:function(t){var e=t.length;if(e>0)for(var n=1;e>n;n++)if(t[n]!==t[0])return!1;return!0},getAxes:function(t,e){var n,o=[],i=this.custom,a=this.data;if(r["default"].isUndefined(i.xlabel)&&r["default"].isUndefined(i.ylabel))return null;if(null==t)for(n=0;n<a.length;n++)a[n].length>0&&(""===a[n][0][0]&&(a[n][0][0]="Sheet "+n),o.push({gridDef:[i.ylabel,i.xlabel],group:a[n][0][0]}));else for(n=1;n<a[0][0].length;n++)0===e?o.push({gridDef:[i.ylabel,i.xlabel],group:a[0][0][n]}):o.push({gridDef:[i.ylabel,i.xlabel],group:"default",category:a[0][0][n]});return o},gridsettings:function(t,e){r["default"].isUndefined(e.grid)||e.grid||(void 0===t.backgroundStyle&&(t.backgroundStyle={}),t.gridPostOptions={labelsToFront:!0,gridHide:!0},t.backgroundStyle.fill="transparent")},replaceQuot:function(t){var e,n,o,i,a,s,l,u;for(t=r["default"].cloneDeep(t),i=0,e=t.length;e>i;i++)for(a=0,u=t[i],n=u.length;n>a;a++)if(l=u[a],"string"==typeof l)u[a]=l.replace(/&quot;/g,'"');else if(l instanceof Array)for(s=0,o=l.length;o>s;s++)"string"==typeof l[s]&&(l[s]=l[s].replace(/&quot;/g,'"'));return t},spreadSingleSheet:function(t){var e=[];return t.forEach(function(t,n){t.length<2&&0===n&&(t=[t[0]||"",""]),t.forEach(function(n,o){if(o>0){var i=o-1,r=void 0;r=e[i]?e[i]:e[i]=[],r.push([t[0],n])}})}),e},createGetGroup:function(){function t(t,o){var i=t+"_"+o,r=t in n,a=i in e;return r||(n[t]=0),a||(r?e[i]=++n[t]:e[i]=0),t+" ".repeat(e[i])}var e={},n={};return t},calcChartWidth:function(){var t=this.custom,e=this.type,n=this.id,o=parseInt($("#chart_"+n).css("margin-left"))||0,i=parseInt($("#chart_"+n).css("padding-left"))||0,r=parseInt($("#Chart_"+n).css("padding-left")),a=$(".ig-items").width()-2*(o+i+r);t.shrink&&(a=u["default"].chartWidth(t.shrink));var s=parseInt(this.dimensions[1],10),l=["DateTime","Progress","Pictogrid","Pictosize","PictoBar","Gauge","Pie"];"Pie"===e&&(!s||s>a)&&(s=a);var c=-1===l.indexOf(e);return c&&!s&&(s=.7*a),c&&250>s&&(s=250),"Gauge"===e&&(s=.6*a),{width:a,height:s}},createInstance:function(){var t=this.grid,e=this.axes,n=this.id,o=this.type,i=this.modifier,a=this.custom,s=this.colors,l=this.instanceOpts,u=this.infographic.get("properties")||{},c=["xmin","xmax","ymin","ymax"],p=[NaN,NaN,NaN,NaN],d=!0;if(!this.data||0===this.data.length||0===this.data[0].length)return this.cleanup(),this;for(var f=0;f<c.length;f++)void 0!==l[c[f]]&&""!==l[c[f]]&&(p[f]=l[c[f]],d=!1);if(a.reverse){var g=-1*p[2];p[2]=-1*p[3],p[3]=g}p=[{min:p[0],max:p[1]},{min:p[2],max:p[3]}],r["default"].isUndefined(l._gridOptions)&&(l._gridOptions={}),l._gridOptions.range=p,l._gridOptions.autozoom=d;var m=this.calcChartWidth(),v="Chart_"+n,y=this.importedData=this.importArrayData(this.data);if(y===!1)return this.cleanup(),this;this.cleanup();var b=this.instance=new h["default"].Container;return b.loaded=$.Deferred(),b.init({canvasSelectorId:v,canAnimate:this.canAnimate,canAnimateGrid:this.canAnimate,animationStyle:this.animation,light:l.light||!1,canGlowPath:!1,canGlowLabel:!1,canvasWidth:m.width,canvasHeight:m.height,shrink:a.shrink,tabs:u.tabs,loadedCallback:function(){b.loaded.resolve()}}),r["default"].delay(function(){b.addVisual(h["default"].Visuals[o],l,y,void 0,t,e),"undefined"==typeof b&&(b=!1),b.state.visuals.items[0].meta={type:o,colors:s,custom:a,def:t,modifier:i}},this.delayVisualInitialization),this},resize:function(t){var e=this.instance;e&&(e.resizeWidth(t),e.state.visuals.items[0].loadData(this.importedData,null,!0,this.grid,this.axes))},updateData:function(t){var e=this.instance;this.data=t;var n=this.importArrayData();t&&e&&(this.importedData=n,this.axes=this.getAxes(),e.state.visuals.items[0].loadData(n,null,!0,this.grid,this.axes))}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){function t(t){t.each(function(){var t,a=d3.select(this),s=this.__chart__||n,u=this.__chart__=n.copy(),b=r.ticks(u,c,h),_=a.selectAll(".tick").data(b,u),x=_.enter().insert("g").attr("class","tick").style("opacity",l.eps),w=d3.transition(_.exit()).style("opacity",l.eps).remove(),S=d3.transition(_.order()).style("opacity",1);null!==e&&void 0!==e||(e=r.tickFormat(u,c)),d&&x.append("rect"),x.append("text");var C,E,T=S.select("rect"),k=_.select("text").text(function(t){return"function"==typeof e?e(t,u):e}),M="top"===o||"left"===o?-1:1;if("bottom"===o||"top"===o?(t=r.axisX,C="width",E="height",k.attr("dx",p).attr("text-anchor","end")):(t=r.axisY,C="height",E="width",k.attr("dy",p).attr("text-anchor",0>M?"start":"end")),k.style(g).attr("fill",g.color),T.attr("x",0).attr("y",0).attr(C,1).attr(E,M*i),u.rangeBand){var O=u,I=Math.floor(O.rangeBand()/2);s=u=function(t){return O(t)+I}}else s.rangeBand?s=u:w.call(t,u,s,m);x.call(t,s,u,m),S.call(t,u,u,m),S.call(function(e){var n=1/0;e.each(function(e,o){var i={opacity:.5,fill:g.color,stroke:"none","stroke-width":0},a=1;if(0===e&&f&&(i.opacity=1),-1!==v.indexOf(o)&&(i.opacity=l.eps),-1!==y.indexOf(o)&&(a=l.eps),t===r.axisX){var s=Math.round(u(e));n===s&&.5===i.opacity&&(i.opacity=l.eps),n=s}d3.select(this).select("rect").style(i),d3.select(this).select("text").style("opacity",a)})})})}var e,n=d3.scale.linear(),o=r.DEFAULT_ORIENT,i=6,a=3,c=[10],h=null,p=0,d=!0,f=!1,g=s["default"].prototype.defaults().style.axisTick,m={left:0,top:0},v=[],y=[],b={scale:function(e){return arguments.length?(n=e,t):n},orient:function(e){return arguments.length?(o=e in r.ORIENTS?""+e:r.DEFAULT_ORIENT,t):o},ticks:function(){return arguments.length?(c=arguments,t):c},tickValues:function(e){return arguments.length?(h=e,t):h},tickFormat:function(n){return arguments.length?(e=n,t):e},tickSize:function(e){return arguments.length?(i=+e,t):i},tickPadding:function(e){return arguments.length?(a=+e,t):a},tickSubdivide:function(){return arguments.length&&t},textOffset:function(e){return arguments.length?(p=+e,t):p},drawLines:function(e){return arguments.length?(d=!!e,t):d},style:function(e){return arguments.length?(g=e,t):g},offset:function(e){return arguments.length?(m.left="number"==typeof e.left?e.left:m.left,m.top="number"==typeof e.top?e.top:m.top,t):m},highlightZero:function(e){return arguments.length?(f=!!e,t):f},hideLinesByIndex:function(e){return arguments.length?(v=e.slice(0),t):v},hideTicksByIndex:function(e){return arguments.length?(y=e.slice(0),t):y},getBorderingTick:function(){var t=n.copy(),e=r.ticks(t,c,h).slice(0);e=e.filter(function(t,e){return-1===y.indexOf(e)}),e=e.sort(function(e,n){return t(n)-t(e)});var o=e.length;return t(e[o-1])}};return(0,u.injectFunctions)(t,b),t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var a=n(30),s=o(a),l=n(48),u=n(15);r.DEFAULT_ORIENT="bottom",r.ORIENTS={top:1,right:1,bottom:1,left:1},r.axisX=function(t,e,n,o){t.attr("transform",function(t){var i=e(t),r=o.left+Math.round(isFinite(i)?i:n(t));return"translate("+r+", "+o.top+")"})},r.axisY=function(t,e,n,o){t.attr("transform",function(t){var i=e(t),r=Math.round(o.top+(isFinite(i)?i:n(t)));return"translate("+o.left+", "+r+")"})},r.tickFormat=function(t,e){return t.tickFormat?t.tickFormat.apply(t,e):function(t){return t}},r.ticks=function(t,e,n){return null===n?t.ticks?t.ticks.apply(t,i(e)):t.domain():n}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var i=n(30),r=o(i),a=n(15),s=n(48),l=e.Label=function u(){function t(t){t.each(function(){var t=d3.select(this),r=t.selectAll("text").data([0]);r.exit().remove(),r.enter().insert("text");var a=o.x1,c=o.y1+(o.y2-o.y1)/2;"top"!==n&&"bottom"!==n||(a=o.x1+(o.x2-o.x1)/2),"top"===n&&(c=o.y1),"right"===n&&(a=o.x1+(o.x2-o.x1)),"bottom"===n&&(c=o.y1+(o.y2-o.y1)),r.text(e),u.adjust(r,a,c,n),r.style(i).attr("x",a).attr("y",c).style("opacity",s.eps).attr("fill",i.color).attr("text-anchor","middle"),r.transition().style("opacity",1).each("end",function(){l.animationEnd()})})}var e="",n=u.DEFAULT_ORIENT,o={x1:0,y1:0,x2:100,y2:100},i=r["default"].prototype.defaults().style.axisTitle,l=d3.dispatch("animationEnd"),c={text:function(n){return arguments.length?(e=n,t):e},orientBounds:function(e){return arguments.length?(o=e,t):o},orient:function(e){return arguments.length?(n=e in u.ORIENTS?e+"":u.DEFAULT_ORIENT,t):n},style:function(e){return arguments.length?(i=e,t):i},dispatch:function(){return l}};return(0,a.injectFunctions)(t,c),t};l.DEFAULT_ORIENT="left",l.ORIENTS={top:1,right:1,bottom:1,left:1},l.adjust=function(t,e,n,o){var i=t.node().getBBox();"left"===o&&(t.attr("dy",i.height),t.attr("transform","rotate(270,"+e+","+n+")")),"right"===o&&(t.attr("dy",-(i.height-i.height/4-5)),t.attr("transform","rotate(270,"+e+","+n+")")),"top"===o&&t.attr("dy",i.height),"bottom"===o&&t.attr("dy",-5)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={columnToTop:function(t,e,n,o,i){var r=o>=0;if(r)i>o&&(o=1>o?1:o,i=o);else{var a=Math.abs(o);i>a&&(o=1>a?-1:o,i=a)}return i>n&&(i=0),r?"M"+t+","+e+"v"+(i-o)+"a"+i+","+i+" 0 0 1 "+i+","+-i+"h"+(n-2*i)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(o-i)+"z":"M"+t+","+e+"v"+-(o+i)+"a"+i+","+i+" 0 0 0 "+i+","+i+"h"+(n-2*i)+"a"+i+","+i+" 0 0 0 "+i+","+-i+"v"+(o+i)+"z"},bowToTop:function(t,e,n,o){var i=e-o,r=t+n;return"M"+t+","+e+"L"+r+","+e+"L"+t+","+i+"L"+r+","+i+"Z"},triangleToTop:function(t,e,n,o){var i=t+n,r=e-o;return"M"+t+","+e+"L"+(t+n/2)+","+r+"L"+i+","+e+"Z"},curveToTop:function(t,e,n,o){var i=e-o,r=t+n/2,a=t+n;return"M"+t+","+e+"C"+t+","+i+","+(r-2)+","+i+","+r+","+i+"C"+(r+2)+","+i+","+a+","+i+","+a+","+e+"Z"},barToRight:function(t,e,n,o,i){var r=n>=0;if(r)i>n&&(n=1>n?1:n,i=n);else{var a=Math.abs(n);i>a&&(n=1>a?-1:n,i=a)}return i>o&&(i=0),r?"M"+t+","+e+"h"+(n-i)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(o-2*i)+"a"+i+","+i+" 0 0 1 "+-i+","+i+"h"+(i-n)+"z":"M"+t+","+e+"h"+(n+i)+"a"+i+","+i+" 0 0 0 "+-i+","+i+"v"+(o-2*i)+"a"+i+","+i+" 0 0 0 "+i+","+i+"h"+-(n+i)+"z"},bowToRight:function(t,e,n,o){var i=e+o,r=t+n;return"M"+t+","+e+"L"+t+","+i+"L"+r+","+e+"L"+r+","+i+"Z"},triangleToRight:function(t,e,n,o){var i=t+n,r=e+o;return"M"+t+","+e+"L"+i+","+(e+o/2)+"L"+t+","+r+"Z"},curveToRight:function(t,e,n,o){var i=e+o/2,r=t+n,a=e+o;return"M"+t+","+e+"C"+r+","+e+","+r+","+(i-2)+","+r+","+i+"C"+r+","+(i+2)+","+r+","+a+","+t+","+a+"Z"}}},function(t,e){"use strict";var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=n},function(t,e,n){"use strict";var o=n(29),i=(n(7),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t);
}),r=function(t,e){var n=this;if(n.instancePool.length){var o=n.instancePool.pop();return n.call(o,t,e),o}return new n(t,e)},a=function(t,e,n){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,t,e,n),i}return new o(t,e,n)},s=function(t,e,n,o){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,t,e,n,o),r}return new i(t,e,n,o)},l=function(t,e,n,o,i){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,t,e,n,o,i),a}return new r(t,e,n,o,i)},u=function(t){var e=this;t instanceof e?void 0:o("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,h=i,p=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||h,n.poolSize||(n.poolSize=c),n.release=u,n},d={addPoolingTo:p,oneArgumentPooler:i,twoArgumentPooler:r,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:l};t.exports=d},function(t,e){"use strict";var n={current:null};t.exports=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(10),u=n(92),c=(o(u),n(205)),h=o(c),p={key:"",entities:(0,l.List)()},d=(0,l.Record)(p),f=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"getKey",value:function(){return this.get("key")}},{key:"getEntities",value:function(){return this.get("entities")}}],[{key:"create",value:function(){return new e({key:(0,h["default"])("block")})}}]),e}(d);e["default"]=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function T(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:T(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(137),d=n(22),f=o(d),g=n(15),m=n(76),v=o(m),y=n(136),b=i(y),x=n(77),w=o(x),S=n(516),C=i(S),E=n(180);e.Line=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=.28,n=this.svg,o=this.runtime={};o.margin={top:0,right:0,bottom:0,left:0};var i={top:0,right:0,bottom:0,left:0},r={top:0,right:0,bottom:0,left:0},a=o.spacing={maxBeforeXAxisTick:50,beforeBottomCategories:5,afterTopCategories:5,afterYAxisTick:5},s=o.sheet=this.getSheetData(),l=this.prepareSheetData(s),u=o.graphs=l.graphs,c=this.options,h=this.createAnimationCounter(u.length+3);this.setupNumberFormatter(s);var d=o.reverseAxis=!(!s.grid||!s.grid.reverse),g=o.numericCategories=!!s.categories.numeric;o.categoryLayout=s.categories.layout;var m,y=!!s.legend.enabled,_=o.xAxisOptions=s.axis[0],x=o.yAxisOptions=s.axis[1],S=this.showDataPoints(),C={x:!0,y:"scatter"===c.type},E=!!s.axis[0].ticks,T=null,k=!!s.axis[1].ticks,M=null,O=this.showAsPercent(),I=this.forcedDomainLimits(_),P=this.forcedDomainLimits(x),L=s.axis[1]&&s.axis[1].title;L&&(i.left=f.getTextDimensions(L,n,c.style.axisTitle).height+10);var D=s.axis[0]&&s.axis[0].title;D&&(i.bottom=f.getTextDimensions(D,n,c.style.axisTitle).height+10);var A,N={width:0,height:0};k&&(A=["0123456789,."+this.numberFormatY.tick(1e3)],O&&A.push("%"),N=f.getTextDimensions(A,n,c.style.axisTick),d?o.margin.bottom+=N.height:o.margin.top+=N.height,D||(o.margin.bottom+=Math.ceil(N.height/2)));var B=c.width-o.margin.left-i.left-o.margin.right-i.right,j=c.height-o.margin.top-i.top-o.margin.bottom-i.bottom,R=o.limits={maxCategoryHeight:Math.floor(j*e),categoryHeight:0},H=d?[0,j]:[j,0],F=d3.scale.linear().rangeRound(H),z=this.getDomain(u,"y");z=this.adjustYDomain(z,j),F.domain(z),M=P?this.forceTicksToDomain(F.domain(),F.ticks()):F.ticks(),k&&(A=M.map(function(e){return t.numberFormatY.tick(e,F)}),N.width=f.getTextDimensions(A,n,c.style.axisTick).width,r.left=N.width+a.afterYAxisTick),o.graphWidth=B-r.left-1,o.igcLeftOffset=o.margin.left+r.left+i.left,this.createXScale();var V=this.createCategoryLabels();T=V.ticks,E&&(o.limits.categoryHeight=V.height),d?r.top=o.limits.categoryHeight+a.afterTopCategories:r.bottom=o.limits.categoryHeight+a.beforeBottomCategories;var U=o.margin.top+r.top+i.top;j=j-r.top-r.bottom,H=d?[0,j]:[j,0],F.rangeRound(H);var W=M.map(function(t){return F(t)});d||(W=W.reverse());var G=this.gridTickOffset([0,j],W),$=G.top+G.bottom;m={enabled:S,showOnlyClosest:!1,numericCategories:g,radius:c.series.dataPointRadius,svgContainer:this.svg.node(),x:o.xScale,y:F,offset:{left:o.igcLeftOffset,top:U},graphs:u,bounds:{height:d3.max(H),width:o.graphWidth},animationEnd:h};var K=d3.max(u,function(t){return t.data.length});o.graphWidth<2*c.series.dataPointRadius*K&&(m.showOnlyClosest=!0);var q=(0,b["default"])().scale(F).orient("left").tickSize(-B,0).highlightZero(s.grid.horizontalZeroHighlight).style(c.style.grid).tickFormat("").tickValues(M);s.grid.horizontal||(C.x=C.x&&-1!==M.indexOf(0),q.tickValues(C.x?[0]:[]));var Y=(0,b["default"])().scale(o.xScale).orient("bottom").tickSize(j-$,0).highlightZero(s.grid.verticalZeroHighlight).style(c.style.grid).tickFormat("").offset({left:0,top:G.top}).tickValues(T);o.hiddenLines&&o.hiddenLines.length&&Y.hideLinesByIndex(o.hiddenLines),s.grid.vertical?g||Y.tickValues(V.filterMetrics.domainIndex):(C.y=C.y&&T&&-1!==T.indexOf(0),Y.tickValues(C.y?[0]:[]));var Z=(0,b["default"])().scale(F).orient("left").drawLines(!1).style(c.style.axisTick).textOffset(d?N.height:-(N.height/4)).tickFormat(this.numberFormatY.tick).tickValues(M);O&&Z.tickFormat(d3.format("p")),k||Z.tickValues([]);var X={x1:o.margin.left,y1:U,x2:c.width,y2:U+j},J=(0,p.Label)().text(L).orientBounds(X).style(c.style.axisTitle).orient("left"),Q={x1:o.margin.left+i.left,y1:U,x2:c.width,y2:c.height-o.margin.bottom},tt=(0,p.Label)().text(D).orientBounds(Q).style(c.style.axisTitle).orient("bottom");tt.dispatch().on("animationEnd",h);var et=v.BottomTilted().data(E?V.renderData:[]).bounds({height:R.maxCategoryHeight,y:d?-r.top:j+a.beforeBottomCategories-G.bottom}).textAlign(E?V.renderData.textAlign:null).style(c.style.axisTick),nt={width:c.width};if(this.renderSheetSwitch(nt),this.sheetSeriesDataEmpty(s))return this.animation.start(),this.animation.end(),this.resetRootElement();var ot;if(y){var it=this.prepareLegendData(s),rt=w.TextItemMetrics().width(nt.width).texts(it.map(function(t){return t.title})).parentContainer(this.container).style(c.style.legend).reservedSize(36);ot=w.Legend().data(it).width(nt.width).style(c.style.legend).chartId(this.chartId).textMetrics(rt()),this.renderLegend(ot)}else this.container.selectAll(".igc-legend").remove();var at=n.datum(this).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);this.containerSetup(),n.attr("width",c.width).attr("height",c.height),at.each(function(t){var e=n.select("defs"),i=n.select(".igc").attr("transform","translate("+o.igcLeftOffset+","+U+")"),a=i.select(".igc-grid"),l=n.select(".igc-titles");if(t.renderPart(a,q,"igc-ygrid"),(s.grid.horizontal||C.x)&&a.select(".igc-ygrid").selectAll(".tick").select("rect").attr("transform","translate("+-r.left+",0)").style({stroke:c.style.grid.color}),t.renderPart(a,Y,"igc-xgrid"),(s.grid.vertical||C.y)&&a.select(".igc-xgrid").selectAll(".tick").select("rect").style({stroke:c.style.grid.color}),t.renderGraphs(i,[{graphs:u,x:o.xScale,y:F,legend:ot,bounds:{width:o.graphWidth,height:j},offset:{x:o.igcLeftOffset,y:U},animationEnd:h}]),I||P){var p={x:0,y:G.top,width:o.graphWidth,height:j-$,clipPathId:"igc-cp-"+t.chartId};t.graphsSetupClipPath(i,e,p)}else i.selectAll(".igc-graph-group").attr("clip-path",null);i.selectAll(".igc-crosshair-circle").remove(),i.selectAll(".igc-crosshair-overlay").remove();var d={x:-o.igcLeftOffset,y:-U,width:c.width,height:c.height,clipPathId:"igc-cp-curtain-"+t.chartId};t.curtainAnimation(i,e,d,m),t.renderPart(a,Z,"igc-y0-axis-text"),k&&a.select(".igc-y0-axis-text").selectAll(".tick").select("text").attr("transform","translate("+-r.left+", 0)"),t.renderPart(a,et,"igc-x-axis-text"),t.renderPart(l,J,"igc-title-left"),t.renderPart(l,tt,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){h()})}},{key:"renderGraphs",value:function(t){t.selectAll(".igc-graph-group").remove(),u(Object.getPrototypeOf(e.prototype),"renderGraphs",this).apply(this,arguments)}},{key:"graphInstanceSetup",value:function(t,e,n,o){t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(n).animate(!1).legend(o.legend).interpolate(e.interpolation).filterFn(function(t){return null!==t.y}).dispatch().on("animationEnd",o.animationEnd)}},{key:"renderGraphInstances",value:function(){this.graphInstances.forEach(function(t){var e=t.selection,n=t.graphObj&&t.graphObj.type;n&&e.classed("igc-graph-"+n,!0),e.call(t.instance)})}},{key:"curtainAnimation",value:function(t,e,n,o){var i=this,r=.625*this.options.animation.duration;t.selectAll(".igc-graph").attr("clip-path","url(#"+n.clipPathId+")"),this.createRectClipPath(e,n);var a=e.select("#"+n.clipPathId).selectAll("path");a.attr("transform","translate(-"+(n.width-n.x)+", 0)").transition().each("end",function(){i.renderDataPoints(t,o)}).duration(r).ease("linear").attr("transform","translate(0, 0)")}},{key:"adjustYDomain",value:function(t,e){var n=this.options,o=this.showAsPercent(),i=this.runtime,r=n.series.dataPointRadius,a=i.yAxisOptions;return t=o?[0,1]:this.showDataPoints()?v.ScaleHelper.linearScaleTicksDomainAdjust(t,r,[0,e]):d3.scale.linear().domain(t).nice(10).nice(10).domain(),-1!==["area-stacked","area","stream-graph"].indexOf(n.type)&&(t[0]=Math.min(t[0],0)),o||this.limitDomain(a.minLimit,a.maxLimit,t),t}},{key:"renderDataPoints",value:function(t,e){var n=this.chartId,o=this.numberFormatX,i=this.numberFormatY,r=[];e.graphs.forEach(function(t){r=r.concat(t.data.map(function(e){return e.colors=t.colors,e}))});var a=(0,C["default"])().data(r).scaleX(e.x).scaleY(e.y).offset(e.offset).bounds(e.bounds).svgContainer(e.svgContainer).targetParent(t).chartId(n).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){var n=e.numericCategories?o.tooltip(t.xLabel):t.xLabel;return n+": "+i.tooltip(t.yLabel)}),s=t.selectAll(".igc-crosshair-overlay").data([0]);return s.enter().append("rect").attr("class","igc-crosshair-overlay"),s=t.selectAll(".igc-crosshair-overlay"),s.attr("x",0).attr("y",0).attr("width",e.bounds.width).attr("height",e.bounds.height),a.target(s),s.style({"stroke-width":"0px","fill-opacity":0}).call(a),e.showOnlyClosest||!e.enabled?void e.animationEnd():(t.selectAll(".igc-graph-group").each(function(){d3.select(this).selectAll(".igc-graph").each(function(t,e){var o=t.graphs[e],r=(0,E.Circle)().scaleX(t.x).scaleY(t.y).data(o.data).pX("x").pY("y").colors(o.colors).groupId(e).chartId(n).filterFn(function(t){return null!==t.y}).className("igc-data-point-line").legend(t.legend).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){return t.xLabel+": "+i.tooltip(t.yLabel)}).animate(!1);d3.select(this).call(r)})}),void e.animationEnd())}},{key:"getDomain",value:function(t,e){e=e||"y";var n=[d3.min(t,function(t){return d3.min(t.data,function(t){return t[e]})}),d3.max(t,function(t){return d3.max(t.data,function(t){return t[e]})})];return n[0]===n[1]&&(n[0]>0?n[0]=0:n[0]<0?n[1]=0:(n[0]=-1,n[1]=1)),n}},{key:"createXScale",value:function(){var t=this.runtime,e=t.sheet;return t.numericCategories?t.xScale=this.numericCategoriesScale():t.xScale=d3.scale.ordinal().domain(d3.range(0,e.categories.data.length)).rangeBands([0,t.graphWidth],0),t.xScale}},{key:"createCategoryLabels",value:function(){var t=this.runtime,e=t.categoryLayout,n=v.BottomTilted.createLabels(this,e);return t.numericCategories&&this.afterNumericCategories(n),n}},{key:"numericCategoriesScale",value:function(){var t=this.runtime,e=t.xAxisOptions,n=v.ScaleHelper();return n.type("numeric").data(t.sheet.categories.data).domainLimit([e.minLimit,e.maxLimit]).range([0,t.graphWidth]).rangePointRadius(this.options.series.dataPointRadius),n()}},{key:"afterNumericCategories",value:function(t){var e=this.runtime,n=t.ticks.length-1;0>n||(e.hiddenLines=[n])}},{key:"showDataPoints",value:function(){return this.options.series.dataPoints===!0}},{key:"showAsPercent",value:function(){var t=this.options;return t.series&&t.series.percent}},{key:"lastOrdinalTickExceeds",value:function(t,e,n,o){var i=e.length-1,r=e[i];return-1!==i?o.rangeBand()/2+r+n.width/2>t:void 0}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"line",axisIndex:0}],axis:[{title:"",ticks:!0},{title:"",ticks:!0}]})}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:5,dataPoints:!0},animation:{duration:800}})}},{key:"prepareSheetData",value:function(t){var e=this.emptySheetData().series[0].type,n=_.merge([],t.axis)[0],o=!!t.categories.numeric,i=t.categories.data;return n.graphs=[],t.series.forEach(function(r,a){var s=i.map(function(t,e){var n=e;o&&(n=(0,d.replaceBlank)(Number(t),0));var i={x:n,y:null,yLabel:(0,d.replaceBlank)(r.rawData[e]),xLabel:(0,d.replaceBlank)(t),groupLabel:(0,d.replaceBlank)(r.title)};return r.data&&(i.y=(0,d.replaceBlank)(r.data[e],null)),i}),l={type:e,data:s,colors:[f.getColor(a,t.categories.colors)],interpolation:r.interpolation||"linear"};n.graphs.push(l)},this),n}},{key:"prepareLegendData",value:function(t){var e=t.categories.colors;return t.series.map(function(t,n){return{color:f.getColor(n,e),title:t.title}})}},{key:"gridTickOffset",value:function(t,e){return{top:e[0]-t[0],bottom:t[1]-e[e.length-1]}}},{key:"forcedDomainLimits",value:function(t){return t&&((0,g.isNumber)(t.minLimit)||(0,g.isNumber)(t.maxLimit))}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),o.grid&&_.merge(t.grid,o.grid),o.legend&&_.merge(t.legend,o.legend),o.axis&&o.axis.length&&_.merge(t.axis,o.axis),t.series.forEach(function(t){_.merge(t,o.series&&o.series[0]||{})})})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){return t.rangeBand?t.range().map(function(e){return e+.5*t.rangeBand()}):t.ticks().map(function(e){return t(e)})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(760);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),e.getScalePositions=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=t.getEntity(e);if(!n)throw new Error("Entity referenced by path "+e+" is not present");return n}Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),a=n(47),s=o(a),l=n(569),u=(o(l),n(92)),c=(o(u),{addEntities:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;e>o;o++)n[o-1]=arguments[o];var r=t.getCurrentSelection();r=r.set("items",r.getEntities().concat(n));var a=t.getCurrentContent(),l=t.getActiveEntities().withMutations(function(t){n.forEach(function(e){t.set(e,i(a,e))})});return s["default"].set(t,{currentSelection:r,activeEntities:l})},removeEntities:function(t){for(var e=t.getCurrentSelection(),n=arguments.length,o=Array(n>1?n-1:0),i=1;n>i;i++)o[i-1]=arguments[i];e=e.set("items",e.getEntities().subtract(o));var a=(t.getCurrentContent(),(0,r.Set)(o)),l=t.getActiveEntities().filterNot(function(t,e){return a.contains(e)});return s["default"].set(t,{currentSelection:e,activeEntities:l})},addBlocks:function(t){for(var e=t.getCurrentSelection(),n=arguments.length,o=Array(n>1?n-1:0),i=1;n>i;i++)o[i-1]=arguments[i];return e=e.set("blocks",e.getBlocks().concat(o)),s["default"].set(t,{currentSelection:e})},removeBlocks:function(t){for(var e=t.getCurrentSelection(),n=e.getBlocks(),o=arguments.length,i=Array(o>1?o-1:0),r=1;o>r;r++)i[r-1]=arguments[r];var a=!0,l=!1,u=void 0;try{for(var c,h=i[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var p=c.value;n=n.remove(p)}}catch(d){l=!0,u=d}finally{try{!a&&h["return"]&&h["return"]()}finally{if(l)throw u}}return s["default"].set(t,{currentSelection:e.set("blocks",n)})},clear:function(t){var e=t.getCurrentSelection();return e=e.merge({items:e.getEntities().clear(),blocks:e.getBlocks().clear()}),s["default"].set(t,{currentSelection:e,activeEntities:t.getActiveEntities().clear()})}});e["default"]=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return t.getStyle()===e.getStyle()}function s(t,e){return t.getEntity()===e.getEntity()}var l=n(10),u=n(411),c=l.List,h=l.Map,p=l.OrderedSet,d=l.Record,f=p(),g={key:"",type:"unstyled",text:"",characterList:c(),depth:0,data:h()},m=d(g),v=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.getKey=function(){return this.get("key")},e.prototype.getType=function(){return this.get("type")},e.prototype.getText=function(){return this.get("text")},e.prototype.getCharacterList=function(){return this.get("characterList")},e.prototype.getLength=function(){return this.getText().length},e.prototype.getDepth=function(){return this.get("depth")},e.prototype.getData=function(){return this.get("data")},e.prototype.getInlineStyleAt=function(t){var e=this.getCharacterList().get(t);return e?e.getStyle():f},e.prototype.getEntityAt=function(t){var e=this.getCharacterList().get(t);return e?e.getEntity():null},e.prototype.findStyleRanges=function(t,e){u(this.getCharacterList(),a,t,e)},e.prototype.findEntityRanges=function(t,e){u(this.getCharacterList(),s,t,e)},e}(m);t.exports=v},function(t,e,n){"use strict";function o(t){return t>=p&&g>=t}function i(t,e){if(e>=0&&e<t.length?void 0:h(!1),e+1===t.length)return!1;var n=t.charCodeAt(e),o=t.charCodeAt(e+1);return n>=p&&d>=n&&o>=f&&g>=o}function r(t){return m.test(t)}function a(t,e){return 1+o(t.charCodeAt(e))}function s(t){if(!r(t))return t.length;for(var e=0,n=0;n<t.length;n+=a(t,n))e++;return e}function l(t,e,n){if(e=e||0,n=void 0===n?1/0:n||0,!r(t))return t.substr(e,n);var o=t.length;if(0>=o||e>o||0>=n)return"";var i=0;if(e>0){for(;e>0&&o>i;e--)i+=a(t,i);if(i>=o)return""}else if(0>e){for(i=o;0>e&&i>0;e++)i-=a(t,i-1);0>i&&(i=0)}var s=o;if(o>n)for(s=i;n>0&&o>s;n--)s+=a(t,s);return t.substring(i,s)}function u(t,e,n){e=e||0,n=void 0===n?1/0:n||0,0>e&&(e=0),0>n&&(n=0);var o=Math.abs(n-e);return e=n>e?e:n,l(t,e,o)}function c(t){for(var e=[],n=0;n<t.length;n+=a(t,n))e.push(t.codePointAt(n));return e}var h=n(7),p=55296,d=56319,f=56320,g=57343,m=/[\uD800-\uDFFF]/,v={getCodePoints:c,getUTF16Length:a,hasSurrogateUnit:r,isCodeUnitInSurrogateRange:o,isSurrogatePair:i,strlen:s,substring:u,substr:l};t.exports=v},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(743);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(744);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},function(t,e,n){"use strict";function o(t){if(m){var e=t.node,n=t.children;if(n.length)for(var o=0;o<n.length;o++)v(e,n[o],null);else null!=t.html?h(e,t.html):null!=t.text&&d(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),o(e)}function r(t,e){m?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){m?t.html=e:h(t.node,e)}function s(t,e){m?t.text=e:d(t.node,e)}function l(){return this.node.nodeName}function u(t){return{node:t,children:[],html:null,text:null,toString:l}}var c=n(434),h=n(406),p=n(448),d=n(550),f=1,g=11,m="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=p(function(t,e,n){e.node.nodeType===g||e.node.nodeType===f&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===c.html)?(o(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),o(e))});u.insertTreeBefore=v,u.replaceChildWithTree=i,u.queueChild=r,u.queueHTML=a,u.queueText=s,t.exports=u},function(t,e,n){"use strict";function o(t,e){return(t&e)===e}var i=n(29),r=(n(7),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=r,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var p=h.toLowerCase(),d=n[h],f={attributeName:p,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:o(d,e.MUST_USE_PROPERTY),hasBooleanValue:o(d,e.HAS_BOOLEAN_VALUE),hasNumericValue:o(d,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:o(d,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:o(d,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:i("50",h),l.hasOwnProperty(h)){var g=l[h];f.attributeName=g}a.hasOwnProperty(h)&&(f.attributeNamespace=a[h]),u.hasOwnProperty(h)&&(f.propertyName=u[h]),c.hasOwnProperty(h)&&(f.mutationMethod=c[h]),s.properties[h]=f}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},injection:r};t.exports=s},function(t,e,n){"use strict";function o(){i.attachRefs(this,this._currentElement)}var i=n(846),r=(n(96),n(31),{mountComponent:function(t,e,n,i,r,a){var s=t.mountComponent(e,n,i,r,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(o,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,r){var a=t._currentElement;if(e!==a||r!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,r),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(o,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=r},function(t,e,n){"use strict";var o;!function(i){o=function(t){function e(){var t=u.getMargin(),e=!1;$(".moveable_w, .undo_w").each(function(){var n=$(this).hasClass("shrink"),o=0;e&&n&&(o=t-1),0>o&&(o=0),$(this).css("margin-left",o),e=n&&!e})}function o(t){$(t).css("margin-left","")}function i(){var t,e,n,o,i,a,s=$(".ig-items").width(),l=[];return $(".sbs_placeholder").remove(),$(".moveable_w.shrink").each(function(){var u=$(this).width();t=!!$(this).next(".moveable_w.shrink, .undo_w.shrink").length,n=$(this).position().left+u,e=s-n,!t&&e>u&&(o=$('<div class="sbs_placeholder">'),o.html('<div class="sbs_placeholder_message">'),a=o.find(".sbs_placeholder_message"),a.html('<p class="center_vh">'+i18n.t("app.edit.drag_here")+"</p>"),i=$(this).children(".moveable"),o.css("width",i.width()),o.height(i.height()),$(this).after(o),l.push(o.get(0)),r(o))}),l}function r(t){t.on("drop",function(t){var e=t.originalEvent.dataTransfer,n=e.getData("text");if(n){var o,i=$('[data-object-id="'+n+'"]'),r=$(this),a=r.prev(),s=parseInt(i.attr("ord"),10),l=parseInt(a.attr("ord"),10),c=l+1,p=i.find(".icon-min-object");if(l>s&&(c=l),!i.is(a)){if(o=i.clone(),r.remove(),!i.hasClass("shrink")){var d=o.find(".moveable").hasClass("chart");if(d){var f=$(this).width()-u.getMargin();o.find(".inner").width(f)}p.trigger("click"),ga("send","event","edit","side_by_side","drag_and_drop",0),ga("App.send","event","edit","side_by_side","drag_and_drop",0)}$.ajax({url:"/api/itemorder/"+graphicID,data:{newpos:c,count:$(".moveable_w").length,object_id:i.attr("data-object-id")},type:"PUT",beforeSend:function(){window.app.events.trigger("Editable:saving")}}).done(function(){o.find(".moveable").css({"margin-left":"20px"}),o.css({position:"absolute",width:i.css("width"),"z-index":10,"margin-left":0,"margin-right":0,top:i.position().top+"px",left:i.position().left+"px"}).insertBefore(i),i.css("opacity",0),i.insertAfter(a);var t=h(i,o,"top"),e=h(i,o,"left");o.animate({top:t,left:e},{complete:function(){$(".item-insertion").remove(),o.remove(),i.css("opacity",1),window.app.events.trigger("Editable:resetOrder Editable:shrink")}})}).fail(function(){window.app.message.error(i18n.t("app.errors.order_state"))}).always(function(){window.app.events.trigger("Editable:saved")})}}})}function a(){var t=[],e=[];$(".moveable_w.shrink").each(function(){e.push({id:$(this).attr("data-object-id"),top:$(this).position().top,ord:$(this).attr("ord")})});var n=_.groupBy(e,function(t){return t.top});for(var o in n)t.push(_.max(n[o],c));return t}function s(t){var e=$(".ig-items").width(),n=parseInt((e-2*u.getChartPadding()-u.getMargin())/t,10);return n}function l(t,e){var n=$(".ig-items").width(),o=parseInt((n-u.getMargin())/2,10);e.css({width:o+"px"}),9===t&&e.find(".igc-legend").css({width:o+"px"})}var u=n(479),c=function(t){return parseInt(t.ord,10)},h=function(t,e,n){var o=t.position()[n]-e.position()[n],i=o>0?"+=":"-=";return o=i+Math.abs(o)+"px"};return{recalculateMargin:e,removeMargin:o,setPlaceholders:i,lastInRowElements:a,chartWidth:s,boxWidth:l}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))}(n(482))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t.getTypeMod()in It}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=o(r),s=n(497),l=o(s),u=n(498),c=o(u),h=n(657),p=o(h),d=n(396),f=o(d),g=n(499),m=o(g),v=n(500),y=o(v),b=n(422),_=o(b),x=n(662),w=o(x),S=n(501),C=o(S),E=n(664),T=o(E),k=n(397),M=o(k),O=n(660),I=o(O),P=n(663),L=o(P),D=n(668),A=o(D),N=n(502),B=o(N),j=n(665),R=o(j),H=n(503),F=o(H),z=n(671),V=o(z),U=n(496),W=o(U),G=n(656),$=o(G),K=n(669),q=o(K),Y=n(655),Z=o(Y),X=n(667),J=o(X),Q=n(398),tt=o(Q),et=n(659),nt=o(et),ot=n(670),it=o(ot),rt=n(658),at=o(rt),st=n(666),lt=o(st),ut=n(661),ct=o(ut),ht=n(201),pt=o(ht),dt=n(25),ft=n(679),gt=o(ft),mt=n(674),vt=o(mt),yt=n(677),bt=o(yt),_t=n(676),xt=o(_t),wt=n(678),St=o(wt),Ct=n(675),Et=o(Ct),Tt=n(681),kt=o(Tt),Mt=100,Ot={"1_0":m["default"],"1_1":y["default"],"2_0":M["default"],"2_2":I["default"],"3_0":B["default"],"4_0":l["default"],"4_1":p["default"],"6_0":f["default"],"6_1":nt["default"],"10_0":_["default"],"10_1":$["default"],"11_0":F["default"],"12_0":q["default"],"15_0":W["default"],"15_1":W["default"],"16_1":at["default"],"17_0":c["default"],"18_0":V["default"],"20_0":tt["default"],"21_0":R["default"],"22_0":L["default"],"24_0":it["default"],"25_0":w["default"],"29_0":lt["default"],"29_1":ct["default"],"30_0":C["default"],"31_0":T["default"],"32_0":Z["default"],"33_0":J["default"],"34_0":A["default"]},It={"2_1":gt["default"],"5_0":xt["default"],"7_0":bt["default"],"16_0":vt["default"],"21_0":R["default"],"26_0":Et["default"],"27_0":kt["default"],"28_0":St["default"]};e["default"]={create:function(t){function e(t){return this.delayVisualInitialization=Mt,this.initialize(t)}var n=t.chart,o=n.getTypeMod();return(0,dt.getTooltip)()===dt.tooltipDummy&&(0,dt.setTooltip)(new pt["default"]({escapeFn:a["default"].escape})),e.prototype=o in It?It[o]:Ot[o],new e(t)},typeMods:a["default"].keys(Ot),typeModsLegacy:a["default"].keys(It),prototypes:Ot,prototypesLegacy:It,delayVisualInitialization:Mt,isLegacyChart:i}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(10),s=a.Record,l={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},u=s(l),c=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},e.prototype.getAnchorKey=function(){return this.get("anchorKey")},e.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},e.prototype.getFocusKey=function(){return this.get("focusKey")},e.prototype.getFocusOffset=function(){return this.get("focusOffset")},e.prototype.getIsBackward=function(){return this.get("isBackward")},e.prototype.getHasFocus=function(){return this.get("hasFocus")},e.prototype.hasEdgeWithin=function(t,e,n){var o=this.getAnchorKey(),i=this.getFocusKey();if(o===i&&o===t){var r=this.getStartOffset(),a=this.getEndOffset();return a>=e&&n>=r}if(t!==o&&t!==i)return!1;var s=t===o?this.getAnchorOffset():this.getFocusOffset();
return s>=e&&n>=s},e.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},e.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},e.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},e.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},e.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},e.createEmpty=function(t){return new e({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1,hasFocus:!1})},e}(u);t.exports=c},,,,function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(185),a=o(r),s=n(95);i=function(){var t=Backbone.Model.extend({urlRoot:"/api/charts",idAttribute:"chart_id",defaults:{custom:{},dataSets:[]},initialize:function(){this.on("request",function(){window.app.events.trigger("Editable:saving")}),this.on("sync",function(){window.app.events.trigger("Editable:saved")}),this.on("sync",this._ensureColorsIsArray)},isRedesigned:function(){return-1!==a["default"].typeMods.indexOf(this.get("chart_type_nr")+"_"+this.get("modifier"))},isFromFactory:function(){var t=this.getTypeMod();return-1!==a["default"].typeMods.indexOf(t)||-1!==a["default"].typeModsLegacy.indexOf(t)},getFactoryClass:function(){var t=this.getTypeMod();return a["default"].prototypes[t]||a["default"].prototypesLegacy[t]},getTypeMod:function(){return this.get("chart_type_nr")+"_"+this.get("modifier")},reload:function(t){var e=this.get("chart_type_nr");switch(e){case 19:case 23:break;case 9:var n=this.view.$(".leaflet-container"),o=this.view.$el.width(),i=this.view.maps[this.get("chart_id")];n.css({width:o,height:this.get("custom").height||Math.min(o,400)}),i.invalidateSize(),i.fitBounds(i.view);break;default:(0,s.addEntity)(this.get("chart_id"),a["default"].create({chart:this,theme:t.get("theme"),tabs:t.get("properties").tabs}))}},add:function(t,e,n,o,i){if(this.stateLocked)return!1;this.stateLocked=!0;var r,a=$.Deferred(),s=i||window.app.get("insertBeforeIndex");isFinite(s)&&(r=s),this.set({chart_type_nr:t,ID1:window.graphicID,ord:r,mod:e,data:n,custom:o});var l=function(){this.stateLocked=!1,window.app.events.trigger("Editable:saved"),a.resolve()}.bind(this);return window.app.events.trigger("Editable:saving"),this.save(null,{success:function(t){var e="c_"+t.get("chart_id");t.set("id",e),window.app.events.trigger("Editable:addElement",t,{beforeIndex:s,ui:!0}),l()},error:function(t,e){window.app.message.error(e.responseText),l()}}),a},dimensions:function(){var t=this.get("custom"),e=0;if(t.height)e=t.height;else switch(this.get("chart_type_nr")){case 3:case 7:case 5:e=280;break;case 21:case 24:case 28:e=100}return[0,e]},isMap:function(){return 9===this.get("chart_type_nr")},syncColors:function(t,e,n){n=n||function(){window.app.message.error(i18n.t("app.errors.err_save_chart_color_settings"))},t.infographic=this.get("block_id"),$.ajax({url:"/api/charts/"+this.get("ID1"),type:"PUT",data:t}).done(e).fail(n)},_ensureColorsIsArray:function(){var t=this.get("colors")||[];if(!_.isArray(t)){if(!_.isString(t))throw new Error("Illegal `colors` value");t=t.split(" ")}this.set("colors",t.map(function(t){return t.length&&"#"!==t[0]&&(t="#"+t),t}))}});return t}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},,,,,function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";var o=n(29),i=n(435),r=n(436),a=n(442),s=n(542),l=n(544),u=(n(7),{}),c=null,h=function(t,e){t&&(r.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},p=function(t){return h(t,!0)},d=function(t){return h(t,!1)},f=function(t){return"."+t._rootNodeID},g={injection:{injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?o("94",e,typeof n):void 0;var r=f(t),a=u[e]||(u[e]={});a[r]=n;var s=i.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=u[e],o=f(t);return n&&n[o]},deleteListener:function(t,e){var n=i.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var o=u[e];if(o){var r=f(t);delete o[r]}},deleteAllListeners:function(t){var e=f(t);for(var n in u)if(u.hasOwnProperty(n)&&u[n][e]){var o=i.registrationNameModules[n];o&&o.willDeleteListener&&o.willDeleteListener(t,n),delete u[n][e]}},extractEvents:function(t,e,n,o){for(var r,a=i.plugins,l=0;l<a.length;l++){var u=a[l];if(u){var c=u.extractEvents(t,e,n,o);c&&(r=s(r,c))}}return r},enqueueEvents:function(t){t&&(c=s(c,t))},processEventQueue:function(t){var e=c;c=null,t?l(e,p):l(e,d),c?o("95"):void 0,a.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=g},function(t,e,n){"use strict";function o(t,e,n){var o=e.dispatchConfig.phasedRegistrationNames[n];return b(t,o)}function i(t,e,n){var i=e?y.bubbled:y.captured,r=o(t,n,i);r&&(n._dispatchListeners=m(n._dispatchListeners,r),n._dispatchInstances=m(n._dispatchInstances,t))}function r(t){t&&t.dispatchConfig.phasedRegistrationNames&&g.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?g.getParentInstance(e):null;g.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var o=n.dispatchConfig.registrationName,i=b(t,o);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,t))}}function l(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function u(t){v(t,r)}function c(t){v(t,a)}function h(t,e,n,o){g.traverseEnterLeave(n,o,s,t,e)}function p(t){v(t,l)}var d=n(127),f=n(197),g=n(436),m=n(542),v=n(544),y=(n(31),d.PropagationPhases),b=f.getListener,_={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:h};t.exports=_},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r=n(451),a={view:function(t){if(t.view)return t.view;var e=r(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(o,a),t.exports=o},function(t,e,n){"use strict";var o=n(29),i=(n(7),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,i,r,a,s,l){this.isInTransaction()?o("27"):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=t.call(e,n,i,r,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o=e[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=o.initialize?o.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(t){this.isInTransaction()?void 0:o("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var i,a=e[n],s=this.wrapperInitData[n];try{i=!0,s!==r.OBSERVED_ERROR&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}}),r={Mixin:i,OBSERVED_ERROR:{}};t.exports=r},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e={parentElem:"body"};this.opts=h["default"].merge({},e,t),this.init()}function r(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function a(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function s(t){return parseFloat(getComputedStyle(t).width)}function l(t){return parseFloat(getComputedStyle(t).height)}function u(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}Object.defineProperty(e,"__esModule",{value:!0});var c=n(16),h=o(c);i.arrowHalfHeight=8,i.cursorOffset=20,i.maxWidthRatio=.4,i.prototype={createSelf:function(){var t=document.createElement("div");return a(t,"tt_tooltip"),t.innerHTML='<div class="tt_body"><span class="tt_ico"></span><div class="tt_text_wrap"><div class="tt_text"></div><div class="tt_value"></div></div></div><div class="tt_left"></div><div class="tt_right"></div>',t},init:function(){"function"==typeof this.opts.escapeFn&&(this.escape=this.opts.escapeFn.bind(this));var t=this.self=this.createSelf();return this.selfValue=t.querySelector(".tt_value"),this.selfText=t.querySelector(".tt_text"),this.leftArrow=t.querySelector(".tt_left"),this.rightArrow=t.querySelector(".tt_right"),this.ico=t.querySelector(".tt_ico"),this.setValue(this.opts.value),this.setText(this.opts.text),this.setParent(),this.opts.pos?this.setPosition(this.opts.pos,this.opts.color):this},setParent:function(){var t=this.opts.parentElem;"string"==typeof t?this.parent=document.querySelector(t):this.parent=t,this.parent.appendChild(this.self),this.self.style.visibility="hidden",this.self.style.maxWidth=s(this.parent)*i.maxWidthRatio+"px"},setOptions:function(t){var e={text:"setText",value:"setValue",position:"setPosition",pos:"setPosition"};Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&("position"===n||"pos"===n?this.setPosition(t[n],t.color):this[e[n]](t[n]))},this)},setPosition:function(t,e){void 0===this.parent&&this.setParent(),e&&this.setColor(e);var n={left:t.x-u(this.parent).left,top:t.y-u(this.parent).top-l(this.self)/2};return n.left>s(this.parent)/2?(n.left-=s(this.self)+i.cursorOffset,this.leftArrow.style.display="none",this.rightArrow.style.display="block"):(n.left+=i.cursorOffset,this.leftArrow.style.display="block",this.rightArrow.style.display="none"),n.left=parseInt(n.left,10),this.self.style.top=n.top+"px",this.self.style.left=n.left+"px",this.show()},setColor:function(t){this.ico.style.backgroundColor=t,a(this.self,"tt_color")},remove:function(){return this.self.parentNode.removeChild(this.self),this},escape:function(t){return t},setText:function(t){return t=this.escape(t),this.selfText.innerHTML=t,this.emptyCheck(),this},setValue:function(t){return t=this.escape(t),this.selfValue.innerHTML=t,this.emptyCheck(),this},emptyCheck:function(){""===this.selfText.innerHTML&&""===this.selfValue.innerHTML&&(this.selfText.innerHTML=" ")},hide:function(){return r(this.self,"tt_color"),this.self.style.visibility="hidden",this},show:function(){var t=l(this.self),e=t/2-i.arrowHalfHeight;return this.leftArrow.style.top=e+"px",this.rightArrow.style.top=e+"px",this.self.style.visibility="visible",this}},e["default"]=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(185),a=o(r),s=n(95);i=function(t){var e=n(74);return e.extend({template:n(793),className:"moveable chart ig-theme-group-chart",initialize:function(){e.prototype.initialize.apply(this,arguments),this.parent=this.options.parent},render:function(){var t=this.prepare();return this.$el.html(t),this},prepare:function(){var t=this.model.get("chart_id");this.el.id="chart_"+t;var e=this.model.get("chart_type_nr"),n=[23,24],o=n.indexOf(e);return-1!==o&&(this.$el.removeClass("ig-theme-group-chart"),this.$el.addClass("ig-theme-group-text")),_.template(this.template)({id:t})},init:function(){this.model.set("dimensions",this.model.dimensions()),this.initChart()},initChart:function(){var t,e=this.model,n=e.get("chart_id"),o=this.infographic.get("theme"),i=this.infographic.get("properties");i&&(t=i.tabs);var r=a["default"].create({chart:e,theme:o,tabs:t});(0,s.addEntity)(n,r)}})}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){"use strict";function n(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function o(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var o=Object.keys(t),r=Object.keys(e);if(o.length!==r.length)return!1;for(var a=0;a<o.length;a++)if(!i.call(e,o[a])||!n(t[o[a]],e[o[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=o},function(t,e,n){"use strict";var o;o=function(){var t=Backbone.Model.extend({urlRoot:"/api/particles",defaults:{type:"particle",text:"",title:""},validate:function(t){var e=["maintitle","bodytitle","quote","bodytext","video","image","separator"];return-1===_.indexOf(e,t.particle_type)?"invalid particle type":void 0},initialize:function(){this.on("invalid",function(){return window.app.message.error("Invalid element")}),this.on("request",function(){window.app.events.trigger("Editable:saving")}),this.on("sync",function(){window.app.events.trigger("Editable:saved")})}});return t}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";function n(t){t||(t="");var e=void 0;return t in o?e=++o[t]:(o[t]=0,e=o[t]),t?t+"-"+e:""+e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var o={}},function(t,e,n){"use strict";var o=n(10),i=o.OrderedMap,r={createFromArray:function(t){return i(t.map(function(t){return[t.getKey(),t]}))}};t.exports=r},function(t,e,n){"use strict";function o(t,e,n){var o=t.getSelection(),r=t.getCurrentContent(),a=o;if(o.isCollapsed()){if("forward"===n){if(t.isSelectionAtEndOfContent())return r}else if(t.isSelectionAtStartOfContent())return r;if(a=e(t),a===o)return r}return i.removeRange(r,a,n)}var i=n(78);t.exports=o},function(t,e){"use strict";function n(t){return"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}).map(o).join(" "):Array.prototype.map.call(arguments,o).join(" ")}function o(t){return t.replace(/\//g,"-")}t.exports=n},function(t,e){"use strict";function n(t,e){for(var n=t;n;){if(e(n))return n;n=n.parentNode}return n}function o(t,e){return n(t,function(t){return 1===t.nodeType?t.classList?t.classList.contains(e):-1!==t.className.split(" ").indexOf(e):!1})}function i(t,e){if(!t||!e)return!1;for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function r(t,e){return Array.prototype.slice.call(e).indexOf(t)}t.exports={findAncestorWithClassName:o,elementIsAncestorOf:i,elementIndexInNodeList:r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(91),a=o(r),s=n(16),l=o(s),u=Object.create(a["default"]);e["default"]=u,function(t){this.instanceClass=i.Charts.Line,this.instanceType="line",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;l["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight,e.showPoints===!1&&(n.series.dataPoints=!1)},this.setupChartSheetOptionsItem=function(t){var e=this.sheetOptionsItemDefaults(t),n=e.axis[0],o=e.axis[1];return n.title=t.xlabel?t.xlabel:"",o.title=t.ylabel?t.ylabel:"",e.categories.numeric=!!t.numeric,e.grid.reverse=!!t.reverse,t.smooth===!0&&(e.series[0].interpolation="monotone"),"number"==typeof t.xmin&&(n.minLimit=t.xmin),"number"==typeof t.xmax&&(n.maxLimit=t.xmax),"number"==typeof t.ymin&&(o.minLimit=t.ymin),"number"==typeof t.ymax&&(o.maxLimit=t.ymax),this.assignNumberFormatValues(o,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(u,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(t){this.instanceClass=a.Charts.Pie,this.instanceType="pie",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;r["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight},this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.legend={enabled:!0},e.showLabels===!1&&(n.legend.enabled=!1),e.showLabels===!1&&(n.legend.enabled=!1),n.series={showValues:e.showInLineValues===!0,showPercent:e.showInLinePercent===!0,showCategoryName:e.showInLineName===!0},n.axis=[{}],this.assignNumberFormatValues(n.axis[0],e),n}}.call(u,l["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(t){this.instanceClass=a.Charts.Scatter,this.instanceType="scatter",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;r["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight},this.setupChartSheetOptionsItem=function(t){var e=this.sheetOptionsItemDefaults(t),n=e.axis[0],o=e.axis[1];return n.title=t.xlabel?t.xlabel:"",o.title=t.ylabel?t.ylabel:"","number"==typeof t.xmin&&(n.minLimit=t.xmin),"number"==typeof t.xmax&&(n.maxLimit=t.xmax),"number"==typeof t.ymin&&(o.minLimit=t.ymin),"number"==typeof t.ymax&&(o.maxLimit=t.ymax),this.assignNumberFormatValues(o,t),this.assignNumberFormatValues(n,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(u,l["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a=n(201),s=o(a),l={createTabs:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=void 0;[].concat(i(e.childNodes)).forEach(function(t){var n=t.className;"string"!=typeof n||-1===n.indexOf("igc-tab-switcher")&&-1===n.indexOf("igc-tabs")||e.removeChild(t)});var a=function(t){e.childNodes.length?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)},l=t?t.length:0;if(2>l)return!1;var u=5,c=100,h=6,p=60,d=document.createElement("div"),f=[];(0,r.getTooltip)()===r.tooltipDummy&&(0,r.setTooltip)(new s["default"]({escapeFn:_.escape}));var g=(0,r.getTooltip)();d.className="igc-tabs",a(d);var m=(d.offsetWidth-u*(l-1)-h)/l;m>c?(t.forEach(function(t,e){var i=document.createElement("div");i.className="igc-tab"+(e===n?" active":""),i.setAttribute("data-value",e),i.style.width=m+"px";var r=document.createElement("div");r.className="igc-tab-content",r.innerHTML=t,setTimeout(function(){m<r.scrollWidth-h&&(i.addEventListener("mousemove",function(e){g.setOptions({text:t,pos:{x:e.pageX,y:e.pageY},value:""})}),i.addEventListener("mouseout",function(){g.hide()}))},0),i.appendChild(r),i.addEventListener("click",function(){o.style["margin-left"]=(m+5)*e+"px"}),d.appendChild(i),f.push(i)}),o=document.createElement("div"),o.className="igc-tab-active",o.style.width=m+"px",o.style["margin-left"]=(m+5)*n+"px",d.appendChild(o)):!function(){var i=function(){u.innerHTML=t[o],u.style.left=(m-u.clientWidth)/2+"px"};o=n,d.className="igc-tabs igc-tabs-dropdown";var r=document.createElement("div");r.className="igc-tab-switcher igicon-right",a(r),r.addEventListener("click",function(){o=o===t.length-1?0:o+1,s.setAttribute("data-value",o),l.value=o,s.click(),i()}),m=$(e).width()-88;var s=document.createElement("div");s.className="igc-tab igicon-sort-down",s.setAttribute("data-value",t[0]),s.style.width=m+"px";var l=document.createElement("select");l.className="igc-tab-content igc-tab-select",t.forEach(function(t,e){var n=document.createElement("option");n.innerHTML=t,n.value=e,l.appendChild(n)}),l.addEventListener("change",function(t){o=parseInt(t.target.value,10),s.setAttribute("data-value",o),s.click(),i(),g.hide()}),s.appendChild(l);var u=document.createElement("div");u.className="igc-tab-name",s.appendChild(u),d.appendChild(s),i();var c=document.createElement("div");c.className="igc-tab-switcher igicon-left",c.addEventListener("click",function(){o=o>0?o-1:t.length-1,s.setAttribute("data-value",o),l.value=o,s.click(),i()}),a(c),l.addEventListener("mousemove",function(e){u.clientWidth>=m-p&&g.setOptions({text:t[o],pos:{x:e.pageX,y:e.pageY},value:""})}),l.addEventListener("mouseout",function(){g.hide()})}()},createRadioButtons:function(t,e){var o=arguments.length<=2||void 0===arguments[2]?0:arguments[2];$(e).remove(".igc-sheets");var i=n(524);if(t.length>1){var r={radiobuttons:t,sheet:o},a=_.template(i)(r);$(e).prepend(a)}}};e["default"]=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){k.duration.x=P,t.each(function(){if(w.length){var t=d3.select(this),r=d["default"][i.Shapes(T)];D=y.rangeBand();var s=[];w.forEach(function(t,e){var n=s[e]={};n[b]=t[b],n[b+"Label"]=t[b+"Label"],n[x]=t[x],n[x+"Label"]=t[x],n.height=D,n.width=v(t[b])-v(0),n[b+"Pos"]=Math.round(v(0)+(n.width>0?1:0)),n[x+"Pos"]=y(e),n.color=t.color,n.index=e});var l=t.selectAll("path");l.transition().duration(0),t.selectAll("text").remove();var c=[];l.each(function(t){var e=_.merge({},t);c.push(e)}),0===c.length&&(c=s.map(function(t){var e=_.merge({},t);return e.width=0,e})),n(c,s),I=function(){h(t,c)};var p=t.selectAll("path").data(c),f=p.enter(),g=c[0];a(g);var m=0===p.size()&&p.size()<f.size(),S=k.duration;m?(f.call(u,r),I()):p.transition().duration(S.x).attrTween("d",o(function(t){var e={};return e[b+"Pos"]=t.next[b+"Pos"],e.width=t.next.width,e})).transition().duration(S.y).each("start",function(){M.update++}).attrTween("d",o(function(t){return t.next})).each("end",function(){0===--M.update&&(e(p),f.call(u,r),I())}),p.exit().remove(),p.style("stroke-width",0).style("fill",function(t){return t.next.color})}})}function e(t){t.on("mousemove",function(t){var e,n,o=(0,f.getMousePosition)(d3.event);e=A(t),n=N(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color)}).on("mouseout",function(){(0,s["default"])().hide()})}function n(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o[b]=e[b],o[b+"Label"]=e[b+"Label"],o[x]=e[x],o[x+"Label"]=e[x+"Label"],o.width=0,o.height=e.height,o[b+"Pos"]=e[b+"Pos"],o[x+"Pos"]=e[x+"Pos"],o.color=e.color,o.index=e.index}})}function o(t){var e=function(t){return null===t[x]?"":d["default"][i.Shapes(T)](t.xPos,t.yPos,t.width,t.height,0)};return function(n,o){var i=t.call(this,n,o);o=d3.interpolate(n,i);for(var r in i)n[r]=i[r];return function(t){return e(o(t))}}}function a(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={y:["yPos","height"]};if(t){n=t.next;for(o in k.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&(k.duration[o]=0))}}function u(t,n){var i=t.append("path");i.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return n(t.xPos,t.yPos,t.width,0,0)}),i.transition().duration(P).ease("elastic").delay(O).attrTween("d",o(function(t){return t.next})).each("start",function(){M.enter++}).each("end",function(){0===--M.enter&&e(i)})}function h(t,n){var o=n.map(function(t){return m?m.value(t.next.xLabel):""+t.next.xLabel}),r=(0,f.getAllTextDimensions)(o,t,E),a=d3.max(r,function(t){return t.height}),s=S&&D>=a,u=[];s&&(u=i.prepareTextData(n,r,E,2,v,C)),u.length&&s||L.animationEnd();var c=t.selectAll("text").data(u),h=c.enter().append("text");c.exit().remove(),c.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return m?m.value(t.text):t.text}).style("cursor","default").style(E).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),c.transition().duration(k.duration.text).style("opacity",1).each("start",function(){M.text++}).each("end",function(){0===--M.text&&L.animationEnd()}),e(h.filter(function(t){return t.inside}))}var p,g,m,v=d3.scale.linear(),y=d3.scale.linear(),b="x0",x="y0",w=[],S=!0,C=!1,E=c["default"].prototype.defaults().style.axisTick,T="bar-bar",k={duration:{x:700,y:400,text:50}},M={enter:0,update:0,text:0},O=0,I=function(){},P=700,L=d3.dispatch("animationEnd"),D=0,A=function(t){return t.x},N=function(t){return t.y},B={scaleX:function(e){return arguments.length?(v=e.copy(),t):v},scaleY:function(e){return arguments.length?(y=e.copy(),t):y},pX:function(e){return arguments.length?(b=e,t):b},pY:function(e){return arguments.length?(x=e,t):x},data:function(e){return arguments.length?(w=e,t):w},groupId:function(e){return arguments.length?(g=e,t):g},chartId:function(e){return arguments.length?(p=e,t):p},dispatch:function(){return L},valuesOutside:function(e){return arguments.length?(C=!!e,t):C},showValues:function(e){return arguments.length?(S=!!e,t):S},textStyle:function(e){return arguments.length?(E=e,t):E},shape:function(e){return arguments.length?(void 0!==i.Shapes(e)&&(T=e),t):T},tooltipText:function(e){return arguments.length?(A=e,t):A},tooltipValue:function(e){return arguments.length?(N=e,t):N},transitionDelay:function(e){return arguments.length?(O=e,t):O},transitionDuration:function(e){return arguments.length?(P=e,t):P},numberFormat:function(e){return arguments.length?(m=e,t):m}};return(0,r.injectFunctions)(t,B),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(66),p=n(138),d=o(p),f=n(22);i.Shapes=function(t){var e={"bar-bar":"barToRight","bar-bow":"bowToRight","bar-triangle":"triangleToRight","bar-curve":"curveToRight"};return e[t]},i.createTweenShape=function(t){return function(e){return null===e[t]?"":d["default"].barToRight(e.xPos,e.yPos,e.width,e.height,0)}},i.prepareTextData=function(t,e,n,o,i,r){var a=[],s=d3.max(i.range());return t.forEach(function(t,i){var l=t.next;if(null!==l.y){var u={},c=l.xPos,p=c,d="start",f=s-c,g=c,m=-1,v=!0,y=e[i],b=y.width,_=b+o,x=Math.round(Math.abs(l.width)),w=!r&&x>_;l.x<0&&(d="end",g=f,f=c,m=1),w?p-=m*o:f>=x+_?p-=m*(x+o):g>=_?(p+=m*o,d="end"===d?"start":"end"):v=!1,v&&(u.inside=w,u.fillColor=w?h.Colors.getContrastYIQ(l.color,n.color):n.color,u.textX=p,u.textY=l.yPos+l.height/2+.25*y.height,u.textAnchor=d,u.text=l.xLabel,u.index=i,u.seriesIdx=l.seriesIdx,u.yLabel=l.yLabel,u.xLabel=l.xLabel,u.groupLabel=l.groupLabel,u.color=l.color,a.push(u))}}),a}},function(t,e,n){"use strict";var o=n(7),i=function(t){var e,n={};t instanceof Object&&!Array.isArray(t)?void 0:o(!1);for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};t.exports=i},function(t,e){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},o={getHostProps:function(t,e){if(!e.disabled)return e;var o={};for(var i in e)!n[i]&&e.hasOwnProperty(i)&&(o[i]=e[i]);return o}};t.exports=o},function(t,e,n){"use strict";function o(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=f++,p[t[m]]={}),p[t[m]]}var i,r=n(32),a=n(127),s=n(435),l=n(838),u=n(541),c=n(626),h=n(452),p={},d=!1,f=0,g={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=r({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=o(n),r=s.registrationNameDependencies[t],l=a.topLevelTypes,u=0;u<r.length;u++){var c=r[u];i.hasOwnProperty(c)&&i[c]||(c===l.topWheel?h("wheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):h("mousewheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?h("scroll",!0)?v.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(h("focus",!0)?(v.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):h("focusin")&&(v.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),i[l.topBlur]=!0,i[l.topFocus]=!0):g.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,g[c],n),i[c]=!0)}},trapBubbledEvent:function(t,e,n){return v.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return v.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!i&&!d){var t=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),d=!0}}});t.exports=v},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(199),r=n(541),a=n(450),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+r.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+r.currentScrollTop}};i.augmentClass(o,s),t.exports=o},function(t,e){"use strict";function n(t){var e=""+t,n=i.exec(e);if(!n)return e;var o,r="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#x27;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}s!==a&&(r+=e.substring(s,a)),s=a+1,r+=o}return s!==a?r+e.substring(s,a):r}function o(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var i=/["'&<>]/;t.exports=o},function(t,e,n){"use strict";var o,i=n(75),r=n(434),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(448),u=l(function(t,e){
if(t.namespaceURI!==r.svg||"innerHTML"in t)t.innerHTML=e;else{o=o||document.createElement("div"),o.innerHTML="<svg>"+e+"</svg>";for(var n=o.firstChild.childNodes,i=0;i<n.length;i++)t.appendChild(n[i])}});if(i.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),c=null}t.exports=u},function(t,e){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=n},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(10),l={items:(0,s.Set)(),blocks:(0,s.Set)()},u=(0,s.Record)(l),c=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"getEntities",value:function(){return this.get("items")}},{key:"getBlocks",value:function(){return this.get("blocks")}},{key:"isEmpty",value:function(){return this.getEntities().isEmpty()}},{key:"hasNoBlocks",value:function(){return this.getBlocks().isEmpty()}},{key:"containsEntity",value:function(t){return this.getEntities().contains(t)}},{key:"containsBlock",value:function(t){return this.getBlocks().contains(t)}}],[{key:"createEmpty",value:function(){return new e}},{key:"singleItem",value:function(t){return e.createFromArray([t])}},{key:"createFromArray",value:function(t){return new e({items:(0,s.Set)(t)})}}]),e}(u);e["default"]=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){var n=t.getCurrentSelection(),o=n.getEntities();if(o.isEmpty())return t;var i=t.getCurrentContent(),r=i.getBlocks();return o.forEach(function(t){var n=i.getEntity(t);if(!n)throw new Error("No entity can be found by key "+t);var o=n.getBlockKey(),a=i.getBlock(o);if(!a)throw new Error("No block can be found by key "+t+"}");var s=i.getBlocks().indexOf(a),l=a.getEntities(),u=l.indexOf(t);if(-1===u)throw new Error("No entity is actually present in entities collection: "+t);l=e(l,u),a=a.set("entities",l),r=r.set(s,a)}),m["default"].set(t,{currentContent:i.set("blocks",r)})}function a(t){return t=m["default"].push(t,t.getCurrentContent()),r(t,function(t,e){var n=t.get(e);return(0,C.List)(t.splice(e,1)).push(n)})}function s(t){return t=m["default"].push(t,t.getCurrentContent()),r(t,function(t,e){var n=t.get(e);return(0,C.List)(t.splice(e,1)).unshift(n)})}function l(t,e,n){var o=t.getCurrentContent(),i=o.getBlocks(),r=i.get(n.blockIndex);if(!r)throw new Error("Cannot find requested block by index "+n.blockIndex);var a=_["default"].fromRawEntity(e,r.getKey());return t=m["default"].push(t,t.getCurrentContent()),(0,I["default"])(t,a)}function u(t){var e=t.getCurrentSelection();if(e.isEmpty())return t;t=m["default"].push(t,t.getCurrentContent());var n=Array.from(e.getEntities()).map(function(e){var n=t.getEntity(e);return _["default"].set(n,{key:(0,M["default"])("entity"),top:n.getTop()+P,left:n.getLeft()+P})});return I["default"].apply(void 0,[t].concat(i(n)))}function c(t){var e=t.getHiddenEntityKeys().union(t.getCurrentSelection().getEntities());return m["default"].set(t,{hiddenEntityKeys:e})}function h(t){var e=t.getHiddenEntityKeys().subtract(t.getCurrentSelection().getEntities());return m["default"].set(t,{hiddenEntityKeys:e})}function p(t){t=m["default"].push(t,t.getCurrentContent());var e=t.getCurrentContent().get("entities");return t=r(t,function(t,n){return e=e.remove(t.get(n)),(0,C.List)(t.splice(n,1))}),t=m["default"].set(t,{currentContent:t.getCurrentContent().set("entities",e)}),w["default"].clear(t)}function d(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];o=o||{};var i=o.force||!1,r=t.getCurrentContent(),a=t.getCurrentSelection(),s=t.getActiveEntities(),l=t.getPageSize(),u=t.getEditorConfiguration(),c=(u.get("snapToGridThreshold"),u.get("gridSize"),u.get("blockSpacing")),h=l.screenHeight+c;if(a.getEntities().forEach(function(o){var i=s.get(o),a=i.bounds(),c=a.left+e,p=a.top+n,d=a.height/2,f=i.getBlockKey(),g=r.getBlockIndex(f),v=0;0>p+d&&g>0?v=-1:p+d>h&&g<r.getBlocks().size&&(v=1);var y={};if(v){var b=(a.top-i.getTop())*v,_=g+v,x=r.getBlocks().get(_);p=v>0?p-l.screenHeight-u.get("blockSpacing"):l.screenHeight+u.get("blockSpacing")-p-i.getHeight(),i=i.merge({blockKey:x.getKey(),top:p-n-b}),s=s.set(i.getKey(),i),y.blockKey=i.getBlockKey(),y.top=p-b;var w=r.getBlock(f),S=w.getEntities().indexOf(i.getKey());w=w.set("entities",w.getEntities().splice(S,1)),x=x.set("entities",x.getEntities().push(i.getKey())),r=r.set("blocks",r.getBlocks().set(g,w).set(_,x)),t=m["default"].set(t,{activeEntities:s,currentContent:r})}y.left=i.getLeft()+c-a.left,y.top=i.getTop()+p-a.top,t=m["default"].setEntity(t,o,y,!1)}),i){var p=t.getActiveEntities().map(function(e,n){return t.getEntity(n)});t=m["default"].set(t,{activeEntities:p})}else if(u.get("displayGrid")&&o.direction){var d=(0,T["default"])(t,o.direction);if(!d)return t;var f=d.dx,g=d.dy;if(0!==f||0!==g){var v=!0,y=!1,b=void 0;try{for(var _,x=a.getEntities()[Symbol.iterator]();!(v=(_=x.next()).done);v=!0){var w=_.value,S=t.getEntity(w);t=m["default"].setEntity(t,w,{left:S.getLeft()+f,top:S.getTop()+g},!1)}}catch(C){y=!0,b=C}finally{try{!v&&x["return"]&&x["return"]()}finally{if(y)throw b}}}}return t}function f(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e=e||{};var n=t.getCurrentContent(),o=n.getBlocks(),i="number"==typeof e.blockIndex?e.blockIndex:o.size,r=y["default"].create();return o=o.splice(i,0,r),n=n.set("blocks",o),m["default"].set(t,{currentContent:n})}Object.defineProperty(e,"__esModule",{value:!0}),e.bringToFront=a,e.sendToBack=s,e.addEntity=l,e.duplicateEntities=u,e.hideEntities=c,e.unhideEntities=h,e.removeEntities=p,e.moveEntitiesBy=d,e.insertBlock=f;var g=n(47),m=o(g),v=n(142),y=o(v),b=n(92),_=o(b),x=n(172),w=o(x),S=n(459),C=(o(S),n(10)),E=n(901),T=o(E),k=n(205),M=o(k),O=n(571),I=o(O),P=20},function(t,e){"use strict";var n="-",o={encode:function(t,e,o){return t+n+e+n+o},decode:function(t){var e=t.split(n),o=e[0],i=e[1],r=e[2];return{blockKey:o,decoratorKey:parseInt(i,10),leafKey:parseInt(r,10)}}};t.exports=o},function(t,e){"use strict";function n(t,e,n,o){if(t.size){var i=0;t.reduce(function(t,r,a){return e(t,r)||(n(t)&&o(i,a),i=a),r}),n(t.last())&&o(i,t.count())}}t.exports=n},function(t,e,n){"use strict";function o(t,e){var n=e.getStartKey(),o=e.getStartOffset(),a=e.getEndKey(),s=e.getEndOffset(),l=r(t,e),u=l.getBlockMap(),c=u.keySeq(),h=c.indexOf(n),p=c.indexOf(a)+1,d=u.slice(h,p).map(function(t,e){var r=i(),l=t.getText(),u=t.getCharacterList();return n===a?t.merge({key:r,text:l.slice(o,s),characterList:u.slice(o,s)}):e===n?t.merge({key:r,text:l.slice(o),characterList:u.slice(o)}):e===a?t.merge({key:r,text:l.slice(0,s),characterList:u.slice(0,s)}):t.set("key",r)});return d.toOrderedMap()}var i=n(124),r=n(591);t.exports=o},,,function(t,e,n){"use strict";var o;o=function(){var t=function(){document.referrer&&-1===document.referrer.indexOf("infogr.am")&&$.cookie("_initial_referrer",document.referrer);var t=$.cookie("_paths")||"",e=t.split(","),n=window.location.href.split("?")[0];e[e.length-1]!==n&&e.push(n),e=e.filter(Boolean),$.cookie("_paths",e.join(","),{domain:".infogr.am",path:"/",expires:30})};return t}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},,,function(t,e,n){"use strict";var o,i=n(25);o=function(t){Raphael.el.unbindAll=function(){for(;this.events&&this.events.length;){var t=this.events.pop();t.unbind()}};var e={Helper:{},Visuals:{},ChartData:{},ChartClasses:{}};return window.InfoCharts=e,e.tooltip=function(){return(0,i.getTooltip)()},e.Mixins=n(685),e.Container=n(682),e.Helper.Data=n(683),e.Helper.Misc=n(684),e.Visuals.Hierarchy=n(694),e.Visuals.Progress=n(702),e.Visuals.SemiCircle=n(705),e.Visuals.PictoBar=n(698),e.Visuals.Radial=n(703),e.Visuals.DateTime=n(691),e.Visuals.Histogram=n(504),e.Visuals.Waterfall=n(714),e.Visuals.Candle=n(688),e.Visuals.Wordcloud=n(715),e.Visuals.Pictosize=n(700),e.Visuals.Pictogrid=n(699),e.Visuals.Pie=n(701),e.Visuals.Treemap=n(711),e.Visuals.Gauge=n(692),e.Visuals.Bubble=n(687),e.Visuals.Area=n(686),e.Visuals.StackedLines=n(708),e.Visuals.StackedArea=n(707),e.Visuals.Streamgraph=n(505),e.Visuals.Lines=n(424),e.Visuals.HorizontalStackBars=n(696),e.Visuals.VerticalStackBars=n(713),e.Visuals.HorizontalBars=n(695),e.Visuals.VerticalBars=n(712),e.Visuals.categoriesHorizontal=n(690),e.Visuals.categories=n(689),e.Visuals.Grid=n(693),e.Visuals.TextWrapper=n(710),e.Visuals.Wrapper=n(716),e.Visuals.Text=n(709),e.Visuals.RadioButtons=n(704),e.Visuals.ShapeGenerator=n(706),e.Visuals.Legend=n(697),e}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(499),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(){this.instanceClass=i.Charts.ColumnStacked,this.instanceType="column-stacked",this.setupChartSheetOptionsItem=function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},grid:{vertical:!1,horizontal:!0},axis:[{},{}],legend:{enabled:!0}};t.categoryWidthAuto||(e.categories.categoryWidth=t.categoryWidth||this.defaultCategoryWidth);var n=e.axis[1];return n.showValues=t.showInLineValues===!0,n.title=t.ylabel||"",e.axis[0].title=t.xlabel||"",t.showLabels===!1&&(e.legend.enabled=!1),"number"==typeof t.ymin&&(n.minLimit=t.ymin),"number"==typeof t.ymax&&(n.maxLimit=t.ymax),t.grid===!1&&(e.grid.vertical=!1,e.grid.horizontal=!1),this.assignNumberFormatValues(n,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(s)},function(t,e){"use strict";function n(t,e){return function(n){return t(n,e)}}function o(t,e){e=","===e?",":".";var o=i[t]||i.firstNumber;return n(o,e)}Object.defineProperty(e,"__esModule",{value:!0});var i={firstNumber:function(t){var e=arguments.length<=1||void 0===arguments[1]?".":arguments[1],n=1;if("string"==typeof t){var o=[],i=t.search(/\d/),r=i-1,a=t.indexOf(e);if(-1===a&&(a=t.length),i>a){if(t[r]===e){var s=t.slice(r,t.length),l=s.split(/(\d+)/);return l[0]===e&&l[1]&&o.push("."+l[1]),"-"===t[a-1]&&(n=-1),parseFloat(o.join(""))*n}a=t.length}"-"===t[r]&&(n=-1);for(var u,c=t.slice(i,a),h=1,p=/^[\\., ]$/,d=c.split(/(\d+)/),f=d.length;f>h;h++){var g=d[h],m=/\d/.test(g);if(m)if(1===h){if(o.push(g),g.length>3)break}else{if(3!==g.length)break;o.push(g)}else{if(!p.test(g))break;if(u||(u=g),u!==g)break}}if(o.join(" ").length===c.length){var v=t.slice(a,t.length),y=v.split(/(\d+)/);y[0]===e&&y[1]&&o.push("."+y[1])}t=o.join("")}return parseFloat(t)*n},legacy:function(t){var e=1;return"string"==typeof t&&(e="-"===t[0]?-1:1,-1!==t.indexOf(",")&&(t=t.replace(/,/g,".")),t=t.replace(/\.(?![^.]+$)/g,""),t=t.replace(/[^0-9\.]/g,"")),parseFloat(t)*e}};e["default"]=o},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={smooth:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,showPoints:!0,showLines:!0,showArea:!1,stacked:!1,tooltipForLines:!0,tooltipForPoints:!0,absoluteDistribution:!1,complexAnimations:!1,complexAnimationPower:2,complexAnimationDraw:!1,gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-opacity":0,"stroke-width":0,stroke:"none"},pathStyle:{"stroke-width":4,"stroke-linejoin":"round","stroke-linecap":"round","fill-opacity":1},circleStyle:{"stroke-width":1.5,fill:"#FFFFFF",r:4,shape:"circle"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridOptions:{}},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.gridDef=null,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.options.smooth&&(e.options.complexAnimations=!1),e},e.state={currentState:{line:{path:null,attr:null},points:[]},newState:{line:{path:null,attr:null},points:[]},minMax:null,interactionsEnabled:!1,axesTitle:null},e._loadDataActual=function(t,n,o,i,r){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=InfoCharts.Helper.Data.getGroups(e.data);n=n||a[0]||null;var s=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var l=0,u=e.root.getCenter();if(o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&a.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),a),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:u.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var c=InfoCharts.Helper.Data.getLabelsUniq(s);c.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),c),l=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,l+e.root.options.additionalHeight),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2+e.options.panelMarginY}),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var h=0,p=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(h=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(p=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.background.attr({x:0+h,y:e.buttonHeight,width:e.root.options.canvasWidth-h*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:e.root.options.canvasHeight-e.buttonHeight-l-p}),e.background.bb=e.background.getBBox(),h&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:h/2,y:e.background.bb.y+e.background.bb.height/2})),p&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+p/2}));var d=null;e.options.stacked?(e.options.hasGroups&&e.options.absoluteDistribution?o&&(e.state.minMax={min:NaN,max:NaN},_.each(a,function(t){var n;n=InfoCharts.Helper.Data.copyDataArray(_.filter(e.data,function(e){return e.group==t})),n=InfoCharts.Helper.Data.transformStackedPoints(n,e.options._gridOptions.gridDef?e.options._gridOptions.gridDef[0]:null),e.state.minMax.max=isNaN(e.state.minMax.max)?n.minMax.max:Math.max(e.state.minMax.max,n.minMax.max),e.state.minMax.min=isNaN(e.state.minMax.min)?n.minMax.min:Math.min(e.state.minMax.min,n.minMax.min)})):e.state.minMax=null,d=InfoCharts.Helper.Data.copyDataArray(s),d=InfoCharts.Helper.Data.transformStackedPoints(d,e.options._gridOptions.gridDef?e.options._gridOptions.gridDef[0]:null),e.state.minMax=e.state.minMax||d.minMax):(d={},d.minMax={min:NaN,max:NaN},e.state.minMax=d.minMax),e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[h,e.buttonHeight],size:[e.root.options.canvasWidthDefault-h*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-l-p],offset:[{start:0,end:0},{start:0,end:0}],minMax:[{min:NaN,max:NaN},e.state.minMax],canResize:!1}),e.options.absoluteDistribution?e.data:s),d.data&&(s=d.data),e.grid.createGrid();var f=null,g=null,m=null,v=0,y=null,b=null,x="M",w=null,S=e.root.paper.set(),C=e.grid.getGridPositionBase();e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var E=[],T=[];e.onmouseoutFuncList=[];var k,M,O,I,P,L=0,D=0,A=0;for(k=0;k<s.length;k++){v=0,g=[],b=[],y=e.root.paper.set();for(var N=0;N<s[k].value.length;N++){if(x="M",e.options.complexAnimations)for(M=0;M<s[k].value[N].length;M++)A+=Math.pow(M+1,e.options.complexAnimationPower);for(var B=0;B<s[k].value[N].length;B++){if(f=e.options.stacked?e.grid.getGridPosition(s[k].value[N][B]):e.grid.getValuePosition(s[k].value[N][B]),s[k].value[N]&&s[k].value[N][B]&&s[k].value[N][B][3]&&(f[1].data.valueRaw=s[k].value[N][B][3]),e.options.showLines&&e.options.showArea&&0===B&&(g[v]=[x,f[0].value,C[1].value],e.root.options.canAnimate&&(b[v]=[x,f[0].value,C[1].value]),v++,x="L"),e.options.showLines&&(g[v]=[x,f[0].value,f[1].value],e.root.options.canAnimate&&(b[v]=[x,f[0].value,C[1].value])),e.options.complexAnimations&&(D=1.5*e.root.options.animationDuration/A*Math.pow(B+1,e.options.complexAnimationPower)),e.options.showPoints&&!s[k].value[N][B][2]){var j;if(e.root.options.canAnimate?e.options.complexAnimations?(w=e.root.paper.circle(f[0].value,f[1].value,0).attr({opacity:0}),E.push({obj:w,anim:Raphael.animation({opacity:1},0,D).delay(L)})):("circle"==e.options.circleStyle.shape?w=e.root.paper.circle(f[0].value,C[1].value,0):(w=e.root.paper.path(InfoCharts.Visuals.ShapeGenerator.Path[e.options.circleStyle.shape+"Path"].path),j=w.getBBox(),w.transform(["T",f[0].value-j.width/2,C[1].value-j.height/2])),e.options.showLines?"circle"==e.options.circleStyle.shape?E.push({obj:w,anim:Raphael.animation({cx:f[0].value,cy:f[1].value},e.root.options.animationDuration,e.root.options.animationStyle)}):(j=w.getBBox(),E.push({obj:w,anim:Raphael.animation({transform:"T"+(f[0].value-j.width/2)+","+(f[1].value-j.width/2)},e.root.options.animationDuration,e.root.options.animationStyle)})):E.push({obj:w,anim:Raphael.animation({cx:f[0].value,cy:+f[1].value,transform:"t0,-"+(f[1].value-f[1].baseline)},e.root.options.animationDuration,e.root.options.animationStyle).delay(e.root.options.animationDuration/s[k].value[N].length*B)})):"circle"==e.options.circleStyle.shape?w=e.root.paper.circle(f[0].value,f[1].value,0):(w=e.root.paper.path(InfoCharts.Visuals.ShapeGenerator.Path[e.options.circleStyle.shape+"Path"].path),j=w.getBBox(),w.transform(["T",f[0].value-j.width/2,f[1].value-j.height/2])),e.options.tooltipForPoints){var R=f[1].data.valueString;f[1].data.valueRaw?R=f[1].data.valueRaw:e.options._gridOptions.invert&&(R=-1*parseFloat(R)),O=e.options.stacked?{data:{objectId:s[k].objectId,name:s[k].name,valueString:s[k].valueString+" ("+s[k].originalValue[N][B][0]+" | "+s[k].originalValue[N][B][1]+")"},path:e.root.paper.set().push(w)}:{data:{objectId:s[k].objectId,name:s[k].name,valueString:s[k].valueString+" ("+f[0].data.valueString+" | "+R+")"},path:e.root.paper.set().push(w)},I=$.proxy(e.eventing.onMouseOver,O),P=$.proxy(e.eventing.onMouseOut,O),e.onmouseoutFuncList.push(P),w.mouseover(I),w.mousemove($.proxy(e.eventing.onMouseMove,O)),w.mouseout(P),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+O.data.objectId,I),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+O.data.objectId,P))}y.push(w)}L+=D,e.options.showLines&&e.options.showArea&&B==s[k].value[N].length-1&&(v++,g[v]=["L",f[0].value,C[1].value],e.root.options.canAnimate&&(b[v]=["L",f[0].value,C[1].value])),v++,x="LL"}}var H=e.root.paper.set();if(g=InfoCharts.Helper.Misc.linePathToCurvedPath(g,e.root,!1,e.options.smooth),b=InfoCharts.Helper.Misc.linePathToCurvedPath(b,e.root,!1,e.options.smooth),g.length>=2){if(e.root.options.canAnimate)if(e.options.complexAnimations){m=e.root.paper.path(g.slice(0,1)),L=0,D=0,A=0;var F=null,z=null;for(M=1;M<=g.length;M++)A+=Math.pow(M,e.options.complexAnimationPower);for(var V=1,U=g.length;U>=V;V++)D=1.5*e.root.options.animationDuration/A*Math.pow(V,e.options.complexAnimationPower),e.options.complexAnimationDraw&&!e.options.showArea?(F=g.slice(0,V),z=g.slice(0,V)):(F=g.slice(0,V)+b.slice(V,b.length),z=g.slice(0,V)+b.slice(V,b.length)),T.push({obj:m,anim:Raphael.animation({path:F},D,e.root.options.animationStyle).delay(L),state:{path:z}}),L+=D}else m=e.root.paper.path(b),E.push({obj:m,anim:Raphael.animation({path:g},e.root.options.animationDuration,e.root.options.animationStyle)});else m=e.root.paper.path(g);e.options.showLines&&e.options.showArea?m.attr($.extend({stroke:s[k].color,fill:s[k].color},e.options.pathStyle)):m.attr($.extend({stroke:s[k].color},e.options.pathStyle)),e.visualSet.push(m),H.push(m),O={data:{name:s[k].name,valueString:s[k].valueString,objectId:s[k].objectId},path:H},I=$.proxy(e.eventing.onMouseOver,O),P=$.proxy(e.eventing.onMouseOut,O),e.onmouseoutFuncList.push(P),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+O.data.objectId,I),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+O.data.objectId,P)),e.options.showLines&&(e.options.tooltipForLines&&!e.options.tooltipForPoints?(H.mouseover(I),H.mousemove($.proxy(e.eventing.onMouseMove,O)),H.mouseout(P)):e.options.tooltipForLines&&(m.mouseover(I),m.mousemove($.proxy(e.eventing.onMouseMove,O)),m.mouseout(P)))}e.options.showPoints&&("circle"==e.options.circleStyle.shape?y.attr($.extend({stroke:s[k].color,fill:s[k].color},e.options.circleStyle)):y.attr($.extend(e.options.circleStyle,{stroke:s[k].color,fill:s[k].color})),e.visualSet.push(y),H.push(y),S.push(y))}e.grid.postDisplayMods(e.options.gridPostOptions),S.toFront(),e.root.resizeHeight(e.buttonHeight,l+e.root.options.additionalHeight),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2});var W=0;for(k=0;k<E.length;k++)E[k].obj.stop(),E[k].obj.animate(E[k].anim),W=Math.max(W,E[k].anim.ms+E[k].anim.del);for(k=0;k<T.length;k++)T[k].obj.animate(T[k].anim),T[k].obj.attr(T[k].state),W=Math.max(W,T[k].anim.ms+T[k].anim.del);e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),setTimeout(function(){e.state.interactionsEnabled=!0},W),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path[0].attr("stroke"),e.options.showTooltip&&t&&(e.tooltip=Infogram.Charts.tooltip,e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return"number"==typeof t[1]&&"number"==typeof t[0]?Math.abs(t[1]-t[0]):1/0}function r(t,e,n,o){var r=h.getAllTextDimensions(e,t,o).max,a=i(n)-4;return r.width>a?{width:r.height,height:r.width,position:"vertical"}:{width:r.width,height:r.height,position:"horizontal"}}function a(t,e,n,o,r){var a={width:0,height:0,baseLineOffset:0,position:"horizontal"},s=h.getAllTextDimensions(e,t,o).max;Object.assign(a,s);var l=i(n)-4,c=s.width<=l;if(c)return a;a.position="vertical";var d=t.selectAll(".fm-text-tick").data(e);return d.enter().append("text").attr("class","fm-text-tick"),d.style(o),d.text(function(t){return t}).attr({x:0,y:0,"text-anchor":"end",opacity:u.eps}),p.Text.wrap(d,r,s.height),a.height=d3.max(d,function(t){return d3.max(t,function(t){return t.getBBox().width})}),a.width=d3.max(d,function(t){return d3.max(t,function(t){return t.getBBox().height})}),d.remove(),a}function s(t,e,n){var o,i=t.length,r=0;if(0===i)return r;n=-1===n?-1:1;var a=t[0];if(-1===n&&(a=t[i-1]),a+=n*e,-1===n)for(o=i-2;-1!==o&&t[o]>a;)r++,o--;else for(o=1;i>o&&t[o]<a;o++)r++;return r}function l(t,e,n,o){var i=t.length;o=-1===o?-1:1;var r=[],a=[],s=[];if(!i)return{range:r,domain:a,domainIndex:s};var l,u=0;if(-1===o)for(r.push(t[i-1]),a.push(e[i-1]),s.push(i-1),l=i-2;-1!==l;)u===n?(r.push(t[l]),a.push(e[l]),s.push(l),u=0):u++,l--;else for(r.push(t[0]),a.push(e[0]),s.push(0),l=1;i>l;l++)u!==n?u++:(r.push(t[l]),a.push(e[l]),s.push(l),u=0);return{range:r,domain:a,domainIndex:s}}Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeStep=i,e.getProvisionedDimensions=r,e.measureTextDimensions=a,e.getStepsInRange=s,e.filterToFit=l;var u=n(48),c=n(22),h=o(c),p=n(66)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function c(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:c(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},l=n(170),u=n(180);e.Area=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"emptySheetData",value:function(){return _.merge({},s(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{type:"area"}]})}},{key:"defaults",value:function(){return _.merge({},s(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:5,dataPoints:!1,data:"separate"}})}},{key:"renderGraphs",value:function(t,n){var o=function(t){t.forEach(function(t){t.data.forEach(function(t){t.y0=0})})};s(Object.getPrototypeOf(e.prototype),"renderGraphs",this).call(this,t,n,function(t){return o(t.graphs),t.graphs})}},{key:"graphInstanceSetup",value:function(t,n,o,i){s(Object.getPrototypeOf(e.prototype),"graphInstanceSetup",this).apply(this,arguments),t.bounds(i.bounds).offset(i.offset)}},{key:"renderDataPoints",value:function(t,e){var n=this.chartId,o=this.numberFormatY;return e.showOnlyClosest||!e.enabled?void e.animationEnd():(t.selectAll(".igc-graph-group").each(function(){d3.select(this).selectAll(".igc-graph").each(function(t,e){var i=t.graphs[e],r=(0,u.Circle)().scaleX(t.x).scaleY(t.y).data(i.data).pX("x").pY("y").colors(i.colors).groupId(e).chartId(n).filterFn(function(t){return null!==t.y}).className("igc-data-point-area").legend(t.legend).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){return t.xLabel+": "+o.tooltip(t.yLabel)}).animate(!1);d3.select(this).call(r)})}),void e.animationEnd())}},{key:"getSheetsSeriesDomain",value:function(t){var e;return this.options.sheets.forEach(function(n,o){var i=_.merge({},this.emptySheetData(),n),r=this.prepareSheetData(i),a=t.call(this,r.graphs,!1);0===o?e=a.slice(0):(e[0]=Math.min(a[0],e[0]),e[1]=Math.max(a[1],e[1]))},this),e}},{key:"getDomain",value:function(){return"absolute"===this.options.series.data?this.getSheetsSeriesDomain(s(Object.getPrototypeOf(e.prototype),"getDomain",this)):s(Object.getPrototypeOf(e.prototype),"getDomain",this).apply(this,arguments)}}]),e}(l.Line)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function w(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:w(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(66),y=n(22),b=o(y),x=n(15);
e.Bar=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.options;if(this.detectDimensions(),this.renderSheetSwitch({width:e.width}),e.sheets&&e.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var n,o={top:0,right:0,bottom:0,left:0},i={left:0,right:0,top:0,bottom:0},r={left:0,right:0},a=this.getSheetData(),s=this.prepareSheetData(a),l=s[0],u={maxLeftCategoryWidth:0,maxLeftCategoryHeight:0},c={top:0,right:10,bottom:0,left:0},h=this.createAnimationCounter(l.graphs.length+2);this.setupNumberFormatter(a),a.categories.categoryHeight&&(n=Number(a.categories.categoryHeight)),l.graphs[0].data=l.graphs[0].data.filter(function(t){return null!==t.x});var p=l.graphs[0].data.map(function(t){return t.y});if(p.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var f=this.renderGraphs.bind(this),y=this.renderPart.bind(this),_=a.axis[1]&&a.axis[1].title;_&&(i.left=b.getTextDimensions(_,this.svg).height+10);var x=a.axis[0]&&a.axis[0].title;x&&(i.bottom=b.getTextDimensions(x,this.svg).height+10);var w={width:0,height:0};if(l.ticks){var S=["0123456789,."+this.numberFormatX.tick(1e3)];w=b.getTextDimensions(S,this.svg,e.style.axisTick),w.height=Math.min(w.height,30)}var C=e.width-o.left-i.left-o.right-i.right,E=e.height-o.top-i.top-o.bottom-i.bottom,T=.1,k=.1,M=d3.range(0,p.length),O=d3.scale.ordinal().domain(M);if(n){var I=10;for(O.rangeBands([0,I-(w.height+5)],k,T);O.rangeBand()-n<0;)I+=1,O.rangeBands([0,I-(w.height+5)],k,T);I-=1,e.height=I+o.top+i.top+o.bottom+i.bottom,E=I}O.rangeBands([0,E-(w.height+5)],k,T);var P=C-r.left-r.right,L=this.getDomain(l.graphs);"absolute"===e.series.data&&(L=this.getSheetsSeriesDomain());var D=a.axis[0],A=this.limitDomain(D.minLimit,D.maxLimit,L),N=c.right,B=L[0]<0;B&&(N=2*N);var j=b.getTextDimensions(p,this.svg,e.style.axisTick);u.maxLeftCategoryWidth=.35*P-c.right,u.maxLeftCategoryHeight=O.rangeBand()+O.rangeBand()*k/(1-k)-c.top-c.bottom;var R,H=!1;j.width<=u.maxLeftCategoryHeight?R=j.height:(R=v.Measure.wrappedText(this.svg,u.maxLeftCategoryWidth,p,e.style.axisTick,j.height).width,Math.ceil(R)<=u.maxLeftCategoryWidth&&(R=Math.ceil(R)),H=u.maxLeftCategoryHeight<j.height);var F=d.Left().scale(O).bounds({width:R+c.right,height:E}).offset({left:-(R+N),top:0}).data(p).style(e.style.axisTick).padding(c);H&&F.indexFilter(this.filterOverlappingCategories(O,j,b.getAllTextDimensions(p,this.svg,e.style.axisTick))),P-=R+N;var z=d3.scale.linear().range([0,P]).clamp(A);z.domain(L);var V=l.valuesOutside;V&&a.series[0].showValues&&this.adjustScaleDomainToOutsideValues(z,l.graphs,D);var U=(0,g["default"])().scale(O).orient("left").tickSize(-C,0).highlightZero(a.grid.horizontalZeroHighlight).style(e.style.grid).tickFormat("");a.grid.horizontal||U.tickValues([]);var W=(0,g["default"])().scale(z).orient("bottom").tickSize(E,0).highlightZero(a.grid.verticalZeroHighlight).style(e.style.grid).tickFormat(""),G=(0,g["default"])().scale(z).orient("bottom").drawLines(!1).style(e.style.axisTick).textOffset(-5).tickFormat(this.numberFormatX.tick).offset({top:E-w.height/4});if(l.ticks){var $=G.scale(),K=[],q=[],Y=[],Z=[];$.ticks().forEach(function(t){0===t?(K.push($(t)),q.push(t),Y.push($(t)),Z.push(t)):0>t?(q.push(t),K.push($(t))):(Y.push($(t)),Z.push(t))}),w=b.getTextDimensions(q.concat(Z).map(function(e){return t.numberFormatX.tick(e,z)}),this.svg,e.style.axisTick);var X=d.getStepsInRange(K,w.width+5,-1),J=d.getStepsInRange(Y,w.width+5,1),Q=d.filterToFit(K,q,X,-1),tt=d.filterToFit(Y,Z,J,1);Q.domain.length&&"0"===Q.domain[0]&&Q.domain.shift();var et={domain:Q.domain.concat(tt.domain)};B||et.domain[0]===L[0]||et.domain.unshift(L[0]),G.tickValues(et.domain),W.tickValues(et.domain),W.tickValues().length>0&&0===z(W.tickValues()[0])&&W.hideLinesByIndex([0]);var nt=[],ot=b.getAllTextDimensions(G.tickValues().map(function(e){return t.numberFormatX.tick(e,z)}),this.svg,e.style.axisTick);G.tickValues().forEach(function(t,e){var n=G.scale()(t),o=ot[e].width,i=n-o+G.textOffset();B&&(i+=F.padding().right);var r=i>0;0===e&&W.tickValues().length>0&&0===z(W.tickValues()[0])&&R+F.padding().right>o+Math.abs(G.textOffset())||r||nt.push(e)}),G.hideTicksByIndex(nt)}else G.tickValues([]);a.grid.vertical||W.tickValues([]);var it=(0,m.Label)().text(_).orientBounds({x1:0,y1:o.top+i.top,x2:e.width,y2:o.top+i.top+E}).style(e.style.axisTitle).orient("left"),rt=(0,m.Label)().text(x).orientBounds({x1:o.left+i.left+r.left+R+F.padding().right,y1:o.top,x2:e.width,y2:e.height}).style(e.style.axisTitle).orient("bottom");rt.dispatch().on("animationEnd",h);var at=this.svg.datum(e).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);at.each(function(t){var e=d3.select(this),n=e.attr("width",t.width).attr("height",t.height),a=n.selectAll(".igc").data([0]).enter().append("g").attr("class","igc"),s=a.append("g").attr("class","parts"),u=n.selectAll(".igc");a.empty()&&(s=u.select(".parts")),u.attr("transform","translate("+(o.left+i.left+r.left+(R+N))+","+(o.top+i.top)+")"),y(s,U,"igc-ygrid"),y(s,W,"igc-xgrid"),y(s,F,"igc-y-axis-text"),f(u,[{graphs:l.graphs,x:z,y:O,textStyle:t.style.axisTick,transitionDuration:t.animation.duration,animationEnd:h}]),y(s,G,"igc-x-axis-text"),y(e,it,"igc-title-left"),y(e,rt,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){h()})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length,a=this.numberFormatX;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").groupId(i).textStyle(o.textStyle).shape(e.shape).showValues(e.showValues).valuesOutside(e.valuesOutside).tooltipText(function(t){return t.yLabel}).tooltipValue(function(t){return a.tooltip(t.xLabel)}).transitionDelay(function(t,e){return e/r*500}).transitionDuration(o.transitionDuration).dispatch().on("animationEnd",o.animationEnd)}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.min(t.data,function(t){return t.x})}),d3.max(t,function(t){return d3.max(t.data,function(t){return t.x})})];return e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1)),this.adjustDomain(e),e}},{key:"getSheetsSeriesDomain",value:function(){var t;return this.options.sheets.forEach(function(e,n){var o=_.merge({},this.emptySheetData(),e),i=this.prepareSheetData(o),r=i[0],a=this.getDomain(r.graphs);0===n?t=a.slice(0):(t[0]=Math.min(a[0],t[0]),t[1]=Math.max(a[1],t[1]))},this),t}},{key:"adjustDomain",value:function(t){var e=t[0]<0&&t[1]<0,n=t[0]>0&&t[1]>0;e&&!n&&(t[1]=0),n&&!e&&(t[0]=0)}},{key:"adjustScaleDomainToOutsideValues",value:function(t,e,n){function o(){return{text:0,bar:0,value:0,combined:0}}var i=this,r=(0,x.isNumber)(n.maxLimit),a=(0,x.isNumber)(n.minLimit);if(!r||!a){var s=t.domain(),l=t.copy();l.clamp(!1);for(var u=_.flatten(e.map(function(t){return t.data.map(function(t){return i.numberFormatX.value(t.xLabel)})})),c=b.getAllTextDimensions(u,this.svg,this.options.style.axisTick),h=_.flatten(e.map(function(t){return t.data})),p=h.length,d={neg:o(),pos:o(),bar:{neg:o(),pos:o()}},f=l(0),g=3;p--;){var m=h[p].x>0?l(h[p].x)-f:f-l(h[p].x),v=m+c[p].width+g,y={bar:m,value:h[p].x,text:c[p].width+g,combined:v};h[p].x>0?(d.pos.combined<v&&(d.pos=y),d.bar.pos.bar<m&&(d.bar.pos=y)):(d.neg.combined<v&&(d.neg=y),d.bar.neg.bar<m&&(d.bar.neg=y))}var w=l(s[1]);if(r&&!a){var S=w-d.neg.text,C=S/w,E=(s[1]-d.neg.value)/C;t.domain([s[1]-E,s[1]])}else if(!r&&a){var T=w-d.pos.text,k=T/w,M=(d.pos.value-s[0])/k;t.domain([s[0],s[0]+M])}else!function(){var e=d.bar.neg.bar,n=d.neg.text+d.pos.text,o=d.neg.bar+d.pos.bar,i=w-n,r=i/o,a=(s[1]-s[0])/r,u=[s[0],s[0]+a];l.domain(u);var c=l.invert(0)-l.invert(e-d.neg.combined);t.domain(u.map(function(t){return t-c}))}()}}},{key:"filterOverlappingCategories",value:function(t,e,n){function o(t){return r[t]+i-n[t].height/2}for(var i=t.rangeBand()/2,r=t.range(),a=r.length-1,s=0,l=0,u=r.length;u>l;l++)if(o(l)>=0){s=l;break}r=r.slice(s);var c=d.getStepsInRange(r,e.height),h=d.filterToFit(r,r,c);return _.filter(h.domainIndex.map(function(t){return s+t}),function(t){return a>=t})}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{data:"separate"}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"bar",axisIndex:0,showValues:!0,shape:"bar-bar"}],axis:[{title:"",valuesOutside:!1,ticks:!0},{title:""}],grid:{verticalZeroHighlight:!0,vertical:!0,horizontal:!1}})}},{key:"prepareSheetData",value:function(t){var e=_.merge([],t.axis);return e.forEach(function(e,n){if(e){e.graphs||(e.graphs=[]);var o=t.categories.colors;t.series.forEach(function(i){if(n===i.axisIndex){var r=i.data.map(function(e,n){var r={x:(0,x.replaceBlank)(e,null),y:(0,x.replaceBlank)(t.categories.data[n]),xLabel:(0,x.replaceBlank)(i.rawData[n]),color:b.getColor(n,o)};return r}),a={type:i.type,data:r,showValues:i.showValues===!0,valuesOutside:!!t.axis[0].valuesOutside,shape:i.shape};e.graphs.push(a)}},this)}},this),e}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),o.grid&&_.merge(t.grid,o.grid),t.series.forEach(function(t){_.merge(t,o.series)}),t.axis.forEach(function(t,e){var n=o.axis&&o.axis[e];n&&_.merge(t,n)})})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BarStacked=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function S(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:S(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(77),y=o(v),b=n(66),x=n(22),w=n(15);e.BarStacked=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e,n={top:0,right:0,bottom:0,left:0},o={left:0,right:0,top:0,bottom:0},i={left:0,right:0},r=this.getSheetData(),a=this.prepareSheetData(r),s=this.options,l=a.categories,u=!!r.legend.enabled,c={maxLeftCategoryWidth:0,maxLeftCategoryHeight:0},h={top:2,right:10,bottom:2,left:0},p=this.createAnimationCounter(3);this.setupNumberFormatter(r),r.categories.categoryHeight&&(e=Number(r.categories.categoryHeight));var f=this.renderGraphs.bind(this),v=this.renderPart.bind(this),_=r.axis[1]&&r.axis[1].title;_&&(o.left=(0,x.getTextDimensions)(_,this.svg).height+10);var w=r.axis[0]&&r.axis[0].title;w&&(o.bottom=(0,x.getTextDimensions)(w,this.svg).height+10);var S={width:0,height:0};if(a.ticks){var C=["0123456789,."+this.numberFormatX.tick(1e3)];S=(0,x.getTextDimensions)(C,this.svg,s.style.axisTick),S.height=Math.min(S.height,30)}var E=s.width-n.left-o.left-n.right-o.right,T=s.height-n.top-o.top-n.bottom-o.bottom,k=.1,M=.1,O=d3.range(0,l.length),I=d3.scale.ordinal().domain(O);if(e){var P=10;for(I.rangeBands([0,P-(S.height+5)],M,k);I.rangeBand()-e<0;)P+=1,I.rangeBands([0,P-(S.height+5)],M,k);P-=1,s.height=P+n.top+o.top+n.bottom+o.bottom,T=P}I.rangeBands([0,T-(S.height+5)],M,k);var L=E-i.left-i.right,D=this.getDomain(a.graphs);"absolute"===s.series.data&&(D=this.getSheetsSeriesDomain());var A=r.axis[0],N=this.limitDomain(A.minLimit,A.maxLimit,D),B=h.right,j=D[0]<0;j&&(B=2*B);var R=(0,x.getTextDimensions)(l,this.svg,s.style.axisTick);c.maxLeftCategoryWidth=.35*L-h.right,c.maxLeftCategoryHeight=I.rangeBand()+I.rangeBand()*M/(1-M)-h.top-h.bottom;var H,F=!1;R.width<=c.maxLeftCategoryHeight?H=R.height:(H=b.Measure.wrappedText(this.svg,c.maxLeftCategoryWidth,l,s.style.axisTick,R.height).width,Math.ceil(H)<=c.maxLeftCategoryWidth&&(H=Math.ceil(H)),F=c.maxLeftCategoryHeight<R.height);var z=d.Left().scale(I).data(l).bounds({width:H+h.right,height:T}).offset({left:-(H+B),top:0}).style(s.style.axisTick).padding(h);F&&z.indexFilter(this.filterOverlappingCategories(I,R,(0,x.getAllTextDimensions)(l,this.svg,s.style.axisTick))),L-=H+h.right+B;var V=d3.scale.linear().rangeRound([0,L]).clamp(N);V.domain(D);var U=(0,g["default"])().scale(I).orient("left").tickSize(-E,0).highlightZero(r.grid.horizontalZeroHighlight).style(s.style.grid).tickFormat("");r.grid.horizontal||U.tickValues([]);var W=(0,g["default"])().scale(V).orient("bottom").tickSize(T,0).highlightZero(r.grid.verticalZeroHighlight).style(s.style.grid).tickFormat(""),G=(0,g["default"])().scale(V).orient("bottom").drawLines(!1).style(s.style.axisTick).textOffset(-5).tickFormat(this.numberFormatX.tick).offset({top:T-S.height/4});if(a.ticks){var $=G.scale(),K=[],q=[],Y=[],Z=[];$.ticks().forEach(function(t){0===t?(K.push(t),q.push($(t)),Y.push(t),Z.push($(t))):0>t?(K.push(t),q.push($(t))):(Y.push(t),Z.push($(t)))}),S=(0,x.getTextDimensions)(K.concat(Y).map(function(e){return t.numberFormatX.tick(e,$)}),this.svg,s.style.axisTick);var X=d.getStepsInRange(q,S.width+5,-1),J=d.getStepsInRange(Z,S.width+5),Q=d.filterToFit(q,K,X,-1),tt=d.filterToFit(Z,Y,J,1);Q.domain.length&&"0"===Q.domain[0]&&Q.domain.shift();var et={domain:Q.domain.concat(tt.domain)};j||et.domain[0]===D[0]||et.domain.unshift(D[0]),G.tickValues(et.domain),W.tickValues(et.domain),W.tickValues().length>0&&0===V(W.tickValues()[0])&&W.hideLinesByIndex([0]);var nt=[],ot=(0,x.getAllTextDimensions)(G.tickValues().map(function(e){return t.numberFormatX.tick(e,$)}),this.svg,s.style.axisTick);G.tickValues().forEach(function(t,e){var n=G.scale()(t),o=ot[e].width,i=n-o+G.textOffset();j&&(i+=h.right);var r=i>0;0===e&&W.tickValues().length>0&&0===V(W.tickValues()[0])&&H+h.right>o+Math.abs(G.textOffset())||r||nt.push(e)}),G.hideTicksByIndex(nt)}else G.tickValues([]);r.grid.vertical||W.tickValues([]);var it=(0,m.Label)().text(_).orientBounds({x1:0,y1:n.top+o.top,x2:s.width,y2:n.top+o.top+T}).style(s.style.axisTitle).orient("left"),rt=(0,m.Label)().text(w).orientBounds({x1:n.left+o.left+H+h.right,y1:n.top,x2:s.width,y2:s.height}).style(s.style.axisTitle).orient("bottom");rt.dispatch().on("animationEnd",p);var at={width:s.width};if(this.renderSheetSwitch(at),a.graphs&&0===a.graphs.length)return this.animation.start(),this.animation.end(),this.resetRootElement();var st;if(u){var lt=this.prepareLegendData(r),ut=y.TextItemMetrics().width(at.width).texts(lt.map(function(t){return t.title})).parentContainer(this.container).style(s.style.legend).reservedSize(36);st=y.Legend().data(lt).width(at.width).style(s.style.legend).chartId(this.chartId).textMetrics(ut()),this.renderLegend(st)}else d3.select(s.container).selectAll(".igc-legend").remove();var ct=this.svg.datum(s).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);ct.each(function(t){var e=d3.select(this),r=e.attr("width",t.width).attr("height",t.height),s=r.selectAll(".igc").data([0]).enter().append("g").attr("class","igc"),l=s.append("g").attr("class","parts"),u=r.selectAll(".igc");s.empty()&&(l=u.select(".parts")),u.attr("transform","translate("+(n.left+o.left+i.left+(H+B))+","+(n.top+o.top)+")"),v(l,z,"igc-y-axis-text"),v(l,U,"igc-ygrid"),v(l,W,"igc-xgrid"),f(u,[{graphs:a.graphs,x:V,y:I,textStyle:t.style.axisTick,legend:st,transitionDuration:t.animation.duration,animationEnd:p}]),v(l,G,"igc-x-axis-text"),v(e,it,"igc-title-left"),v(e,rt,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){p()})}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=o.graphs.length,r=this.numberFormatX;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(n).textStyle(o.textStyle).shape(e.shape).showValues(e.showValues).legend(o.legend).tooltipText(function(t){return t.yLabel+": "+r.tooltip(t.xLabel)}).tooltipValue(function(t){return t.groupLabel}).transitionDelay(function(){return n/i*500}).transitionDuration(o.transitionDuration)}},{key:"renderGraphInstances",value:function(){var t,e=this,n=this.graphInstances.enterCount,o=this.graphInstances.updateCount,i=o+n,r=0===o&&n>0,a=o>0&&n>0,s=this.graphInstances[0].group,l=_.after(2,function(){s.animationEnd()}),u=_.after(this.graphInstances.length,l);this.graphInstances.forEach(function(e){"update"===e.type&&(t=e.instance)});var c=function(){if(0===--i){var t=e.graphInstances.filter(function(t){return!t.skipTextRender}),n=t.length,o=_.after(n,l);n?t.forEach(function(t){var e=t.instance;e.dispatch().on("animationTextEnd",o),e.renderText()}):l()}};this.graphInstances.forEach(function(e){var n=e.instance,o=n.dispatch();if(a&&"enter"===e.type){o.on("animationStart",c),e.skipTextRender=!0,o.on("animationEnterStart",n.renderText);var i=n.transitionTiming().duration;t&&(i=t.transitionTiming().duration);var s=i.x+i.y;n.renderDelay(s)}else r?o.on("animationStart",c):o.on("animationUpdateEnd",c);o.on("animationEnd",u),e.selection.call(e.instance)})}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.sum(t.data,function(t){return t.x<0?t.x:0})}),d3.max(t,function(t){return d3.sum(t.data,function(t){return t.x>0?t.x:0})})];return e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1)),this.adjustDomain(e),e}},{key:"getSheetsSeriesDomain",value:function(){var t;return this.options.sheets.forEach(function(e,n){var o=_.merge({},this.emptySheetData(),e),i=this.prepareSheetData(o),r=this.getDomain(i.graphs);0===n?t=r.slice(0):(t[0]=Math.min(r[0],t[0]),t[1]=Math.max(r[1],t[1]))},this),t}},{key:"adjustDomain",value:function(t){var e=t[0]<0&&t[1]<0,n=t[0]>0&&t[1]>0;e&&!n&&(t[1]=0),n&&!e&&(t[0]=0)}},{key:"filterOverlappingCategories",value:function(t,e,n){function o(t){return r[t]+i-n[t].height/2}for(var i=t.rangeBand()/2,r=t.range(),a=r.length-1,s=0,l=0,u=r.length;u>l;l++)if(o(l)>=0){s=l;break}r=r.slice(s);var c=d.getStepsInRange(r,e.height),h=d.filterToFit(r,r,c);return _.filter(h.domainIndex.map(function(t){return s+t}),function(t){return a>=t})}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{data:"separate"}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{padding:20},series:[{type:"bar-stacked"}],axis:[{title:"",ticks:!0,showValues:!0},{title:""}],grid:{verticalZeroHighlight:!0,vertical:!0,horizontal:!1}})}},{key:"prepareSheetData",value:function(t){var e,n=_.merge({},t.axis[0]);return n?(t.categories.data||(t.categories.data=[]),n.graphs=t.categories.data.map(function(){return{colors:t.categories.colors,data:[],showValues:n.showValues===!0,type:"bar-stacked"}}),t.series.forEach(function(e,o){e.data.forEach(function(i,r){var a=t.categories.data[r];"undefined"!=typeof a&&n.graphs[r].data.push({x:(0,w.replaceBlank)(i,null),y:r,xLabel:(0,w.replaceBlank)(e.rawData[r]),yLabel:(0,w.replaceBlank)(e.title),groupLabel:(0,w.replaceBlank)(a),seriesIdx:o})})}),e=n.graphs,n.graphs.forEach(function(t){var e=t.data.length,n=0;0!==e&&(t.data.forEach(function(t){null===t.x&&n++}),n===e&&(t.data=[]))}),n.categories=t.categories.data.slice(0).filter(function(t,e){return n.graphs[e]&&n.graphs[e].data.length>0}),n.graphs=n.graphs.filter(function(t){return t.data&&t.data.length>0}),n.graphs.length!==e&&n.graphs.forEach(function(t,e){t.data.forEach(function(t){t.y=e})}),n):void 0}},{key:"prepareLegendData",value:function(t){var e=t.categories.colors;return t.series.map(function(t,n){return{color:(0,x.getColor)(n,e),title:t.title}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),o.grid&&_.merge(t.grid,o.grid),o.legend&&_.merge(t.legend,o.legend),t.axis.forEach(function(t,e){var n=o.axis&&o.axis[e];n&&_.merge(t,n)})})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function x(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:x(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(428),d=n(76),f=o(d),g=n(77),m=o(g),v=n(15),y=n(22),b=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"createCategoryLabels",value:function(){return f.BottomTilted.createLabels(this,this.runtime.categoryLayout)}},{key:"applySheetOptions",value:function(t){p.BarStacked.prototype.applySheetOptions.call(this,t)}},{key:"renderGraphInstances",value:function(){var t=this.graphInstances,e=t.enterCount,n=t.updateCount,o=0===n&&e>0,i=n>0&&e>0,r=t.length,a=t[0].group,s=_.after(2,a.animationEnd),l=_.after(r,s),u=n+e,c=void 0;t.forEach(function(t){"update"===t.type&&(c=t.instance)});var h=function(){0===--u&&!function(){var e=_.after(r,s);t.forEach(function(t){var n=t.instance;n.dispatch().on("animationTextEnd",e),n.renderText()})}()};t.forEach(function(t){var e=t.instance,n=e.dispatch();if(i&&"enter"===t.type){n.on("animationEnterStart",h);var r=e.transitionTiming().duration;c&&(r=c.transitionTiming().duration);var a=r.x+r.y;e.renderDelay(a)}else o?n.on("animationStart",h):n.on("animationUpdateEnd",h);n.on("animationEnd",l),t.selection.call(t.instance)})}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.min(t.data,function(t){return t.y})}),d3.max(t,function(t){return d3.max(t.data,function(t){return t.y})})];return e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1)),this.adjustDomain(e),e}},{key:"getSheetsSeriesDomain",value:function(){var t=this,e=void 0;return this.options.sheets.forEach(function(n,o){var i=_.merge({},t.emptySheetData(),n),r=t.prepareSheetData(i),a=t.getDomain(r.graphs);0===o?e=a.slice(0):(e[0]=Math.min(a[0],e[0]),e[1]=Math.max(a[1],e[1]))}),e}},{key:"adjustDomain",value:function(t){var e=t[0]<0&&t[1]<0,n=t[0]>0&&t[1]>0;e&&!n&&(t[1]=0),n&&!e&&(t[0]=0)}},{key:"adjustScaleDomainToOutsideValues",value:function(t,e,n){function o(){return{text:0,bar:0,value:0,combined:0}}var i=this,r=(0,v.isNumber)(n.maxLimit),a=(0,v.isNumber)(n.minLimit);if(!r||!a){var s=t.domain(),l=t.copy();l.clamp(!1);for(var u=_.flatten(e.map(function(t){return t.data.map(function(t){return i.numberFormatY.value(t.yLabel)})})),c=(0,y.getAllTextDimensions)(u,this.svg,this.options.style.axisTick),h=_.flatten(e.map(function(t){return t.data})),p=h.length,d={neg:o(),pos:o(),bar:{neg:o(),pos:o()}},f=l(0),g=3;p--;){var m=h[p].y<0?l(h[p].y)-f:f-l(h[p].y),b=m+c[p].width+g,x={bar:m,value:h[p].y,text:c[p].width+g,combined:b};h[p].y>0?(d.pos.combined<b&&(d.pos=x),d.bar.pos.bar<m&&(d.bar.pos=x)):(d.neg.combined<b&&(d.neg=x),d.bar.neg.bar<m&&(d.bar.neg=x))}var w=l(s[0]);if(r&&!a){var S=w-d.neg.text,C=S/w,E=(s[1]-d.neg.value)/C;t.domain([s[1]-E,s[1]])}else if(!r&&a){var T=w-d.pos.text,k=T/w,M=(d.pos.value-s[0])/k;t.domain([s[0],s[0]+M])}else!function(){var e=d.bar.neg.bar,n=d.neg.text+d.pos.text,o=d.neg.bar+d.pos.bar,i=w-n,r=i/o,a=(s[1]-s[0])/r,u=[s[0],s[0]+a];l.domain(u);var c=l.invert(0)-l.invert(e-d.neg.combined);t.domain(u.map(function(t){return t+c}))}()}}},{key:"filterAxisTicks",value:function(t){var e=t.scale(),n=e.tickFormat(),o=[],i=[],r=[],a=[];e.ticks().reverse().forEach(function(t){0===t?(o.push(n(t)),i.push(e(t)),r.push(n(t)),a.push(e(t))):t>0?(o.push(n(t)),i.push(e(t))):(r.push(n(t)),a.push(e(t)))});var s=(0,y.getTextDimensions)(o.concat(r),this.svg,this.options.style.axisTick),l=s.height+5,u=f.getStepsInRange(i,l,-1),c=f.getStepsInRange(a,l,1),h=f.filterToFit(i,o,u,-1),p=f.filterToFit(a,r,c,1);return h.domain=h.domain.reverse(),p.domain.length&&"0"===p.domain[0]&&p.domain.shift(),{domain:h.domain.concat(p.domain).map(function(t){return Number(t.replace(/(\,)/gi,""))})}}},{key:"prepareLegendData",value:function(){var t=this.runtime,e=t.sheet,n=e.categories.colors;return e.series.map(function(t,e){return{color:(0,y.getColor)(e,n),title:t.title}})}},{key:"createLegend",value:function(){var t=this.options,e=this.prepareLegendData(),n=m.TextItemMetrics().width(t.width).texts(e.map(function(t){return t.title})).parentContainer(this.container).style(t.style.legend).reservedSize(36);return m.Legend().data(e).width(t.width).style(t.style.legend).chartId(this.chartId).chartType("column").textMetrics(n())}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{data:"separate"}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{axis:[{ticks:!0},{title:"",ticks:!0,showValues:!0}],grid:{vertical:!1,horizontal:!0,horizontalZeroHighlight:!0}})}}]),e}(h["default"]);e["default"]=b},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){R.duration.y=H;var n=t.size()>1;t.filter(function(t,e){return n?e===S:!0}).each(function(){if(I.length){var t=d3.select(this),n=t.selectAll("path");n.transition().duration(0);var i=e(n);t.selectAll("text").remove(),G=function(){m(t,i)};var r=i[0];o(r),h(t,i)}})}function e(t){var e,o=T.rangeBand(),r=[],a=[],s=0;return I.forEach(function(t,n){var o=a[n]={};o[M]=t[M],o[M+"Pos"]=T(n),o[M+"Label"]=t[M+"Label"],o.height=k(0)-k(t[O]),o[O]=t[O],o[O+"Pos"]=k(0)+(o.height<0?1:0),o[O+"Label"]=t[O+"Label"],o.groupLabel=t.groupLabel,o.seriesIdx=t.seriesIdx,o.color=(0,d.getColor)(t.seriesIdx,P),o.index=n,s=t.seriesIdx+1,e=T(t[M])}),K===i.BEHAVIOURS.COLUMN?a.forEach(function(t){t.width=o}):!function(){var t=d3.range(0,s),n=(0,g.Ordinal)().domain(t).rangeBandsPct([e,e+o],1===t.length&&"fixed"===$.scaleType?1:null,!$.only);a.forEach(function(t){t[M+"Pos"]=n(t.seriesIdx),t.width=n.rangeBand()})}(),t.each(function(t){var e=_.merge({},t);r.push(e)}),0===r.length&&(r=a.map(function(t){var e=_.merge({},t);return e.height=0,e})),n(r,a),r}function n(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o.width=e.width,o[M]=e[M],o[M+"Pos"]=e[M+"Pos"],o[M+"Label"]=e[M+"Label"],o.height=0,o[O]=e[O],o[O+"Pos"]=e[O+"Pos"],o[O+"Label"]=e[O+"Label"],o.groupLabel=e.groupLabel,o.seriesIdx=e.seriesIdx,o.color=e.color}})}function o(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={y:["yPos","height"]};if(t){n=t.next;for(o in R.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&"y"!==o&&(R.duration[o]=0))}}function a(t,e){var n=t.insert("path","text"),o=0;n.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return N(t.xPos,t.yPos,t.width,0,0)}),n.transition().duration(H).ease("elastic").delay(function(){return W+j.apply(this,arguments)}).each("start",function(){0===o&&U.animationEnterStart(),o++}).attrTween("d",u(function(t){return t.next})).each("end",function(){0===--o&&e()})}function u(t){return function(e,n){var o=t.call(this,e,n);n=d3.interpolate(e,o);for(var i in o)e[i]=o[i];return function(t){return B(n(t))}}}function h(t,e){var n=t.selectAll("path").data(e),o=n.enter(),i=0===n.size()&&0<o.size(),r=R.duration,s=0;i?(U.animationStart(),U.animationUpdateStart(),U.animationUpdateEnd(),o.call(a,function(){b(n),x(n),U.animationEnterEnd(),U.animationEnd()})):(U.animationStart(),U.animationUpdateStart(),n.transition().duration(r.y).attrTween("d",u(function(t){var e={};return e[O+"Pos"]=t.next[O+"Pos"],e.height=t.next.height,e})).transition().duration(r.x).each("start",function(){s++}).attrTween("d",u(function(t){return t.next})).each("end",function(){0===--s&&(U.animationUpdateEnd(),U.animationEnterStart(),o.call(a,function(){U.animationEnterEnd(),U.animationEnd(),b(n),x(t.selectAll("path"))}),0===o.size()&&(U.animationEnterEnd(),U.animationEnd(),b(n),x(t.selectAll("path"))))})),n.exit().remove(),n.style("fill",function(t){return t.next.color}).style("stroke-width",0)}function m(t,e){var n=e.map(function(t){return C?C.value(t.next.yLabel):""+t.next.yLabel}),o=(0,d.getAllTextDimensions)(n,t,A),i=d3.max(o,function(t){return t.height}),r=e[0]&&e[0].width||0,a=L&&r>=i,s=[];a&&(s=f.Column.prepareTextData(e,o,A,2,k,D)),a&&s.length||U.animationTextEnd();var u=t.selectAll("text").data(s);u.enter().append("text"),u.exit().remove(),u.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("transform",function(t){return t.transform}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return C?C.value(t.text):t.text}).style("cursor","default").style(A).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),u.transition().duration(R.duration.text).style("opacity",1).each("start",function(){F++}).each("end",function(){0===--F&&U.animationTextEnd()}),x(u.filter(function(t){return t.inside})),v(u)}function v(t){U.on("highlightStart.text",function(e){t.filter(y(e)).transition().duration(150).ease("linear").style("opacity",.3)}),U.on("highlightEnd.text",function(e){t.filter(y(e)).transition().duration(150).ease("linear").style("opacity",1)})}function y(t){var e=function(e){return e.seriesIdx!==t};return e}function b(t){E&&E.data().forEach(function(t,e){E.addListener({id:w+"_"+e,dispatch:U})}),U.on("highlightStart",function(e){t.filter(function(t){return t.seriesIdx!==e}).transition().duration(150).ease("linear").style("opacity",.3)}),U.on("highlightEnd",function(e){t.filter(function(t){return t.seriesIdx!==e}).transition().duration(150).ease("linear").style("opacity",1)})}function x(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event);e=z(t),n=V(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color)}).on("mouseout",function(){(0,s["default"])().hide()})}var w,S,C,E,T=d3.scale.linear(),k=d3.scale.linear(),M="x",O="y",I=[],P=d3.scale.category20().range(),L=!0,D=!1,A=c["default"].prototype.defaults().style.axisTick,N=p["default"].columnToTop,B=f.Column.createTweenShape(O),j=0,R={
duration:{x:700,y:400,text:50}},H=700,F=0,z=function(t){return t.x},V=function(t){return t.y},U=d3.dispatch("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","animationTextEnd"),W=0,G=function(){},$={only:!1,scaleType:"pct"},K=i.BEHAVIOURS.COLUMN,q={scaleX:function(e){return arguments.length?(T=e.copy(),t):T},scaleY:function(e){return arguments.length?(k=e.copy(),t):k},pX:function(e){return arguments.length?(M=e,t):M},pY:function(e){return arguments.length?(O=e,B=f.Column.createTweenShape(O),t):O},data:function(e){return arguments.length?(I=e,t):I},colors:function(e){return arguments.length?(P=e,t):P},groupId:function(e){return arguments.length?(S=e,t):S},valuesOutside:function(e){return arguments.length?(D=!!e,t):D},chartId:function(e){return arguments.length?(w=e,t):w},showValues:function(e){return arguments.length?(L=!!e,t):L},textStyle:function(e){return arguments.length?(A=e,t):A},legend:function(e){return arguments.length?(E=e,t):E},tooltipText:function(e){return arguments.length?(z=e,t):z},tooltipValue:function(e){return arguments.length?(V=e,t):V},transitionDelay:function(e){return arguments.length?(j=e,t):j},transitionDuration:function(e){return arguments.length?(H=e,t):H},transitionTiming:function(e){return arguments.length?(R=e,t):R},renderDelay:function(e){return arguments.length?(W=e,t):W},numberFormat:function(e){return arguments.length?(C=e,t):C},dispatch:function(){return U},renderText:function(){return G(),t},groupOpts:function(e){return arguments.length?($=e,t):$},behaviour:function(e){return arguments.length?(-1!==_.values(i.BEHAVIOURS).indexOf(e)&&(K=e),t):K}};return(0,r.injectFunctions)(t,q),t}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnGrouped=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(138),p=o(h),d=n(22),f=n(517),g=n(171);i.BEHAVIOURS={COLUMN:"column",COLUMN_GROUPED:"column-grouped"}},function(t,e){"use strict";function n(t,e){return function(n){return t(n,e)}}function o(t,e){return e=","===e?",":".",n(i[t]||i.firstNumber,e)}Object.defineProperty(e,"__esModule",{value:!0});var i={firstNumber:function(t){var e=arguments.length<=1||void 0===arguments[1]?".":arguments[1],n=1;if("string"==typeof t){var o=[],i=t.search(/\d/),r=i-1,a=t.indexOf(e);if(-1===a&&(a=t.length),i>a){if(t[r]===e){var s=t.slice(r,t.length),l=s.split(/(\d+)/);return l[0]===e&&l[1]&&o.push("."+l[1]),"-"===t[a-1]&&(n=-1),parseFloat(o.join(""))*n}a=t.length}"-"===t[r]&&(n=-1);for(var u,c=t.slice(i,a),h=1,p=/^[\\., ]$/,d=c.split(/(\d+)/),f=d.length;f>h;h++){var g=d[h],m=/\d/.test(g);if(m)if(1===h){if(o.push(g),g.length>3)break}else{if(3!==g.length)break;o.push(g)}else{if(!p.test(g))break;if(u||(u=g),u!==g)break}}if(o.join(" ").length===c.length){var v=t.slice(a,t.length),y=v.split(/(\d+)/);y[0]===e&&y[1]&&o.push("."+y[1])}t=o.join("")}return parseFloat(t)*n},legacy:function(t){var e=1;return"string"==typeof t&&(e="-"===t[0]?-1:1,-1!==t.indexOf(",")&&(t=t.replace(/,/g,".")),t=t.replace(/\.(?![^.]+$)/g,""),t=t.replace(/[^0-9\.]/g,"")),parseFloat(t)*e}};o.PARSERS=function(){var t={};return Object.keys(i).forEach(function(e){t[e]=e}),t}(),e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Text={wrap:function(t,e,o){t.each(function(){var t=d3.select(this);n.wrapText(t,e,o)})},wrapText:function(t,e,o){var i,r,a,s,l,u=n.trim(t.text()).split(/\s+/).reverse(),c=u.pop(),h=[],p=0,d=t.attr("y"),f=t.attr("x"),g=isNaN(parseFloat(t.attr("dy")))?0:parseFloat(t.attr("dy"));for(e=Math.round(e),t.text(null),i=function(e,n){return t.append("tspan").attr("text-anchor","end").attr("x",f).attr("y",d).attr("dy",e*o+g).text(n)},r=i(p,"");c;)if(h.push(c),r.text(h.join(" ")),a=Math.round(r.node().getComputedTextLength()),e>=a)c=u.pop();else{if(1===h.length){if(s=n.breakWord(r,c,e),""===s){c=s;continue}l=c.substr(s.length,c.length-s.length),c=l}else c=h.pop(),r.text(h.join(" "));h=[],r=i(++p,"")}},breakWord:function(t,e,n){for(t.text(e);Math.round(t.node().getComputedTextLength())>n;)e=e.substr(0,e.length-1),t.text(e);return e},trim:function(t){return t.replace(/^\s+|\s+$/gm,"")},lineHeight:function o(t){var o=0,e=t.parentNode,n=t.cloneNode();return n.innerHTML="<br>",e.appendChild(n),o=n.offsetHeight,e.removeChild(n),o},unescapeHtml:function(t){var e={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},n=t;return _.each(e,function(t,e){return n=n.replace(e,t)}),n},getTrimmedText:function(t,e,n,o){var i=[];i.max={w:0},e.constructor!==Array&&(e=[e]);var r=t.append("text").attr({x:99999,y:0}).style(n);return e.forEach(function(t){var e=void 0===t,n=e?0:t.length,a=e?"":t;r.text(a);for(var s=r.node().getComputedTextLength();s>o;)a=a.substring(0,a.length-1),r.text(a),s=r.node().getComputedTextLength();a.length!==n&&(a=a.substring(0,a.length-3)+"...",r.text(a),i.max.w=Math.max(i.max.w,r.node().getComputedTextLength())),i.push(a)}),r.remove(),i},addEllipsis:function(t,e,n,o){var i="...",r=t.append("text").attr({x:99999,y:0}).style(n);r.text(e+i);var a=r.node().getComputedTextLength();return r.remove(),o>=a?e+i:e.substring(0,e.length-3)+i}}},function(t,e,n){"use strict";function o(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){c.insertTreeBefore(t,e,n)}function r(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):m(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],l(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,o){for(var i=e;;){var r=i.nextSibling;if(m(t,i,o),i===n)break;i=r}}function l(t,e,n){for(;;){var o=e.nextSibling;if(o===n)break;t.removeChild(o)}}function u(t,e,n){var o=t.parentNode,i=t.nextSibling;i===e?n&&m(o,document.createTextNode(n),i):n?(g(i,n),l(o,i,e)):l(o,t,e)}var c=n(181),h=n(815),p=n(537),d=(n(56),n(96),n(448)),f=n(406),g=n(550),m=d(function(t,e,n){t.insertBefore(e,n)}),v=h.dangerouslyReplaceNodeWithMarkup,y={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:u,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case p.INSERT_MARKUP:i(t,s.content,o(t,s.afterNode));break;case p.MOVE_EXISTING:r(t,s.fromNode,o(t,s.afterNode));break;case p.SET_MARKUP:f(t,s.content);break;case p.TEXT_CONTENT:g(t,s.content);break;case p.REMOVE_NODE:a(t,s.fromNode)}}}};t.exports=y},function(t,e){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},function(t,e,n){"use strict";function o(){if(s)for(var t in l){var e=l[t],n=s.indexOf(t);if(n>-1?void 0:a("96",t),!u.plugins[n]){e.extractEvents?void 0:a("97",t),u.plugins[n]=e;var o=e.eventTypes;for(var r in o)i(o[r],e,r)?void 0:a("98",r,t)}}}function i(t,e,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,u.eventNameDispatchConfigs[n]=t;var o=t.phasedRegistrationNames;if(o){for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];r(s,e,n)}return!0}return t.registrationName?(r(t.registrationName,e,n),!0):!1}function r(t,e,n){u.registrationNameModules[t]?a("100",t):void 0,u.registrationNameModules[t]=e,u.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(29),s=(n(7),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s?a("101"):void 0,s=Array.prototype.slice.call(t),o()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];l.hasOwnProperty(n)&&l[n]===i||(l[n]?a("102",n):void 0,l[n]=i,e=!0)}e&&o()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return u.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var o=u.registrationNameModules[e.phasedRegistrationNames[n]];if(o)return o}return null},_resetEventPlugins:function(){s=null;for(var t in l)l.hasOwnProperty(t)&&delete l[t];u.plugins.length=0;var e=u.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var o=u.registrationNameModules;for(var i in o)o.hasOwnProperty(i)&&delete o[i]}};t.exports=u},function(t,e,n){"use strict";function o(t){return t===y.topMouseUp||t===y.topTouchEnd||t===y.topTouchCancel}function i(t){return t===y.topMouseMove||t===y.topTouchMove}function r(t){return t===y.topMouseDown||t===y.topTouchStart}function a(t,e,n,o){var i=t.type||"unknown-event";t.currentTarget=b.getNodeFromInstance(o),e?m.invokeGuardedCallbackWithCatch(i,n,t):m.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,o=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)a(t,e,n[i],o[i]);else n&&a(t,e,n,o);t._dispatchListeners=null,t._dispatchInstances=null}function l(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var o=0;o<e.length&&!t.isPropagationStopped();o++)if(e[o](t,n[o]))return n[o]}else if(e&&e(t,n))return n;return null}function u(t){var e=l(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function c(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?f("103"):void 0,t.currentTarget=e?b.getNodeFromInstance(n):null;var o=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,o}function h(t){return!!t._dispatchListeners}var p,d,f=n(29),g=n(127),m=n(442),v=(n(7),n(31),{injectComponentTree:function(t){p=t},injectTreeTraversal:function(t){d=t}}),y=g.topLevelTypes,b={isEndish:o,isMoveish:i,isStartish:r,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:h,getInstanceFromNode:function(t){return p.getInstanceFromNode(t)},getNodeFromInstance:function(t){return p.getNodeFromInstance(t)},isAncestor:function(t,e){return d.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return d.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return d.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return d.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,o,i){return d.traverseEnterLeave(t,e,n,o,i)},injection:v};t.exports=b},function(t,e){"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},o=(""+t).replace(e,function(t){return n[t]});return"$"+o}function o(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},o="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+o).replace(e,function(t){return n[t]})}var i={escape:n,unescape:o};t.exports=i},function(t,e,n){"use strict";function o(t){null!=t.checkedLink&&null!=t.valueLink?s("87"):void 0}function i(t){o(t),null!=t.value||null!=t.onChange?s("88"):void 0}function r(t){o(t),null!=t.checked||null!=t.onChange?s("89"):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(29),l=n(539),u=n(445),c=n(446),h=(n(7),n(31),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(t,e,n){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},d={},f={checkPropTypes:function(t,e,n){for(var o in p){if(p.hasOwnProperty(o))var i=p[o](e,o,t,u.prop,null,c);if(i instanceof Error&&!(i.message in d)){d[i.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(r(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(r(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=f},function(t,e,n){"use strict";function o(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||r}var i=n(29),r=n(443),a=(n(543),n(196));n(7),n(31);o.prototype.isReactComponent={},o.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?i("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};t.exports=o},function(t,e,n){"use strict";var o=n(29),i=(n(7),!1),r={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i?o("104"):void 0,r.replaceNodeWithMarkup=t.replaceNodeWithMarkup,r.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=r},function(t,e,n){"use strict";function o(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,o=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return o.test(i)}catch(r){return!1}}function i(t){return"."+t}function r(t){return parseInt(t.substr(1),10)}function a(t){if(S)return v.get(t);var e=i(t);return b[e]}function s(t){if(S)v["delete"](t);else{var e=i(t);delete b[e]}}function l(t,e,n){var o={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(S)v.set(t,o);else{var r=i(t);b[r]=o}}function u(t){if(S)y.add(t);else{var e=i(t);_[e]=!0}}function c(t){if(S)y["delete"](t);else{var e=i(t);delete _[e]}}function h(){return S?Array.from(v.keys()):Object.keys(b).map(r)}function p(){return S?Array.from(y.keys()):Object.keys(_).map(r)}function d(t){var e=a(t);if(e){var n=e.childIDs;s(t),n.forEach(d)}}function f(t,e,n){return"\n    in "+t+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function g(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function m(t){var e,n=E.getDisplayName(t),o=E.getElement(t),i=E.getOwnerID(t);return i&&(e=E.getDisplayName(i)),f(n,o&&o._source,e)}var v,y,b,_,x=n(29),w=n(141),S=(n(7),n(31),"function"==typeof Array.from&&"function"==typeof Map&&o(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&o(Map.prototype.keys)&&"function"==typeof Set&&o(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&o(Set.prototype.keys));S?(v=new Map,y=new Set):(b={},_={});var C=[],E={onSetChildren:function(t,e){var n=a(t);n.childIDs=e;for(var o=0;o<e.length;o++){var i=e[o],r=a(i);r?void 0:x("140"),null==r.childIDs&&"object"==typeof r.element&&null!=r.element?x("141"):void 0,r.isMounted?void 0:x("71"),null==r.parentID&&(r.parentID=t),r.parentID!==t?x("142",i,r.parentID,t):void 0}},onBeforeMountComponent:function(t,e,n){l(t,e,n)},onBeforeUpdateComponent:function(t,e){var n=a(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=a(t);e.isMounted=!0;var n=0===e.parentID;n&&u(t)},onUpdateComponent:function(t){var e=a(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=a(t);if(e){e.isMounted=!1;var n=0===e.parentID;n&&c(t)}C.push(t)},purgeUnmountedComponents:function(){if(!E._preventPurging){for(var t=0;t<C.length;t++){var e=C[t];d(e)}C.length=0}},isMounted:function(t){var e=a(t);return e?e.isMounted:!1},getCurrentStackAddendum:function(t){var e="";if(t){var n=t.type,o="function"==typeof n?n.displayName||n.name:n,i=t._owner;e+=f(o||"Unknown",t._source,i&&i.getName())}var r=w.current,a=r&&r._debugID;return e+=E.getStackAddendumByID(a)},getStackAddendumByID:function(t){for(var e="";t;)e+=m(t),t=E.getParentID(t);return e},getChildIDs:function(t){var e=a(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=E.getElement(t);return e?g(e):null},getElement:function(t){var e=a(t);return e?e.element:null},getOwnerID:function(t){var e=E.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=a(t);return e?e.parentID:null},getSource:function(t){var e=a(t),n=e?e.element:null,o=null!=n?n._source:null;return o},getText:function(t){var e=E.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=a(t);return e?e.updateCount:0},getRegisteredIDs:h,getRootIDs:p};t.exports=E},function(t,e,n){"use strict";function o(t,e,n,o){try{return e(n,o)}catch(r){return void(null===i&&(i=r))}}var i=null,r={invokeGuardedCallback:o,invokeGuardedCallbackWithCatch:o,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=r},function(t,e,n){"use strict";function o(t,e){}var i=(n(31),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){o(t,"forceUpdate")},enqueueReplaceState:function(t,e){o(t,"replaceState")},enqueueSetState:function(t,e){o(t,"setState")}});t.exports=i},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";var o=n(401),i=o({prop:null,context:null,childContext:null});t.exports=i},function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},function(t,e,n){"use strict";function o(t){l.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,o=Object.keys(t);return o.length>0&&o.length<20?n+" (keys: "+o.join(", ")+")":n}function r(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(29),s=(n(141),n(190)),l=(n(96),n(123)),u=(n(7),n(31),{isMounted:function(t){var e=s.get(t);return e?!!e._renderedComponent:!1},enqueueCallback:function(t,e,n){u.validateCallback(e,n);var i=r(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void o(i)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],o(t)},enqueueForceUpdate:function(t){var e=r(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,o(e))},enqueueReplaceState:function(t,e){var n=r(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,o(n))},enqueueSetState:function(t,e){var n=r(t,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(e),o(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,o(t)},validateCallback:function(t,e){t&&"function"!=typeof t?a("122",e,i(t)):void 0}});t.exports=u},function(t,e){"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,o,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,i)})}:t};t.exports=n},function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var o=i[t];return o?!!n[o]:!1}function o(t){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e,n){"use strict";/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&i&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var i,r=n(75);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=o},function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,o=null===e||e===!1;if(n||o)return n===o;var i=typeof t,r=typeof e;return"string"===i||"number"===i?"string"===r||"number"===r:"object"===r&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e,n){"use strict";function o(t,e){return t&&"object"==typeof t&&null!=t.key?u.escape(t.key):e.toString(36)}function i(t,e,n,r){var p=typeof t;if("undefined"!==p&&"boolean"!==p||(t=null),null===t||"string"===p||"number"===p||s.isValidElement(t))return n(r,t,""===e?c+o(t,0):e),1;var d,f,g=0,m=""===e?c:e+h;if(Array.isArray(t))for(var v=0;v<t.length;v++)d=t[v],f=m+o(d,v),g+=i(d,f,n,r);else{var y=l(t);if(y){var b,_=y.call(t);if(y!==t.entries)for(var x=0;!(b=_.next()).done;)d=b.value,f=m+o(d,x++),g+=i(d,f,n,r);else for(;!(b=_.next()).done;){var w=b.value;w&&(d=w[1],f=m+u.escape(w[0])+h+o(d,0),g+=i(d,f,n,r))}}else if("object"===p){var S="",C=String(t);a("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,S)}}return g}function r(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(29),s=(n(141),n(122)),l=n(546),u=(n(7),n(437)),c=(n(31),"."),h=":";t.exports=r},function(t,e,n){"use strict";var o=(n(32),n(71)),i=(n(31),o);t.exports=i},function(t,e,n){"use strict";var o=n(904),i=n(206),r=n(97),a=n(905),s=n(173),l=n(460),u=n(461),c=n(574),h=n(907),p=n(575),d=n(78),f=n(129),g=n(576),m=n(43),v=n(462),y=n(918),b=n(186),_=n(923),x=n(579),w=n(924),S=n(124),C=n(580),E=n(947),T={Editor:h,EditorBlock:p,EditorState:m,CompositeDecorator:a,Entity:f,EntityInstance:g,BlockMapBuilder:i,CharacterMetadata:r,ContentBlock:s,ContentState:l,SelectionState:b,AtomicBlockUtils:o,KeyBindingUtil:v,Modifier:d,RichUtils:y,DefaultDraftBlockRenderMap:u,DefaultDraftInlineStyle:c,convertFromHTML:x,convertFromRaw:w,convertToRaw:_,genKey:S,getDefaultKeyBinding:C,getVisibleSelectionRect:E};t.exports=T},function(t,e,n){"use strict";var o;o=function(t){var e=n(608),o={"public":"Public","private":"Privately Shared",draft:"Not Public"},i=Backbone.Model.extend({url:function(){var t="";if(window.genpicConfig){var e=this.get("dc"),n="development"===window.genpicConfig.env;e in window.genpicConfig.balancers||n||(e="eu"),e in window.genpicConfig.balancers&&(t=window.genpicConfig.balancers[e].replace(/\/$/,""))}return[t,"api/infographics",this.get("block_id")||this.get("id")].join("/")},defaults:{properties:{}},initialize:function(){this.on("request",function(){window.app.events.trigger("Editable:saving")}),this.on("sync",function(){window.app.events.trigger("Editable:saved")})},save:function(t,e){return e&&e.patch&&(e.attrs=t,e.patch=!1),Backbone.Model.prototype.save.apply(this,[t,e])},parse:function(t){return t.theme&&(t.theme=new e(t.theme,{parse:!0})),t},publishedStatus:function(){var t=this.get("properties")&&this.get("properties").publishType;return this.get("public")&&0===t?"public":1!==t&&2!==t||!this.get("privateURL")?"draft":"private"},isOwner:function(){return window.app&&window.app.profile&&window.app.profile.id===this.get("user_id")},publishedHuman:function(){return o[this.publishedStatus()]},isPublished:function(){return"public"===this.publishedStatus()},isUnpublished:function(){return"draft"===this.publishedStatus()},toJSON:function(){return _.extend(Backbone.Model.prototype.toJSON.apply(this,arguments),{isPublished:this.isPublished()})},fullUrl:function(){return window.location.protocol+"//"+window.location.host.replace("e.infogr.am","infogr.am")+"/"+(this.get("public")?this.get("path"):"_/"+this.get("privateURL"))},shareUrl:function(){return"custom"===this.get("properties").title_link?this.get("properties").title_url:this.fullUrl()},editUrl:function(){return"/app/#/edit/"+this.get("block_id")},title:function(){return this.get("title")||"Infographic"},titleShort:function r(){var t=window.app&&window.app.profile&&"list"===window.app.profile.settings.library_view_mode,e=20;t&&(e=70);var r=this.title();return r.length>e&&(r=r.substring(0,e)+"..."),r},shareText:function(){var t=this.get("title");return"Infographic"+(t?": "+t:"")},exportSettings:function(){var t=this.get("properties");return t.export_settings||{}}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t,e){return t&&e?t===e?!0:i(t)?!1:i(e)?o(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):!1:!1}var i=n(775);t.exports=o},function(t,e){"use strict";function n(t,e,n){if(!n)return t;var o=t%e,i=Math.floor(t/e);return o>n&&(o=e-o,i+=1),n>=o?i*e:t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(206),s=n(97),l=n(173),u=n(10),c=n(186),h=n(124),p=n(466),d=u.List,f=u.Record,g=u.Repeat,m={blockMap:null,selectionBefore:null,selectionAfter:null},v=f(m),y=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.getBlockMap=function(){return this.get("blockMap")},e.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},e.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},e.prototype.getBlockForKey=function(t){var e=this.getBlockMap().get(t);return e},e.prototype.getKeyBefore=function(t){return this.getBlockMap().reverse().keySeq().skipUntil(function(e){return e===t}).skip(1).first()},e.prototype.getKeyAfter=function(t){return this.getBlockMap().keySeq().skipUntil(function(e){return e===t}).skip(1).first()},e.prototype.getBlockAfter=function(t){return this.getBlockMap().skipUntil(function(e,n){return n===t}).skip(1).first()},e.prototype.getBlockBefore=function(t){return this.getBlockMap().reverse().skipUntil(function(e,n){return n===t}).skip(1).first()},e.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},e.prototype.getFirstBlock=function(){return this.getBlockMap().first()},e.prototype.getLastBlock=function(){return this.getBlockMap().last()},e.prototype.getPlainText=function(t){return this.getBlockMap().map(function(t){return t?t.getText():""}).join(t||"\n")},e.prototype.hasText=function(){var t=this.getBlockMap();return t.size>1||t.first().getLength()>0},e.createFromBlockArray=function(t){var n=a.createFromArray(t),o=c.createEmpty(n.first().getKey());return new e({blockMap:n,selectionBefore:o,selectionAfter:o})},e.createFromText=function(t){var n=arguments.length<=1||void 0===arguments[1]?/\r\n?|\n/g:arguments[1],o=t.split(n),i=o.map(function(t){return t=p(t),new l({key:h(),text:t,type:"unstyled",characterList:d(g(s.EMPTY,t.length))})});return e.createFromBlockArray(i)},e}(v);t.exports=y},function(t,e,n){"use strict";var o=n(10),i=o.Map,r=n(1),a=n(208),s=r.createElement("ul",{className:a("public/DraftStyleDefault/ul")}),l=r.createElement("ol",{className:a("public/DraftStyleDefault/ol")}),u=r.createElement("pre",{className:a("public/DraftStyleDefault/pre")});t.exports=i({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:s},"ordered-list-item":{element:"li",wrapper:l},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:u},unstyled:{element:"div"}})},function(t,e,n){"use strict";var o=n(125),i=o.isPlatform("Mac OS X"),r={isCtrlKeyCommand:function(t){return!!t.ctrlKey&&!t.altKey},isOptionKeyCommand:function(t){return i&&t.altKey},hasCommandModifier:function(t){return i?!!t.metaKey&&!t.altKey:r.isCtrlKeyCommand(t)}};t.exports=r},function(t,e,n){"use strict";function o(t){for(var e=t;e&&e!==document.documentElement;){var n=i(e);if(null!=n)return n;e=e.parentNode}return null}var i=n(585);t.exports=o},function(t,e,n){"use strict";function o(t,e){var n;if(e.isCollapsed()){var o=e.getAnchorKey(),r=e.getAnchorOffset();return r>0?(n=t.getBlockForKey(o).getEntityAt(r-1),i(n)):null}var a=e.getStartKey(),s=e.getStartOffset(),l=t.getBlockForKey(a);return n=s===l.getLength()?null:l.getEntityAt(s),i(n)}function i(t){if(t){var e=r.get(t);return"MUTABLE"===e.getMutability()?t:null}return null}var r=n(129);t.exports=o},function(t,e){"use strict";function n(t,e){var n=t.getSelection(),o=t.getCurrentContent(),i=n.getStartKey(),r=n.getStartOffset(),a=i,s=0;if(e>r){var l=o.getKeyBefore(i);if(null==l)a=i;else{a=l;var u=o.getBlockForKey(l);s=u.getText().length}}else s=r-e;return n.merge({focusKey:a,focusOffset:s,isBackward:!0})}t.exports=n},function(t,e){"use strict";function n(t){return t.replace(o,"")}var o=new RegExp("\r","g");t.exports=n},function(t,e){"use strict";t.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(t,e,n){"use strict";function o(t,e){var n=r.get(t,e);return"auto"===n||"scroll"===n}var i=n(974),r={get:i,getScrollParent:function(t){if(!t)return null;for(;t&&t!==document.body;){if(o(t,"overflow")||o(t,"overflowY")||o(t,"overflowX"))return t;t=t.parentNode}return window}};t.exports=r},function(t,e,n){"use strict";function o(t){return t===h||t===p}function i(t){return o(t)?void 0:u(!1),t===h?"ltr":"rtl"}function r(t,e){return o(t)?void 0:u(!1),o(e)?void 0:u(!1),t===e?null:i(t)}function a(t){d=t}function s(){a(h)}function l(){return d||this.initGlobalDir(),d?void 0:u(!1),d}var u=n(7),c="NEUTRAL",h="LTR",p="RTL",d=null,f={NEUTRAL:c,LTR:h,RTL:p,isStrong:o,getHTMLDir:i,getHTMLDirIfDifferent:r,setGlobalDir:a,initGlobalDir:s,getGlobalDir:l};t.exports=f},function(t,e,n){"use strict";function o(t){var e=i();t===window&&(t=e);var n=r(t),o=t===e?document.documentElement:t,a=t.scrollWidth-o.clientWidth,s=t.scrollHeight-o.clientHeight;return n.x=Math.max(0,Math.min(n.x,a)),n.y=Math.max(0,Math.min(n.y,s)),n}var i=n(971),r=n(558);t.exports=o},,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EDITOR_STATE_CHANGE="EDITOR_STATE_CHANGE",e.EDITOR_CHANGE_ENTITY_PROPERTY="EDITOR_CHANGE_ENTITY_PROPERTY",e.EDITOR_SET_LOCK_ASPECT_RATIO="EDITOR_SET_LOCK_ASPECT_RATIO",e.EDITOR_ADD_ENTITY="EDITOR_ADD_ENTITY",e.EDITOR_ZOOM="EDITOR_ZOOM",e.EDITOR_SCALE="EDITOR_SCALE",e.EDITOR_SET_ALL_EXTERNAL_DATA="EDITOR_SET_ALL_EXTERNAL_DATA",e.EDITOR_SET_CHART_EXTERNAL_DATA="EDITOR_SET_CHART_EXTERNAL_DATA",e.EDITOR_RTE_ACTIVATE="EDITOR_RTE_ACTIVATE",e.EDITOR_RTE_DEACTIVATE="EDITOR_RTE_DEACTIVATE",e.EDITOR_RTE_UPDATE="EDITOR_RTE_UPDATE",e.EDITOR_ACTION_LOADING="EDITOR_ACTION_LOADING"},function(t,e,n){"use strict";var o;!function(i){var r=20,a=20;o=function(){if(window.ThemeHelper)return window.ThemeHelper;var t={shrink_margin:r,shrink_padding:a};return{clear:function(){t.shrink_margin=r,t.shrink_padding=a},setMargin:function(e){t.shrink_margin="undefined"!=typeof e?parseInt(e,10):r},setChartPadding:function(e){t.shrink_padding="undefined"!=typeof e?parseInt(e,10):a},getMargin:function(){return t.shrink_margin},getChartPadding:function(){return t.shrink_padding},SHRINK_MARGIN_CONSTANT:r}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))}(n(482))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.InfographicEditorCommands=e.convertEditorStateToJSON=e.SelectionUtils=e.EditorState=e.InfographicEditor=void 0;var i=n(874),r=o(i),a=n(47),s=o(a),l=n(172),u=o(l),c=n(894),h=o(c),p=n(409),d=n(900),f=o(d),g=n(899),m=o(g);e.InfographicEditor=r["default"],e.EditorState=s["default"],e.SelectionUtils=u["default"],e.convertEditorStateToJSON=h["default"];e.InfographicEditorCommands={bringToFront:p.bringToFront,sendToBack:p.sendToBack,addEntity:p.addEntity,duplicateEntities:p.duplicateEntities,removeEntities:p.removeEntities,hideEntities:p.hideEntities,unhideEntities:p.unhideEntities,insertBlock:p.insertBlock,removeBlocks:f["default"],duplicateBlocks:m["default"]}},function(t,e){t.exports='<svg <% if (typeof viewBox !== "undefined") { %>viewBox="<%= viewBox %>"<% } %>  data-id="<%= val %>" height="<%= height %>" width="<%= width %>" version="1.1"\n    xmlns="http://www.w3.org/2000/svg">\n    <text class="igc-invisible"><%= val %></text>\n    <path fill-rule="evenodd" class="igc-table-scaledpath" <% if (typeof offsetX !== "undefined"){ %>transform="translate(<%=offsetX %>,<%=offsetY %>)"<% } %> fill="<%= fill %>" d="<%= shape %>" />\n</svg>\n'},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(1),a=o(r),s=n(21),l=o(s),u=n(25),c=n(16),h=o(c),p=n(95);i=function(t){var e=n(790),o=n(561),i=n(184),r=n(616),s=n(611),c=n(612),d=n(620),f=n(617),g=n(555),m=n(202),v=n(621),y=n(506),b=n(622),_=n(615),x=n(619),w=n(554),S=n(553),C=n(552),E=n(614),T=n(618),k=n(613),M=a["default"].createFactory(n(722)),O=n(654),I=n(49),P=n(551),L=!1,D=I.extend({tagName:"div",className:"relative",initialize:function(t){this.options=t||{},this.container=this.options.container,this.viewMode=this.options.viewMode,this.showObjects=this.options.showObjects,this.params={},this.options.params&&(this.params=this.options.params),(0,p.resetEntities)(),this.HeadlineView=r,this.BodytextView=s,this.BodytitleView=c,this.QuoteView=d,this.ImageView=f,this.VideoView=g,this.SeparatorView=v,this.ChartView=m,this.MapView=y,this.TableView=b,this.TextualView=_,this.UrlView=x,this.MediaVideoView=w,this.SlideshareView=S,this.MediaImageView=C,this.EmbedButtonView=E,this.LogoView=T,this.DisclaimerView=k},render:function(t){this.containerMargins=null,t=t||function(){};var n=this.model.get("properties")||{},r=this.model.get("width"),a=this.model.get("theme"),s=this.model.get("block_id");this.el.className+=" ig-container",n.transparent&&(this.el.className+=" transparent"),n.zeropaddingembed!==!0&&"true"!==n.zeropaddingembed||(this.el.className+=" zeropadding"),"none"===n.custom_logo&&(this.el.className+=" nologo"),this.el.className+=" "+this.viewMode+"-mode","web"===this.viewMode&&window.innerWidth<r&&(r=window.innerWidth),this.$el.css({width:r}),n.rtl&&this.$el.addClass("direction-rtl");var l={copyright:o.escapeBody(this.model.get("copyright"))};this.$el.html(h["default"].template(e,l)),$(this.container).show(),$(this.container).append(this.el),this.listenTo(window.app.events,"setTitleLink",function(){L=!0}),this.elements=new O([],{block_id:s}),this.listenTo(this.elements,"add",function(t){this.addElement(t)});var c=this.model.get("elements");this.elements.add(c),i.recalculateMargin(),"capture"!==this.viewMode&&(0,u.getTooltip)().setParent(),"web"!==this.viewMode&&"embed"!==this.viewMode||!window.infographicData||2788704!==window.infographicData.user_id||(ga("create","UA-23705000-14","auto",{name:"MSN"}),$(".ig-container").bind("mouseenter",function(){ga("MSN.send","event","engagement","hover")}),$(".ig-container").bind("touchstart",function(){ga("MSN.send","event","engagement","touch")}),$(".ig-container").bind("click",function(){ga("MSN.send","event","engagement","click")}));var p=$("#footer"),d=$('<div class="footer-bottom">');if(p.append(d),"enabled"===n.embed_button){var f=this._getButtonText([this.model.get("properties").embed_button_text,this.model.get("properties").user_embed_button_text,a.get("embedButtonText"),"Share"]),g="embed"===this.viewMode?window.innerWidth:r,m=new this.EmbedButtonView({color:this.model.get("properties").embed_button_color||a.get("logocolor"),model:this.model,fullwidth:g>320,text:f});d.append(m.render().el)}if("none"!==n.custom_logo||!n.whitelabel){var v=a.get("logoImages"),y=a.get("logoUrl");y&&"infogram"===n.title_link&&(n.title_link="custom",n.title_url=y);var b=v.length>0?v[0]:!1,_=new this.LogoView({pro:n.pro,custom_logo:n.custom_logo,custom_logo_value:n.custom_logo_value,custom_link_status:n.custom_link_status,custom_link_url:n.custom_link_url,template_logo:b,color:a.get("logocolor"),title_link:"edit"===this.viewMode?"none":n.title_link,title_url:n.title_url,path:this.model.get("path"),model:this.model});d.append(_.render().el)}if("none"!==n.custom_logo||"none"!==n.embed_button&&"disabled"!==n.embed_button||p.css("min-height",0),"capture"!==this.viewMode){var x=new this.DisclaimerView({copyright:l.copyright});x.render()}return this.processLoadedCallback(t),"edit"!==this.viewMode||this.elements.length||this.addEmptyContainer(),this},addEmptyContainer:function(){this.$emptyContainer=$('<div id="emptyContainer"></div>'),$(".ig-items").append(this.$emptyContainer),l["default"].render(M(),this.$emptyContainer[0])},removeEmptyContainer:function(){this.$emptyContainer&&(l["default"].unmountComponentAtNode(this.$emptyContainer[0]),this.$emptyContainer.remove())},processLoadedCallback:function(t){if(!("MutationObserver"in window))return t();if(-1!==window.navigator.userAgent.indexOf("Trident"))return t();var e=1e3,n=this.observerTimeout=setTimeout(function(){t()},e),o=this.observerInstance=new MutationObserver(function(){clearTimeout(n),n=this.observerTimeout=setTimeout(function(){o.disconnect(),t()},e)}.bind(this)),i={attributes:!0,childList:!0,characterData:!0,subtree:!0};o.observe($(".ig-container")[0],i)},getUndoView:function(){},addActionsContainer:function(){},addElement:function(t,e){e=e||{};var n=e.beforeIndex,o=e.ui,r=e.duplicate,a=!1,s=t.get("type"),l=t.get("object_id"),u=t.get("particle_type");this.removeEmptyContainer(),o&&this.elements.add(t,{at:n,silent:!0});var c=P.shouldRenderElement(t.attributes,this.viewMode);if(c&&"capture"===this.viewMode&&this.showObjects){var p=Object.keys(this.showObjects);if(p.length){var d=this.showObjects[l];c=d&&d.type===s}}if(c){if("particle"===s)switch(t.get("particle_type")){case"quote":a=this.QuoteView;break;case"maintitle":a=this.HeadlineView;break;case"bodytext":a=this.BodytextView;break;case"bodytitle":a=this.BodytitleView;break;case"image":a=this.ImageView;break;case"video":a=this.VideoView;break;case"separator":a=this.SeparatorView}else if("chart"===s){if("download"===this.viewMode||"capture"===this.viewMode){var f=this.options.exportSettings||{},g=t.get("custom");"showGrid"in f&&(g.grid=!!f.showGrid),"showValues"in f&&(g.showInLineValues=g.showPoints=!!f.showValues)}a=19===t.get("chart_type_nr")?this.TableView:9===t.get("chart_type_nr")?this.MapView:23===t.get("chart_type_nr")?this.TextualView:this.ChartView}else if("media"===s)switch(t.get("media_type")){case"url":a=this.UrlView;break;case"vimeo":case"youtube":a=this.MediaVideoView;break;case"slideshare":a=this.SlideshareView;break;case"flickr":case"gallery_image":a=this.MediaImageView}else"undo"===s&&(a=this.getUndoView());if(a){var m={model:t,infographic:this.model,parent:this,renderSettings:this.options.renderSettings||{}};if(a==this.HeadlineView&&(m.titleLinkSet=L),a!==this.TableView&&a!==this.TextualView&&a!==this.MapView||"download"!==this.viewMode&&"capture"!==this.viewMode||h["default"].extend(m.renderSettings,{displaySheets:!0}),"capture"===this.viewMode&&"chart"===s&&this.showObjects&&l in this.showObjects){var v=this.showObjects[l];v&&v.type===s&&v.parts&&v.parts.length&&(m.showColumns=v.parts)}this.onElementViewCreate&&this.onElementViewCreate(t,m);var y=new a(m);t.view=y;var b=window.document.createDocumentFragment(),_=y.render().el,x=null;if("undo"!==s&&this.addActionsContainer(_),b.appendChild(_),isFinite(n)){var w=this.$(".moveable_w");x=n<w.length?w[n]:null}var S;if("undo"!==s)S=$('<div class="moveable_w"></div>').attr("data-element-id",_.id).attr("data-object-id",t.get("object_id")).attr("data-object-type",t.get("type")).attr("data-order",t.get("ord")).append(b);else{var C=t.get("undoModel"),E=C.get("object_id"),T=C.get("type");S=$('<div class="undo_w"></div>').attr("data-object-id",t.get("object_id")).attr("data-undo-id",E).attr("data-undo-type",T).append(b),t.get("isShrunken")&&S.addClass("shrink")}o&&S.addClass("__added");var k=t.get("custom")&&t.get("custom").shrink;if((t.get("shrink")||k)&&(S.addClass("shrink"),"particle"!==s&&"media"!==s&&9!==t.get("chart_type_nr")&&19!==t.get("chart_type_nr")&&23!==t.get("chart_type_nr")||i.boxWidth(u,t.view.$el)),$(".ig-items")[0].insertBefore(S[0],x),"chart"===s&&y.init(),"media"===s&&t.view.$el.find(".shrink").remove(),window.moveables instanceof Array&&"undo"!==s&&(S.attr("ord",moveables.length),moveables.push(y.el.id)),o){var M=function(){S.addClass("__ui"),window.app.events.trigger("Editable:resetOrder")},O=$("html, body");"undefined"==typeof n||r?O.animate({scrollTop:S.position().top},"normal",M):M()}return e.events&&e.events.forEach(function(t){window.app.events.trigger(t)}),S}}},_unload:function(){this.observerTimeout&&(clearTimeout(this.observerTimeout),this.observerInstance.disconnect()),this.removeEmptyContainer()},_getButtonText:function(t){return h["default"].find(t,function(t){return"undefined"!=typeof t})}});return D}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var o=n(32),i=n(528),r=n(439),a=n(844),s=n(529),l=n(827),u=n(122),c=n(539),h=n(540),p=n(627),d=(n(31),u.createElement),f=u.createFactory,g=u.cloneElement,m=o,v={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:r,PureComponent:a,createElement:d,cloneElement:g,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:f,createMixin:function(t){return t},DOM:l,version:h,__spread:m};t.exports=v},,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){$("#Chart_"+t).empty(),(0,s.removeEntity)(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(133),a=o(r),s=n(95);e["default"]={getChartInstance:function(){return a["default"].getEntity(this.id)},cleanup:function(){var t,e=this.id,n=this.getChartInstance();n&&(t=n.instance),t&&(t.paper?(t.paper.clear(),i(e)):this.instanceType!==t.options.type&&i(e))}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(396),a=o(r),s=n(95),l=Object.create(a["default"]);e["default"]=l,function(t){this.instanceClass=i.Charts.AreaStacked,this.instanceType="area-stacked",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;n.series.dataPoints=e.showPoints!==!1,n.series.data=e.absoluteDistribution===!0?"absolute":"separate",this.switchType(e.type)},this.switchType=function(t){var e,n=this.chart.get("modifier"),o=1===n;(o||"Area"===t)&&(this.instanceClass=i.Charts.Area,this.instanceType="area",this.chartOptions.type="area",e=this.getChartInstance(),e&&e.instance&&"area-stacked"===e.instance.options.type&&($(this.chartOptions.container).empty(),(0,s.removeEntity)(this.id)))},this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e),o=n.axis[0],i=n.axis[1];return delete o.minLimit,delete o.maxLimit,"number"==typeof e.ymin&&(i.minLimit=e.ymin),"number"==typeof e.ymax&&(i.maxLimit=e.ymax),this.assignNumberFormatValues(i,e),n}}.call(l,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(t){this.instanceClass=a.Charts.Bar,this.instanceType="bar",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;r["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight,n.series.data=e.absoluteDistribution===!0?"absolute":"separate"},this.setupChartSheetOptionsItem=function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},series:{showValues:t.showInLineValues===!0,shape:t.style},grid:{vertical:!0,horizontal:!1},axis:[{},{}]},n=e.axis[0];return t.enableHeight||(e.categories.categoryHeight=t.categoryHeight||this.defaultCategoryHeight),n.title=t.xlabel||"",e.axis[1].title=t.ylabel||"","number"==typeof t.xmin&&(n.minLimit=t.xmin),"number"==typeof t.xmax&&(n.maxLimit=t.xmax),t.grid===!1&&(e.grid.vertical=!1,e.grid.horizontal=!1),void 0!==t.showInLineValuesOutside&&(e.axis[0].valuesOutside=t.showInLineValuesOutside),this.assignNumberFormatValues(n,t),e}}.call(u,l["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(497),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(){this.instanceClass=i.Charts.BarStacked,this.instanceType="bar-stacked",this.setupChartSheetOptionsItem=function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},grid:{vertical:!0,horizontal:!1},axis:[{},{}],legend:{enabled:!0}},n=e.axis[0];return t.enableHeight||(e.categories.categoryHeight=t.categoryHeight||this.defaultCategoryHeight),n.showValues=t.showInLineValues===!0,n.title=t.xlabel||"",e.axis[1].title=t.ylabel||"",t.showLabels===!1&&(e.legend.enabled=!1),"number"==typeof t.xmin&&(n.minLimit=t.xmin),"number"==typeof t.xmax&&(n.maxLimit=t.xmax),t.grid===!1&&(e.grid.vertical=!1,e.grid.horizontal=!1),this.assignNumberFormatValues(n,t),e}}.call(s)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(t){this.instanceClass=a.Charts.Column,this.instanceType="column",this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;r["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight,n.series.data=e.absoluteDistribution===!0?"absolute":"separate"},this.setupChartSheetOptionsItem=function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},grid:{vertical:!1,horizontal:!0},axis:[{},{}],legend:{enabled:!0}};t.categoryWidthAuto||(e.categories.categoryWidth=t.categoryWidth||this.defaultCategoryWidth);var n=e.axis[1];return n.showValues=t.showInLineValues===!0,n.title=t.ylabel||"",e.axis[0].title=t.xlabel||"",t.showLabels===!1&&(e.legend.enabled=!1),"number"==typeof t.ymin&&(n.minLimit=t.ymin),"number"==typeof t.ymax&&(n.maxLimit=t.ymax),t.grid===!1&&(e.grid.vertical=!1,e.grid.horizontal=!1),void 0!==t.showInLineValuesOutside&&(n.valuesOutside=t.showInLineValuesOutside),this.assignNumberFormatValues(n,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(u,l["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(422),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.ColumnGrouped,this.instanceType="column-grouped",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return void 0!==e.showInLineValuesOutside&&(n.axis[1].valuesOutside=e.showInLineValuesOutside),n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(396),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(){this.instanceClass=i.Charts.Double,this.instanceType="double",this.setupChartSheetOptionsItem=function(t){var e=this.sheetOptionsItemDefaults(t),n=e.axis[0],o=e.axis[1];return t.smooth===!0&&(e.series[1]={},e.series[1].interpolation="monotone"),"number"==typeof t.ymin&&(n.minLimit=t.ymin),"number"==typeof t.ymax&&(n.maxLimit=t.ymax),"number"==typeof t.y2min&&(o.minLimit=t.y2min),"number"==typeof t.y2max&&(o.maxLimit=t.y2max),this.assignNumberFormatValues(o,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(s)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(){this.instanceClass=a.Charts.PictorialGrid,this.instanceType="pictorial-grid",this.addToChartOptionsShapes=function(t){var e=InfoCharts.Visuals.ShapeGenerator.Path[t];e||(t=this.defaultShape,e=InfoCharts.Visuals.ShapeGenerator.Path[t]),this.chartOptions.shapes||(this.chartOptions.shapes=[]);var n=r["default"].findWhere(this.chartOptions.shapes,{title:t});n||this.chartOptions.shapes.push({title:t,shape:e.path})},this.setupChartOptions=function(){l["default"].setupChartOptions.call(this);var t=this.custom,e=this.chartOptions;r["default"].has(t,"height")?e.height=parseInt(t.height,10):e.height=this.defaultHeight,e.series.data=t.absoluteDistribution===!0?"absolute":"separate",e.series.distribution=t.roundValues===!1?"scattered":"round",e.series.realNumbers=t.realNumbers===!0},this.setupChartSheetOptionsItem=function(t){var e={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},legend:{enabled:this.custom.showLabels!==!1}},n=t.defaultPath;return this.addToChartOptionsShapes(n),e.categories.shapes=[n],e}}.call(u)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(t){this.instanceClass=a.Charts.Treemap,this.instanceType="treemap",this.initVariables=function(e){t.initVariables.call(this,e);var n=this.custom;n.singleSheet&&(this.data=[this.data[0]])},this.setupChartOptions=function(){t.setupChartOptions.call(this);var e=this.custom,n=this.chartOptions;r["default"].has(e,"height")?n.height=parseInt(e.height,10):n.height=this.defaultHeight},this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e),o=n.treemap={showValues:e.showInLineValues===!0,sort:"none"},i={1:"squarify",0:"slice",100:"dice",5:"squarify"};return n.axis=[{}],n.categories.layout=r["default"].has(e,"horizontalKoeficient")?i[e.horizontalKoeficient]:i[1],n.labels=$.extend(!0,{},this.charts&&this.charts.treemap&&this.charts.treemap.labels||{}),n.labels.position=r["default"].has(e,"labelPosition")?e.labelPosition:n.labels.position?n.labels.position:"center",this.assignNumberFormatValues(n.axis[0],e),r["default"].has(e,"sort")&&0!==e.sort&&(o.sort=-1===e.sort?"desc":"asc"),n}}.call(u,l["default"])},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showInLineValues:!1,showGroups:!0,showLabels:!0,panelMarginY:15,absoluteDistribution:!1,gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-opacity":0,"stroke-width":0,stroke:"none"},inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,fill:"#FFFFFF"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridOptions:{forceDataMargin:!0
},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyleUp:{"stroke-width":0,"stroke-opacity":0,fill:"#74CE33",stroke:"none"},shapeStyleDown:{"stroke-width":0,"stroke-opacity":0,fill:"#CD3736",stroke:"none"},barPercentage:.7,style:"bar-bar",guidPathShow:!1,guidPathStyle:{"stroke-width":2,"stroke-opacity":1,stroke:"#959595"},guidSizeFull:!0},e.visualSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.gridDef=null,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.options.smooth&&(e.options.complexAnimations=!1),e},e.state={currentState:{line:{path:null,attr:null},points:[]},newState:{line:{path:null,attr:null},points:[]},minMax:null,interactionsEnabled:!1,axesTitle:null,miscTimer:null},e._loadDataActual=function(t,n,o,i,r){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.options.increment){var a,s,l=function(t){s+=t[1],t[2]=t[1],t[1]=s,a.push(t)};_.each(e.data,function(t){for(var n=0;n<t.value.length;n++){var o=t.value[n];a=[],s=0,s=t.startValue,e.options.incrementShowStart&&a.push([t.startValueX,t.startValue]),_.each(o,l),e.options.incrementShowEnd&&a.push([t.endValueX,s]),t.value[n]=a}})}if(0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;var u=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var c=InfoCharts.Helper.Data.getGroups(e.data);n=n||c[0]||null;var h=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),null!==e.state.miscTimeout&&(clearTimeout(e.state.miscTimeout),e.state.miscTimeout=null),_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var p=0;if(u=e.root.getCenter(),o&&e.options.showGroups&&e.options.hasGroups&&c.length>1&&new InfoCharts.Visuals.RadioButtons({groups:c,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.grid&&(e.grid.dispose(),e.grid=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var d=InfoCharts.Helper.Data.getLabelsUniq(h);d.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),d),p=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,p),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-p/2+e.options.panelMarginY}),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var f=0,g=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(f=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(g=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.background.attr({x:0+f,y:e.buttonHeight,width:e.root.options.canvasWidth-f*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:e.root.options.canvasHeight-e.buttonHeight-p-g}),e.background.bb=e.background.getBBox(),f&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:f/2,y:e.background.bb.y+e.background.bb.height/2})),g&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+g/2}));var m=null;m={},m.minMax={min:NaN,max:NaN},e.state.minMax=m.minMax,e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[f,e.buttonHeight],size:[e.root.options.canvasWidthDefault-f*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-p-g],offset:[{start:0,end:0},{start:0,end:0}],minMax:[{min:NaN,max:NaN},e.state.minMax],canResize:!1}),e.options.absoluteDistribution?e.data:h),m.data&&(h=m.data),e.grid.createGrid(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var v,y,b=[],x=0,w=e.options.absoluteDistribution?e.data:h;for(v=0;v<w.length;v++)for(y=0;y<w[v].value[0].length;y++)b.push(w[v].value[0][y][0]);x=_.uniq(b).length;var S=(e.root.options.canvasWidthDefault-f*(e.options.axesTitleBalanceHorizontalSpaceing?2:1))/(x+1)*e.options.barPercentage/h.length;e.options.inTextStyle["font-size"]=S;var C,E=[],T=e.grid.getGridPositionBase(),k=e.grid.getGridPosition([0,0]),M=[e.options.styleUp,e.options.styleDown],O=[];for(v=0;v<M.length;v++)C=M[v]||e.options.style,O[v]="ipg-"+C,InfoCharts.Visuals.ShapeGenerator.Anim[C]?InfoCharts.Visuals.ShapeGenerator.Anim[C](e.root.paper,O[v]):(C=C.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,O[v],C));var I=[[]];for(e.onmouseoutFuncList=[],v=0;v<h.length;v++){C=h[v].styleName||e.options.style;var P="ipg-"+C;InfoCharts.Visuals.ShapeGenerator.Anim[C]?InfoCharts.Visuals.ShapeGenerator.Anim[C](e.root.paper,P):(C=C.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,P,C));var L=P;for(y=0;y<h[v].value[0].length;y++){var D=h[v].value[0][y],A=h[v].origValue[0][y],N=e.root.paper.path(),B=!1;2==D.length&&(D[2]=D[1],B=!0);var j;e.options.increment&&D.length>2&&null!==D[2]?(P=O[D[2]>0?0:1],j={data:{name:h[v].name,valueString:D[2].toString(),valueOriginal:A,objectId:h[v].objectId,group:h[v].group,valuePrefix:D[0]},path:N}):(P=L,j={data:{name:h[v].name,valueString:D[1].toString(),valueOriginal:A,objectId:h[v].objectId,group:h[v].group,valuePrefix:D[0]},path:N});var R=e.grid.getPositionAuto(D),H=e.grid.getPositionAuto([D[0],D[2]]),F=$.proxy(e.eventing.onMouseOver,j),z=$.proxy(e.eventing.onMouseOut,j);e.onmouseoutFuncList.push(z),B&&D.pop(),e.options.increment&&D.length>2&&null!==D[2]?D[2]>0?N.attr(e.options.shapeStyleUp):N.attr(e.options.shapeStyleDown):(N.attr($.extend({fill:h[v].color,stroke:h[v].color},e.options.shapeStyle)),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+j.data.objectId,F),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+j.data.objectId,z))),N.mouseover(F),N.mousemove($.proxy(e.eventing.onMouseMove,j)),N.mouseout(z),N.attr(InfoCharts.Helper.Misc.addProperty({},P,[R[0].value+S/2-S*h.length/2+S*v,T[1].value,S,0])),e.visualSet.push(N);var V;if(e.options.increment&&null!==D[2]){var U=R[1].value+k[1].value-H[1].value,W=H[1].value-k[1].value;U>T[1].value&&(W=W-U+T[1].value,U=T[1].value),V=InfoCharts.Helper.Misc.addProperty({},P,[R[0].value+S/2-S*h.length/2+S*v,U,S,W]),I.push({x:R[0].value+S/2-S*h.length/2+S*v,y:U+W})}else V=InfoCharts.Helper.Misc.addProperty({},P,[R[0].value+S/2-S*h.length/2+S*v,T[1].value,S,R[1].value-T[1].value]),I.push({x:R[0].value+S/2-S*h.length/2+S*v,y:T[1].value+R[1].value-T[1].value});var G=$.proxy(e.afterAnimation,{data:h[v],shape:N,actionCounter:e.state.actionCounter});e.root.options.canAnimate?E.push({obj:N,anim:Raphael.animation(V,e.root.options.animationDuration,e.root.options.animationStyle,G).delay(y/h[v].value[0].length*e.root.options.animationSequenceDuration)}):(N.attr(V),G())}}e.grid.postDisplayMods(e.options.gridPostOptions);var K=0;for(y=0;y<E.length;y++)E[y].obj.stop(),E[y].obj.animate(E[y].anim),K=Math.max(K,E[y].anim.ms+E[y].anim.del);e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),setTimeout(function(){e.state.interactionsEnabled=!0},K),e.options.guidPathShow&&(e.state.miscTimeout=setTimeout(function(){for(var t,n=e.options.guidSizeFull?S/2:0,o=1;o<I.length-1;o++)t=e.root.paper.path([["M",I[o].x-n,Math.round(I[o].y)],["L",I[o+1].x+n,Math.round(I[o].y)]]),t.attr(e.options.guidPathStyle),e.visualSet.push(t)},K)),e.options.showInLineValues&&S>8&&(e.state.miscTimeout=setTimeout(function(){for(var t,n=1,o=0;o<h.length;o++){for(var i=0;i<h[o].value[0].length;i++){var r=h[o].value[0][i][1].toString();t=e.root.paper.text(I[i+n].x,Math.round(k[1].value),r),t.attr(e.options.inTextStyle);var a=t.getBBox(),s=h[o].value[0][i][1]<0?1:-1;t.transform([["T",0,s*a.width/2+s],["R",-90]]);//!!!!
var l=e.visualSet[i+n-1].getBBox().height;l<a.width+2?t.remove():e.visualSet.push(t)}n+=h[o].value[0].length}},K)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({value:this.data.group,text:this.data.valuePrefix+": "+this.data.valueOriginal,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={smooth:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,showPoints:!1,showLines:!0,showArea:!0,stacked:!1,alignment:"center",tooltipForLines:!0,tooltipForPoints:!0,absoluteDistribution:!1,complexAnimations:!1,complexAnimationPower:2,gridPostOptions:{gridToFront:!1,labelsToFront:!0,baseLinesToFront:!1},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},pathStyle:{"stroke-width":.5,opacity:1},circleStyle:{"stroke-width":1.5,fill:"#FFFFFF",r:4},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridOptions:{}},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.options.smooth&&(e.options.complexAnimations=!1),e},e.state={currentState:{line:{path:null,attr:null},points:[]},newState:{line:{path:null,attr:null},points:[]},minMax:null,interactionsEnabled:!1,axesTitle:null},e._loadDataActual=function(t,n,o,i,r){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=InfoCharts.Helper.Data.getGroups(e.data);n=n||a[0]||null;var s=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var l=0,u=e.root.getCenter();o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&a.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),a),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:u.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.labels&&(e.labels.dispose(),e.labels=null),e.root.resizeHeight(e.buttonHeight,l),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2+e.options.panelMarginY}),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var c=0,h=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(c=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(h=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.background.attr({x:0+c,y:e.buttonHeight,width:e.root.options.canvasWidth-c*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:e.root.options.canvasHeight-e.buttonHeight-l-h}),e.background.bb=e.background.getBBox(),c&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:c/2,y:e.background.bb.y+e.background.bb.height/2})),h&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+h/2})),e.options.hasGroups&&e.options.absoluteDistribution?o&&(e.state.minMax={min:NaN,max:NaN},_.each(a,function(t){var n;n=InfoCharts.Helper.Data.copyDataArray(_.filter(e.data,function(e){return e.group==t})),n=InfoCharts.Helper.Data.transformStreamPoints(n,e.options.alignment,!0,e.options._gridOptions.gridDef?e.options._gridOptions.gridDef[0]:null),e.state.minMax.max=isNaN(e.state.minMax.max)?n.minMax.max:Math.max(e.state.minMax.max,n.minMax.max),e.state.minMax.min=isNaN(e.state.minMax.min)?n.minMax.min:Math.min(e.state.minMax.min,n.minMax.min)})):e.state.minMax=null;var p;if(p=InfoCharts.Helper.Data.copyDataArray(s),p=InfoCharts.Helper.Data.transformStreamPoints(p,e.options.alignment,!0,e.options._gridOptions.gridDef?e.options._gridOptions.gridDef[0]:null),e.state.minMax=e.state.minMax||p.minMax,e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[0+c,e.buttonHeight],size:[e.root.options.canvasWidthDefault-c*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-l-h],offset:[{start:0,end:0},{start:0,end:0}],minMax:[{min:NaN,max:NaN},e.state.minMax],canResize:!1}),e.options.absoluteDistribution?e.data:s),s=p.data,e.grid.createGrid(),e.options.showLabels){var d=InfoCharts.Helper.Data.getLabelsUniq(s);d.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),d),l=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,l),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2});var f=null,g=null,m=null,v=null,y=0,b=null,x=null,w="M",S=e.root.paper.set(),C=e.grid.getGridPosition([0,0!==p.offset?(p.minMax.max-p.minMax.min)/2:0]);e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var E=[],T=[];e.onmouseoutFuncList=[];var k,M,O,I,P,L=0,D=0,A=0;for(k=0;k<s.length;k++){y=0,g=[],x=[],b=e.root.paper.set();for(var N=[],B=[],j=0;j<s[k].range.length;j++){if(w="M",e.options.complexAnimations)for(M=1;M<=s[k].range[j].length;M++)A+=Math.pow(M,e.options.complexAnimationPower);for(var R=0;R<s[k].range[j].length;R++){f=e.grid.getGridPosition([s[k].range[j][R][0],s[k].range[j][R][1].top]);var H=e.grid.getGridPosition([s[k].range[j][R][0],s[k].range[j][R][1].bottom]);e.options.showLines&&(g[y]=[w,f[0].value,f[1].value],N.length>0?N[y]=["LL",H[0].value,H[1].value]:N[y]=["L",H[0].value,H[1].value],e.root.options.canAnimate&&(x[y]=[w,f[0].value,C[1].value],B.length>0?B[y]=["LL",H[0].value,C[1].value]:B[y]=["L",H[0].value,C[1].value])),e.options.complexAnimations&&(D=1.5*e.root.options.animationDuration/A*Math.pow(R+2,e.options.complexAnimationPower)),e.options.showPoints&&!s[k].range[j][R][2]&&(e.root.options.canAnimate?e.options.complexAnimations?(v=e.root.paper.circle(f[0].value,f[1].value,0).attr({opacity:0}),E.push({obj:v,anim:Raphael.animation({opacity:1},0,e.root.options.animationStyle).delay(L)})):(v=e.root.paper.circle(f[0].value,C[1].value,0),E.push({obj:v,anim:Raphael.animation({cx:f[0].value,cy:f[1].value},e.root.options.animationDuration,e.root.options.animationStyle)})):v=e.root.paper.circle(f[0].value,f[1].value,0),e.options.tooltipForPoints&&(O={data:{objectId:s[k].objectId,name:s[k].name,valueString:s[k].originalValue[j][R][0]+" : "+s[k].originalValue[j][R][1]},path:e.root.paper.set().push(v)},I=$.proxy(e.eventing.onMouseOver,O),P=$.proxy(e.eventing.onMouseOut,O),e.onmouseoutFuncList.push(P),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+O.data.objectId,I),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+O.data.objectId,P)),v.mouseover(I),v.mousemove($.proxy(e.eventing.onMouseMove,O)),v.mouseout(P)),b.push(v)),e.options.complexAnimations&&(L+=D),y++,w="LL"}}var F=e.root.paper.set();if(g=InfoCharts.Helper.Misc.linePathToCurvedPath(g,e.root,!1,e.options.smooth),N=InfoCharts.Helper.Misc.linePathToCurvedPath(N,e.root,!0,e.options.smooth),x=InfoCharts.Helper.Misc.linePathToCurvedPath(x,e.root,!1,e.options.smooth),B=InfoCharts.Helper.Misc.linePathToCurvedPath(B,e.root,!0,e.options.smooth),g.length>=2){var z,V=[];for(z=0;z<x.length;z++)V[z]=x[z],V[x.length+z]=B[x.length-z-1];x=V;var U=[];for(z=0;z<g.length;z++)U[z]=g[z],U[g.length+z]=N[g.length-z-1];if(g=U,e.root.options.canAnimate)if(e.options.complexAnimations){for(m=e.root.paper.path(),L=0,D=0,A=0,M=1;M<=g.length/2;M++)A+=Math.pow(M,e.options.complexAnimationPower);for(var W=1,G=g.length/2;G>=W;W++){var K=g.slice(0,W)+g.slice(g.length-W,g.length),q=g.slice(0,W)+g.slice(W-1,W)+g.slice(g.length-W,g.length-W+1)+g.slice(g.length-W,g.length);D=1.5*e.root.options.animationDuration/A*Math.pow(W,e.options.complexAnimationPower),T.push({obj:m,anim:Raphael.animation({path:K},D,e.root.options.animationStyle).delay(L),state:{path:q}}),L+=D}}else m=e.root.paper.path(x),E.push({obj:m,anim:Raphael.animation({path:g},e.root.options.animationDuration,e.root.options.animationStyle)});else m=e.root.paper.path(g);e.options.showLines&&e.options.showArea?m.attr($.extend({stroke:s[k].color,fill:s[k].color},e.options.pathStyle)):m.attr($.extend({stroke:s[k].color},e.options.pathStyle)),e.visualSet.push(m),F.push(m),O={data:{name:s[k].name,valueString:s[k].valueString,objectId:s[k].objectId},path:F},I=$.proxy(e.eventing.onMouseOver,O),P=$.proxy(e.eventing.onMouseOut,O),e.onmouseoutFuncList.push(P),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+O.data.objectId,I),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+O.data.objectId,P)),e.options.showLines&&(e.options.tooltipForLines&&!e.options.tooltipForPoints?(F.mouseover(I),F.mousemove($.proxy(e.eventing.onMouseMove,O)),F.mouseout(P)):e.options.tooltipForLines&&(m.mouseover(I),m.mousemove($.proxy(e.eventing.onMouseMove,O)),m.mouseout(P)))}e.options.showPoints&&(b.attr($.extend({fill:s[k].color,stroke:s[k].color},e.options.circleStyle)),e.visualSet.push(b),F.push(b),S.push(b))}e.grid.postDisplayMods(e.options.gridPostOptions),S.toFront(),e.root.resizeHeight(e.buttonHeight,l+e.root.options.additionalHeight+50),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2});var Y=0;for(k=0;k<E.length;k++)E[k].obj.stop(),E[k].obj.animate(E[k].anim),Y=Math.max(Y,E[k].anim.ms+E[k].anim.del);for(k=0;k<T.length;k++)T[k].obj.animate(T[k].anim),T[k].obj.attr(T[k].state),Y=Math.max(Y,T[k].anim.ms+T[k].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},Y),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({stroke:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path[0].attr("stroke"),e.options.showTooltip&&t){e.tooltip=Infogram.Charts.tooltip;var n=this.data.valueString;n||(n=" "),e.tooltip.setOptions({text:this.data.name,value:n,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})}e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({stroke:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(25),a=n(201),s=o(a),l=n(130),u=o(l),c=n(95),h=n(399),p=o(h),d=n(781),f=o(d);i=function(t){var e,o=n(202),i=n(799),a=n(871),l={countryFill:"#dcdbc7",overflow:"hidden"},h={shapeSize:32,shapeMin:5,shapeMax:30},d={text:null,value:null},g=!1,m=function(t){return t?!0:0===t},v=function(t,e){if(t<e[0])return 0;if(t>e[1])return 1;var n=Math.abs((t-e[0])/(e[1]-e[0]));return isNaN(n)?1:n},y=function(t,e){var n={"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png":"Map tiles: Wikimedia Maps","http://c.tile.stamen.com/watercolor/{z}/{x}/{y}.png":'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n                under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>,\n                under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',"http://b.tile.stamen.com/toner/{z}/{x}/{y}.png":'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n                under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>,\n                under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'},o=n[t]||'Map tiles: Wikimedia Maps. Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';return e&&(o=e+" | "+o),o},b=function(t){return escape(t.toString()).replace(/[\s\.\%\*]/g,"-")},x=function(t,e){var n=_.inRange(t.left,e.left,e.right)||_.inRange(e.left,t.left,t.right),o=_.inRange(t.top,e.top,e.bottom)||_.inRange(e.top,t.top,t.bottom);return n&&o},w=function(t,e){for(var n=0,o=e.length;o>n;n++){var i=e[n];if(x(i,t))return!0}return!1},S=function(t,e){return null===t||"undefined"==typeof t?0:"."===e?parseFloat(t.toString().replace(/,/g,"")):parseFloat(t)},C=function(t,e,n){var o,i;if(n)i=e[1][0]-e[0][0],o=e[1][1]-e[0][1];else{var r=[f["default"].latLng(e[0][0],e[0][1]),f["default"].latLng(e[0][0],e[1][1]),f["default"].latLng(e[1][0],e[0][1]),f["default"].latLng(e[1][0],e[1][1])];o=r[0].distanceTo(r[1]),i=r[0].distanceTo(r[2]);var a=r[2].distanceTo(r[3]);o=(o+a)/2,i/o>5&&(i=.75*o)}return t*Math.min(i/o,1.5)},E=function(t){return JSON.parse(JSON.stringify(t))},T=function(t,e,n){var o=e.get("colors"),i=e.get("custom"),r=e.get("sheets_settings")||[],a=i.groupedData?2:0;if(null===t||void 0===t[0])return!1;var s=[],l=o.length>0?o:n.colors||n.get("colors"),u=[],c={},h=0,p=0,d=function(t,e){var n=i.groupedColors||{},o=r[e],s=o&&o.groupedColors;s&&(n=o.groupedColors||{}),t.forEach(function(t){var e=t[a]||"",o=e.toLowerCase();if(i.points&&t[3]&&(n[o+t[3]]?u[p]=n[o+t[3]]:n[e+t[3]]&&(u[p]=n[e+t[3]])),!u[p])if(n[o])u[p]=n[o];else if(n[e])u[p]=n[e];else{var r=void 0;void 0===c[e]&&(r=l[h%l.length],n[e]=r,h++),u[p]=r}p++})},f=function(t,e){s[e]={},_.each(t,function(t,n){var o=t[0]?t[0].toLowerCase():null;if(i.points&&(o=t[3]?t[0]+t[3]:null),o){var r="";if(t.length>5){var a=t.slice(5);a=_.map(a,function(t){return _.escape(t)}),r=a.join("<br/>")}var l=t[3]?t[3].split(" "):[0,0];s[e][o]={name:t[4]?t[4]:o,value:t[1],group:t[2],color:u[p],description:r,type:i.points?"latlong":"area",lat:parseFloat(l[0])||0,"long":parseFloat(l[1])||0,id:n,key:o}}p++})};return i.heatmap||_.each(t,d),p=0,_.each(t,f),s},k=function(t,e,n){var o=S(e,n),i=t.length;if(o<t[0])return 0;if(o>=t[i-1])return i-1;for(var r=i-1;r>=0;){if(o>=t[r])return r+1;r--}return 0},M=function(t,e,n){if(n&&m(n.xmin)&&m(n.xmax)&&n.xmin!==n.xmax)return[n.xmin,n.xmax];if(m(e.xmin)&&m(e.xmax)&&e.xmin!==e.xmax)return[e.xmin,e.xmax];var o=[!1,!1];return _.each(t,function(t){t.valueString=t.valueString||t.value;var n=t.value=S(t.value,e.decimalSeparator);isNaN(n)&&(t.value=n=1),(!o[0]||o[0]>n)&&(o[0]=n),(!o[1]||o[1]<n)&&(o[1]=n)}),o},O=function(t,e){var n=t.label||t.name;return t&&e.groupedData&&e.showName!==!1?n+"<br>"+t.group:t.group&&e.groupedData?t.group:_.escape(n)},I=function(t,e){return(!t[0][0]||e[1]<t[0][0])&&(t[0][0]=e[1]),(!t[1][0]||e[1]>t[1][0])&&(t[1][0]=e[1]),(!t[0][1]||e[0]<t[0][1])&&(t[0][1]=e[0]),(!t[1][1]||e[0]>t[1][1])&&(t[1][1]=e[0]),t},P=function(t,e){var n=[[!1,!1],[!1,!1]];if(_.each(t,function(t){_.each(t,function(t){_.each(t,function(t){_.isArray(t[0])?_.each(t,function(t){n=I(n,t)}):n=I(n,t)})})}),n[1][1]-n[0][1]>340&&(n[0][1]=-150,n[1][1]=170),e){var o=.05*(n[1][1]-n[0][1]);n[0][0]-=o,n[0][1]-=o,n[1][0]+=o,n[1][1]+=o}return n},L=function(t,e){return"russia"==t?e["long"]<0&&(e["long"]+=360):"usa"==t?e["long"]<-140&&e.lat<50?(e["long"]+=50,e.lat+=7.11):e.lat>50&&(e["long"]=-122.3-3*(-167.8-e["long"])/10,e.lat=29.9-3*(71.4-e.lat)/6):"japan"==t&&e["long"]<128&&e.lat<27&&(e["long"]+=8,e.lat+=16),e},D=function(t){var n=t.target;e&&e.remove(),e=new s["default"];var o={x:t.originalEvent.pageX,y:t.originalEvent.pageY},i=n.feature.properties;d.text===i.tooltipText&&d.value===i.tooltipValue||e.hide(),e.setOptions({text:i.tooltipText,value:i.tooltipValue,pos:o,color:i.color}),d.text=i.tooltipText,d.value=i.tooltipValue,g=!0},A=function(){e&&e.hide()},N=function(t,e,n){if(t[0]>t[1]){var o=[t[1],[t[0]]];t[0]=o[0],t[1]=o[1]}for(var i=t[1]-t[0],r=i/e,a=[],s=0,l=r;1>l;)l*=10,s++;for(var u=1;e>=u;u++){var c=(t[0]+u*r).toFixed(s);a.push(S(c,n))}return a};return o.extend({template:n(798),events:{"click .igc-sheet":function(t){var e=$(t.currentTarget);e.parent().find(".igc-sheet").removeClass("active"),e.addClass("active"),this.loadSheet(parseInt(e.attr("data-value"),10))},"click .igc-tab":function(t){var e=$(t.currentTarget),n=parseInt(e.attr("data-value"),10);isNaN(n)||(e.parent().find(".igc-tab").removeClass("active"),e.addClass("active"),this.loadSheet(n))}},importArrayData:function(t,e){this.data=T(t,this.model,this.infographic.get("theme")),!e&&this.sheetnames||(this.sheetnames=e||[]),this.activeSheet>=t.length&&(this.activeSheet=0)},loadJSON:function(t,e,n){var o=this.model.get("custom"),i=this.data[e]||[[]],r=this.coords=[],a=function(t,e){var n=t.properties[e]?t.properties[e].toLowerCase():null,a=i[n];if(a&&!t.properties.show&&"area"===a.type){var s=o.showValue!==!1?(_.escape(a.valueString)||_.escape(a.value))+"<br>":"",l=t.geometry;s+=a.description,t.properties={value:a.value,color:a.color,group:o.groupedData?a.group:!1,name:a.name,show:!0,tooltipText:O(a,o),tooltipValue:s},o.osm&&l.coordinatesOriginal&&(l.coordinates=l.coordinatesOriginal),r.push(l.coordinates)}},s=function(t){var e=t.features[0].properties.type,i=["adm0a3","formal_en","name","admin"];"State"!=e&&"Region"!=e||(i=["name","postal"]),t.features=_.filter(t.features,function(t){return _.each(i,a.bind(this,t)),t.properties.show||!o.hideBlanks||o.points?t:void 0}),n(t)};return o.map_json?(this.dataJSON=E(o.map_json),s(o.map_json)):void $.ajax({url:"/js/common/maps/"+t+".json",dataType:"json",cache:!0}).done(function(t){this.dataJSON=t,s(t)}.bind(this)).fail(function(){n(!1)})},adjustHeight:function(t,e){$(this.maps[t]._container).height(e),this.maps[t].invalidateSize()},loadSheet:function(t,e){var n=this,o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this.animation.start(),this.data[t]||(t=0);var i=this.model.get("chart_id"),r=this.model.get("custom");this.renderSettings.displaySheets&&(i+="-"+(null!==o?o:t));var a=(0,u["default"])({sheetIndex:t,chart:this.model}),s=a.getCustomValue("inactive"),c=a.getCustomValue("heatmap_entries");s&&(l.countryFill=s);var h=this.$el.find("#map_"+i+" + .igc-legend");c&&c>10?(h.addClass("bottom-heatmap-legend"),h.removeClass("floating-heatmap-legend")):(r.heatmap&&h.addClass("floating-heatmap-legend"),h.removeClass("bottom-heatmap-legend")),this.activeSheet=t,$(this.$el.find(".igc-sheet,.igc-tab")[t]).addClass("active");var p=function(t,e){t.properties.show&&e.on({mousemove:D,click:D})},d=$.extend(!0,{},this.dataJSON),m=this.data[t]||[[]],v=this.coords=[],b=!r.hideBlanks||r.points;if(b&&(b={geometry:{type:"MultiPolygon",coordinates:[]},properties:{name:"Background",points:r.points,opacity:1,stroke:"#fff",show:!1,weight:1},type:"Feature"}),r.heatmap&&this.applyHeatmapColors(t),d.features=_.filter(d.features,function(t){var e=t.properties,n=e.name?e.name.toLowerCase():null,o=m[n],i=t.geometry.coordinates;if(r.osm&&t.geometry.coordinatesOriginal&&(t.geometry.coordinates=t.geometry.coordinatesOriginal,delete t.geometry.coordinatesOriginal),o&&"area"===o.type){var a=r.showValue!==!1?(o.valueString||o.value)+"<br>":"";a+=o.description;var s={opacity:1,stroke:"#fff",weight:1};r.osm&&!r.points&&(s={opacity:.5,stroke:o.color,weight:2}),t.properties={value:o.value,color:o.color,group:r.groupedData?o.group:!1,name:o.name,show:!0,opacity:s.opacity,stroke:s.stroke,tooltipText:O(o,r),tooltipValue:a,weight:s.weight},v.push(i)}if(t.properties.show)return t;if(b){var l=b.geometry.coordinates;if("Polygon"===t.geometry.type)l.push(i);else for(;i.length;)l.push(i.shift())}}),b&&b.geometry.coordinates.length>0&&!r.osm&&d.features.push(b),d===!1)return void window.app.message.error(i18n.t("app.add_map.could_not_load_map"));var x=null!==r.autoZoom?r.autoZoom:d.autoZoom,w=this.maps[i];if(w&&(w.eachLayer(function(t){w.removeLayer(t)}.bind(this)),e&&w.remove()),e){var S=this.options.width||this.$el.width(),E=this.options.height||r.height||C(S,d.view,r.latLon),T=navigator.userAgent.toLowerCase(),k=-1!==T.indexOf("phantom");l=_.extend(l,{width:S,height:E}),$("#map_"+i).css(l);var M="ontouchstart"in document.documentElement,I={scrollWheelZoom:!1,crs:r.latLon?f["default"].CRS.Simple:f["default"].CRS.EPSG3857,attributionControl:r.osm,dragging:!M,tap:!1,zoomSnap:.1,zoomDelta:.5,preferCanvas:!1};if(!this._zoomControl()){var P={doubleClickZoom:!1,zoomControl:!1};"freeLayout"===this.parent.viewMode&&(P={touchZoom:!1,scrollWheelZoom:!1,zoomControl:!1,doubleClickZoom:!1,dragging:!1}),I=_.extend(I,P)}this.maps[i]=f["default"].map("map_"+i,I),k&&(f["default"].Browser.any3d=!0)}if(r.osm){var L="freeLayout"===this.options.parent.viewMode?"InfographicEditor":"ig-container",N=this.el.getElementsByClassName("leaflet-bottom leaflet-right")[0];d.view=d.viewOriginal||d.view;var B=r.osm!==!0?r.osm:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",j=y(r.osm,d.attribution),R=new f["default"].TileLayer(B,{attribution:j}),H=window.getComputedStyle(document.getElementsByClassName(L)[0]).backgroundColor.replace("rgb","rgba").replace(")",",0.5)");this.maps[i].addLayer(R),N&&(N.style.backgroundColor=H)}if(r.osm?(this.$el.addClass("igc-map-tiles",r.osm),this.$el.removeClass("igc-map-no-tiles",!r.osm)):(this.$el.removeClass("igc-map-tiles",r.osm),this.$el.addClass("igc-map-no-tiles",!r.osm)),r.showLabels||r.showLegend?this.showLabels(i,t):this.$el.find("#map_"+i+" + .igc-legend").empty(),f["default"].geoJson(d,{style:this.getEntryStyle,onEachFeature:p,smoothFactor:.2}).addTo(this.maps[i]),r.points){var F;!function(){var e=InfoCharts.Visuals.ShapeGenerator;F=a.getCustomValue("path")||"circlePath";var o=[F.replace("Path","")],r=n.model.get("sheets_settings")||[];r&&r.forEach(function(t){t&&t.defaultPath&&o.push(t.defaultPath.replace("Path",""))}),e.Func.getPaths(o.join(","),function(){this.loadMarkers(i,t),this.setZoomAndControls(i,d.view,x)}.bind(n))}()}else r.showNames&&this.showNames(this.maps[i]),this.setZoomAndControls(i,d.view,x);if(e){var z=this.maps[i];z.on("mousemove",function(){g?g=!1:A()}),z.on("mouseout",A),r.showNames&&(z.on("zoomend",function(){n.showNames(n.maps[i])}),z.on("zoomstart",function(){n.hideNames(n.maps[i])})),z.whenReady(function(){n.animation.start()}),z.on("moveend",function(){n.animation.end()})}},resize:function(t,e){this.options.width=t,this.options.height=e,this.loadSheet(this.activeSheet,!0)},hideNames:function(t){t.markers&&t.markers.forEach(function(e){t.removeLayer(e)}),t.markers=[]},showNames:function(t){var e=this;this.hideNames(t),setTimeout(function(){if(_.each(t._layers,function(e){var n=e._bounds,o=e._pxBounds;if(e.feature&&"Background"!==e.feature.properties.name&&o&&o.max.x-o.min.x>30&&o.max.y-o.min.y>20){var i=e.feature.geometry.center||[(n._northEast.lat+n._southWest.lat)/2,(n._northEast.lng+n._southWest.lng)/2],r=f["default"].marker(i,{icon:f["default"].divIcon({iconSize:null,className:"heatmap-legend-item",html:"<div>"+e.feature.properties.name+"</div>"}),clickable:!1,zIndexOffset:1e3}).addTo(t);t.markers.push(r)}}),!e.$el)return!1;var n=[];$(t._container).find("div.leaflet-interactive").each(function(){var t=parseInt($(this).width(),10),e=parseInt($(this).height(),10),o=$(this);o.css({"margin-left":t/-2+"px","margin-top":e/-2+"px"});var i=o.position();i.left-=t/2,i.top-=e/2;var r={right:i.left+t,bottom:i.top+e,left:i.left,top:i.top};w(r,n)?o.remove():(o.css({visibility:"visible"}),n.push(r))})},0)},initChart:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=this.model,n=e.get("chart_id"),o=this.infographic.get("theme"),i=this.sheetnames;if(document.getElementById("map_container_"+n)&&this.$el.html(""),o.get("chartOptions").map&&(l=_.extend(l,o.get("chartOptions").map)),this.markers=[],"freeLayout"!==this.options.parent.viewMode&&(0,c.addEntity)(n,this),this.renderSettings.displaySheets)for(var r=this.options.ignoredDataSets||[],a=this.options.showColumns,s=this.data,u=s.length,h=0;u>h;h++)this.renderSettings.displayEnabledChartsOnly&&-1!==r.indexOf(h)||(_.isEmpty(a)?(_.isEmpty(r)||-1===r.indexOf(h)||"capture"!==this.options.parent.viewMode)&&this.showDataOnMap(h,!0):-1!==a.indexOf(h)&&this.showDataOnMap(h,!0));else{var d=_.map(this.data,function(t,e){return _.escape(i[e])||"Sheet "+(e+1)});this.showDataOnMap(t,!0);var f=[d,this.el.getElementsByClassName("map")[0],t];this.infographic.get("properties").tabs?p["default"].createTabs.apply(p["default"],f):p["default"].createRadioButtons.apply(p["default"],f)}},_zoomControl:function(){return-1===["edit","capture","download","freeLayout"].indexOf(this.options.parent.viewMode)},showLabels:function(t,e){var o=[],i=this.model.get("custom");if(i.groupedData){var r={};_.each(this.data[e],function(t){!r[t.group]&&t.color&&t.group&&(r[t.group]=!0,o.push({title:t.group,color:t.color}))})}else _.each(this.data[e],function(t){var e=t.label||t.name;e&&o.push({title:e,color:t.color})});var a=document.querySelector("#map_"+t+" + .igc-legend");if(a.innerHTML="",i.heatmap){var s=n(795),l={entries:this.legend,title:i.legendTitle};a.innerHTML=_.template(s)(l)}else this.legend=o,this.addLegendToMap(t)},addLegendToMap:function(t){var e=this.options.infographic.get("theme"),n=e.get("font"),o=$.extend(!0,{},n.common||{},n.legend||{}),i=this.legend,a={options:{container:"#map_"+t,style:{legend:{"font-family":o.fontFamily||"Arial","font-size":o.fontSize+"px"||"16px","font-weight":o.fontWeight||"400","font-style":o.fontStyle||"normal",color:e.get("color").chart.text||"#000"}}},container:d3.select("#map_container_"+t),chartId:t},s=a.options,l=s.width=$(s.container).width(),u=r.Charts.Chart.prototype.renderLegend.bind(a),c=r.Legend.TextItemMetrics().width(l).texts(i.map(function(t){return t.title})).parentContainer(d3.select(s.container)).style(s.style.legend).reservedSize(36),h=r.Legend.Legend().data(i).width(l).style(s.style.legend).chartId(a.chartId).textMetrics(c());u(h);var p=d3.dispatch("highlightStart","highlightEnd");p.on("highlightStart",function(t){this.$(".leaflet-interactive").attr("data-inactive",1),this.$(".background-layer-points, .layer_"+b(i[t].title)).attr("data-inactive","")}.bind(this)),p.on("highlightEnd",function(){this.$(".leaflet-interactive").attr("data-inactive","")}.bind(this)),h.addListener({id:a.chartId,dispatch:p})},getEntryStyle:function(t){var e=t.properties,n=e.color?"layer_"+b(e.group||e.name):e.points?"background-layer-points":"background-layer-inactive";return{fillColor:e.color||l.countryFill,color:e.stroke,fillOpacity:e.opacity,weight:e.weight,show:e.show,className:n}},prepare:function(){this.prepared||(this.renderSettings=this.options.renderSettings||{},this.animation=d3.dispatch("start","end"),this.importArrayData(this.model.get("data"),this.model.get("sheetnames")),this.maps={},this.renderSettings.displaySheets&&this.listenTo(this.model,"change:dataSets",this._updateVisibility),this.prepared=!0)},showDataOnMap:function(t,e){var n=this.model.get("custom"),o=(0,u["default"])({sheetIndex:t,chart:this.model}),i=o.getCustomValue("inactive");if(i&&(l.countryFill=i),e){var r={id:this.model.id};this.renderSettings.displaySheets&&(this.data.length>1&&(r.tableCaption=this.sheetnames[t]),r.id+="-"+t);var a=_.template(this.template)(r);this.$el.append(a)}this.dataJSON?this.loadSheet(t,e):this.loadJSON(n.map||"world",t,function(){this.loadSheet(t,!0)}.bind(this))},loadMarkers:function(t,e){var n=this.model.get("custom"),o=this.model.get("sheets_settings");o[e]||(o[e]={});var r=InfoCharts.Visuals.ShapeGenerator.Path[o[e].path||n.path||"circlePath"],a=M(this.data[e],n,o[e]),s=n.groupedData?"group":"name",l={min:n.pointSizemin||h.shapeMin,max:n.pointSizemax||h.shapeMax};this.markers=[];var u={shapeHeight:r.dimensions.height||h.shapeSize,shapeWidth:r.dimensions.width||h.shapeSize,shape:r.path,val:"",key:s};_.each(this.data[e],function(e,o){if(0!==e.lat&&0!==e["long"]){u.height=n.heatmap?l.max:Math.max(l.max*Math.sqrt(v(e.value,a)),l.min),u.width=u.shapeWidth*u.height/u.shapeHeight,n.osm||(e=L(n.map,e)),u.fill=e.color;var r=_.template(i)(u);this.markers[o]=f["default"].marker([e.lat,e["long"]],{riseOnHover:!0,icon:f["default"].divIcon({iconSize:null,className:"map-marker layer_"+b(e[s]),html:""+r}),clickable:!1,zIndexOffset:1e3});var c=this.markers[o];this.coords.push([[[e["long"],e.lat]]]),c.addTo(this.maps[t]),c.feature={properties:{value:e.value,color:e.color,group:e.group,name:e.name,tooltipText:O(e,n),tooltipValue:n.showValue!==!1?(e.valueString||e.value)+"<br>":""}},c.feature.properties.tooltipValue+=e.description,c.on({mousemove:D,mouseout:A,click:D})}}.bind(this))},setZoomAndControls:function(t,e,n){var o=this,i=this.coords,r=this.maps[t],a=this.model.get("custom"),s=this.options.parent.viewMode,l=this.model.get("sheets_settings")[this.activeSheet]||{};
l.view?r.setView(l.view.center,l.view.zoom):((n||a.hideBlanks)&&i.length&&(e=P(i,a.points)),r.fitBounds(e)),r.view=e,f["default"].Browser.touch&&this.$el.addClass("map_browser_touch");var u=f["default"].Control.extend({options:{position:"topleft"},onAdd:function(){var t=this;return $('<div class="restorePosition"></div>').on("click",function(){var e=t.model.get("sheets_settings")[t.activeSheet]||{};e.view?r.setView(e.view.center,e.view.zoom):r.fitBounds(r.view)})[0]}.bind(this)});r.controls||(this._zoomControl()&&(r.posControl=new u,r.addControl(r.posControl)),r.controls=!0,"edit"===s&&r.on("moveend",function(){var t=r.getCenter(),e={view:{zoom:r.getZoom(),center:[t.lat,t.lng]}};r.resetZoom&&(e.view=null,delete r.resetZoom),o.positionChange(e)}))},applyHeatmapColors:function(t){function e(t){return t.xmin=t.xmin||0,t.xmax=t.xmax||0,(t.xmin||t.xmax)&&t.xmax!==t.xmin}var n=this,o=(0,u["default"])({sheetIndex:t,chart:this.model}),i=this.model.get("custom"),r=o.getCustom(),s=o.getCustomValue("coldColor",l.countryFill,function(t){return"#undefined"!==t}),c=o.getCustomValue("hotColor",this.model.get("colors")[0]||this.infographic.get("theme").get("colors")[0],function(t){return"#"!==t}),h=r.heatmap_entries||i.heatmap_entries||5,p=a.generateGradient(s,c,h),d=[null,null],f="";e(r)?d=[r.xmin,r.xmax]:e(i)?d=[i.xmin,i.xmax]:!function(){var e=!0;_.each(n.data[t],function(t){t.valueString||(t.valueString=t.value);var n=S(t.value,i.decimalSeparator);if(!isNaN(n)){if(i.showLegend&&e&&t.value){var o=t.value.toString().replace(n,"");o&&!f?f=o:o&&f===o||(e=!1,f="")}t.value=n,(null===d[0]||n<d[0])&&(d[0]=n),(null===d[1]||n>d[1])&&(d[1]=n)}}),d[0]===d[1]&&d[0]++}();var g=i.decimalSeparator;d=N(d,h,g),_.each(this.data[t],function(t){var e=k(d,t.value,g);t.nonheatmap=t.color,t.color=p[e],i.osm&&!i.points&&(t.opacity=.5)}),(i.showLabels||i.showLegend)&&(this.legend=p.map(function(t,e){return{color:t,label:0===e?"< "+d[0]+f:d[e-1]+f+"&mdash;"+d[e]+f}}))},_updateVisibility:function(){var t=this.model,e=t.get("dataSets");this.$el.find(".map, .table-caption").each(function(t,n){$(n).toggleClass("hidden",-1===e.indexOf(Math.floor(t/2)))})}})}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=this,n=t.m,o=t.indices,i=t.positions,r=t.labels,s=t.style,l=t.filterMetrics,u=n.wrapped,h=0,p=o.map(function(t){var o=u[t],a=u.width,l=n.baseLineOffset,c=1===u.linesFit;c?(o=y.Text.getTrimmedText(e.svg,[r[t]],s,n.limit.width),h=Math.max(h,o.max.w)):o.length>u.linesFit&&(o=u[t].slice(0,u.linesFit),o[u.linesFit-1]=y.Text.addEllipsis(e.svg,o[u.linesFit-1],s,n.limit.width));var p=o.length*n.lineHeight;return{x:i[t]-a-.5*p,y:l,w:a,b:l,h:p,text:o,lineHeight:n.lineHeight,maxWidth:u.width,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w,n=this.y+t.y-t.b,o=-90;return"rotate("+o+" "+e+" "+n+")"}}});p.textAlign=_.BottomTilted.TEXT_ALIGN.RIGHT,this.runtime.reverseAxis&&(p.textAlign=_.BottomTilted.TEXT_ALIGN.LEFT);var d=Math.max(h,u.width),f={renderData:p,height:d,layout:"regular"};return c.call(this,f,l),a.call(this,f)&&f.renderData.pop(),f}function a(t){var e=this.runtime,n=t.renderData,o=n.length-1;if(-1===o)return!1;var i=e.graphWidth,r=n[o],a=r.x+(r.transform?r.w+r.h:r.maxWidth/2+r.text.width/2);return w["default"].DOUBLE===this.options.type&&(i+=e.marginAxis.right+e.marginTitle.right),a>i}function s(t){return-1!==w["default"].GROUPS.NUMERIC_XAXIS.indexOf(t)}function l(t){return-1!==w["default"].GROUPS.COLUMN.indexOf(t)}function u(t){var e=this,n=t.m,o=t.indices,i=t.positions,r=t.labels,s=t.style,l=t.filterMetrics,u=o.map(function(t){var o=n.wrapped,a=o[t],l=a,u=l.width,c=l.height;return 1===o.linesFit?(a=y.Text.getTrimmedText(e.svg,[r[t]],s,n.limit.width),a.width=u,a.height=c):a.length>o.linesFit&&(a=o[t].slice(0,o.linesFit),a[o.linesFit-1]=y.Text.addEllipsis(e.svg,a[o.linesFit-1],s,n.limit.width),a.width=u,a.height=c),{x:i[t]-.5*o.width,y:n.baseLineOffset,text:a,lineHeight:n.lineHeight,maxWidth:o.width,textAnchor:null,transform:null}}),h=n.wrapped.linesFitHeight,p={renderData:u,height:h,layout:"regular"};return c.call(this,p,l),a.call(this,p)&&p.renderData.pop(),p}function c(t,e){var n=this.options.type,o=this.runtime;s(n)?(t.ticks=o.numericCategories?h.call(this):null,t.filterMetrics=e):w["default"].DOUBLE===n&&(t.filterMetrics=e)}function h(){var t=this.runtime,e=t.xAxisOptions,n=t.xScale,o=n.ticks();return this.forcedDomainLimits(e)&&(o=this.forceTicksToDomain(n.domain(),o)),o}function p(){var t=this,e=this.runtime,n=this.options,o=n.type;if(l(o))return e.categoryData;if(s(o)){if(!e.numericCategories)return e.sheet.categories.data.slice(0);var i=function(){var n=e.xScale,o=h.call(t);return{v:o.map(function(e){return t.numberFormatX.tick(e,n)})}}();if("object"===("undefined"==typeof i?"undefined":m(i)))return i.v}return w["default"].DOUBLE===o?e.sheet.categories.data.slice(0):void 0}function d(t){var e=this.runtime,n=e.limits,o=this.options.type,i=n.maxCategoryWidth,r=n.maxCategoryHeight,a={maxCategoryWidth:i,maxCategoryHeight:r};return s(o)&&(a.maxCategoryWidth=_.getRangeStep(t)-4),a}function f(){var t=this.runtime,e=this.options,n=e.type,o=t.xScale,i=(0,v.getScalePositions)(o);if(s(n)&&t.numericCategories){var r=h.call(this);i=r.map(function(t){return o(t)})}return i}function g(){var t=this.runtime,e=this.options,n=t.bottomLabelPadding,o=e.style.axisTick,i=n?n.top+n.bottom:0,a=f.call(this),s=d3.range(0,a.length),l=p.call(this),c=S.HORIZONTAL,h=d.call(this,a),g=h.maxCategoryHeight,m=h.maxCategoryWidth,v=(0,y.TextMetric)().parent(this.svg.node()).style(o).text(l).limit({width:Math.max(0,m),height:g}).run(),b=v.out(),x=b.text.max.height>m&&b.text.max.width>m,w={domainIndex:s};if(x){var C=_.getStepsInRange(a,b.text.max.height+4);w=_.filterToFit(a,l,C),l=w.domainIndex.map(function(t){return l[t]}),a=w.range,s=d3.range(0,a.length),m=_.getRangeStep(a)-4,v.text(l),v.props.limit.width=m,b=v.clear().run().out()}if(b.text.max.width<m)return u.call(this,{m:b,indices:s,positions:a,labels:l,style:o,filterMetrics:w});v.props.limit.width=g,v.props.limit.height=m;var E=v.clear().run().out();if(b.text.max.width+i<g)return r.call(this,{m:E,indices:s,positions:a,labels:l,style:o,filterMetrics:w});var T=g>m;return T&&(c=E.wrapped.fits?S.VERTICAL:b.wrapped.fits&&E.wrapped.linesFit>1?S.HORIZONTAL:S.VERTICAL),S.VERTICAL===c?r.call(this,{m:E,indices:s,positions:a,labels:l,style:o,filterMetrics:w}):u.call(this,{m:b,indices:s,positions:a,labels:l,style:o,filterMetrics:w})}Object.defineProperty(e,"__esModule",{value:!0});var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.hasNumericAxis=s,e.isColumn=l,e.horizontal=u,e.chartSpecific=c,e.getTicks=h,e.getCategories=p,e.getLimits=d,e.getPositions=f,e.regular=g;var v=n(171),y=n(66),b=n(76),_=i(b),x=n(515),w=o(x),S={HORIZONTAL:"horizontal",VERTICAL:"vertical"}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.AreaStacked=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(30),c=o(u),h=n(170),p=n(426),d=n(180);e.AreaStacked=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"renderGraphs",value:function(t,e){var n=function(t){var e=[],n=0;return function(o,i,r){n++%t===0&&(e=[0,0]),r>=0?(o.py=e[1]+r,o.y0=e[1],o.y=r,e[1]+=r):(o.py=e[0]+r,o.y0=e[0]+r,o.y=-r,e[0]+=r)}};h.Line.prototype.renderGraphs.call(this,t,e,function(t){var e=d3.layout.stack().out(n(t.graphs.length)).values(function(t){return t.data}),o=e(t.graphs);return o})}},{key:"renderDataPoints",value:function(t,e){var n=this.chartId,o=this.showAsPercent(),i=this.numberFormatY;return e.showOnlyClosest||!e.enabled?void e.animationEnd():(t.selectAll(".igc-graph-group").each(function(){d3.select(this).selectAll(".igc-graph").each(function(t,e){var r=t.graphs[e],a=r.data.map(function(t){return{groupLabel:t.groupLabel,x:t.x,xLabel:t.xLabel,y:t.py,yLabel:t.yLabel,yPct:t.y}}),s=function(t){return t.xLabel+": "+i.tooltip(t.yLabel)};o&&(s=function(t){return t.xLabel+": "+i.tooltip(t.yLabel)+" ("+d3.format(".2%")(t.yPct)+")"});var l=(0,d.Circle)().scaleX(t.x).scaleY(t.y).data(a).pX("x").pY("y").colors(r.colors).groupId(e).chartId(n).filterFn(function(t){return null!==t.y}).className("igc-data-point-area-stacked").legend(t.legend).tooltipText(function(t){return t.groupLabel}).tooltipValue(s).animate(!1);d3.select(this.parentNode).call(l)})}),void e.animationEnd())}},{key:"getDomain",value:function(t,n){var o=[],i=[],r=0,a=0,s=void 0;if(n===s&&(n=!0),n&&"absolute"===this.options.series.data)return l(Object.getPrototypeOf(e.prototype),"getSheetsSeriesDomain",this).call(this,this.getDomain);t.forEach(function(t){t.data.forEach(function(t,e){t.y>=0?(o[e]===s?(o[e]=t.y,r=t.y):o[e]+=t.y,r=Math.min(r,t.y)):(i[e]===s?(i[e]=t.y,a=t.y):i[e]+=t.y,a=Math.max(a,t.y))})});var u=[i.length?d3.min(i):r,o.length?d3.max(o):a];return u[0]===u[1]&&(u[0]>0?u[0]=0:u[0]<0?u[1]=0:(u[0]=-1,u[1]=1)),u}},{key:"prepareSheetData",value:function(t){var n=l(Object.getPrototypeOf(e.prototype),"prepareSheetData",this).apply(this,arguments);if(!this.showAsPercent())return n;var o=t.categories.data,i=[];return n.graphs.forEach(function(t){o.forEach(function(e,n){void 0===i[n]&&(i[n]=0),i[n]+=Math.abs(t.data[n].y)})}),n.graphs.forEach(function(t){o.forEach(function(e,n){var o=t.data[n].y;t.data[n].y=o/i[n]})}),n}},{key:"graphInstanceSetup",value:function(t,n,o,i){l(Object.getPrototypeOf(e.prototype),"graphInstanceSetup",this).apply(this,arguments),t.scaleX(i.x).scaleY(i.y)}},{key:"forceTicksToDomain",value:function(t,e){return this.showAsPercent()?e:c["default"].prototype.forceTicksToDomain.apply(this,arguments)}}]),e}(p.Area)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnStacked=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function x(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:x(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(429),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(171),y=n(22),b=n(15);e.ColumnStacked=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.options;this.detectDimensions();var n=.27,o=this.runtime={},i=this.svg,r=o.margin={top:0,right:1,bottom:0,left:0},a={left:0,right:0,top:0,bottom:0},s={left:0,right:0},l=o.limits={maxCategoryWidth:0,maxCategoryHeight:6},u=o.bottomLabelPadding={top:6,right:2,bottom:0,left:2},c=this.createAnimationCounter(3),h=o.sheet=this.getSheetData(),p=h.axis[0],f=this.prepareSheetData(h),v=h.axis[1];this.setupNumberFormatter(h);var b=o.categoryData=f.categories,_="absolute"===e.series.data?this.getSheetsSeriesDomain():this.getDomain(f.graphs),x=this.limitDomain(v.minLimit,v.maxLimit,_),w=_[0]<0,S=d3.scale.linear().domain(_).clamp(x),C=!0,E=!!h.legend.enabled;o.categoryLayout=h.categories.layout;var T=o.spacing={maxBeforeXAxisTick:50,beforeCategoryBorder:w?u.top:0,beforeBottomCategories:5},k=(0,g["default"])().scale(S).orient("left").drawLines(!1).tickFormat(this.numberFormatY.tick).style(e.style.axisTick),M=h.axis[1]&&h.axis[1].title;M&&(a.left=(0,y.getTextDimensions)(M,this.svg,e.style.axisTitle).height+10);var O=p&&p.title;O&&(u.bottom=u.top,a.bottom=(0,y.getTextDimensions)(O,this.svg,e.style.axisTitle).height);var I,P=e.width-r.left-a.left-r.right-a.right,L={width:0,height:0};f.ticks&&(I=S.ticks().map(function(e){return t.numberFormatY.tick(e,S)}),L=(0,y.getTextDimensions)(I,this.svg,e.style.axisTick),s.left=L.width,r.top=L.height);var D=e.height-r.top-a.top-r.bottom-a.bottom;O&&(l.maxCategoryHeight+=u.bottom),l.maxCategoryHeight+=Math.floor(D*n),o.graphWidth=P-s.left-s.right;var A=d3.range(0,b.length),N=o.xScale=this.createHorizontalScale(A,[0,o.graphWidth],this.featuresColumnWidth(h));if(o.xScaleResize=this.createHorizontalScaleResize(),this.renderSheetSwitch({width:e.width}),!f.graphs||f.graphs&&0===f.graphs.length)return this.animation.start(),this.animation.end(),this.resetRootElement();l.maxCategoryWidth=N.rangeBand()+(N.padding()-u.left-u.right),o.igcLeftOffset=r.left+a.left+s.left,this.featuresCurtainAnimation()&&(o.igcLeftOffset=Math.floor(o.igcLeftOffset)),1===A.length&&(l.maxCategoryWidth=o.graphWidth-u.left-u.right);var B=this.createCategoryLabels();l.maxCategoryHeight=B.height+u.top+u.bottom;var j=D-l.maxCategoryHeight-T.beforeCategoryBorder,R=b.length!==B.renderData.length;R&&E&&(B.renderData=[],l.maxCategoryHeight=O?u.top:0);var H=d.BottomTilted().style(e.style.axisTick).data(p.ticks?B.renderData:[]).textAlign(B.renderData.textAlign).bounds({height:l.maxCategoryHeight,y:D-l.maxCategoryHeight+T.beforeBottomCategories});S.rangeRound([j,0]);var F=(0,g["default"])().scale(S).orient("left").tickSize(-P,0).highlightZero(h.grid.horizontalZeroHighlight).style(e.style.grid).tickFormat("").offset({left:-s.left}),z=(0,g["default"])().scale(N).orient("bottom").tickSize(j,0).highlightZero(h.grid.verticalZeroHighlight).style(e.style.grid).tickFormat("");if(h.grid.vertical||z.tickValues([]),k.textOffset(-(L.height-L.baseLineOffset)).offset({left:-s.left}),f.ticks){var V=this.filterAxisTicks(k);w||V.domain[V.domain.length-1]===_[0]||V.domain.push(_[0]),k.tickValues(V.domain),F.tickValues(V.domain);var U=F.tickValues().length-1;-1===U||S(F.tickValues()[U])!==j||w||F.hideLinesByIndex([U]),"area-stepped"===e.type&&F.hideLinesByIndex([]);var W=[],G=(0,y.getAllTextDimensions)(k.tickValues().map(function(e){return t.numberFormatY.tick(e,S)}),this.svg,e.style.axisTick),$=k.tickValues().length-1,K=null;-1!==$&&(K=k.scale()(k.tickValues()[$])-G[$].height),k.tickValues().forEach(function(t,e){var n=k.scale()(t);null!==K&&$!==e&&-1===W.indexOf($)&&n>K&&W.push($)}),k.hideTicksByIndex(W)}else k.tickValues([]);h.grid.horizontal||F.tickValues([]),h.grid.vertical||z.tickValues([]);var q=0;f.ticks&&(q=k.getBorderingTick()-L.height,q>0&&(q=0));var Y=r.top+a.top,Z=(0,m.Label)().text(M).orientBounds({x1:r.left,y1:Y+q,x2:e.width,y2:Y+j+T.beforeCategoryBorder}).style(e.style.axisTitle).orient("left"),X=(0,m.Label)().text(O).orientBounds({x1:r.left+a.left,y1:0,x2:r.left+a.left+P,y2:e.height}).style(e.style.axisTitle).orient("bottom");X.dispatch().on("animationEnd",c);var J=void 0;E?(J=this.createLegend(),this.renderLegend(J)):this.container.selectAll(".igc-legend").remove();var Q=this.svg.datum(this).transition().ease(e.animation.ease).duration(e.animation.duration);this.containerSetup(),i.attr("width",e.width).attr("height",e.height),Q.each(function(t){var n=i.selectAll(".igc").attr("transform","translate("+o.igcLeftOffset+","+Y+")"),r=n.select(".igc-grid"),a=i.select(".igc-titles");if(t.renderPart(r,k,"igc-y-axis-text"),t.renderPart(r,F,"igc-ygrid"),t.renderPart(r,z,"igc-xgrid"),t.renderPart(r,H,"igc-x-axis-text"),t.renderGraphs(n,[{graphs:f.graphs,x:N,y:S,textStyle:e.style.axisTick,legend:J,transitionDuration:e.animation.duration,animationEnd:c}]),t.featuresCurtainAnimation()){var l=i.select("defs"),u={x:-o.igcLeftOffset,y:-Y,width:e.width,height:e.height,clipPathId:"igc-cp-curtain-"+t.chartId};n.selectAll(".igc-graph").attr("clip-path","url(#"+u.clipPathId+")"),t.createRectClipPath(l,u);var h=l.select("#"+u.clipPathId).selectAll("path");h.attr("transform","translate(-"+(e.width+o.igcLeftOffset)+", 0)").transition().each("end",function(){h.attr("transform",null)}).duration(500).ease("linear").attr("transform","translate(0, 0)")}"area-stepped"!==t.options.type&&t.renderPart(r,function(t){t.each(function(){var t=d3.select(this),n=t.selectAll(".igc-x-axis-border-line").data(C?[0]:[]);n.enter().append("rect").transition().attr("class","igc-x-axis-border-line"),n.exit().remove(),n.transition().attr("x",-s.left).attr("width",o.graphWidth+s.left).attr("y",j+T.beforeCategoryBorder).attr("height",2).style({fill:e.style.axisTick.color,stroke:"none","stroke-width":0})})},"igc-x-axis-border"),t.renderPart(a,Z,"igc-title-left"),t.renderPart(a,X,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){c()})}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=o.graphs.length,r=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(n).textStyle(o.textStyle).showValues(e.showValues).legend(o.legend).tooltipText(function(t){return t.xLabel+": "+r.tooltip(t.yLabel)}).tooltipValue(function(t){return t.groupLabel}).transitionDelay(function(){return n/i*500}).transitionDuration(o.transitionDuration)}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.sum(t.data,function(t){return t.y<0?t.y:0})}),d3.max(t,function(t){return d3.sum(t.data,function(t){return t.y>0?t.y:0})})];return e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1)),this.adjustDomain(e),e}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{padding:20},series:[{type:"column-stacked"}]})}},{key:"prepareSheetData",value:function(t){var e,n=_.merge({},t.axis[1]);return n?(t.categories.data||(t.categories.data=[]),n.graphs=t.categories.data.map(function(){return{colors:t.categories.colors,data:[],showValues:n.showValues===!0,type:"column-stacked"}}),t.series.forEach(function(e,o){e.data.forEach(function(i,r){var a=t.categories.data[r];void 0!==a&&n.graphs[r].data.push({x:r,y:(0,b.replaceBlank)(i,null),xLabel:(0,b.replaceBlank)(e.title),yLabel:(0,b.replaceBlank)(e.rawData[r]),groupLabel:(0,b.replaceBlank)(a),seriesIdx:o})})}),e=n.graphs,n.graphs.forEach(function(t){var e=t.data.length,n=0;0!==e&&(t.data.forEach(function(t){null===t.y&&n++}),n===e&&(t.data=[]))}),n.categories=t.categories.data.slice(0).filter(function(t,e){return n.graphs[e]&&n.graphs[e].data.length>0}),n.graphs=n.graphs.filter(function(t){return t.data&&t.data.length>0}),n.graphs.length!==e&&n.graphs.forEach(function(t,e){t.data.forEach(function(t){t.x=e})}),n):void 0}},{key:"createHorizontalScaleResize",value:function(){var t=this.featuresColumnWidth(this.runtime.sheet);return t?function(e,n){e.rangeBandsFixed(n,t)}:function(t,e){t.rangeBandsPct(e)}}},{key:"createHorizontalScale",value:function(t,e,n){var o=(0,v.Ordinal)().domain(t).rangeBandsPct(e);return n&&(o=(0,v.Ordinal)().domain(t).rangeBandsFixed(e,n)),o}},{key:"featuresColumnWidth",value:function(t){return t.categories.categoryWidth?Number(t.categories.categoryWidth):null}},{key:"featuresCurtainAnimation",value:function(){return"area-stepped"===this.options.type}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Legend=e.Chart=void 0;var r=n(740);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=n(170);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(426);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var l=n(508);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var u=n(729);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var c=n(739);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var h=n(427);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var p=n(730);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})});var d=n(428);Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})});var f=n(732);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})});var g=n(509);Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})});var m=n(733);Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})});var v=n(734);Object.keys(v).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}})});var y=n(513);Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}})});var b=n(731);Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})});var _=n(511);Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}})});var x=n(736);Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})});var w=n(512);Object.keys(w).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}})});var S=n(738);Object.keys(S).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}})});var C=n(514);Object.keys(C).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}})});var E=n(741);Object.keys(E).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}})});var T=n(735);Object.keys(T).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}})});var k=n(737);Object.keys(k).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}})});var M=n(30),O=i(M),I=n(77),P=o(I);e.Chart=O["default"],e.Legend=P},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PictorialGrid=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:g(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(77),c=o(u),h=n(22),p=n(15),d=n(427),f=n(48);e.PictorialGrid=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){function t(t){var e=S.rows-Math.ceil(Math.ceil(t)/S.cols);return e*w.height}var e=this;this.detectDimensions();var n={top:10,right:10,bottom:10,left:10,pictorial:5},o={left:0,right:0,top:0,bottom:0},i=this.getSheetData(),r=this.prepareSheetData(i),a=this.options,s=r[0],l=!!i.legend.enabled,u=!!a.series.realNumbers,h="absolute"===a.series.data,p="scattered"===a.series.distribution&&i.categories.shapes.length<2,d=s.graphs[0].data,f=this.createAnimationCounter(2);this.setupNumberFormatter(i),d=d.filter(function(t){return null!==t.value});var g,m=this.renderGraphs.bind(this),v=a.width-n.left-o.left-n.right-o.right,y=a.height-n.top-o.top-n.bottom-o.bottom,b=a.height,x=this.defaults().shapes.map(function(t){return t.title});h||u?(g=a.sheets.map(function(t){var e=t.categories.shapes,n=!e||e.length<1;return n?x.slice(0):e},this),g=_.uniq(_.flatten(g))):g=i.categories.shapes,g.length||(g=x.slice(0)),g=this.initShapes(g);var w=_.reduce(g,function(t,e){return t.width=Math.max(t.width,e.bbox.width+n.pictorial),t.height=Math.max(t.height,e.bbox.height+n.pictorial),t},{width:0,height:0}),S={cols:Math.floor(v/w.width),rows:Math.floor(y/w.height),cellMetrics:w};S.cellCount=S.rows*S.cols,S.colPosition=d3.scale.ordinal().domain(d3.range(0,S.cols)).rangeBands([0,v],0,0),S.rowPosition=d3.scale.ordinal().domain(d3.range(0,S.rows)).rangeBands([0,y],0,0);var C=h&&!u?this.getSheetsValueSum():this.getValueSum(d);S.realNumbers=u&&S.cellCount>=C;var E,T=0;u?(E=this.getSheetsMaxData(),E&&S.cellCount>=E.valuesSum&&(T=t(E.valuesSum))):h&&(E=this.getSheetsMaxData(),E&&(T=t(E.valuesSum/C*S.cellCount))),b-=T;var k=s.graphs[0].data=p?this.getShapeDataScattered(i,d,S,g,C):this.getShapeData(i,d,S,g,C);s.graphs[0].overlayData=this.getShapeGroupOverlayPaths(d,k,S),this.prepareShapes(g);var M={width:a.width};if(this.renderSheetSwitch(M),a.sheets&&a.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var O;if(l){var I=this.prepareLegendData(d,s.graphs[0].colors),P=c.TextItemMetrics().width(M.width).texts(I.map(function(t){return t.title})).parentContainer(this.container).style(a.style.legend).reservedSize(36);O=c.Legend().data(I).width(M.width).style(a.style.legend).chartId(this.chartId).chartType("pictorial-grid").textMetrics(P()),this.renderLegend(O)}else this.container.selectAll(".igc-legend").remove();var L=this.svg.datum(a).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);L.each(function(t){var e=d3.select(this),i=e.attr("width",t.width).attr("height",b),r=i.selectAll("g.igc").data([0]).enter().append("g").attr("class","igc");r.append("g").attr("class","parts");var a=i.selectAll("g.igc");a.attr("transform","translate("+(n.left+o.left)+","+(n.top+o.top)+")"),m(a,[{graphs:s.graphs,textStyle:t.style.axisTick,transitionDuration:t.animation.duration,legend:O,animationEnd:f}])}).each("start",function(){e.animation.start()}).each("end",function(){f()})}},{key:"initShapes",value:function(t){return _.reduce(t,function(t,e){var n=this.getShape(e);if(t[e])return t;var o=(0,h.measurePath)(n,this.svg);return t[e]={shape:n,bbox:o},t},{},this)}},{key:"getShapeDataScattered",value:function(t,e,n,o,i){var r,a=[],s=0,l=n.cellMetrics,u=n.realNumbers,c=function(e,i){i=i||1;var r={categoryIdx:e.categoryIdx,shape:e.shape,valueLabel:e.valueLabel,category:e.category,countDecimal:e.countDecimal,color:(0,h.getColor)(e.categoryIdx,t.categories.colors)},u=s%n.cols,c=Math.floor(s/n.cols),p=o[e.shape].bbox,d=(l.width-p.width)/2,f=(l.height-p.height)/2;return r.xdiff=d,r.ydiff=f,r.cellX=n.colPosition(u),r.cellY=n.rowPosition(c),r.row=c,r.col=u,r.x=r.cellX+d,r.y=r.cellY+f,r.width=p.width,r.height=p.height,r.colors=[],a[s]=r,s++,r},p=function(e,n,i){var r=o[e.shape].bbox,a=d(n);n.colors.push({x:a*r.width,width:r.width*i,height:r.height,pct:i,color:(0,h.getColor)(e.categoryIdx,t.categories.colors),valueLabel:e.valueLabel,category:e.category,categoryIdx:e.categoryIdx})},d=function(t){return _.reduce(t.colors,function(t,e){return t+e.pct},0)};return e.forEach(function(t){var e=t.countDecimal=u?t.value:t.value/i*n.cellCount;if(t.countDecimalFloor=Math.floor(t.countDecimal),t.count=Math.round(t.countDecimal),t.countFraction=t.countDecimal-t.count,!(0>=e))for(r||(r=c(t));e>f.eps;){var o=1,a=d(r);1===a&&(r=c(t),a=0);var s=o-a;0>e-o&&(o+=e-o);var l=s-o;0>l&&(o=s),p(t,r,o),e-=o}}),a}},{key:"getShapeData",value:function(t,e,n,o,i){function r(t,e){e=arguments.length<2?100:arguments[1];var n=t.length,o=_.reduce(t,function(t,e){return t+Math.round(e.countDecimal)},0),i=e-o;return _.chain(t).sortBy(function(t){return Math.round(t.countDecimal)-t.countDecimal}).map(function(t,e){return t.count=Math.round(t.countDecimal)+(i>e)-(e>=n+i),t}).value()}var a=this.options,s="absolute"===a.series.data,l=[],u=0,c=0,p=n.cellMetrics,d=n.realNumbers,f=0;e.forEach(function(t){t.countDecimal=d?t.value:t.value/i*n.cellCount,t.countDecimalFloor=Math.floor(t.countDecimal),f+=t.countDecimal-t.countDecimalFloor,t.count=Math.floor(t.countDecimal),t.countFraction=t.countDecimal-t.count,c+=t.count}),f=parseFloat(f.toPrecision(12)),c+=Math.ceil(f),!s&&!d||d&&c>n.cellCount?(e.forEach(function(t,e){t.sortIndex=e}),e=r(e,n.cellCount),e=_.sortBy(e,function(t){return t.sortIndex})):(e.forEach(function(t,e){t.sortIndex=e}),e=r(e,Math.min(c,n.cellCount)),e=_.sortBy(e,function(t){return t.sortIndex})),e.forEach(function(t){for(var e=0;e<t.count;e++)l[u]={categoryIdx:t.categoryIdx,shape:t.shape,valueLabel:t.valueLabel,category:t.category},u++});for(var g,m,v,y,b=0,x=0,w=0;u>w;w++)g=w%n.cols,
m=Math.floor(w/n.cols),v=l[w],y=o[v.shape].bbox,b=(p.width-y.width)/2,x=(p.height-y.height)/2,v.xdiff=b,v.ydiff=x,v.cellX=n.colPosition(g),v.cellY=n.rowPosition(m),v.row=m,v.col=g,v.x=v.cellX+b,v.y=v.cellY+x,v.width=y.width,v.height=y.height,v.color=(0,h.getColor)(v.categoryIdx,t.categories.colors),v.colors=[{x:0,width:y.width,height:y.height,pct:1,color:v.color,valueLabel:v.valueLabel,category:v.category,categoryIdx:v.categoryIdx}];return l}},{key:"getShapeGroupOverlayPaths",value:function(t,e,n){var o={},i=n.cellMetrics;t.forEach(function(t){o[t.categoryIdx]||(o[t.categoryIdx]={minX:99999999,maxX:-99999999,minY:99999999,maxY:-99999999,categoryIdx:t.categoryIdx,valueLabel:t.valueLabel,category:t.category})});var r,a=e[0];e.forEach(function(t,s){r=e[s+1]||t;var l=t.colors.length-1,u=a.xdiff!==t.xdiff?(a.xdiff+t.xdiff)/2:t.xdiff,c=r.xdiff!==t.xdiff?(r.xdiff+t.xdiff)/2:t.xdiff,h=0===t.col,p=t.col===n.cols-1;t.colors.forEach(function(e,r){var a=o[e.categoryIdx],s=r===l,d=0===r,f=0===l,g=t.row+1,m=g<n.rows?n.rowPosition(g):t.cellY+i.height;if(!a.firstPos){var v=t.x+e.x;d&&(v=h?t.cellX:t.x-u),a.firstPos={x:v,y0:t.cellY,y:m,col:t.col,row:t.row},a.color=e.color,a.cellHeight=i.height}var y=t.x+e.x+e.width;s&&(y=p?t.cellX+i.width:t.x+e.x+e.width+(f&&1!==e.pct?0:c)),a.lastPos={x0:t.x+e.x-(h?t.xdiff:0),x:y,y0:t.cellY,y:m,col:t.col,row:t.row},a.minX=Math.min(a.minX,a.firstPos.x,a.lastPos.x0,a.lastPos.x),a.maxX=Math.max(a.maxX,a.firstPos.x,a.lastPos.x),a.minY=Math.min(a.minY,a.firstPos.y0,a.lastPos.y0),a.maxY=Math.max(a.maxY,a.firstPos.y,a.lastPos.y)}),a=t}),o=_.filter(_.values(o),function(t){return t.lastPos});var s=o[0];return o.forEach(function(t){s!==t&&(t.firstPos.x=Math.min(t.firstPos.x,s.lastPos.x),s=t)}),_.each(o,function(t){function e(t,e,o){n.push(t+[e,o].join(","))}var n=[],o=t.lastPos.row-t.firstPos.row;e("M",t.firstPos.x,t.firstPos.y0),0===o?(e("L",t.lastPos.x,t.firstPos.y0),e("L",t.lastPos.x,t.lastPos.y),e("L",t.firstPos.x,t.lastPos.y),e("L",t.firstPos.x,t.firstPos.y0)):1===o?(e("L",t.maxX,t.firstPos.y0),e("L",t.maxX,t.lastPos.y0),e("L",t.firstPos.x,t.lastPos.y0),e("M",t.lastPos.x,t.lastPos.y0),e("L",t.lastPos.x,t.lastPos.y),e("L",t.minX,t.lastPos.y),e("L",t.minX,t.firstPos.y),e("L",t.firstPos.x,t.firstPos.y)):(e("L",t.maxX,t.firstPos.y0),e("L",t.maxX,t.lastPos.y0),e("L",t.lastPos.x,t.lastPos.y0),e("L",t.lastPos.x,t.lastPos.y),e("L",t.minX,t.lastPos.y),e("L",t.minX,t.firstPos.y),e("L",t.firstPos.x,t.firstPos.y)),t.path=n.join(" ")}),o}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length,a=this.numberFormatX;t.data(e.data).overlayData(e.overlayData).colors(e.colors).groupId(i).textStyle(o.textStyle).showValues(e.showValues).legend(o.legend).tooltipText(function(t){return t.category}).tooltipValue(function(t){return a.tooltip(t.valueLabel)}).transitionDelay(function(t,e){return e/r*500}).transitionDuration(o.transitionDuration),t.dispatch().on("animationEnd",o.animationEnd)}},{key:"getShape",value:function(t){for(var e=this.options.shapes.length,n=0;e>n;n++)if(this.options.shapes[n].title===t)return this.options.shapes[n].shape}},{key:"prepareShapes",value:function(t){var e=this.svg;e.selectAll("defs").data([0]).enter().append("defs");var n=e.selectAll("defs");Object.keys(t).forEach(function(e){var o=t[e].shape,i="igc-cp-"+e+this.chartId,r=n.selectAll("#"+i).data([0]).enter().append("clipPath").attr("id",i),a=r.selectAll("path").data([0]).enter().append("path");a.attr("d",o)},this)}},{key:"prepareLegendData",value:function(t,e){return t.map(function(t){return{color:(0,h.getColor)(t.categoryIdx,e),title:t.category,groupId:t.categoryIdx}})}},{key:"getValueSum",value:function(t){return _.reduce(t,function(t,e){return t+e.value},0)}},{key:"getSheetsValueSum",value:function(){var t=_.reduce(this.options.sheets,function(t,e){var n=_.merge({},this.emptySheetData(),e),o=this.prepareSheetData(n);return t.push(this.getValueSum(o[0].graphs[0].data)),t},[],this);return _.reduce(t,function(t,e){return t+e},0)}},{key:"getSheetsMaxData",value:function(){var t=_.reduce(this.options.sheets,function(t,e){var n=_.merge({},this.emptySheetData(),e),o=this.prepareSheetData(n);return t.push({data:o,shapes:n.categories.shapes,valuesSum:this.getValueSum(o[0].graphs[0].data)}),t},[],this),e=t[0],n=0;return t.forEach(function(t){t.valuesSum>n&&(e=t,n=t.valuesSum)}),e}},{key:"defaults",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{data:"separate",distribution:"round"},shapes:[{title:"boyPath",shape:"m14.57,9.54l0,5.91q0,0.57,-0.4,0.97t-0.97,0.4t-0.97,-0.4t-0.4,-0.97l0,-5l-0.91,0l0,12.95q0,0.65,-0.47,1.12t-1.12,0.47t-1.12,-0.47t-0.47,-1.12l0,-6.59l-0.91,0l0,6.59q0,0.65,-0.47,1.12t-1.12,0.47t-1.12,-0.47t-0.47,-1.12l0,-12.95l-0.91,0l0,5q0,0.57,-0.4,0.97t-0.97,0.4t-0.97,-0.4t-0.4,-0.97l0,-5.91q0,-1.14,0.8,-1.93t1.93,-0.8l9.09,0q1.14,0,1.93,0.8t0.8,1.93Zm-4.09,-6.36q0,1.32,-0.93,2.25t-2.25,0.93t-2.25,-0.93t-0.93,-2.25t0.93,-2.25t2.25,-0.93t2.25,0.93t0.93,2.25Z"}]})}},{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{shapes:["boyPath"]},series:[{type:"pictorial-grid",axisIndex:0}],grid:{}})}},{key:"prepareSheetData",value:function(t){var e=_.merge([],t.axis);return e.forEach(function(e,n){if(e){e.graphs||(e.graphs=[]);var o=t.categories.shapes,i=o.length;t.series.forEach(function(r){if(n===r.axisIndex){var a=r.data.map(function(e,n){var a={value:(0,p.replaceBlank)(Math.abs(e),null),valueLabel:(0,p.replaceBlank)(r.rawData[n]),category:(0,p.replaceBlank)(t.categories.data[n]),shape:o[n%i],categoryIdx:n};return a}),s={type:r.type,data:a,colors:t.categories.colors,showValues:r.showValues===!0};e.graphs.push(s)}},this)}},this),e}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),t.series.forEach(function(t){"bar"===t.type&&o.bar&&_.merge(t,o.bar)}),o.legend&&_.merge(t.legend,o.legend)})}}]),e}(d.Bar)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function v(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:v(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(77),d=o(p),f=n(180),g=n(22),m=n(15);e.Pie=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.svg,n=this.options,o=this.getSheetData(),i=this.prepareSheetData(o),r=this.createAnimationCounter(2),a=!!o.legend.enabled,s=this.renderGraphs.bind(this),l=this.renderPart.bind(this);this.setupNumberFormatter(o);var u=n.width,c=n.height;c>u&&(c-=c-u);var h={width:u};if(this.renderSheetSwitch(h),i.data&&0===i.data.length)return this.animation.start(),this.animation.end(),this.resetRootElement();var p;if(a){var g=this.prepareLegendData(i),m=d.TextItemMetrics().width(h.width).texts(g.map(function(t){return t.title})).parentContainer(this.container).style(n.style.legend).reservedSize(36);p=d.Legend().data(g).width(h.width).style(n.style.legend).chartId(this.chartId).textMetrics(m()),this.renderLegend(p)}else this.container.selectAll(".igc-legend").remove();var v=15,y=Math.min(u,c),b=y/2,_=.8*b,x=i.outerRadiusVaries;v>b-_&&(_=b-v);var w=c/2-_;!i.showValues&&w>v&&(c-=2*(w-v));var S=i.innerRadiusPercent?i.innerRadiusPercent*_:i.innerRadius,C={width:2*S/Math.sqrt(2),height:2*S/Math.sqrt(2)},E=(0,f.Text)().style({}).value(o.categories.title).offset({left:u/2-C.width/2,top:c/2-C.height/2}).bounds({radius:S,width:C.width,height:C.height}).align("center").cssClassName("igc-pie-center-text-node").autoFontSize(!0);0===S&&E.value(""),this.containerSetup(),e.attr("width",u).attr("height",c);var T=e.datum(n).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);T.each(function(t){var n=e.select("defs"),o=e.selectAll(".igc"),a=o.select(".parts");s(o,[{graphs:[i],textStyle:t.style.axisTick,outerRadius:_,outerRadiusVaries:x,center:{x:u/2,y:c/2},bounds:{width:u,height:c},legend:p,defs:n,animationEnd:r}]),l(a,E,"igc-pie-center-text")}).each("start",function(){t.animation.start()}).each("end",function(){r()})}},{key:"containerSetup",value:function(){var t=this.groupTagName,e=this.svg,n=e.selectAll(".igc").data([0]),o=n.enter().append(t).attr("class","igc");this.isSvg&&e.selectAll("defs").data([0]).enter().append("defs"),o.append("g").attr("class","parts")}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=this.numberFormatX,r=this.getCalloutFormat(e);t.data(e.data).groupId(n).textStyle(o.textStyle).legend(o.legend).innerRadius(e.innerRadiusPercent?e.innerRadiusPercent*o.outerRadius:e.innerRadius).outerRadius(o.outerRadius).outerRadiusVaries(o.outerRadiusVaries).bounds(o.bounds).center(o.center).numberFormat(i).showValues(e.showValues).textFormat(r).defs(o.defs),e.showPercent&&(t.tooltipText(function(t){return t.data.categoryLabel+": "+t.value.toFixed(2)+"%"}),t.tooltipValue(function(t){return"("+i.tooltip(t.data.valueLabel)+")"})),t.dispatch().on("animationEnd",function(){o.animationEnd()})}},{key:"getCalloutFormat",value:function(t){var e,n=this.numberFormatX;return e=t.showPercent&&t.showCategoryName?function(t){var e=t.value;return""+t.data.categoryLabel+" "+e.toFixed(2)+"%"}:t.showPercent?function(t){var e=t.value;return""+e.toFixed(2)+"%"}:t.showCategoryName?function(t){return""+t.data.categoryLabel+" "+n.value(t.data.valueLabel)}:function(t){return n.value(t.data.valueLabel)}}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{animation:{duration:500}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pie",showValues:!1,showPercent:!1}]})}},{key:"prepareSheetData",value:function(t){var e=t.series[0],n=t.categories.colors,o=[],i=0;e.data.forEach(function(r,a){var s,l={categoryLabel:(0,m.replaceBlank)(t.categories.data[a],""),valueLabel:(0,m.replaceBlank)(e.rawData[a]),x:(0,m.replaceBlank)(r,null),color:(0,g.getColor)(a,n)};null!==l.x&&(s=Math.abs(l.x),l.xAbs=s,i+=s,o.push(l))}),o.forEach(function(t){var e=t.xAbs/i*100;t.pct=e});var r={type:e.type,data:o,showValues:e.showValues===!0,showPercent:e.showPercent===!0,showCategoryName:e.showCategoryName===!0,innerRadius:e.innerRadius||0,innerRadiusPercent:e.innerRadiusPercent||0,outerRadiusVaries:e.outerRadiusVaries===!0};return r}},{key:"prepareLegendData",value:function(t){return t.data.map(function(t){return{color:t.color,title:t.categoryLabel}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),o.legend&&_.merge(t.legend,o.legend),t.series.forEach(function(t){_.merge(t,o.series)}),o.axis&&o.axis[0]&&o.axis[0].format&&(t.axis[0]||(t.axis[0]={}),_.merge(t.axis[0],o.axis[0]))})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Scatter=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function v(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:v(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(30),c=o(u),h=n(22),p=n(170),d=n(431),f=o(d),g=n(76),m=n(15);e.Scatter=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{numeric:!0},series:[{type:"circle"}]})}},{key:"defaults",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:8,dataPoints:!0}})}},{key:"seriesDataValueParser",value:function(t){var e=new f["default"];return function(n,o){t.data[o]=[Number(e(n[0])),Number(e(n[1]))],void 0!==n[2]&&null!==n[2]&&(t.data[o][2]=Number(e(n[2])))}}},{key:"prepareSheetData",value:function(t){var e=this.emptySheetData().series[0].type,n=_.merge([],t.axis),o=n[0],i=n[1],r=t.categories.data.slice(0),a=(0,m.replaceBlank)(o.valueLabel),s=(0,m.replaceBlank)(i.valueLabel),l=(0,m.replaceBlank)(t.categories.valueLabel),u=0;return o.graphs=[],t.series.forEach(function(n,i){var c=n.data.map(function(t,e){var o={x:(0,m.replaceBlank)(Number(t[0]),0),y:(0,m.replaceBlank)(Number(t[1]),null),value:(0,m.replaceBlank)(Number(t[2]),null),xLabel:(0,m.replaceBlank)(n.rawData[e][0]),yLabel:(0,m.replaceBlank)(n.rawData[e][1]),xValueLabel:a,yValueLabel:s,valueLabel:l,groupLabel:(0,m.replaceBlank)(r[i]),groupSubLabel:(0,m.replaceBlank)(n.rawData[e][3])};return u=Math.max(null===o.value?0:o.value,u),o}),p={type:e,data:c,colors:[(0,h.getColor)(i,t.categories.colors)],interpolation:n.interpolation||"linear"};o.graphs.push(p)},this),o.graphs.forEach(function(t){t.maxValue=u}),o}},{key:"renderGraphs",value:function(t,e){var n=[];e[0].graphs.forEach(function(t){n.push({graphs:[t],x:e[0].x,y:e[0].y,legend:e[0].legend,bounds:e[0].bounds,offset:e[0].offset,animationEnd:e[0].animationEnd})}),c["default"].prototype.renderGraphs.call(this,t,n)}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=function(t){return function(e){return"string"==typeof e.y?0:t}}(this.options.series.dataPointRadius),a=this.numberFormatX,s=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(i).radius(r).legend(o.legend).filterFn(function(t){return null!==t.y}).tooltipText(function(t){return t.groupSubLabel?t.groupLabel+"\n"+t.groupSubLabel+" ("+t.valueLabel+": "+t.value+")":t.groupLabel}).tooltipValue(function(t){var e={preX:t.xValueLabel?t.xValueLabel+": ":"",preY:t.yValueLabel?t.yValueLabel+": ":"",x:a.format(t.x,{keepDecimals:!0}),y:s.format(t.y,{keepDecimals:!0})};return""+e.preX+e.x+"\n"+e.preY+e.y}).dispatch().on("animationEnd",o.animationEnd)}},{key:"numericCategoriesScale",value:function(){var t=this.runtime,e=t.xAxisOptions,n=[0,t.graphWidth],o=this.getDomain(t.graphs,"x"),i=g.ScaleHelper.linearScaleTicksDomainAdjust;return o=i(o,this.options.series.dataPointRadius,n),this.limitDomain(e.minLimit,e.maxLimit,o),d3.scale.linear().domain(o).range(n)}},{key:"prepareLegendData",value:function(t){var e=t.categories.colors;return t.series.map(function(n,o){return{color:(0,h.getColor)(o,e),title:t.categories.data[o]}})}},{key:"curtainAnimation",value:function(t,e,n,o){o.animationEnd()}}]),e}(p.Line)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Treemap=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function d(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:d(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(30),c=o(u),h=n(22),p=n(15);e.Treemap=function(t){function e(t){return i(this,e),r(this,Object.getPrototypeOf(e).call(this,t,"div"))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.svg,n=this.createAnimationCounter(2),o={top:0,right:0,bottom:0,left:0},i={left:0,right:0,top:0,bottom:0},r=this.options,a=this.getSheetData(),s=this.prepareSheetData(a);this.setupNumberFormatter(a);var l=r.width-o.left-i.left-o.right-i.right,u=r.height-o.top-i.top-o.bottom-i.bottom,c={width:r.width};if(this.renderSheetSwitch(c),r.sheets&&r.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var h=this.svg.datum(this).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);this.containerSetup(),e.style({width:r.width+"px",height:r.height+"px"}),h.each(function(t){var i=e.select(".igc");t.renderGraphs(i,[{graphs:[s],textStyle:r.style.axisTick,bounds:{width:l,height:u},offset:{left:o.left,top:o.top},transitionDuration:r.animation.duration,animationEnd:n}])}).each("start",function(){t.animation.start()}).each("end",function(){n()})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length+1,a=this.numberFormatX;t.data(e.data).groupId(i).showValues(e.showValues).sort(e.sort).bounds(o.bounds).labelOptions(e.labels).offset(o.offset).layout(e.layout).numberFormat(a).tooltipText(function(t){return t.categoryLabel}).tooltipValue(function(t){return a.tooltip(t.valueLabel)}).transitionDelay(function(t){return t.tord/r*o.transitionDuration}).transitionDuration(o.transitionDuration),t.dispatch().on("animationEnd",o.animationEnd)}},{key:"defaults",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{animation:{duration:350}})}},{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{labels:{name:{colorMethod:"normal",color:"#ffffff"},value:{colorMethod:"normal",color:"#ffffff"}},axis:[{}],series:[{title:"",type:"treemap",showValues:!1,sort:"none"}]})}},{key:"prepareSheetData",value:function(t){var e=t.series[0],n=t.categories.colors,o=[];e.data.forEach(function(i,r){var a,s={categoryLabel:(0,p.replaceBlank)(t.categories.data[r],""),valueLabel:(0,p.replaceBlank)(e.rawData[r]),size:(0,p.replaceBlank)(i,null),color:(0,h.getColor)(r,n)};null!==s.size&&(a=Math.abs(s.size),s.sizeAbs=a,o.unshift(s))});var i={type:e.type,data:o,showValues:e.showValues===!0,labels:t.labels,sort:e.sort,layout:t.categories.layout};return i}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.labels&&_.merge(t.labels,o.labels),o.categories&&_.merge(t.categories,o.categories),o.axis&&_.merge(t.axis,o.axis),t.series.forEach(function(t){"treemap"===t.type&&o.treemap&&_.merge(t,o.treemap)}),o.legend&&_.merge(t.legend,o.legend)})}}]),e}(c["default"])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={LINE:"line",COLUMN:"column",COLUMN_STACKED:"column-stacked",COLUMN_GROUPED:"column-grouped",SCATTER:"scatter",BUBBLE:"bubble",DOT_PLOT:"dot-plot",AREA:"area",AREA_STACKED:"area-stacked",AREA_STEPPED:"area-stepped",STREAM_GRAPH:"stream-graph",DOUBLE:"double",GROUPS:{NUMERIC_XAXIS:["line","scatter","bubble","dot-plot","area","area-stacked","stream-graph"],COLUMN:["column","column-stacked","column-grouped","area-stepped"]}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t,e){if(e.invert)return e.invert(t);var n=r(t,e);return n&&n.posValue}function e(){var e=d3.mouse(this),n=document.body,o=s({x:t(e[0],m),mouseY:e[1]});if(null!==o&&o!==M){M=o;var i="y1"===M.scale&&l||v,r=m(M.x),c=i(M.y);if(S=M.colors[0],k.attr("cx",r+C).attr("cy",c).style("fill",S).attr("visibility","visible"),M){var h=u.getBoundingClientRect(),p={x:h.left+x.left+r+C+n.scrollLeft,y:h.top+x.top+c+n.scrollTop},d=I(M),f=P(M);if(k.style({stroke:S,fill:"white"}),p.x===T.x&&p.y===T.y)return(0,a["default"])().setColor(S),void("hidden"===(0,a["default"])().self.style.visibility&&(0,a["default"])().show());(0,a["default"])().setText(d).setValue(f).setPosition(p,S),T=p}else k.style({stroke:"white",fill:S}),(0,a["default"])().hide()}}function n(){E=!0}function o(){E=!1}function r(t,e){var n=e.domain(),o=e.rangeBand()/2,i=_.chain(n).map(function(n){var i=e(n),r=i+o,a=Math.abs(t-r);return{distance:a,posValue:n,pos:r}}).sortBy(function(t){return t.distance}).value();return i[0]}function s(t){var e=null,n=null,o=Number.MAX_VALUE,i=g.map(function(n){var i=Math.abs(t.x-n.x),r={d:n,distanceX:i};return o>i&&(o=i,e=r),r});return o=Number.MAX_VALUE,i.forEach(function(i){if(i.distanceX===e.distanceX){var r=v(i.d.y);"y1"===i.d.scale&&l&&(r=l(i.d.y));var a=Math.abs(t.mouseY-r),s=r>=0&&r<=w.height;p&&(s=r>=p.y&&r<=p.height),o>a&&null!==i.d.y&&s&&(o=a,n=i)}}),n&&n.d}var l,u,c,h,p,d=null,f=null,g=null,m=d3.scale.linear(),v=d3.scale.linear(),y="x",b="y",x={top:0,left:0},w={width:0,height:0},S="#ffffff",C=0,E=!1,T={x:null,y:null},k=null,M=null,O=null,I=function(t){return t.x},P=function(t){return t.y},L=function(){g&&(O&&(g=O(g)),m.rangeBand&&(C=m.rangeBand()/2),k=f.selectAll(".igc-crosshair-circle").data([0]),k.enter().append("circle").attr("class","igc-crosshair-circle"),k.attr("visibility","hidden").attr("r",5).style({stroke:"white","stroke-width":2}),k.on("mouseenter.crosshair_circle",n),k.on("mouseleave.crosshair_circle",o))},D=_.debounce(function(){E||(M=null,k.attr("visibility","hidden"),(0,a["default"])().hide())},50),A={target:function(t){return arguments.length?(d&&(d.on("mousemove.crosshair",null),d.on("mouseout.crosshair",null)),d=t,d.on("mousemove.crosshair",e),d.on("mouseout.crosshair",D),L):d},targetParent:function(t){return arguments.length?(f=t,L):f},scaleX:function(t){return arguments.length?(m=t,L):m},scaleY:function(t){return arguments.length?(v=t,L):v},scaleY1:function(t){return arguments.length?(l=t,L):l},pX:function(t){return arguments.length?(y=t,L):y},pY:function(t){return arguments.length?(b=t,L):b},data:function(t){return arguments.length?(g=t,L):g},groupId:function(t){return arguments.length?(h=t,L):h},chartId:function(t){return arguments.length?(c=t,L):c},filterFn:function(t){return arguments.length?(O=t,L):O},offset:function(t){return arguments.length?(x.left="number"==typeof t.left?t.left:x.left,x.top="number"==typeof t.top?t.top:x.top,L):x},bounds:function(t){return arguments.length?(w.width="number"==typeof t.width?t.width:w.width,w.height="number"==typeof t.height?t.height:w.height,L):w},svgContainer:function(t){return arguments.length?(u=t,L):u},tooltipText:function(t){return arguments.length?(I=t,L):I},tooltipValue:function(t){return arguments.length?(P=t,L):P},pointRect:function(t){return arguments.length?(p=t,L):p}};return(0,i.injectFunctions)(L,A),L};var i=n(15),r=n(67),a=o(r)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){A.duration.y=R,t.each(function(){if(T.length){var t=d3.select(this);H=w.rangeBand();var e=this.__scale__||w,o=this.__scale__=w.copy(),i=[];T.forEach(function(t,e){var n=i[e]={};n[C]=t[C],n[C+"Label"]=t[C+"Label"],n[E]=t[E],n[E+"Label"]=t[E+"Label"],n.height=S(0)-S(t[E]),n.width=H,n[C+"Pos"]=w(t[C]),n[E+"Pos"]=S(0),n.color=(0,d.getColor)(t.categoryIdx,k),n.index=e});var r=t.selectAll("path");r.transition().duration(0),t.selectAll("text").remove();var s=[];r.each(function(t){var e=_.merge({},t);s.push(e)}),0===s.length&&(s=i.map(function(t){var e=_.merge({},t);return e.height=0,e})),g(e,o,s.length!==i.length),u(s,i),j=_.after(2,F.animationEnd);var l=t.selectAll("path").data(s),c=l.enter(),p=s[s.length-1],b=0===l.size()&&l.size()<c.size(),M=A.duration;b?(c.call(h),m(t,s)):l.transition().duration(M.y).attrTween("d",f(function(t){var e={};return e[E+"Pos"]=t.next[E+"Pos"],e.height=t.next.height,e})).transition().duration(M.x).each("start",function(){N.update++}).attrTween("d",f(function(t){return t.next})).each("end",function(){0===--N.update&&(n(l,y,v),a(l),c.call(h),m(t,s))}),l.exit().transition().duration(M.y).attr("d",function(t){var e=t.yPos;return p&&(e=p.next.yPos),P(t.xPos,e,t.width,0,0)}).remove(),l.style("stroke-width",0).style("fill",function(t){return t.next.color}),x&&x.addListener({id:v,dispatch:F})}})}function e(t){F.on("highlightStart.text",function(e,n,i){t.filter(o(e,n,i)).transition().duration(150).ease("linear").style("opacity",.3)}),F.on("highlightEnd.text",function(e,n,i){t.filter(o(e,n,i)).transition().duration(150).ease("linear").style("opacity",1)})}function n(t){F.on("highlightStart.column",function(e,n,i){t.filter(o(e,n,i)).transition().duration(150).ease("linear").style("opacity",.3)}),F.on("highlightEnd.column",function(e,n,i){t.filter(o(e,n,i)).transition().duration(150).ease("linear").style("opacity",1)})}function o(t,e,n){var o=function(){return t!==y};return"column"===n&&(o=function(e,n){return n!==t}),o}function a(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event);e=z(t),n=V(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color)}).on("mouseout",function(){(0,s["default"])().hide()})}function u(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o[C]=e[C],o[C+"Label"]=e[C+"Label"],o[E]=e[E],o[E+"Label"]=e[E+"Label"],o.height=0,o.width=e.width,o[E+"Pos"]=e[E+"Pos"],o[C+"Pos"]=e[C+"Pos"],o.color=e.color,o.index=n}})}function h(t){var e=t.append("path");0===e.size()&&j(),e.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return P(t.xPos,t.yPos,t.width,0,0)}),e.transition().duration(R).ease("elastic").delay(B).attrTween("d",f(function(t){return t.next})).each("start",function(){N.enter++}).each("end",function(){0===--N.enter&&(j(),n(e,y,v),a(e))})}function f(t){return function(e,n){var o=t.call(this,e,n);n=d3.interpolate(e,o);for(var i in o)e[i]=o[i];return function(t){return L(n(t))}}}function g(t,e,n){var o=Math.abs(e.rangeBand()-t.rangeBand());!n&&4>o&&(A.duration.x=0)}function m(t,n){var o=n.map(function(t){return b?b.value(t.next.yLabel):""+t.next.yLabel}),r=(0,d.getAllTextDimensions)(o,t,I),s=d3.max(r,function(t){return t.height}),u=M&&H>=s,c=[];u&&(c=i.prepareTextData(n,r,I,2,S,O)),c.length&&u||j();var h=t.selectAll("text").data(c),p=h.enter().append("text");h.exit().remove(),h.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return b?b.value(t.text):t.text}).style("cursor","default").style(I).attr("transform",function(t){return t.transform}).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),h.transition().duration(A.duration.text).style("opacity",1).each("start",function(){N.text++}).each("end",function(){0===--N.text&&j()}),a(p.filter(function(t){return t.inside})),e(h)}var v,y,b,x,w=d3.scale.linear(),S=d3.scale.linear(),C="x0",E="y0",T=[],k=d3.scale.category20().range(),M=!1,O=!1,I=c["default"].prototype.defaults().style.axisTick,P=p["default"].columnToTop,L=i.createTweenShape(E),D=400,A={duration:{x:D,y:700,text:50}},N={enter:0,update:0,text:0},B=0,j=function(){},R=700,H=0,F=d3.dispatch("highlightStart","highlightEnd","animationEnd"),z=function(t){return t.x},V=function(t){return t.y},U={scaleX:function(e){return arguments.length?(w=e.copy(),t):w},scaleY:function(e){return arguments.length?(S=e.copy(),t):S},pX:function(e){return arguments.length?(C=e,t):C},pY:function(e){return arguments.length?(E=e,L=i.createTweenShape(E),t):E},data:function(e){return arguments.length?(T=e,t):T},colors:function(e){return arguments.length?(k=e,t):k},groupId:function(e){return arguments.length?(y=e,t):y},chartId:function(e){return arguments.length?(v=e,t):v},valuesOutside:function(e){return arguments.length?(O=!!e,t):O},legend:function(e){return arguments.length?(x=e,t):x},tooltipText:function(e){return arguments.length?(z=e,t):z},tooltipValue:function(e){return arguments.length?(V=e,t):V},showValues:function(e){return arguments.length?(M=!!e,t):M},textStyle:function(e){return arguments.length?(I=e,t):I},transitionDelay:function(e){return arguments.length?(B=e,t):B},numberFormat:function(e){return arguments.length?(b=e,t):b},transitionDuration:function(e){return arguments.length?(R=e,t):R},dispatch:function(){return F}};return(0,r.injectFunctions)(t,U),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Column=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(138),p=o(h),d=n(22),f=n(66);i.createTweenShape=function(t){return function(e){return null===e[t]?"":p["default"].columnToTop(e.xPos,e.yPos,e.width,e.height,0)}},i.prepareTextData=function(t,e,n,o,i,r){var a=[],s=d3.max(i.range());return t.forEach(function(t,i){var l=t.next;if(null!==l.x){var u,c={},h=l.yPos,p=h,d="start",g=h,m=s-h,v=1,y=!0,b=e[i],_=b.width,x=_+o,w=Math.abs(l.height),S=!r&&w>x;l.y<0&&(d="end",g=m,m=h,v=-1),S?p-=v*o:g>=w+x?p-=v*(w+o):m>=x?(p+=v*o,d="end"===d?"start":"end"):y=!1,y&&(c.inside=S,c.fillColor=S?f.Colors.getContrastYIQ(l.color,n.color):n.color,c.textX=u=l.xPos+l.width/2+.25*b.height,c.textY=p,c.transform="rotate(-90,"+u+","+p+")",c.textAnchor=d,c.text=l.yLabel,c.index=i,c.seriesIdx=l.seriesIdx,c.yLabel=l.yLabel,c.xLabel=l.xLabel,c.groupLabel=l.groupLabel,c.color=l.color,a.push(c))}}),a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(750);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(745);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(748);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=n(400);
Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(746);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var l=n(747);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var u=n(517);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var c=n(749);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var h=n(430);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var p=n(755);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})});var d=n(756);Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})});var f=n(751);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})});var g=n(752);Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})});var m=n(753);Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})})},function(t,e,n){"use strict";var o=n(71),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:o}},registerDefault:function(){}};t.exports=i},function(t,e){"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(522),a=n(780),s=n(7),l=function(t){function e(n){o(this,e),t.call(this,n),this._state=this.getInitialState()}return i(e,t),e.prototype.getState=function(){return this._state},e.prototype.getInitialState=function(){return a("FluxReduceStore","getInitialState")},e.prototype.reduce=function(t,e){return a("FluxReduceStore","reduce")},e.prototype.areEqual=function(t,e){return t===e},e.prototype.__invokeOnDispatch=function(t){this.__changed=!1;var e=this._state,n=this.reduce(e,t);void 0===n?s(!1):void 0,this.areEqual(e,n)||(this._state=n,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},e}(r);t.exports=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(765),r=i.EventEmitter,a=n(7),s=function(){function t(e){var n=this;o(this,t),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=e,this.__emitter=new r,this._dispatchToken=e.register(function(t){n.__invokeOnDispatch(t)})}return t.prototype.addListener=function(t){return this.__emitter.addListener(this.__changeEvent,t)},t.prototype.getDispatcher=function(){return this.__dispatcher},t.prototype.getDispatchToken=function(){return this._dispatchToken},t.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()?void 0:a(!1),this.__changed},t.prototype.__emitChange=function(){this.__dispatcher.isDispatching()?void 0:a(!1),this.__changed=!0},t.prototype.__invokeOnDispatch=function(t){this.__changed=!1,this.__onDispatch(t),this.__changed&&this.__emitter.emit(this.__changeEvent)},t.prototype.__onDispatch=function(t){a(!1)},t}();t.exports=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){t&&t.length?void 0:r(!1);var e=t[0].getDispatcher();return e}var r=n(7),a=function(){function t(e,n){var r=this;o(this,t),this._dispatcher=i(e);var a=e.map(function(t){return t.getDispatchToken()});this._dispatchToken=this._dispatcher.register(function(t){r._dispatcher.waitFor(a),n()})}return t.prototype.release=function(){this._dispatcher.unregister(this._dispatchToken)},t}();t.exports=a},function(t,e){t.exports='<div class="igc-sheets" style="text-align:center">\n    <% _.each(radiobuttons, function(entry, v) { %>\n        <div class="igc-sheet <% if (v === sheet) { %>active<% } %>" data-id="" data-value="<%= v %>">\n            <span class="igc-sheet-ico"></span>\n            <span class="igc-sheet-label"><%= entry %></span>\n        </div>\n    <% }); %>\n</div>\n'},function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(t){i.forEach(function(e){o[n(e,t)]=o[t]})});var r={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:o,shorthandPropertyExpansions:r};t.exports=a},function(t,e,n){"use strict";function o(){this._callbacks=null,this._contexts=null}var i=n(29),r=n(32),a=n(140);n(7);r(o.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t){return u.hasOwnProperty(t)?!0:l.hasOwnProperty(t)?!1:s.test(t)?(u[t]=!0,!0):(l[t]=!0,!1)}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&1>e||t.hasOverloadedBooleanValue&&e===!1}var r=n(182),a=(n(56),n(96),n(868)),s=(n(31),new RegExp("^["+r.ATTRIBUTE_NAME_START_CHAR+"]["+r.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(t){return r.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(r.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return r.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(r.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(n){if(i(n,e))return"";var o=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?o+'=""':o+"="+a(e)}return r.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return o(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var o=r.properties.hasOwnProperty(e)?r.properties[e]:null;if(o){var a=o.mutationMethod;if(a)a(t,n);else{if(i(o,n))return void this.deleteValueForProperty(t,e);if(o.mustUseProperty)t[o.propertyName]=n;else{var s=o.attributeName,l=o.attributeNamespace;l?t.setAttributeNS(l,s,""+n):o.hasBooleanValue||o.hasOverloadedBooleanValue&&n===!0?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(r.isCustomAttribute(e))return void c.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(o(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=r.properties.hasOwnProperty(e)?r.properties[e]:null;if(n){var o=n.mutationMethod;if(o)o(t,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?t[i]=!1:t[i]=""}else t.removeAttribute(n.attributeName)}else r.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=c},function(t,e,n){"use strict";function o(t){return(""+t).replace(_,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function r(t,e,n){var o=t.func,i=t.context;o.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var o=i.getPooled(e,n);v(t,r,o),i.release(o)}function s(t,e,n,o){this.result=t,this.keyPrefix=e,this.func=n,this.context=o,this.count=0}function l(t,e,n){var i=t.result,r=t.keyPrefix,a=t.func,s=t.context,l=a.call(s,e,t.count++);Array.isArray(l)?u(l,i,n,m.thatReturnsArgument):null!=l&&(g.isValidElement(l)&&(l=g.cloneAndReplaceKey(l,r+(!l.key||e&&e.key===l.key?"":o(l.key)+"/")+n)),i.push(l))}function u(t,e,n,i,r){var a="";null!=n&&(a=o(n)+"/");var u=s.getPooled(e,a,i,r);v(t,l,u),s.release(u)}function c(t,e,n){if(null==t)return t;var o=[];return u(t,o,null,e,n),o}function h(t,e,n){return null}function p(t,e){return v(t,h,null)}function d(t){var e=[];return u(t,e,null,m.thatReturnsArgument),e}var f=n(140),g=n(122),m=n(71),v=n(454),y=f.twoArgumentPooler,b=f.fourArgumentPooler,_=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,b);var x={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:d};t.exports=x},function(t,e,n){"use strict";function o(t,e){var n=w.hasOwnProperty(e)?w[e]:null;C.hasOwnProperty(e)&&(n!==_.OVERRIDE_BASE?h("73",e):void 0),t&&(n!==_.DEFINE_MANY&&n!==_.DEFINE_MANY_MERGED?h("74",e):void 0)}function i(t,e){if(e){"function"==typeof e?h("75"):void 0,f.isValidElement(e)?h("76"):void 0;var n=t.prototype,i=n.__reactAutoBindPairs;e.hasOwnProperty(b)&&S.mixins(t,e.mixins);for(var r in e)if(e.hasOwnProperty(r)&&r!==b){var a=e[r],u=n.hasOwnProperty(r);if(o(u,r),S.hasOwnProperty(r))S[r](t,a);else{var c=w.hasOwnProperty(r),p="function"==typeof a,d=p&&!c&&!u&&e.autobind!==!1;if(d)i.push(r,a),n[r]=a;else if(u){var g=w[r];!c||g!==_.DEFINE_MANY_MERGED&&g!==_.DEFINE_MANY?h("77",g,r):void 0,g===_.DEFINE_MANY_MERGED?n[r]=s(n[r],a):g===_.DEFINE_MANY&&(n[r]=l(n[r],a))}else n[r]=a}}}else;}function r(t,e){if(e)for(var n in e){var o=e[n];if(e.hasOwnProperty(n)){var i=n in S;i?h("78",n):void 0;var r=n in t;r?h("79",n):void 0,t[n]=o}}}function a(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:h("80");for(var n in e)e.hasOwnProperty(n)&&(void 0!==t[n]?h("81",n):void 0,t[n]=e[n]);return t}function s(t,e){return function(){var n=t.apply(this,arguments),o=e.apply(this,arguments);if(null==n)return o;if(null==o)return n;var i={};return a(i,n),a(i,o),i}}function l(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function u(t,e){var n=e.bind(t);return n}function c(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var o=e[n],i=e[n+1];t[o]=u(t,i)}}var h=n(29),p=n(32),d=n(439),f=n(122),g=(n(445),n(444),n(443)),m=n(196),v=(n(7),n(401)),y=n(139),b=(n(31),y({mixins:null})),_=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),x=[],w={mixins:_.DEFINE_MANY,statics:_.DEFINE_MANY,propTypes:_.DEFINE_MANY,contextTypes:_.DEFINE_MANY,childContextTypes:_.DEFINE_MANY,getDefaultProps:_.DEFINE_MANY_MERGED,getInitialState:_.DEFINE_MANY_MERGED,getChildContext:_.DEFINE_MANY_MERGED,render:_.DEFINE_ONCE,componentWillMount:_.DEFINE_MANY,componentDidMount:_.DEFINE_MANY,componentWillReceiveProps:_.DEFINE_MANY,shouldComponentUpdate:_.DEFINE_ONCE,componentWillUpdate:_.DEFINE_MANY,componentDidUpdate:_.DEFINE_MANY,componentWillUnmount:_.DEFINE_MANY,updateComponent:_.OVERRIDE_BASE},S={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)i(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=p({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=p({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=s(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=p({},t.propTypes,e)},statics:function(t,e){r(t,e)},autobind:function(){}},C={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},E=function(){};p(E.prototype,d.prototype,C);var T={createClass:function(t){var e=function(t,n,o){this.__reactAutoBindPairs.length&&c(this),this.props=t,this.context=n,this.refs=m,this.updater=o||g,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?h("82",e.displayName||"ReactCompositeComponent"):void 0,this.state=i};e.prototype=new E,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],x.forEach(i.bind(null,e)),i(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:h("83");for(var n in w)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){x.push(t)}}};t.exports=T},function(t,e){"use strict";var n={hasCachedChildNodes:1};t.exports=n},function(t,e,n){"use strict";function o(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=l.getValue(t);null!=e&&i(this,Boolean(t.multiple),e)}}function i(t,e,n){var o,i,r=u.getNodeFromInstance(t).options;if(e){for(o={},i=0;i<n.length;i++)o[""+n[i]]=!0;for(i=0;i<r.length;i++){var a=o.hasOwnProperty(r[i].value);r[i].selected!==a&&(r[i].selected=a)}}else{for(o=""+n,i=0;i<r.length;i++)if(r[i].value===o)return void(r[i].selected=!0);r.length&&(r[0].selected=!0)}}function r(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(o,this),n}var a=n(32),s=n(402),l=n(438),u=n(56),c=n(123),h=(n(31),!1),p={getHostProps:function(t,e){return a({},s.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=l.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:r.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||h||(h=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var o=l.getValue(e);null!=o?(t._wrapperState.pendingUpdate=!1,i(t,Boolean(e.multiple),o)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?i(t,Boolean(e.multiple),e.defaultValue):i(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=p},function(t,e){"use strict";var n,o={injectEmptyComponentFactory:function(t){n=t}},i={create:function(t){return n(t)}};i.injection=o,t.exports=i},function(t,e){"use strict";var n={logTopLevelRenders:!1};t.exports=n},function(t,e,n){"use strict";function o(t){return l?void 0:a("111",t.type),new l(t)}function i(t){return new c(t)}function r(t){return t instanceof c}var a=n(29),s=n(32),l=(n(7),null),u={},c=null,h={injectGenericComponentClass:function(t){l=t},injectTextComponentClass:function(t){c=t},injectComponentClasses:function(t){s(u,t)}},p={createInternalComponent:o,createInstanceForText:i,isTextComponent:r,injection:h};t.exports=p},function(t,e,n){"use strict";function o(t){return r(document.documentElement,t)}var i=n(832),r=n(458),a=n(520),s=n(407),l={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:l.hasSelectionCapabilities(t)?l.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&o(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,o=e.end;if(void 0===o&&(o=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(o,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var r=t.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",o-n),r.select()}else i.setOffsets(t,e)}};t.exports=l},function(t,e,n){"use strict";function o(t,e){for(var n=Math.min(t.length,e.length),o=0;n>o;o++)if(t.charAt(o)!==e.charAt(o))return o;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===A?t.documentElement:t.firstChild:null}function r(t){return t.getAttribute&&t.getAttribute(P)||""}function a(t,e,n,o,i){var r;if(x.logTopLevelRenders){var a=t._currentElement.props,s=a.type;r="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(r)}var l=C.mountComponent(t,n,null,y(t,e),i,0);r&&console.timeEnd(r),t._renderedComponent._topLevelWrapper=t,H._mountImageIntoNode(l,e,t,o,n)}function s(t,e,n,o){var i=T.ReactReconcileTransaction.getPooled(!n&&b.useCreateElement);i.perform(a,null,t,e,i,n,o),T.ReactReconcileTransaction.release(i)}function l(t,e,n){for(C.unmountComponent(t,n),e.nodeType===A&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function u(t){var e=i(t);if(e){var n=v.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function c(t){return!(!t||t.nodeType!==D&&t.nodeType!==A&&t.nodeType!==N)}function h(t){var e=i(t),n=e&&v.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function p(t){var e=h(t);return e?e._hostContainerInfo._topLevelWrapper:null}var d=n(29),f=n(181),g=n(182),m=n(403),v=(n(141),n(56)),y=n(825),b=n(828),_=n(122),x=n(533),w=n(190),S=(n(96),n(841)),C=n(183),E=n(447),T=n(123),k=n(196),M=n(548),O=(n(7),n(406)),I=n(453),P=(n(31),g.ID_ATTRIBUTE_NAME),L=g.ROOT_ATTRIBUTE_NAME,D=1,A=9,N=11,B={},j=1,R=function(){this.rootID=j++};R.prototype.isReactComponent={},R.prototype.render=function(){return this.props};var H={TopLevelWrapper:R,_instancesByReactRootID:B,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,o,i){return H.scrollMonitor(o,function(){E.enqueueElementInternal(t,e,n),i&&E.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,n,o){c(e)?void 0:d("37"),m.ensureScrollValueMonitoring();var i=M(t,!1);T.batchedUpdates(s,i,e,n,o);var r=i._instance.rootID;return B[r]=i,i},renderSubtreeIntoContainer:function(t,e,n,o){return null!=t&&w.has(t)?void 0:d("38"),H._renderSubtreeIntoContainer(t,e,n,o)},_renderSubtreeIntoContainer:function(t,e,n,o){E.validateCallback(o,"ReactDOM.render"),_.isValidElement(e)?void 0:d("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=_(R,null,null,null,null,null,e);if(t){var l=w.get(t);a=l._processChildContext(l._context)}else a=k;var c=p(n);if(c){var h=c._currentElement,f=h.props;if(I(f,e)){var g=c._renderedComponent.getPublicInstance(),m=o&&function(){o.call(g)};return H._updateRootComponent(c,s,a,n,m),g}H.unmountComponentAtNode(n)}var v=i(n),y=v&&!!r(v),b=u(n),x=y&&!c&&!b,S=H._renderNewRootComponent(s,n,x,a)._renderedComponent.getPublicInstance();return o&&o.call(S),S},render:function(t,e,n){return H._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){c(t)?void 0:d("40");var e=p(t);if(!e){u(t),1===t.nodeType&&t.hasAttribute(L);return!1}return delete B[e._instance.rootID],T.batchedUpdates(l,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,r,a){if(c(e)?void 0:d("41"),r){var s=i(e);if(S.canReuseMarkup(t,s))return void v.precacheNode(n,s);var l=s.getAttribute(S.CHECKSUM_ATTR_NAME);s.removeAttribute(S.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(S.CHECKSUM_ATTR_NAME,l);var h=t,p=o(h,u),g=" (client) "+h.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);e.nodeType===A?d("42",g):void 0}if(e.nodeType===A?d("43"):void 0,a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);f.insertTreeBefore(e,t,null)}else O(e,t),v.precacheNode(n,e.firstChild)}};t.exports=H},function(t,e,n){"use strict";var o=n(401),i=o({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=i},function(t,e,n){"use strict";var o=n(29),i=n(122),r=(n(7),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?r.EMPTY:i.isValidElement(t)?"function"==typeof t.type?r.COMPOSITE:r.HOST:void o("26",t)}});t.exports=r},function(t,e,n){"use strict";function o(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(t){this.message=t,this.stack=""}function r(t){function e(e,n,o,r,a,s,l){r=r||T,s=s||o;if(null==n[o]){var u=w[a];return e?new i("Required "+u+" `"+s+"` was not specified in "+("`"+r+"`.")):null}return t(n,o,r,a,s)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function a(t){function e(e,n,o,r,a,s){var l=e[n],u=y(l);if(u!==t){var c=w[r],h=b(l);return new i("Invalid "+c+" `"+a+"` of type "+("`"+h+"` supplied to `"+o+"`, expected ")+("`"+t+"`."))}return null}return r(e)}function s(){return r(C.thatReturns(null))}function l(t){function e(e,n,o,r,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){var l=w[r],u=y(s);return new i("Invalid "+l+" `"+a+"` of type "+("`"+u+"` supplied to `"+o+"`, expected an array."))}for(var c=0;c<s.length;c++){var h=t(s,c,o,r,a+"["+c+"]",S);if(h instanceof Error)return h}return null}return r(e)}function u(){function t(t,e,n,o,r){var a=t[e];if(!x.isValidElement(a)){var s=w[o],l=y(a);return new i("Invalid "+s+" `"+r+"` of type "+("`"+l+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return r(t)}function c(t){function e(e,n,o,r,a){if(!(e[n]instanceof t)){var s=w[r],l=t.name||T,u=_(e[n]);return new i("Invalid "+s+" `"+a+"` of type "+("`"+u+"` supplied to `"+o+"`, expected ")+("instance of `"+l+"`."))}return null}return r(e)}function h(t){function e(e,n,r,a,s){for(var l=e[n],u=0;u<t.length;u++)if(o(l,t[u]))return null;var c=w[a],h=JSON.stringify(t);return new i("Invalid "+c+" `"+s+"` of value `"+l+"` "+("supplied to `"+r+"`, expected one of "+h+"."))}return Array.isArray(t)?r(e):C.thatReturnsNull}function p(t){function e(e,n,o,r,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var s=e[n],l=y(s);if("object"!==l){var u=w[r];return new i("Invalid "+u+" `"+a+"` of type "+("`"+l+"` supplied to `"+o+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var h=t(s,c,o,r,a+"."+c,S);if(h instanceof Error)return h}return null}return r(e)}function d(t){function e(e,n,o,r,a){for(var s=0;s<t.length;s++){var l=t[s];if(null==l(e,n,o,r,a,S))return null}var u=w[r];return new i("Invalid "+u+" `"+a+"` supplied to "+("`"+o+"`."))}return Array.isArray(t)?r(e):C.thatReturnsNull}function f(){function t(t,e,n,o,r){if(!m(t[e])){var a=w[o];return new i("Invalid "+a+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(t)}function g(t){function e(e,n,o,r,a){var s=e[n],l=y(s);if("object"!==l){var u=w[r];return new i("Invalid "+u+" `"+a+"` of type `"+l+"` "+("supplied to `"+o+"`, expected `object`."))}for(var c in t){var h=t[c];if(h){var p=h(s,c,o,r,a+"."+c,S);if(p)return p}}return null}return r(e)}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||x.isValidElement(t))return!0;var e=E(t);if(!e)return!1;var n,o=e.call(t);if(e!==t.entries){for(;!(n=o.next()).done;)if(!m(n.value))return!1}else for(;!(n=o.next()).done;){var i=n.value;if(i&&!m(i[1]))return!1}return!0;default:return!1}}function v(t,e){return"symbol"===t?!0:"Symbol"===e["@@toStringTag"]?!0:"function"==typeof Symbol&&e instanceof Symbol}function y(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":v(e,t)?"symbol":e}function b(t){var e=y(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function _(t){return t.constructor&&t.constructor.name?t.constructor.name:T}var x=n(122),w=n(444),S=n(446),C=n(71),E=n(546),T=(n(31),"<<anonymous>>"),k={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:l,element:u(),instanceOf:c,node:f(),objectOf:p,oneOf:h,oneOfType:d,shape:g};i.prototype=Error.prototype,t.exports=k},function(t,e){"use strict";t.exports="15.3.1"},function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e,n){"use strict";function o(t,e){return null==e?i("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=n(29);n(7);t.exports=o},function(t,e,n){"use strict";var o=!1;t.exports=o},function(t,e){"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},function(t,e,n){"use strict";function o(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=n(538);t.exports=o},function(t,e){"use strict";function n(t){var e=t&&(o&&t[o]||t[i]);return"function"==typeof e?e:void 0}var o="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},function(t,e,n){"use strict";function o(){return!r&&i.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}var i=n(75),r=null;t.exports=o},function(t,e,n){"use strict";function o(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function r(t,e){var n;if(null===t||t===!1)n=u.create(r);else if("object"==typeof t){var s=t;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,o(s._owner)):void 0,"string"==typeof s.type?n=c.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof t||"number"==typeof t?n=c.createInstanceForText(t):a("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}var a=n(29),s=n(32),l=n(822),u=n(532),c=n(534),h=(n(7),n(31),function(t){this.construct(t)});s(h.prototype,l.Mixin,{_instantiateReactComponent:r});t.exports=r},function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!o[t.type]:"textarea"===e}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e,n){"use strict";var o=n(75),i=n(405),r=n(406),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};o.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){r(t,i(e))})),t.exports=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(133),a=o(r);i=function(){function t(t,e){var o=!0,i=t.type,r=t.particle_type;if("edit"!==e&&"particle"===i&&"image"!==r&&"separator"!==r){var a=!0;_.each(n,function(e){return e in t&&!_.isEmpty(t[e])?(a=!1,!1):void 0}),o=!a}return o}function e(t){var e=a["default"].getEntity(t);if(e){if(e.instance&&"sheetIndex"in e.instance)return e.instance.sheetIndex;if(e.model&&e.model.isMap())return e.activeSheet||0}return null}var n=["text","title"];return{shouldRenderElement:t,getChartSheet:e}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var o;o=function(t){var e=n(800),o=n(74),i=o.extend({tagName:"div",className:"moveable media image",template:e,render:function(){this.el.id="media_"+this.model.get("id");var t={title:this.model.get("title"),image:this.getImageURL()};return this.$el.html(_.template(this.template)(t)),this.$img=this.$("img"),this.setImageGalleryData(),this},getImageURL:function(){return"flickr"===this.model.get("media_type")?this.model.get("image").replace(/\.jpg$/,"_c.jpg"):this.model.get("image")},setImageGalleryData:function(){"gallery_image"===this.model.get("media_type")&&(this.$el.attr("data-gallery-image-id",this.model.get("gallery_image_id")),this.$img.css("width",this.model.get("image_width")),this.setOriginalDimensions())},setOriginalDimensions:function(){if(this.model.get("original_image_width"))this.$img.data("original",{width:this.model.get("original_image_width"),height:this.model.get("original_image_height")});else{var t=$("<img/>");t.attr("src",this.$img.attr("src")).on("load",function(e){var n={width:e.target.width,height:e.target.height};this.$img.data("original",n),t.remove()}.bind(this))}}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(801),o=n(74),i=o.extend({tagName:"div",className:"moveable media slideshare",template:e,render:function(){this.el.id="media_"+this.model.get("id");var t={title:this.model.get("title"),image:this.model.get("image"),url:this.model.get("url")};return this.$el.attr("data-media-type","slideshare"),this.$el.html(_.template(this.template)(t)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(803),o=n(74),i=o.extend({tagName:"div",className:"moveable media mediavideo",template:e,render:function(){this.el.id="media_"+this.model.get("id");var t=this.model.get("media_type"),e={title:this.model.get("title"),description:this.model.get("description"),media_type:t,image:this.model.get("image"),src:this.videoSrc()};return this.$el.attr("data-media-type",t),this.$el.html(_.template(this.template)(e)),this},videoSrc:function(){var t;switch(this.model.get("media_type")){case"youtube":t="//www.youtube.com/embed/"+this.model.get("url");break;case"vimeo":
t="//player.vimeo.com/video/"+this.model.get("url")}return t}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(810),o=n(74),i=o.extend({tagName:"div",className:"moveable particle video",template:e,render:function(){this.el.id="particle_"+this.model.get("object_id");var t={src:this.model.get("text")};return this.$el.html(_.template(this.template)(t)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";function n(t){return t.replace(o,function(t,e){return e.toUpperCase()})}var o=/-(.)/g;t.exports=n},function(t,e,n){"use strict";function o(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?a(!1):void 0,"number"!=typeof e?a(!1):void 0,0===e||e-1 in t?void 0:a(!1),"function"==typeof t.callee?a(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var o=Array(e),i=0;e>i;i++)o[i]=t[i];return o}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function r(t){return i(t)?Array.isArray(t)?t.slice():o(t):[t]}var a=n(7);t.exports=r},function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e){"use strict";function n(t){return t.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=n},function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e){"use strict";var n=function(){var t=/[&<>"'`]/g,e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return function(n){return null===n?"":String(n).replace(t,function(t){return e[t]})}}(),o={escapeBody:n};t.exports=o},function(t,e,n){t.exports.Dispatcher=n(776)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={UP:38,RIGHT:39,DOWN:40,LEFT:37};e["default"]=n},function(t,e){"use strict";function n(t,e){for(var n=t;n;){if(e(n))return n;n=n.parentNode}return null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=t.getCurrentSelection(),o=t.getCurrentContent(),i=t.getActiveEntities().clear().withMutations(function(t){n.getEntities().map(function(e){var n=o.getEntity(e);if(!n)throw new Error("Entity identified by path "+e+" is not present");t.set(e,n)})}),r={pointerDown:!1,dragging:!1,resizing:!1,activeEntities:i,activeHandle:null};return e&&Object.assign(r,e),a["default"].set(t,r)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47),a=o(r)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t.hasAttribute&&t.hasAttribute("data-key")}function r(t){if(!t)return null;if(!(t instanceof Element))return null;var e=t;return(0,l["default"])(e,i)}function a(t){var e=t.target;if(!(e instanceof Element))return null;if(e=r(e),!e)return null;var n=e.getAttribute("data-key");return n||null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var s=n(564),l=o(s)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,o=t.width,i=t.height,r=t.rotate,a={top:n+"px",left:e+"px",width:o+"px",height:i+"px",transform:"rotate("+r+"deg)"},s=["InfographicEditor-Overlay-Selector"];return this.props.className&&s.push(this.props.className),u["default"].createElement("div",{className:s.join(" "),style:a},this.props.children)}}]),e}(u["default"].Component);c.propTypes={className:u["default"].PropTypes.string,x:u["default"].PropTypes.number.isRequired,y:u["default"].PropTypes.number.isRequired,width:u["default"].PropTypes.number.isRequired,height:u["default"].PropTypes.number.isRequired,rotate:u["default"].PropTypes.number.isRequired,children:u["default"].PropTypes.oneOfType([u["default"].PropTypes.arrayOf(u["default"].PropTypes.node),u["default"].PropTypes.node])},e["default"]=c},function(t,e){"use strict";function n(t,e){for(var n=t;n;){if(n instanceof Element&&n.classList.contains(e))return n;n=n.parentNode}return null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(10),u=n(142),c=o(u),h=n(92),p=o(h),d=n(895),f=o(d),g=n(896),m=o(g),v=n(205),y=o(v),b={entities:(0,l.Map)(),blocks:(0,l.List)()},_=(0,l.Record)(b),x=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"getBlocks",value:function(){return this.get("blocks")}},{key:"getBlock",value:function(t){var e=this.findBlockByKey(t);if(!e)throw new Error("Block with key "+t+" is not present");return e}},{key:"getBlockIndex",value:function(t){var e=this.getBlock(t);return this.getBlocks().indexOf(e)}},{key:"findBlockByKey",value:function(t){var e=this.getBlocks().filter(function(e){return e.getKey()===t});if(e.size>1)throw new Error("More than one block present with key "+t);return e.size?e.get(0):null}},{key:"getEntities",value:function(){return this.get("entities")}},{key:"getEntity",value:function(t){if(!this.containsEntity(t))throw new Error("Cannot find entity "+t);return this.getEntities().get(t)}},{key:"containsEntity",value:function(t){return this.containsEntities(t)}},{key:"containsEntities",value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];if(!e.length)return!1;var o=this.getEntities(),i=!0,r=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!o.has(u))return!1}}catch(c){r=!0,a=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(r)throw a}}return!0}}],[{key:"createFromJSONObject",value:function(t){t=t||{};var n=(0,f["default"])(t.blocks),o=(0,l.Map)().asMutable(),i=(0,l.fromJS)(n.map(function(t){var e=t.key||(0,y["default"])("block"),n=(0,l.List)().asMutable();if(t.entities){var i=(0,m["default"])(t.entities);i.forEach(function(t){var i=p["default"].fromRawEntity(t,e);o.set(i.getKey(),i),n.push(i.getKey())})}return new c["default"]({key:e,entities:n.asImmutable()})}));return new e({blocks:i,entities:o.asImmutable()})}}]),e}(_);e["default"]=x},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(10),l={rotate:null},u=(0,s.Record)(l),c=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"getRotate",value:function(){return this.get("rotate")}}],[{key:"fromRawTransform",value:function(t){var n={},o=t.rotate;return o&&(n.rotate=o),new e(n)}}]),e}(u);e["default"]=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.getCurrentContent(),n=e.getBlocks();t=c["default"].clear(t);for(var o=arguments.length,i=Array(o>1?o-1:0),r=1;o>r;r++)i[r-1]=arguments[r];var s=!0,l=!1,u=void 0;try{for(var h,p=i[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var d=h.value,f=e.getBlock(d.getBlockKey()),g=e.getBlockIndex(d.getBlockKey()),m=f.getEntities().push(d.getKey()),v=e.getEntities().set(d.getKey(),d);f=f.set("entities",m),n=n.set(g,f),e=e.merge({blocks:n,entities:v}),t=a["default"].set(t,{currentContent:e}),t=c["default"].addEntities(t,d.getKey())}}catch(y){l=!0,u=y}finally{try{!s&&p["return"]&&p["return"]()}finally{if(l)throw u}}return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47),a=o(r),s=n(142),l=(o(s),n(92)),u=(o(l),n(172)),c=o(u)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.getCurrentSelection();if(e.isEmpty())return null;var n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=!0,s=!1,l=void 0;try{for(var u,c=e.getEntities()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value,p=t.getEntity(h),d=p.bounds(),f=d.left,g=d.top,m=f+d.width,v=g+d.height;n=Math.min(f,n),o=Math.max(m,o),i=Math.min(g,i),r=Math.max(v,r)}}catch(y){s=!0,l=y}finally{try{!a&&c["return"]&&c["return"]()}finally{if(s)throw l}}return[n,i,o,r]}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47);o(r)},function(t,e,n){"use strict";function o(t,e){var n=[],o=t.map(function(t){return t.getStyle()}).toList();return s(o,i,h,function(t,o){n.push(new f({start:t+e,end:o+e}))}),l(n)}function i(t,e){return t===e}var r=n(10),a=n(71),s=n(411),l=r.List,u=r.Repeat,c=r.Record,h=a.thatReturnsTrue,p="-",d={start:null,end:null},f=c(d),g={start:null,end:null,decoratorKey:null,leaves:null},m=c(g),v={generate:function(t,e){var n=t.getLength();if(!n)return l.of(new m({start:0,end:0,decoratorKey:null,leaves:l.of(new f({start:0,end:0}))}));var r=[],a=e?e.getDecorations(t):l(u(null,n)),c=t.getCharacterList();return s(a,i,h,function(t,e){r.push(new m({start:t,end:e,decoratorKey:a.get(t),leaves:o(c.slice(t,e).toList(),t)}))}),l(r)},getFingerprint:function(t){return t.map(function(t){var e=t.get("decoratorKey"),n=null!==e?e+"."+(t.get("end")-t.get("start")):"";return""+n+"."+t.get("leaves").size}).join(p)}};t.exports=v},function(t,e){"use strict";t.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return t.getAnchorKey()===e||t.getFocusKey()===e}var s=n(32),l=s||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=(n(173),n(912)),c=n(410),h=n(1),p=n(21),d=n(593),f=(n(186),n(468)),g=n(594),m=n(469),v=n(208),y=n(972),b=n(470),_=n(975),x=n(93),w=10,S=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.shouldComponentUpdate=function(t){return this.props.block!==t.block||this.props.tree!==t.tree||this.props.direction!==t.direction||a(t.selection,t.block.getKey())&&t.forceSelection},e.prototype.componentDidMount=function(){var t=this.props.selection,e=t.getEndKey();if(t.getHasFocus()&&e===this.props.block.getKey()){var n,o=p.findDOMNode(this),i=f.getScrollParent(o),r=b(i);if(i===window){var a=y(o),s=a.y+a.height,l=_().height;n=s-l,n>0&&window.scrollTo(r.x,r.y+n+w)}else{var u=o.offsetHeight+o.offsetTop,c=i.offsetHeight+r.y;n=u-c,n>0&&d.setTop(i,d.getTop(i)+n+w)}}},e.prototype._renderChildren=function(){var t=this,e=this.props.block,n=e.getKey(),o=e.getText(),i=this.props.tree.size-1,r=a(this.props.selection,n);return this.props.tree.map(function(a,s){var p=a.get("leaves"),d=p.size-1,f=p.map(function(a,l){var p=c.encode(n,s,l),f=a.get("start"),g=a.get("end");return h.createElement(u,{key:p,offsetKey:p,blockKey:n,start:f,selection:r?t.props.selection:void 0,forceSelection:t.props.forceSelection,text:o.slice(f,g),styleSet:e.getInlineStyleAt(f),customStyleMap:t.props.customStyleMap,customStyleFn:t.props.customStyleFn,isLast:s===i&&l===d})}).toArray(),v=a.get("decoratorKey");if(null==v)return f;if(!t.props.decorator)return f;var y=x(t.props.decorator),b=y.getComponentForKey(v);if(!b)return f;var _=y.getPropsForKey(v),w=c.encode(n,s,0),S=o.slice(p.first().get("start"),p.last().get("end")),C=m.getHTMLDirIfDifferent(g.getDirection(S),t.props.direction);return h.createElement(b,l({},_,{decoratedText:S,dir:C,key:w,entityKey:e.getEntityAt(a.get("start")),offsetKey:w}),f)}).toArray()},e.prototype.render=function(){var t=this.props,e=t.direction,n=t.offsetKey,o=v({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===e,"public/DraftStyleDefault/rtl":"RTL"===e});return h.createElement("div",{"data-offset-key":n,className:o},this._renderChildren())},e}(h.Component);t.exports=S},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(10),s=a.Record,l=s({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.getType=function(){return this.get("type")},e.prototype.getMutability=function(){return this.get("mutability")},e.prototype.getData=function(){return this.get("data")},e}(l);t.exports=u},function(t,e,n){"use strict";function o(t,e){var n=e?h.exec(t):u.exec(t);return n?n[0]:t}var i=n(966),r=i.getPunctuation(),a="['‘’]",s="\\s|(?![_])"+r,l="^(?:"+s+")*(?:"+a+"|(?!"+s+").)*(?:(?!"+s+").)",u=new RegExp(l),c="(?:(?!"+s+").)(?:"+a+"|(?!"+s+").)*(?:"+s+")*$",h=new RegExp(c),p={getBackward:function(t){return o(t,!0)},getForward:function(t){return o(t,!1)}};t.exports=p},function(t,e){"use strict";var n={stringify:function(t){return"_"+String(t)},unstringify:function(t){return t.slice(1)}};t.exports=n},function(t,e,n){"use strict";function o(){return{text:"",inlines:[],entities:[],blocks:[]}}function i(t){var e=new Array(1);return t&&(e[0]=t),{text:D,inlines:[P()],entities:e,blocks:[]}}function r(){return{text:"\n",inlines:[P()],entities:new Array(1),blocks:[]}}function a(t,e){return{text:"\r",inlines:[P()],entities:new Array(1),blocks:[{type:t,depth:Math.max(0,Math.min(A,e))}]}}function s(t,e){return"li"===t?"ol"===e?"ordered-list-item":"unordered-list-item":null}function l(t){var e=t.get("unstyled").element;return t.map(function(t){return t.element}).valueSeq().toSet().filter(function(t){return t&&t!==e}).toArray().sort()}function u(t,e,n){for(var o=0;o<n.length;o++){var i=n[o](t,e);if(i)return i}return null}function c(t,e,n){var o=n.filter(function(e){return e.element===t||e.wrapper===t}).keySeq().toSet().toArray().sort();switch(o.length){case 0:return"unstyled";case 1:return o[0];default:return u(t,e,[s])||"unstyled"}}function h(t,e,n){var o=V[t];return o?n=n.add(o).toOrderedSet():e instanceof HTMLElement&&!function(){var t=e;n=n.withMutations(function(e){var n=t.style.fontWeight,o=t.style.fontStyle,i=t.style.textDecoration;F.indexOf(n)>=0?e.add("BOLD"):z.indexOf(n)>=0&&e.remove("BOLD"),"italic"===o?e.add("ITALIC"):"normal"===o&&e.remove("ITALIC"),"underline"===i&&e.add("UNDERLINE"),"line-through"===i&&e.add("STRIKETHROUGH"),"none"===i&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}).toOrderedSet()}(),n}function p(t,e){var n=t.text.slice(-1),o=e.text.slice(0,1);if("\r"===n&&"\r"===o&&(t.text=t.text.slice(0,-1),t.inlines.pop(),t.entities.pop(),t.blocks.pop()),"\r"===n){if(e.text===D||"\n"===e.text)return t;o!==D&&"\n"!==o||(e.text=e.text.slice(1),e.inlines.shift(),e.entities.shift())}return{text:t.text+e.text,inlines:t.inlines.concat(e.inlines),entities:t.entities.concat(e.entities),blocks:t.blocks.concat(e.blocks)}}function d(t,e){return e.some(function(e){return-1!==t.indexOf("<"+e)})}function f(t){t instanceof HTMLAnchorElement?void 0:k(!1);var e=t.protocol;return"http:"===e||"https:"===e||"mailto:"===e}function g(t,e,n,s,l,u,d,m){var v=t.nodeName.toLowerCase(),b=!1,_="unstyled",x=y;if("#text"===v){var S=t.textContent;return""===S.trim()&&"pre"!==s?i(m):("pre"!==s&&(S=S.replace(B,D)),y=v,{text:S,inlines:Array(S.length).fill(e),entities:Array(S.length).fill(m),blocks:[]})}if(y=v,"br"===v)return"br"!==x||s&&"unstyled"!==c(s,n,d)?r():a("unstyled",u);var E=o(),T=null;e=h(v,t,e),"ul"!==v&&"ol"!==v||(n&&(u+=1),n=v),s||-1===l.indexOf(v)?n&&"li"===s&&"li"===v&&(E=a(c(v,n,d),u),s=v,b=!0,_="ul"===n?"unordered-list-item":"ordered-list-item"):(E=a(c(v,n,d),u),s=v,b=!0);var k=t.firstChild;null!=k&&(v=k.nodeName.toLowerCase());for(var M=null;k;){k instanceof HTMLAnchorElement&&k.href&&f(k)?!function(){var t=k,e={};U.forEach(function(n){var o=t.getAttribute(n);o&&(e[n]=o)}),e.url=new C(t.href).toString(),M=w.create("LINK","MUTABLE",e)}():M=void 0,T=g(k,e,n,s,l,u,d,M||m),E=p(E,T);var O=k.nextSibling;O&&l.indexOf(v)>=0&&s&&(E=p(E,r())),O&&(v=O.nodeName.toLowerCase()),k=O}return b&&(E=p(E,a(_,u))),E}function m(t,e,n){t=t.trim().replace(N,"").replace(j,D).replace(R,"").replace(H,"");var o=l(n),i=e(t);if(!i)return null;y=null;var r=d(t,o)?o:["div"],a=g(i,P(),"ul",null,r,-1,n);return 0===a.text.indexOf("\r")&&(a={text:a.text.slice(1),inlines:a.inlines.slice(1),entities:a.entities.slice(1),blocks:a.blocks}),"\r"===a.text.slice(-1)&&(a.text=a.text.slice(0,-1),a.inlines=a.inlines.slice(0,-1),a.entities=a.entities.slice(0,-1),a.blocks.pop()),0===a.blocks.length&&a.blocks.push({type:"unstyled",depth:0}),a.text.split("\r").length===a.blocks.length+1&&a.blocks.unshift({type:"unstyled",depth:0}),a}function v(t){var e=arguments.length<=1||void 0===arguments[1]?T:arguments[1],n=arguments.length<=2||void 0===arguments[2]?x:arguments[2],o=m(t,e,n);if(null==o)return null;var i=0;return o.text.split("\r").map(function(t,e){t=O(t);var n=i+t.length,r=M(o).inlines.slice(i,n),a=M(o).entities.slice(i,n),s=I(r.map(function(t,e){var n={style:t,entity:null};return a[e]&&(n.entity=a[e]),b.create(n)}));return i=n+1,new _({key:E(),type:M(o).blocks[e].type,depth:M(o).blocks[e].depth,text:t,characterList:s})})}var y,b=n(97),_=n(173),x=n(461),w=n(129),S=n(10),C=n(967),E=n(124),T=n(584),k=n(7),M=n(93),O=n(466),I=S.List,P=S.OrderedSet,L="&nbsp;",D=" ",A=4,N=new RegExp("\r","g"),B=new RegExp("\n","g"),j=new RegExp(L,"g"),R=new RegExp("&#13;?","g"),H=new RegExp("&#8203;?","g"),F=["bold","bolder","500","600","700","800","900"],z=["light","lighter","100","200","300","400"],V={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},U=["className","href","rel","target","title"];t.exports=v},function(t,e,n){"use strict";function o(t){return h&&t.altKey||g(t)}function i(t){return f(t)?t.shiftKey?"redo":"undo":null}function r(t){return p&&t.shiftKey?null:o(t)?"delete-word":"delete"}function a(t){return f(t)&&h?"backspace-to-start-of-line":o(t)?"backspace-word":"backspace"}function s(t){switch(t.keyCode){case 66:return f(t)?"bold":null;case 68:return g(t)?"delete":null;case 72:return g(t)?"backspace":null;case 73:return f(t)?"italic":null;case 74:return f(t)?"code":null;case 75:return!p&&g(t)?"secondary-cut":null;case 77:return g(t)?"split-block":null;case 79:return g(t)?"split-block":null;case 84:return h&&g(t)?"transpose-characters":null;case 85:return f(t)?"underline":null;case 87:return h&&g(t)?"backspace-word":null;case 89:return g(t)?p?"redo":"secondary-paste":null;case 90:return i(t)||null;case u.RETURN:return"split-block";case u.DELETE:return r(t);case u.BACKSPACE:return a(t);case u.LEFT:return d&&f(t)?"move-selection-to-start-of-block":null;case u.RIGHT:return d&&f(t)?"move-selection-to-end-of-block":null;default:return null}}var l=n(462),u=n(467),c=n(125),h=c.isPlatform("Mac OS X"),p=c.isPlatform("Windows"),d=h&&c.isBrowser("Firefox < 29"),f=l.hasCommandModifier,g=l.isCtrlKeyCommand;t.exports=s},function(t,e,n){"use strict";function o(t,e,n,o,i,r){var s=n.nodeType===Node.TEXT_NODE,u=i.nodeType===Node.TEXT_NODE;if(s&&u)return{selectionState:c(t,p(l(n)),o,p(l(i)),r),needsRecovery:!1};var h=null,d=null,f=!0;return s?(h={key:p(l(n)),offset:o},d=a(e,i,r)):u?(d={key:p(l(i)),offset:r},h=a(e,n,o)):(h=a(e,n,o),d=a(e,i,r),n===i&&o===r&&(f=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:c(t,h.key,h.offset,d.key,d.offset),needsRecovery:f}}function i(t){for(;t.firstChild&&u(t.firstChild);)t=t.firstChild;return t}function r(t){for(;t.lastChild&&u(t.lastChild);)t=t.lastChild;return t}function a(t,e,n){var o=e,a=l(o);if(null!=a||t&&(t===o||t.firstChild===o)?void 0:h(!1),t===o&&(o=o.firstChild,o instanceof Element&&"true"===o.getAttribute("data-contents")?void 0:h(!1),n>0&&(n=o.childNodes.length)),0===n){var c=null;if(null!=a)c=a;else{var d=i(o);c=p(u(d))}return{key:c,offset:0}}var f=o.childNodes[n-1],g=null,m=null;if(u(f)){var v=r(f);g=p(u(v)),m=s(v)}else g=p(a),m=s(f);return{key:g,offset:m}}function s(t){var e=t.textContent;return"\n"===e?0:e.length}var l=n(463),u=n(585),c=n(587),h=n(7),p=n(93);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.getSelection();return e.isCollapsed()?null:i(t.getCurrentContent(),e)}var i=n(412);t.exports=o},function(t,e,n){"use strict";function o(t){for(var e=t.cloneRange(),n=[],o=t.endContainer;null!=o;o=o.parentNode){var i=o===t.commonAncestorContainer;i?e.setStart(t.startContainer,t.startOffset):e.setStart(e.endContainer,0);var a=Array.from(e.getClientRects());if(n.push(a),i){var s;return n.reverse(),(s=[]).concat.apply(s,n)}e.setEndBefore(o)}r(!1)}var i=n(125),r=n(7),a=i.isBrowser("Chrome"),s=a?o:function(t){return Array.from(t.getClientRects())};t.exports=s},function(t,e,n){"use strict";function o(t){var e,n=null;return!r&&document.implementation&&document.implementation.createHTMLDocument&&(e=document.implementation.createHTMLDocument("foo"),e.documentElement.innerHTML=t,n=e.getElementsByTagName("body")[0]),n}var i=n(125),r=i.isBrowser("IE <= 9");t.exports=o},function(t,e){"use strict";function n(t){if(t instanceof Element){var e=t.getAttribute("data-offset-key");if(e)return e;for(var o=0;o<t.childNodes.length;o++){var i=n(t.childNodes[o]);if(i)return i}}return null}t.exports=n},function(t,e,n){"use strict";(function(e){function n(t,e){var n=0,i=[];t.forEach(function(r){o(r,function(o){n++,o&&i.push(o.slice(0,a)),n==t.length&&e(i.join("\r"))})})}function o(t,n){if(!e.FileReader||t.type&&!(t.type in r))return void n("");if(""===t.type){var o="";return i.test(t.name)&&(o=t.name.replace(i,"")),void n(o)}var a=new FileReader;a.onload=function(){n(a.result)},a.onerror=function(){n("")},a.readAsText(t)}var i=/\.textClipping$/,r={"text/plain":!0,"text/html":!0,"text/rtf":!0},a=5e3;t.exports=n}).call(e,n(72))},function(t,e,n){"use strict";function o(t,e,n,o,a){var s=r(t.getSelection()),l=i.decode(e),u=l.blockKey,c=t.getBlockTree(u).getIn([l.decoratorKey,"leaves",l.leafKey]),h=i.decode(o),p=h.blockKey,d=t.getBlockTree(p).getIn([h.decoratorKey,"leaves",h.leafKey]),f=c.get("start"),g=d.get("start"),m=c?f+n:null,v=d?g+a:null,y=s.getAnchorKey()===u&&s.getAnchorOffset()===m&&s.getFocusKey()===p&&s.getFocusOffset()===v;if(y)return s;var b=!1;if(u===p){var _=c.get("end"),x=d.get("end");b=g===f&&x===_?n>a:f>g}else{var w=t.getCurrentContent().getBlockMap().keySeq().skipUntil(function(t){return t===u||t===p}).first();b=w===p}return s.merge({anchorKey:u,anchorOffset:m,focusKey:p,focusOffset:v,isBackward:b})}var i=n(410),r=n(93);t.exports=o},function(t,e){"use strict";function n(t,e,n){if(n===t.count())e.forEach(function(e){t=t.push(e)});else if(0===n)e.reverse().forEach(function(e){t=t.unshift(e)});else{var o=t.slice(0,n),i=t.slice(n);t=o.concat(e,i).toList()}return t}t.exports=n},function(t,e){"use strict";function n(t){var e=t.getSelection(),n=e.getAnchorKey(),o=t.getBlockTree(n),i=e.getStartOffset(),r=!1;return o.some(function(t){return i===t.get("start")?(r=!0,!0):i<t.get("end")?t.get("leaves").some(function(t){var e=t.get("start");return i===e?(r=!0,!0):!1}):!1}),r}t.exports=n},function(t,e){"use strict";function n(t,e){var n,o=t.getSelection(),i=o.getStartKey(),r=o.getStartOffset(),a=t.getCurrentContent(),s=i,l=a.getBlockForKey(i);return e>l.getText().length-r?(s=a.getKeyAfter(i),n=0):n=r+e,o.merge({focusKey:s,focusOffset:n})}t.exports=n},function(t,e,n){"use strict";function o(t,e){var n=t.getBlockMap(),o={},i=e.getStartKey(),a=e.getStartOffset(),s=n.get(i),l=r(s,a);l!==s&&(o[i]=l);var u=e.getEndKey(),c=e.getEndOffset(),h=n.get(u);i===u&&(h=l);var p=r(h,c);return p!==h&&(o[u]=p),Object.keys(o).length?t.merge({blockMap:n.merge(o),selectionAfter:e}):t.set("selectionAfter",e)}function i(t,e,n){var o;return l(t,function(t,e){return t.getEntity()===e.getEntity()},function(t){return t.getEntity()===e},function(t,e){n>=t&&e>=n&&(o={start:t,end:e})}),"object"!=typeof o?u(!1):void 0,o}function r(t,e){var n=t.getCharacterList(),o=e>0?n.get(e-1):void 0,r=e<n.count()?n.get(e):void 0,l=o?o.getEntity():void 0,u=r?r.getEntity():void 0;if(u&&u===l){var c=s.get(u);if("MUTABLE"!==c.getMutability()){for(var h,p=i(n,u,e),d=p.start,f=p.end;f>d;)h=n.get(d),n=n.set(d,a.applyEntity(h,null)),d++;return t.set("characterList",n)}}return t}var a=n(97),s=n(129),l=n(411),u=n(7);t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"file"==t.kind?t.getAsFile():void 0}var r=n(965),a=n(557),s=n(71),l=new RegExp("\r\n","g"),u="\n",c={"text/rtf":1,"text/html":1},h=function(){function t(e){o(this,t),this.data=e,this.types=e.types?a(e.types):[]}return t.prototype.isRichText=function(){return this.getHTML()&&this.getText()?!0:this.isImage()?!1:this.types.some(function(t){return c[t]})},t.prototype.getText=function(){var t;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(t=this.data.getData("text/plain")):t=this.data.getData("Text")),t?t.replace(l,u):null},t.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},t.prototype.isLink=function(){return this.types.some(function(t){return-1!=t.indexOf("Url")||-1!=t.indexOf("text/uri-list")||t.indexOf("text/x-moz-url")})},t.prototype.getLink=function(){if(this.data.getData){if(-1!=this.types.indexOf("text/x-moz-url")){var t=this.data.getData("text/x-moz-url").split("\n");return t[0]}return-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url")}return null},t.prototype.isImage=function e(){var e=this.types.some(function(t){return-1!=t.indexOf("application/x-moz-file")});if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var o=t[n].type;if(!r.isImage(o))return!1}return!0},t.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},t.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(i).filter(s.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},t.prototype.hasFiles=function(){return this.getFiles().length>0},t}();t.exports=h},function(t,e){"use strict";function n(t,e){return!!e&&(t===e.documentElement||t===e.body)}var o={getTop:function(t){var e=t.ownerDocument;return n(t,e)?e.body.scrollTop||e.documentElement.scrollTop:t.scrollTop},setTop:function(t,e){var o=t.ownerDocument;n(t,o)?o.body.scrollTop=o.documentElement.scrollTop=e:t.scrollTop=e},getLeft:function(t){var e=t.ownerDocument;return n(t,e)?e.body.scrollLeft||e.documentElement.scrollLeft:t.scrollLeft},setLeft:function(t,e){var o=t.ownerDocument;n(t,o)?o.body.scrollLeft=o.documentElement.scrollLeft=e:t.scrollLeft=e}};t.exports=o},function(t,e,n){"use strict";function o(t){var e=p.exec(t);return null==e?null:e[0]}function i(t){var e=o(t);return null==e?u.NEUTRAL:d.exec(e)?u.RTL:u.LTR}function r(t,e){if(e=e||u.NEUTRAL,!t.length)return e;var n=i(t);return n===u.NEUTRAL?e:n}function a(t,e){return e||(e=u.getGlobalDir()),u.isStrong(e)?void 0:c(!1),r(t,e)}function s(t,e){return a(t,e)===u.LTR}function l(t,e){return a(t,e)===u.RTL}var u=n(469),c=n(7),h={L:"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",
R:"֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",AL:"؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾"},p=new RegExp("["+h.L+h.R+h.AL+"]"),d=new RegExp("["+h.R+h.AL+"]"),f={firstStrongChar:o,firstStrongCharDir:i,resolveBlockDir:r,getDirection:a,isDirectionLTR:s,isDirectionRTL:l};t.exports=f},function(t,e){"use strict";function n(){return{getCenter:function(t){var e=[0,0],n=0;return t.forEach(function(t){t.forEach(function(t){t[0].constructor===Array?t.forEach(function(t){e[0]+=t[1],e[1]+=t[0],n++}):(e[0]+=t[1],e[1]+=t[0],n++)})}),Math.round(1e3*e[0]/n)/1e3+" "+Math.round(1e3*e[1]/n)/1e3},populateMapWithData:function(t,e){var n=["Group A","Group B","Group C","Group D"],o=[[]],i=!0,r=!1,a=void 0;try{for(var s,l=t.features[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!u.properties.disabled){var c=u.properties.continent||n[Math.round(3*Math.random())],h=u.geometry.center?u.geometry.center.join(" "):this.getCenter(u.geometry.coordinates);o[0].push([u.properties.name,Math.round(10*Math.random()),c,h,u.properties.local||u.properties.name])}}}catch(p){r=!0,a=p}finally{try{!i&&l["return"]&&l["return"]()}finally{if(r)throw a}}var d={map:e,heatmap:!0,autoZoom:t.autoZoom||!1,pointSizemin:5,pointSizemax:30,osm:t.osm||!1};return{data:o,custom:d}}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],o=new O["default"],i=(0,P["default"])(),r=0,a=0,s=e.offset,l=e.blockIndex,u=e.custom;u=u||{},l=l||0,s&&(a=s.x-V/2,r=s.y-V/2),fetch("/js/common/maps/"+t+".json").then(function(t){if(200!==t.status)throw new Error("Could not load map");return t.json()}).then(function(e){var s=i.populateMapWithData(e,t);s.custom||(s.custom={}),Object.assign(s.custom,u),o.add(9,2,s.data,s.custom).then(function(){var t={type:"MAP",top:r,left:a,width:z,height:V,props:{chartId:o.get("chart_id")}};if(n){var e=B.InfographicEditorCommands.addEntity(D["default"].getState(),t,{blockIndex:l});d(o.get("chart_id"),o.attributes),f(e)}})})["catch"](function(){return k["default"].dispatch({type:H["default"]}),window.app.message.error(i18n.t("app.errors.map_not_found"))})}function a(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=new O["default"],i=0,r=0,a=n.offset,s=n.blockIndex;s=s||0,a&&(r=a.x-V/2,i=a.y-V/2),o.add(t,e).then(function(){var t={type:"CHART",top:i,left:r,width:z,height:V,props:{chartId:o.get("chart_id")}},e=B.InfographicEditorCommands.addEntity(D["default"].getState(),t,{blockIndex:s});d(o.get("chart_id"),o.attributes),f(e)})}function s(t,e){var n=t.getProperty("chartId"),o=N["default"].getEntity(n),i=t.getBlockKey(),r=D["default"].getState().getCurrentContent().getBlockIndex(i);if(!o)throw new Error("Chart entity not found"+n);var a=o.chart?o.chart.clone():o.model.clone(),s=a.get("custom"),l="CHART";s.map_json&&(delete s.map_json,a.set("custom",s),l="MAP"),a.unset("chart_id"),a.set("mod",a.get("modifier")),a.set("ID1",e),a.save(null,{success:function(){var e={type:l,top:0,left:0,width:t.getWidth(),height:t.getHeight(),props:{chartId:a.get("chart_id")}},n=B.InfographicEditorCommands.addEntity(D["default"].getState(),e,{blockIndex:r});d(a.get("chart_id"),a.attributes),f(n)},error:function(t,e){k["default"].dispatch({type:"show-message",messageType:"error",body:e.responseText||i18n.t("errors.internal_server_error")})}})}function l(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=void 0;switch(t){case"maintitle":o="h1";break;case"bodytitle":o="h2";break;case"bodytext":o="p"}var i=e||"Testing Free Layout";o&&(i="<"+o+">"+i+"</"+o+">");var r=(0,F.convertToRaw)(F.ContentState.createFromBlockArray((0,F.convertFromHTML)(i))),a=n.offset,s=0,l=0;a&&(s=Math.round(a.x-W/2),l=Math.round(a.y-G/2));var u=B.InfographicEditorCommands.addEntity(D["default"].getState(),{type:"TEXT",left:s,top:l,width:W,height:G,props:{content:r}},{blockIndex:n.blockIndex||0});f(u)}function u(t,e){if(!(t in $))throw new Error("Unrecognized shape type: "+t);var n=$[t],o=n.width,i=n.height,r=0,a=0,s=e.offset;s&&(r=Math.round(s.x-o/2),a=Math.round(s.y-i/2));var l=D["default"].getState();l=B.InfographicEditorCommands.addEntity(l,_.merge(n,{type:"SHAPE",left:r,top:a}),{blockIndex:e.blockIndex||0}),f(l)}function c(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];E(!0),C(e).then(function(o){E(!1);var i=o.width,r=o.height,a=i/r,s=U,l=Math.round(s/a),u=0,c=0,h=n.offset;h&&(u=Math.round(h.x-s/2),c=Math.round(h.y-l/2));var p=B.InfographicEditorCommands.addEntity(D["default"].getState(),{type:"IMAGE",left:u,top:c,width:s,height:l,props:{id:t,url:e}},{blockIndex:n.blockIndex||0});f(p)})["catch"](function(){E(!1),alert("Could not load image")})}function h(t,e,n){var o=D["default"].getState();o=B.EditorState.setEntity(o,t,{props:i({},e,n)}),f(o)}function p(t){k["default"].dispatch({type:j.EDITOR_SET_ALL_EXTERNAL_DATA,data:t})}function d(t,e){k["default"].dispatch({type:j.EDITOR_SET_CHART_EXTERNAL_DATA,id:t,data:e})}function f(t){k["default"].dispatch({type:j.EDITOR_STATE_CHANGE,editorState:t})}function g(t,e,n,o){var i=o.lockAspectRatio,r=o.aspectRatio,a=!1,s=!1,l=!1,u=void 0;"rotate"===e&&(n=n.replace(/°/g,"")),n?(u=parseFloat(n),l=!isNaN(u),"rotate"!==e&&(l=(""+u).length===n.length),l&&("width"===e||"height"===e)&&50>u&&(l=!1,s=!0)):a=!0,k["default"].dispatch({type:j.EDITOR_CHANGE_ENTITY_PROPERTY,name:e,value:n,parsedValue:u,valid:l,valueTooSmall:s,valueEmpty:a,lockAspectRatio:i,aspectRatio:r,currentProps:t})}function m(t){k["default"].dispatch({type:j.EDITOR_SET_LOCK_ASPECT_RATIO,lock:!!t})}function v(t){k["default"].dispatch({type:j.EDITOR_ZOOM,direction:t})}function y(t){k["default"].dispatch({type:j.EDITOR_SCALE,scale:t})}function b(t){var e=D["default"].getState();f(B.InfographicEditorCommands.insertBlock(e,{blockIndex:t}))}function x(t){var e=D["default"].getState(),n=e.getEntity(t);if("TEXT"!==n.getType())throw new Error("Current entity is not a TEXT entity");k["default"].dispatch({type:j.EDITOR_RTE_ACTIVATE,entityKey:t,content:n.getProperty("content").toJS()})}function w(){k["default"].dispatch({type:j.EDITOR_RTE_DEACTIVATE})}function S(t,e){k["default"].dispatch({type:j.EDITOR_RTE_UPDATE,entityKey:t,editorState:e})}function C(t){return new Promise(function(e,n){var o=new Image;o.onload=function(){e(o)},o.onerror=n,o.src=t})}function E(t){k["default"].dispatch({type:j.EDITOR_ACTION_LOADING,value:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.addMap=r,e.addChart=a,e.duplicateChart=s,e.addText=l,e.addShape=u,e.addImage=c,e.setEntityProperty=h,e.updateExternalData=p,e.updateExternalChartData=d,e.updateEditorState=f,e.updateEntitySizeProperties=g,e.setLockResizeAspectRatio=m,e.zoom=v,e.scale=y,e.insertPage=b,e.beginEditingText=x,e.endEditingText=w,e.updateEditorText=S;var T=n(37),k=o(T),M=n(191),O=o(M),I=n(595),P=o(I),L=n(872),D=o(L),A=n(133),N=o(A),B=n(480),j=n(478),R=n(94),H=o(R),F=n(456),z=510,V=400,U=300,W=300,G=100,$={line:{width:200,height:0,props:{type:"line",x1:0,y1:0,x2:200,y2:0,strokeWidth:2,stroke:"#FF0000"}},rectangle:{width:200,height:200,props:{type:"rectangle",stroke:"#FF0000",strokeWidth:2,fill:"#2d2d2d"}},ellipse:{width:200,height:200,props:{type:"ellipse",stroke:"#FF0000",strokeWidth:2,fill:"#2d2d2d"}}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t&&isNaN(t)||null===t||"undefined"==typeof t||""===t}function a(t,e){return arguments.length<2&&(e=""),r(t)?e:t}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(423),u=o(l),c=n(672),h=o(c),p=n(16),d=o(p),f=function(){function t(e){i(this,t),this.emptySheet=e.chart.emptySheetData(),this.options=e.chart.options,this.transpose=e.transpose,this.decimalSeparators=[].concat(e.decimalSeparator)}return s(t,[{key:"createNumberParser",value:function(t){var e=this.decimalSeparators,n=e[t]||e[0]||".",o=".,"===n?"legacy":"firstNumber";return new u["default"](o,n)}},{key:"findImportFn",value:function(e){for(var n in t.IMPORT_TYPES){var o=t.IMPORT_TYPES[n];if(-1!==o.types.indexOf(e))return this.transpose&&o.fnTranspose?o.fnTranspose:o.fn}}},{key:"import",value:function(t){if(t&&0!==t.length){var e=this.findImportFn(this.options.type);e&&(this.options.sheets=[],e.call(this,t))}}},{key:"singleSheetItem",value:function(t,e){var n=this.emptySheet,o=t.length,i=this.createNumberParser(e+1);if(0!==o){var r=d["default"].merge({},n),s=r.series[0],l=r.categories.data=[];r.categories.title=d["default"].escape(""+a(t[0][1])),s.data=[],s.rawData=[];for(var u=1;o>u;u++){var c=t[u],h=c.length;0!==h&&(l.push(""+a(c[0])),s.data.push(Number(i(c[1]))),s.rawData.push(c[1]))}this.isSeriesDataValid(s.data)&&this.options.sheets.push(r)}}},{key:"singleSheetItemTranspose",value:function(t,e){var n=this.emptySheet,o=t.length,i=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),r=this.createNumberParser(e+1);if(!(2>o)){var s=d["default"].merge({},n),l=s.series[0],u=t[0].map(function(t){return a(t,"")});s.categories.data=u.slice(1),s.categories.title=d["default"].escape(""+a(u[0])),l.data=[],l.rawData=[];for(var c=1;2>c;c++){var h=t[c];if(0!==h.length)for(var p=1;i>p;p++){var f=h[p];l.data.push(Number(r(f))),l.rawData.push(f)}}this.isSeriesDataValid(l.data)&&this.options.sheets.push(s)}}},{key:"singleSheetItemOnly",value:function(t){for(var e=this,n=this.options,o=[],i=[],r=t[0]||[],s=t.length,l=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),u=[],c=1;s>c;c++){var h=t[c];if(0!==h.length){o.push(""+a(h[0]));for(var p=1;l>p;p++){var f=p-1,g=h[p],m=u[f],v=i[f];v||(v=i[f]=d["default"].merge({},this.emptySheet),v.categories.data=[],v.categories.title=d["default"].escape(""+a(r[p])),v.series[0].data=[],v.series[0].rawData=[],m=u[f]=this.createNumberParser(p)),v.series[0].data.push(Number(m(g))),v.series[0].rawData.push(g)}}}i.forEach(function(t){t.categories.data=o.slice(0)}),n.sheets=i.filter(function(t){return e.isSeriesDataValid(t.series[0].data)})}},{key:"singleSheetItemOnlyTranspose",value:function(t){for(var e=this,n=this.options,o=t[0]&&t[0].map(function(t){return a(t,"")})||[],i=o.slice(1),r=[],s=t.length,l=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),u=[],c=1;s>c;c++){var h=c-1,p=t[c],f=u[h],g=r[h];if(0!==p.length){g||(g=r[h]=d["default"].merge({},this.emptySheet),g.categories.data=i,g.categories.title=d["default"].escape(""+a(p[0])),g.series[0].data=[],g.series[0].rawData=[],f=u[h]=this.createNumberParser(c));for(var m=1;l>m;m++){var v=p[m];g.series[0].data.push(Number(f(v))),g.series[0].rawData.push(v)}}}n.sheets=r.filter(function(t){return e.isSeriesDataValid(t.series[0].data)})}},{key:"multiSheetItemTranspose",value:function(t,e){var n=this.options,o=this.emptySheet,i=d["default"].merge({},o),r=i.series.pop(),s=t.length,l=n.sheetnames&&n.sheetnames[e],u=this.createNumberParser(e+1),c=0;if(0===s)return void n.sheets.push(d["default"].merge(i,{categories:{title:"",data:[]},series:[d["default"].merge(r,{data:[],rawData:[]})]}));var h=t[0].map(function(t){return a(t,"")});i.categories.title=d["default"].escape(""+a(l||h[0])),i.categories.data=h.slice(1);for(var p=1;s>p;p++){var f=t[p],g=f.length;if(g){var m=d["default"].merge({},r,{title:""+a(f[0]),data:[],rawData:[]});c=Math.max(c,g-1);for(var v=1;g>v;v++)m.data.push(Number(u(f[v]))),m.rawData.push(f[v]);this.isSeriesDataValid(m.data)&&i.series.push(m)}}for(var y=0;c>y;y++)i.categories.data[y]=a(i.categories.data[y]);n.sheets.push(i)}},{key:"multiSheetItem",value:function(t,e){function n(t){t.forEach(function(e,n){t[n]=e-1})}function o(t){t.length&&(s.series.splice(t[0],1),t.shift(),n(t),o(t))}var i=this,r=this.options,s=d["default"].merge({},this.emptySheet),l=s.series.pop(),u=t.length,c=[],h=r.sheetnames&&r.sheetnames[e],p=this.createNumberParser(e+1);if(0===u)return void r.sheets.push(d["default"].merge(s,{categories:{title:"",data:[]},series:[d["default"].merge(l,{data:[],rawData:[]})]}));var f=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),g=t[0].map(function(t){return a(t,"")}),m=g.slice(1),v=function(t,e){var n=void 0;n=s.series[t]?s.series[t]:s.series[t]=d["default"].merge({},l,{title:""+a(m[t]),data:[],rawData:[]}),n.data.push(Number(p(e))),n.rawData.push(e)};s.categories.title=d["default"].escape(""+a(h||g[0])),s.categories.data=[];for(var y=1;u>y;y++){var b=t[y],_=a(b[0],""),x=b.length;if(x){s.categories.data.push(_);for(var w=1;f>w;w++)v(w-1,b[w])}}s.series.forEach(function(t,e){i.isSeriesDataValid(t.data)||c.push(e)}),o(c),r.sheets.push(s)}},{key:"doubleAxisSheetItem",value:function(t,e){var n=d["default"].merge({},this.emptySheet),o=this.options.sheetnames&&this.options.sheetnames[e],i=this.createNumberParser(e+1);n.series[0].data||(n.series[0].data=[]),n.series[0].rawData||(n.series[0].rawData=[]),n.series[1].data||(n.series[1].data=[]),n.series[1].rawData||(n.series[1].rawData=[]),n.categories.data||(n.categories.data=[]),t.forEach(function(t,e){if(0===e)n.categories.title=d["default"].escape(o||t[0]),n.axis[0].title=t[1],n.axis[1].title=t[2],n.axis[0].ticks=n.axis[1].ticks=!0;else{var a=t[0];if(r(a))return;n.categories.data.push(""+a),n.series[0].data.push(Number(i(t[1]))),n.series[0].rawData.push(t[1]),n.series[1].data.push(Number(i(t[2]))),n.series[1].rawData.push(t[2])}}),this.options.sheets.push(n)}},{key:"doubleAxisSheetItemTranspose",value:function(t,e){var n=d["default"].merge({},this.emptySheet),o=t[0]&&t[0].map(function(t){return a(t,"")})||[],i=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),r=this.options.sheetnames&&this.options.sheetnames[e],s=this.createNumberParser(e+1);n.series[0].data||(n.series[0].data=[]),n.series[0].rawData||(n.series[0].rawData=[]),n.series[1].data||(n.series[1].data=[]),n.series[1].rawData||(n.series[1].rawData=[]),n.categories.data||(n.categories.data=[]),n.categories.data=o.slice(1),n.categories.title=d["default"].escape(r||o[0]),n.axis[0].ticks=n.axis[1].ticks=!0;for(var l=0;2>l;l++){var u=t[l+1];n.axis[l].title=u[0];for(var c=1;i>c;c++){var h=u[c];n.series[l].data.push(Number(s(h))),n.series[l].rawData.push(h)}}this.options.sheets.push(n)}},{key:"scatterSheetItem",value:function(t,e){var n=d["default"].merge({},this.emptySheet),o=d["default"].merge({},n.series[0]),i=t[0]||[],r=this.options.sheetnames&&this.options.sheetnames[e],a=this.createNumberParser(e+1);n.series=[],n.categories.data||(n.categories.data=[]);var s=(0,h["default"])(n,o);i&&(n.categories.title=d["default"].escape(r||i[0]),n.categories.valueLabel=i[3],n.axis[0].valueLabel=i[1],n.axis[1].valueLabel=i[2]),t.forEach(function(t,e){if(0!==e){var n=t[4]?4:0,o=4===n?0:4,i=t[n],r=t[o],l=t[1],u=t[2],c=t[3],h=s.addCategory(i),p=s.addSeries(h),d=[Number(a(l)),Number(a(u))],f=[l,u];void 0!==c&&null!==c&&(f[2]=c,d[2]=Number(a(c))),void 0!==r&&null!==r&&(f[3]=r),p.data.push(d),p.rawData.push(f)}}),this.options.sheets.push(n)}},{key:"scatterSheetItemTranspose",value:function(t,e){var n=d["default"].merge({},this.emptySheet),o=d["default"].merge({},n.series[0]),i=d["default"].reduce(t,function(t,e){return Math.max(t,e.length)},0),r=t[0]&&t[0].map(function(t){return a(t,"")})||[],s=(0,h["default"])(n,o),l=t[0],u=t[1],c=t[2],p=t[3],f=t[4],g=this.options.sheetnames&&this.options.sheetnames[e],m=this.createNumberParser(e+1);n.series=[],n.categories.data||(n.categories.data=[]),n.categories.title=d["default"].escape(g||r[0]),n.categories.valueLabel=t[3]&&t[3][0]||"",n.axis[0].valueLabel=t[1]&&t[1][0]||"",n.axis[1].valueLabel=t[2]&&t[2][0]||"";for(var v=1;i>v;v++){var y=f?f:l,b=f?l:f,_=y[v],x=b&&b[v],w=u[v],S=c[v],C=p&&p[v],E=s.addCategory(_),T=s.addSeries(E),k=[Number(m(w)),Number(m(S))],M=[w,S];void 0!==C&&null!==C&&(M[2]=C,k[2]=Number(m(C))),void 0!==x&&null!==x&&(M[3]=x),T.data.push(k),T.rawData.push(M)}this.options.sheets.push(n)}},{key:"timerSheetItem",value:function(t){var e=t[0],n=!e[14]||"1"===e[14],o=this.options.sheets.push({value:new Date([e[2],e[3],e[1]].join("/")+" "+e.slice(4,7).join(":")),valueString:e[0],units:e.slice(8,14),mode:e[7],categories:{colors:this.options.colors,title:n?e[0]:!1}});this.options.sheets[o-1].id=o.toString()}},{key:"sheetIterator",value:function(t,e){t.forEach(e,this)}},{key:"isSeriesDataValid",value:function(t){var e=t.length,n=0;if(0===e)return!1;for(var o=0;e>o;o++)isNaN(t[o])&&n++;return n!==e}}]),t}();f.IMPORT_TYPES={singleSheet:{types:["bar","column","pie","semi-pie","pictorial-grid","pictorial-bar","treemap","wordcloud","pyramid"],fn:function(t){t.length>1?this.sheetIterator(t,function(t,e){this.singleSheetItem(t,e)}):this.singleSheetItemOnly(t[0])},fnTranspose:function(t){t.length>1?this.sheetIterator(t,function(t,e){this.singleSheetItemTranspose(t,e)}):this.singleSheetItemOnlyTranspose(t[0])}},multiSheet:{types:["line","dot-plot","area","area-stacked","area-stepped","stream-graph","column-grouped","column-stacked","bar-grouped","bar-stacked"],fn:function(t){this.sheetIterator(t,function(t,e){this.multiSheetItem(t,e)})},fnTranspose:function(t){this.sheetIterator(t,function(t,e){this.multiSheetItemTranspose(t,e)})}},doubleAxis:{types:["double"],fn:function(t){this.sheetIterator(t,function(t,e){this.doubleAxisSheetItem(t,e)})},fnTranspose:function(t){this.sheetIterator(t,function(t,e){this.doubleAxisSheetItemTranspose(t,e)})}},timer:{types:["timer"],fn:function(t){this.sheetIterator(t,this.timerSheetItem)}},scatter:{types:["scatter","bubble"],fn:function(t){this.sheetIterator(t,function(t,e){this.scatterSheetItem(t,e)})},fnTranspose:function(t){this.sheetIterator(t,function(t,e){this.scatterSheetItemTranspose(t,e)})}}},e["default"]={create:function(t){return new f(t)},NumberParser:u["default"]}},function(t,e,n){"use strict";var o;o=function(){var t=["url","youtube","vimeo","flickr","slideshare","gallery_image"],e=Backbone.Model.extend({urlRoot:"/api/media",defaults:{type:"media",text:"",title:""},validate:function(e){return t.indexOf(e.media_type)<0?"invalid media type":void 0},initialize:function(){this.on("invalid",function(){window.app.message.error("Invalid element")}),this.on("request",function(){window.app.events.trigger("Editable:saving")}),this.on("sync",function(){window.app.events.trigger("Editable:saved")})}});return e}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(721),o=n(479),i={1:{css:n(783),element:n(784)},2:{css:n(785),element:n(786)}},r=Backbone.Model.extend({initialize:function(){this.get("shrinkMargin")||this.get("shrinkPadding")?(o.setMargin(this.get("shrinkMargin")),o.setChartPadding(this.get("shrinkPadding"))):o.clear(),this.on("change",function(){o.setMargin(this.get("shrinkMargin")),o.setChartPadding(this.get("shrinkPadding"))},this)},urlRoot:"/api/themes",idAttribute:"id",getVersion:function(){var t=e(this.attributes.version||1,i);return new t(this.attributes)}});return r}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o=n(16),i={typekit:["prm2kes","evx5uvs","jzi1lgr","ewa0jcg","fhe5nba"],google:["Arimo","Archivo Narrow","Berkshire Swash","Bevan","Cabin","Domine","Dosis","Exo 2","Fjord One","Heebo","Josefin Sans","Karma","Lato","Libre Baskerville","Lobster Two","Lora","Merriweather","Monda","Montserrat","Muli","News Cycle","Noto Sans","Noto Serif","Nunito","Open Sans Condensed","Open Sans","Oswald","Playfair Display","Pontano Sans","PT Sans Narrow","PT Sans","PT Serif","Quattrocento Sans","Quicksand","Raleway","Rasa","Roboto","Roboto Condensed","Roboto Slab","Russo One","Sintony","Slabo 27px","Source Sans Pro","Titillium Web","Ubuntu","Ubuntu Condensed"],custom:["AlternateGothicStd-No2","Avenir LT Pro","BentonSans","Brandon Grotesque","BWHaasText-55Roman","Chaparral Pro","Clan Offc","Clan SC Offc","ConduitITCStd","CorpidCdOTB","Fedra Serif A Std","Flamauouw","Flamauouw Semicond","Flanders Art Sans","Ford Antenna","Frutiger Next Pro","FS Me","FuturaSTD","GillSansStd","Geometr415 Blk BT","Gotham","Gotham Rounded","Graphik","Graphik X Cond","GreyscaleBasic","HeliosC","Hermes","Intel Clear","Intel Clear Pro","Intro","Intro Book","Karla","Kievit Offc Pro","League Gothic","Meta Book","MetaCompPro","Noto Sans TC","Proxima Nova","Segoe UI","Sueca Dk","SuecaNano","SuecaSans","Sueca Tx","Swiss721BT","TM Sans","Telenor","Together","Trade Gothic Condensed","TradeGothic LT BoldTwo","TradeGothic LT Light","TradeGothic LT LightOblique","Vinkel","DIN OT","Burlingame Condensed","Meta Serif","TheSansArabic"]},r={100:100,200:200,300:300,400:400,normal:400,500:500,600:600,700:700,bold:700,800:800,900:900},a={loadFonts:function(t,e){var i=n(870);i._readyCallback=function(){e()};var r=function(){i._readyCallback&&(i._readyCallback(),i._readyCallback=null)},a=this.getWebFontOptions(t),s=o.intersection(o.keys(a),["typekit","google","custom"]).length>0;s||r(),a.timeout=1e4,a.active=r,a.inactive=r,a.classes=!1,i.load(a)},getWebFontOptions:function(t){var e={},n={};if(o.each(t,function(t){var o=t["font-family"]||t.fontFamily;if(o){var i=this.getProvider(o);if(i){n[i]||(n[i]={});var r=n[i];switch(r[o]||"typekit"===i||(r[o]=[]),i){case"google":r[o].push(this.toGoogle(t));break;case"custom":r[o].push(this.toFvd(t));break;case"typekit":e[i]={},e[i].id=o}}}},this),n=o.omit(n,"typekit"),o.each(n,function(t,n){e[n]={},e[n].families=o.map(t,function(t,e){return e+":"+o.uniq(t).join(",")})}),e.google&&e.google.families.length){var i=e.google.families.length-1;e.google.families[i]=e.google.families[i]+"&subset=latin,latin-ext,cyrillic"}return e.custom&&e.custom.families.length&&(e.custom.urls=["/api/fonts?family="+encodeURIComponent(e.custom.families.join("|"))]),e},getProvider:function(t){for(var e in i){var n=[];if(i[e]&&(n=i[e]),-1!==n.indexOf(t))return e}},toFvd:function(t){t=t||{};var e=["normal","oblique","italic"],n=t["font-style"]||t.fontStyle||"normal",i=t["font-weight"]||t.fontWeight||400;return i=this.weightToNumber(i),i=-1===o.values(r).indexOf(i)?"4":(""+i).substr(0,1),n=-1!==e.indexOf(n)?n.substr(0,1):"n",n+i},toGoogle:function(t){var e=t["font-style"]||t.fontStyle||"normal",n=t["font-weight"]||t.fontWeight||400;return n=this.weightToNumber(n),-1===o.values(r).indexOf(n)&&(n=400),"normal"===e&&(e=""),""+n+e},weightToNumber:function(t){return"number"!=typeof t&&t in r&&(t=r[t]),t},getFontFamilies:function(){var t=[];return o.each(i,function(e){t=t.concat(e)}),t}};t.exports=a},function(t,e,n){"use strict";var o;o=function(t){var e=n(126),o=n(73),i=$(document),r=0,a=5,s=10,l=e.extend({className:"pop_panel",template:n(787),template_unpublish:"",template_embed:n(789),template_body:n(788),template_tooltip:'<span class="em_tip" data-tooltip-position="bottom" data-tooltip="<%= msg %>"></span>',events:_.extend({},e.prototype.events,{"copy textarea[readonly]":function(){ga("send","event","edit","Copy","Embed")},"copy input[readonly]":function(){ga("send","event","edit","Copy","Url")},"click textarea[readonly], input[readonly]":function(t){t.currentTarget.select()},"click .share_social a":function(t){t.preventDefault(),window.open($(t.target).attr("href"),"shareWindow","height=650, width=850, top="+(screen.height/2-400)+", left="+(screen.width/2-450)+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},"click .share_tabs li":function(t){var e=$(t.target).closest("li"),n=e.closest("div"),o=e.prevAll("li").length,i=$(n.find(">div")[o]),r=n.find(">.active"),a=$(".share_tabs");r.removeClass("active"),a.removeClass(r.attr("id")),e.prevAll("li").removeClass("active"),e.nextAll("li").removeClass("active"),i.addClass("active"),a.addClass(i.attr("id")),e.addClass("active")},"click .switcher":function(t){if(t.stopPropagation(),this.$dropdown.is(":visible"))return void this.$dropdown.hide();var e=$(t.target);this.$dropdown.css({top:e.position().top+e.height()+a,left:e.position().left-s}),this.$dropdown.show(),i.one("click",function(){$(".type_select .dropdown").hide()})},"click .type_select li":"switchType"}),initialize:function(){e.prototype.initialize.apply(this,arguments),this.render()},switchType:function(t){var e=$(t.target);$(".type_select .dropdown").hide(),this.render({type:e.data("type")})},render:function(t){var n=parseInt($(".ig-container").outerHeight(),10)+r,i=0;this.model.get("embed_image_data")&&this.model.get("embed_image_data").height&&(i=this.model.get("embed_image_data").height),n=n||i,i=i||n,this.model.set("embedIframe",this.model.get("embedIframe").replace(/height="(\d+?)?"/,'height="'+n+'"')),this.model.get("embed_image_data")&&this.model.get("embed_image_data").height&&(n=this.model.get("embed_image_data").height),this.model.get("embedImageIframe")&&this.model.set("embedImageIframe",this.model.get("embedImageIframe").replace('height=""','height="'+i+'"'));var a=this.options.editView?this.model.fullUrl():this.model.shareUrl(),s=o.getCurrentProfile(),l="interactive";t&&t.type&&(l=t.type);var u="embedAsync",c="embed",h="embedIframe",p="embedWordpress";return"image"===l&&(u="embedImageAsync",c="embedImageResponsive",h="embedImageIframe",p="embedWordpressImage"),e.prototype.render.apply(this,[{url:a,imageUrl:this.model.get("embedImageUrl"),urlEncoded:encodeURIComponent(a),titleEncode:encodeURIComponent(this.model.shareText()),media:this.model.get("thumb"),type:l,canChooseType:!!s.pro,embedResponsive:this.model.get(c),embedAsync:this.model.get(u),embedFixed:this.model.get(h),embedWordpress:this.model.get(p)}]),window.app&&"web"===window.app.view&&this.$el.addClass("share_popup_web"),window.app&&"embed"===window.app.view&&this.$el.addClass("embed_share"),this.$dropdown=$(".type_select .type_dropdown"),this}});return l}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(791),o=n(74),i=o.extend({tagName:"div",className:"moveable particle body-text ig-theme-group-text",template:e,render:function(){this.el.id="particle_"+this.model.get("object_id");var t=this.model.get("text");"text/html"!==this.model.get("content_type")&&(t=this.renderContentEditable(t));var e={text:t};return this.$el.html(_.template(this.template)(e)),this},renderContentEditable:function(t){if(""===t)return t;var e="",n="br",o=t.split("\n");return $.browser.webkit?n="div":($.browser.msie||$.browser.opera)&&(n="p"),"br"===n?_.each(o,function(t){t+="<br />",e+=t}):_.each(o,function(t){t=t||"<br />",e+="<"+n+">"+t+"</"+n+">"}),e}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(792),o=n(74),i=o.extend({tagName:"h2",className:"moveable particle chart-title ig-theme-group-text",template:e,render:function(){this.el.id="particle_"+this.model.get("object_id");var t={text:this.model.get("text")};return this.$el.html(_.template(this.template)(t)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(74),o=e.extend({render:function(){var t=this.copyright||this.options.copyright;return"undefined"!=typeof i18n&&this.$el.attr("data-placeholder",i18n.t("app.infographic.copyright_notice")),this.$el.addClass("ig-copyright"),(t||"undefined"!=typeof i18n)&&(this.$el.html(t),$("#footer").prepend(this.el)),this}});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(74),o=n(610),i=e.extend({events:{click:function(){"web"!==window.app.view&&new o({model:this.model})}},initialize:function(){e.prototype.initialize.apply(this,arguments);var t=this.options.color;this.$el.addClass("ig-share-button"),this.options.fullwidth&&this.options.text&&(this.$el.text(this.options.text),this.$el.addClass("fullwidth")),this.color="#"===t[0]?t.substr(1):t},render:function(){return this.$el.css({"background-color":"#"+this.color}),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(130),a=o(r),s=n(95),l=n(399),u=o(l);i=function(t){var e=n(202),o=n(794),i=n(481),r=function(t){return t?_.map(t.split(" "),function(t){return"#"+t}):!1};return e.extend({template:o,events:{"click .igc-sheet":function(t){var e=$(t.currentTarget);e.parent().find(".igc-sheet").removeClass("active"),e.addClass("active"),this.loadSheet(parseInt(e.attr("data-value"),10))},"click .igc-tab":function(t){var e=$(t.currentTarget),n=parseInt(e.attr("data-value"),10);return n===this.activeSheet?!1:void(isNaN(n)||(e.parent().find(".igc-tab").removeClass("active"),e.addClass("active"),this.loadSheet(n)))}},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.options=t||{},this.infographic=this.options.infographic,this.parent=this.options.parent,this.renderSettings=this.options.renderSettings||{},this.ignoredDataSets=this.options.ignoredDataSets||[],this.renderSettings.displaySheets&&(this.importArrayData(this.model.get("data")),this.listenTo(this.model,"change:dataSets",this._updateVisibility))},initChart:function(){(0,s.addEntity)(this.id,this)},render:function(t){var e=this;this.prepare();var n=this.model.get("sheetnames")||[],o=3;if(this.tabs=_.map(this.data,function(t,e){return _.escape(n[e])||_.escape(t[0][o])||"Page "+(e+1)}),this.renderSettings.displaySheets)for(var i=this.tabs.length,r=this.options.showColumns,a=0;i>a;a++)this.renderSettings.displayEnabledChartsOnly?_.isEmpty(r)?(_.isEmpty(this.ignoredDataSets)||-1===this.ignoredDataSets.indexOf(a))&&this.loadSheet(a):-1!==r.indexOf(a)&&this.loadSheet(a):this.loadSheet(a);else this.$el.find(".igc-sheets").remove(),this.loadSheet(t||0);return setTimeout(function(){e.showTabs()},500),this},importArrayData:function(t){this.data=t},updateData:function(t){this.data=t,this.showTabs(),this.loadSheet(this.activeSheet)},applySheetOptions:function(){return!1},loadSheet:function(t){this.data[t]||(t=0);var e=InfoCharts.Visuals.ShapeGenerator,n=this.model,o=(0,a["default"])({sheetIndex:t,chart:n});$(this.$el.find(".igc-sheet, .igc-tab")[t]).addClass("active"),this.shapesize=o.getCustomValue("size",50);var i=[];_.each(this.data[t],function(t){t[2]&&"null"!==t[2]&&i.push(t[2].replace("Path",""))}.bind(this)),e.Func.getPaths(i.join(","),function(){var e=this.processData(t);this.loadHtml(e,t)}.bind(this)),this.activeSheet=t},loadHtml:function(t,e){var n=this.model.get("custom"),o={data:t,sheet:e,id:this.id,hideFirstRow:n&&n.live&&n.live.enabled},i=this.model.get("sheetnames")||[];if(this.renderSettings.displaySheets&&this.tabs.length>1){var r=t[e]&&t[e][0]?_.escape(t[e][0][3]):"Sheet "+(e+1);o.tableCaption=i[e]||r}else this.$el.find(".igc-chart").remove();var a=_.template(this.template)(o);this.$el.append(a)},prepare:function(){var t=this.model,e=this.infographic.get("theme").get("chartOptions");this.id=t.get("chart_id"),this.el.id="chart_"+this.id,e.textual=e.textual||{},this.colors=this.model.get("colors"),this.colors.length<1&&(this.colors=r(e.fill)||this.infographic.get("theme").get("colors")),this.data||(this.data=t.get("data"))},showTabs:function(){if(!this.renderSettings.displaySheets&&this.tabs.length>1){var t=[this.tabs,this.el,this.activeSheet];this.infographic.get("properties").tabs?u["default"].createTabs.apply(u["default"],t):u["default"].createRadioButtons.apply(u["default"],t)}},processData:function(t){var e,n=[],o=this.model,r=this.colors,a=this.shapesize,s=InfoCharts.Visuals.ShapeGenerator,l=0,u=_.clone(this.data[t]);return _.each(u,function(u){
var c=[u[0]];if(c.push(u[1]||""),u[2]&&"none"!==u[2]){var h=u[2];h=s.Path[h]||s.Path.upPath;var p=s.Func.scalePath(h,1),d=Math.max(p.width,p.height),f=2===o.get("custom").shrink;p=s.Func.scalePath(h,a/d);var g=Math.round((a-p.width)/2),m=f?Math.round((a-p.height)/2):0;e={height:f?a:Math.ceil(p.height),width:a,shape:p.path,fill:r[l],val:"",offsetX:g,offsetY:m},c[2]=_.template(i)(e)}else e={height:0,width:a,shape:"",fill:"",val:""},c[2]=_.template(i)(e);n.push({value:c,name:u[0],color:r[l],sheet:t}),l=l<r.length-1?l+1:0}.bind(this)),n},_updateVisibility:function(){var t=this.model,e=t.get("dataSets");this.$el.find(".table-caption").each(function(t,n){var o=-1===e.indexOf(t);$(n).next(".igc-chart.inner").toggleClass("hidden",o),$(n).toggleClass("hidden",o)})}})}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var o;o=function(t){var e=n(809),o=n(74),i=o.extend({tagName:"h1",className:"moveable particle headline ig-theme-group-text",template:e,initialize:function(){if(o.prototype.initialize.apply(this,arguments),!this.options.titleLinkSet){window.app.events.trigger("setTitleLink"),this.infographic=this.options.infographic;var t=this.infographic.get("properties"),e=t.title_link,n=t.title_url;if(this.url=window.location.pathname,"infogram"===e){var i=this.infographic.get("theme").get("logoUrl");this.url="https://infogr.am"+this.url,i&&""!==i&&(this.url=i)}else"custom"===e&&n&&""!==n?this.url=n:this.url=null;this.url&&!this.url.match(/^[a-zA-Z]+:\/\//)&&(this.url="http://"+this.url),this.isTitleClickable=this.url&&window.app&&window.app.view&&-1!==["web","embed"].indexOf(window.app.view)}},render:function(){this.el.id="particle_"+this.model.get("object_id");var t={text:this.model.get("text"),url:this.isTitleClickable?this.url:!1};return this.$el.html(_.template(this.template)(t)),this.$el.attr("data-tip","ig-title"),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(796),o=n(74),i=o.extend({tagName:"div",className:"moveable particle picture",template:e,render:function(){this.el.id="particle_"+this.model.get("object_id");var t=this.model.get("dimensions"),e="100%";t&&(e=t.width);var n=this.model.get("picture");n=n.replace("http://s3","https://s3");var o={src:n,width:e};this.$el.html(_.template(this.template)(o));var i=this.$el.find("img"),r=$("<img/>");return r.attr("src",i.attr("src")).load(function(){var t={width:this.width,height:this.height};i.data("original",t),r.remove()}),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(797),o=n(623),i=n(74),r=i.extend({className:"logo_footer",initialize:function(){i.prototype.initialize.apply(this,arguments);var t=this.options.custom_logo_value||this.options.template_logo,e=this.options.color,n=this.options.template_logo,r="#"===e[0]?e.substr(1):e;this.title_url=this.options.title_url,this.customLink="custom"===this.options.title_link&&this.title_url,this.path=this.options.path,n||(n="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(_.template(o)({color:r}))),t?(this.url=t,this.infogram=!1):(this.url=n,this.infogram=!0),this.customLink&&!this.customLink.match(/^[a-zA-Z]+:\/\//)&&(this.customLink="http://"+this.customLink);var a="https://infogr.am?utm_campaign=infographic&utm_medium=infogram_"+this.path+"&utm_source=embed_bottom&utm_content="+(this.options.pro?"cta_0":"footer_logo");"infogram"===this.options.title_link&&(this.customLink=a),"infogram"===this.options.custom_link_status?this.customLink=a:"custom"===this.options.custom_link_status&&(this.customLink=this.options.custom_link_url)},render:function(){var t={url:this.url,infogram:this.infogram,customLink:this.customLink};return this.$el.html(_.template(e)(t)),this}});return r}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(802),o=n(74),i=o.extend({tagName:"div",className:"moveable media url",template:e,render:function(){this.el.id="media_"+this.model.get("id");var t={title:this.model.get("title"),description:this.model.get("description"),url:this.model.get("url"),image:this.model.get("image")};return this.$el.html(_.template(this.template)(t)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(804),o=n(74),i=o.extend({tagName:"div",className:"moveable particle quoted ig-theme-group-text",template:e,render:function(){this.el.id="particle_"+this.model.get("object_id");var t=this.model.get("title")||"";"text/html"===this.model.get("content_type")||(t=t.replace("\n","<br>"));var e={text:this.model.get("text"),author:t};return this.$el.html(_.template(this.template)(e)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(74),o=n(806),i=e.extend({tagName:"div",className:"moveable particle ig-separator",template:o,render:function(){return this.$el.html(_.template(this.template)),this}});return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=n(25),s=n(201),l=o(s),u=n(130),c=o(u),h=n(16),p=o(h),d=n(95),f=n(399),g=o(f),m=n(782),v=o(m);i=function(t){var e=n(202),o=n(481),i=n(808),s=n(805),u=3,h=20,f=/\[[^]*\]\(https?:\/\/[^)]*\)/gi,m=["$","%","£","€"],y=/\[img\=((https?:)?\/\/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)\]/g,b=/\[svg\=([^]*)\]/g,_=/\"/g,x=400,w=15,S=20,C="igc-table-header igc-table-dynamic-column",E=InfoCharts.Visuals.ShapeGenerator,T=function(t){var e=t.custom,n=e.groupingSymbol;"none"===n&&(n=" ");var o=e.decimalSeparator&&n?n+e.decimalSeparator:",.",i=parseInt(t.target.getAttribute("data-column"),10)||0,r=t.header.getElementsByTagName("th"),a=r[i].classList.contains("igicon-sort-down"),s=t.obj.getElementsByTagName("span"),l=p["default"].sortBy(t.data,function(t){return t[i]}),u=!0;l=p["default"].sortBy(l,function(t){var e=document.createElement("div");e.innerHTML=t[i];var n=Date.parse(e.innerText);return n||(u=!1),n||t[i]}),u||(l=p["default"].sortBy(l,function(t){var e=t[i]||"";e=e.trim(),-1!==m.indexOf(e[0])&&(e=e.substr(1));var n=(0,v["default"])(e,o);return n?n:0===n?0:e})),a&&l.reverse(),l=[].concat.apply([],l),p["default"].each(s,function(t,e){t.innerHTML=l[e]}),p["default"].each(r,function(t,e){if(!t.classList.contains("igc-hidden-cell")){var n=e===i?a?"-up":"-down":"";r[e].className=C+" igicon-sort"+n}})},k=function(t,e,n,i){var r=.8,a=e.pictoProportionalScale!==!1,s=a?I(t):!1;return t.forEach(function(t,l){t.forEach(function(u,c){if(l&&c&&u&&e.styleName!==!1){var h=r;if(a&&s){var d=parseFloat(u);isNaN(d)||(h*=Math.sqrt(Math.abs(d)/s))}var f=E.Func.scalePath(n,h),g={height:Math.ceil(f.height),width:Math.ceil(f.width),shape:f.path,fill:i,val:u};t[c]=p["default"].template(o)(g)}else if(u&&!e.styleName){y.lastIndex=0;var m=y.exec(u);if(m)t[c]='<img src="'+m[1]+'" alt="" class="igc-table-image" />';else{b.lastIndex=0;var v=b.exec(u);if(v){var _=E.Path[v[1]]||E.Path[v[1]+"Path"];_&&(t[c]='<svg version="1.1" viewBox="0 0 '+_.dimensions.width+" "+_.dimensions.height+'" class="igc-table-image"\n                                    xmlns="http://www.w3.org/2000/svg">\n                                    <path\n                                        fill-rule="evenodd"\n                                        transform="translate('+_.dimensions.x+","+_.dimensions.y+')"\n                                        fill="'+i+'"\n                                        d="'+_.path+'" />\n                                </svg>')}}}})}),t},M=function(t,e,n,o){var i=0,r=/\n/g;return t.forEach(function(t){i<t.length&&(i=t.length)}),t.forEach(function(t){for(var n=0;i>n;n++){t[n]=p["default"].escape(t[n]||"").replace(r,"<br>"),e.styleName||(t[n]=O(t[n])),b.lastIndex=0;var a=b.exec(t[n]);a&&!e.styleName&&o.push(a[1].replace("Path",""))}}),t},O=function(t){return t.replace(f,function(t){var e=t.match(/^\[(.+)\]\((.+)\)$/);return e&&e[1]&&e[2]?'<a target="_blank" href="'+p["default"].escape(e[2])+'">'+p["default"].escape(e[1])+"</a>":void 0})},I=function(t){var e=[];return t.slice(1).forEach(function(t){t.slice(1).forEach(function(t){var n=parseFloat(t);n&&e.push(n)})}),e.length>0?p["default"].max(e):!1};return e.extend({template:n(807),events:{"click .igc-sheet":function(t){var e=$(t.currentTarget);e.parent().find(".igc-sheet").removeClass("active"),e.addClass("active"),this.loadSheet(parseInt(e.attr("data-value"),10))},"click .igc-tab":function(t){var e=$(t.currentTarget),n=parseInt(e.attr("data-value"),10);return n===this.activeSheet?!1:void(isNaN(n)||(e.parent().find(".igc-tab").removeClass("active"),e.addClass("active"),this.loadSheet(n)))},"click .igc-table-export":"export","mousemove .igc-table-interactive .igc-table-cell-span svg":"mousemove","mouseout .igc-table-interactive .igc-table-cell-span svg":"mouseout"},initialize:function(){e.prototype.initialize.apply(this,arguments),this.parent=this.options.parent,(0,a.getTooltip)()===a.tooltipDummy&&(0,a.setTooltip)(new l["default"]({escapeFn:p["default"].escape})),this.tooltip=(0,a.getTooltip)(),this.columnData=[],this.renderSettings=this.options.renderSettings||{},this.renderSettings.displaySheets&&(this.importArrayData(this.model.get("data")),this.listenTo(this.model,"change:dataSets",this._updateVisibility))},initChart:function(){(0,d.addEntity)(this.id,this)},render:function(t){if(this.prepare(t),this.renderSettings.displaySheets){this.hasSubsheets=!0;for(var e=this.options.ignoredDataSets||[],n=this.options.showColumns,o=this.data,i=o.length,r=0;i>r;r++)this.renderSettings.displayEnabledChartsOnly&&-1!==e.indexOf(r)||(p["default"].isEmpty(n)?(p["default"].isEmpty(this.ignoredDataSets)||-1===this.ignoredDataSets.indexOf(r))&&this.renderSheet(r):-1!==n.indexOf(r)&&this.renderSheet(r));this.applyStyleLater()}else this.$el.remove(".igc-chart"),this.loadSheet(t||0);return this},importArrayData:function(t){this.data=t},applySheetOptions:function(){return!1},loadSheet:function(t){$(this.$el.find(".igc-sheet, .igc-tab")[t]).addClass("active"),this.$el.find(".igc-chart").remove(),this.renderSheet(t),this.activeSheet=t},renderSheet:function(t){var e=this;this.data[t]||(t=0);var n=(0,c["default"])({chart:this.model,sheetIndex:t}),o=n.getColors(),i=this.custom,r=this.theme,a={textAlignVertical:n.getCustomValue("textAlignVertical",!1),textAlign:n.getCustomValue("textAlign",!1),textSize:n.getCustomValue("textSize",!1),firstRowTextAlign:n.getCustomValue("firstRowTextAlign",!1),firstColumnTextAlign:n.getCustomValue("firstColumnTextAlign",!1)};this.data[t].length||(this.data[t]=[[]]);var s=p["default"].map(this.data[t],p["default"].clone),l=o[0]||r.shapeFill,u=n.getCustomValue("defaultPath",r.defaultPath||"circlePath"),h=[u.replace("Path","")];l&&"#"===l[1]&&(l=l.substr(1)),s=M(s,i,l,h),this.sheetSettings&&this.sheetSettings.forEach(function(t){t&&t.defaultPath&&h.push(t.defaultPath.replace("Path",""))}),E.Func.getPaths(h.join(","),function(){s=k(s,i,E.Path[u],l),e.renderSheetData({data:s,textFormat:a,colors:o,sheet:t})}),this.activeData=s.slice(1)},renderSheetData:function(t){var e=t.data,n=t.textFormat,o=t.colors,i=t.sheet,r="",a="",s="",l="",u=this.custom,c=this.theme,h=e[0][0],d=["igc-table"];r="color: "+(o[2]||c.cellColor)+"; background: "+(o[4]||c.cellBackground)+";",a="color: "+(o[1]||c.evenColor||c.headerColor)+"; background: "+(o[3]||c.evenBackground||c.headerBackground)+";",s="color: "+(o[5]||c.headerColor)+"; background: "+(o[6]||c.headerBackground)+";",n.firstRowTextAlign&&d.push("table-header-align-"+n.firstRowTextAlign),l="color: "+(o[7]||c.firstColumnColor||c.headerColor)+"; background: "+(o[8]||c.firstColumnBackground||c.headerBackground)+";",n.textAlignVertical&&d.push("igc-table-valign-"+n.textAlignVertical),n.textAlign&&d.push("igc-table-align-"+n.textAlign),n.textSize&&d.push("__"+n.textSize),u.styleName!==!1&&d.push("igc-table-interactive"),u.headerColumn&&d.push("has-first-column"),u.dynamicWidth&&d.push("__dynamic"),u.fixedHeight&&d.push("igc-table-fixed-height");var f={custom:u,id:this.hasSubsheets?this.id+"_"+i:this.id,data:e,textFormat:n,headerStyle:s,oddStyle:r,evenStyle:a,firstColumnStyle:l,colors:o,downloadColor:o[1]||c.cellColor,classNames:d.join(" "),font:this.font,imageHeight:parseInt(u.imageHeight,10)||w};this.renderSettings.displaySheets&&this.data.length>1&&(f.tableCaption=h);var g=p["default"].template(this.template)(f);this.$el.append(g),u.showSearch&&this.setupSearch(),this.applyStyleLater()},applyStyleLater:function(){p["default"].defer(this.applyStyle.bind(this))},updateData:function(t){this.data=t,this.loadSheet(this.activeSheet||0)},searchTable:function(){var t=this.$(".igc-table-search-input:first-child"),e=t.val().toLowerCase();p["default"].each(this.$el.find("tbody tr"),function(t){var n=$(t).text(),o=-1===n.toLowerCase().indexOf(e);$(t).toggleClass("igc-table-hidden",o)})},setupSearch:function(){var t=this,e=this.$(".igc-table-search-input:first-child");e.on("keyup",function(){t.searchTable()})},prepare:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=["download","capture"],o=this.model,i=this.infographic.get("theme");this.id=o.get("chart_id"),this.el.id="table_"+this.id,this.theme=i.get("charts").table||{},this.colors=i.get("colors"),this.font=i.get("color"),this.data=this.data||o.get("data"),this.custom=o.get("custom")||{},this.$el.find(".igc-sheets").remove(),-1!==n.indexOf(this.parent.viewMode)&&(this.custom.fixedHeight=!1);var r=o.get("sheetnames")||[],a=p["default"].map(this.data,function(t,e){return r[e]?p["default"].escape(r[e]):t&&t[0]&&t[0][0]?t[0][0]:void 0});this.renderSettings.displaySheets||setTimeout(function(){var n=[a,t.el,e];t.infographic.get("properties").tabs?g["default"].createTabs.apply(g["default"],n):g["default"].createRadioButtons.apply(g["default"],n)},0)},"export":function(){var t=document.createElement("a");document.body.appendChild(t),t.style="display: none";for(var e=p["default"].clone(this.data[this.activeSheet]),n=0,o=e.length;o>n;n++)e[n]=e[n].map(function(t){return t||(t=""),t=t.replace(_,'""'),'"'+t+'"'}).join(",");e=e.join("\n");var i=new Blob([e],{type:"octet/stream"}),r=window.URL.createObjectURL(i);t.href=r,t.download="data.csv",t.click(),window.URL.revokeObjectURL(r),t.remove()},mousemove:function(t){var e={x:t.originalEvent.pageX,y:t.originalEvent.pageY},n=$(t.currentTarget);this.tooltip.setOptions({text:n.attr("data-id"),pos:e,color:n.attr("color"),value:""})},mouseout:function(){this.tooltip.hide()},applyStyle:function(){var t=this,e=this.$(".igc-table"),n=e.find("thead .igc-table-header-span"),o=e.find("tbody .igc-table-cell-span"),a=0,l=0,c=e.find("col"),d=this.custom,f=d.showRowHeader===!1?0:1;if(this.columns=c,d.height&&d.fixedHeight!==!1&&e.parent().height((d.height||400)+"px"),d.dynamicWidth===!1&&(n.each(function(t){if(0!==t||1===f){var e=$(this).outerWidth();e>a&&(a=e)}}),a+=h,o.each(function(){var t=$(this).width();t>l&&(l=t)}),l+=u),d.verticalHeader){e.find("table thead th").height(a),n.css({fill:n.css("color"),"white-space":"nowrap"});var g=n.outerHeight();n.each(function(){var t=$(this).outerWidth();t>a&&(a=t)}),n.each(function(){var t=$(this),e=t.text(),n=t.outerWidth(),o={height:g,width:n,text:e},i=p["default"].template(s)(o);$(this).html(i)})}l=Math.max(l,a);var m=e.parent();if(d.dynamicWidth===!1&&$(c).attr("width",Math.max(l,m.width()/c.length)),m.css({padding:0,"margin-left":m.css("padding-left"),"margin-right":m.css("padding-right")}),e.addClass("__visible"),d.fixedHeight&&d.rowHeader!==!1&&!function(){e.parent().css("overflow","hidden");var n=t.el.getElementsByClassName("igc-table")[0],o=n.getElementsByTagName("thead")[0],r=n.getElementsByTagName("tbody")[0],a=document.createElement("div");a.id="hdScoll"+n.id,a.className="igc-table-scroll",a.style.height=(d.height||x)+"px",n.parentNode.appendChild(a),a.appendChild(n);var s=p["default"].template(i)({id:n.id,html:o.innerHTML,body:r.innerHTML,className:n.className});n.insertAdjacentHTML("beforebegin",s);var l=document.getElementById("hd"+n.id);l.style.width=o.getBoundingClientRect().width+"px";var u=o.getElementsByTagName("th"),c=l.getElementsByTagName("th");p["default"].each(u,function(t,e){c[e].style.width=t.getBoundingClientRect().width-S+"px"}),a.addEventListener("scroll",function(){var t=a.scrollLeft;l.style.left="-"+t+"px",a.scrollLeft=t})}(),!this.renderSettings.displaySheets&&d.showRowHeader!==!1&&d.rowHeader!==!1){var v=function(){var e=t.el.getElementsByClassName("igc-table")[0];if(!e)return{v:void 0};var n=e.parentNode.getElementsByTagName("thead")[0],o={obj:e.getElementsByTagName("tbody")[0]||t.el.getElementsByTagName("tbody")[0],target:null,data:t.activeData,custom:d,header:n};n&&n.addEventListener("click",function(e){o.target=e.target.getAttribute("data-column")?e.target:e.target.parentNode,T(o),d.showSearch&&t.searchTable()})}();if("object"===("undefined"==typeof v?"undefined":r(v)))return v.v}},_updateVisibility:function(){var t=this.model,e=t.get("dataSets");this.$el.find(".igc-chart.inner, .table-caption").each(function(t,n){$(n).toggleClass("hidden",-1===e.indexOf(Math.floor(t/2)))})}})}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     height="40px" viewBox="-355 292.97345 80 29.02654" enable-background="new -355 292.97345 80 29.02654" xml:space="preserve">\n<g>\n    <polygon fill-rule="evenodd" clip-rule="evenodd" points="-275.03299,292.97345 -343.97034,292.97345 -354.85501,314.73978\n        -340.34192,314.73978 -340.34192,322 -333.08768,314.73978 -275.03299,314.73978" fill="#<%- color %>"/>\n</g>\n    <g>\n        <path fill="#FFFFFF" d="M-330.69919,299.46121c0,0.41046-0.35275,0.70734-0.73456,0.70734\n        c-0.3678,0-0.69424-0.29688-0.69424-0.70734c0-0.43872,0.32645-0.72232,0.69424-0.72232\n        C-331.05194,298.73889-330.69919,299.02249-330.69919,299.46121z M-330.85403,307.76028h-1.13254v-6.81284h1.13254V307.76028z"/>\n        <path fill="#FFFFFF" d="M-328.42038,303.11453v4.64575h-1.14761v-6.82697h0.90469l0.15665,0.69513\n        c0.25464-0.5957,0.80487-0.7366,1.18753-0.76572c1.23029-0.07056,2.24939,1.0777,2.24939,2.2518v4.64575h-1.14679v-4.64575\n        c0-0.59457-0.50742-1.10464-1.11633-1.10464C-327.92694,302.00989-328.42038,302.51996-328.42038,303.11453z"/>\n        <path fill="#FFFFFF" d="M-322.59396,307.76028h-1.13159v-7.40756c0-1.3172,1.25839-2.27997,2.68732-2.27997v1.1329\n        c-0.83316,0-1.55573,0.52417-1.55573,1.14706v2.09583h1.40076v1.133h-1.40076V307.76028z"/>\n        <path fill="#FFFFFF" d="M-315.91864,305.57782c0,1.5163-1.15933,2.2529-2.30502,2.2529c-1.15967,0-2.29123-0.7366-2.29123-2.2529\n        v-2.47726c0-1.52951,1.14569-2.23782,2.29123-2.23782c1.15945,0,2.30502,0.70831,2.30502,2.23782V305.57782z M-317.06421,303.10056\n        c0-0.72235-0.57959-1.10477-1.15945-1.10477c-0.5657,0-1.15967,0.38242-1.15967,1.10477v2.47726\n        c0,0.72342,0.59396,1.09146,1.15967,1.09146c0.57986,0,1.15945-0.36804,1.15945-1.09146V303.10056z"/>\n        <path fill="#FFFFFF" d="M-312.58966,310.54916c-0.49268,0-1.24329-0.26862-1.79498-0.76535l0.65115-0.90573\n        c0.40897,0.33905,0.87631,0.51016,1.14383,0.51016c0.62271,0,1.13242-0.4819,1.13242-1.07687v-1.20309\n        c-0.19693,0.55231-0.76291,0.69415-1.10342,0.69415c-1.18768,0-2.27701-0.77997-2.27701-2.10983v-2.71988\n        c0-1.13306,1.10419-2.20956,2.27701-2.10999c0.453,0.0423,1.01898,0.21329,1.203,0.8653l0.11221-0.79471h0.93353v7.37805\n        C-310.31192,309.60052-311.37274,310.54916-312.58966,310.54916z M-313.69211,305.6926\n        c-0.04138,0.66495,0.56668,0.96182,1.15939,0.96182c0.53775,0,1.07547-0.36807,1.07547-0.94791v-2.776\n        c0-0.51004-0.59421-0.90561-1.10342-0.92062c-0.58008,0-1.13144,0.39661-1.13144,0.96283V305.6926z"/>\n        <path fill="#FFFFFF" d="M-309.21683,307.76028v-6.7836h0.94766l0.12732,0.69406c0.3963-1.00616,1.48514-1.02042,2.24899-0.41046\n        l-0.39581,1.03333c-0.6655-0.46799-1.68353-0.35318-1.79578,0.57962v4.88705H-309.21683z"/>\n        <path fill="#FFFFFF" d="M-304.25192,307.06607c0,0.43777-0.29648,0.72223-0.73566,0.72223\n        c-0.42377,0-0.70712-0.28445-0.70712-0.72223c0-0.42578,0.28336-0.73752,0.70712-0.73752\n        C-304.5484,306.32855-304.25192,306.64029-304.25192,307.06607z"/>\n        <path fill="#FFFFFF" d="M-302.65884,305.57782v-0.3956c0-1.18924,0.90552-2.2095,2.2059-2.2095\n        c0.45398,0,1.00461,0.29794,1.1604,0.75156l-0.02896-0.59549c0-0.59457-0.49344-1.09073-1.10248-1.09073\n        c-0.28235,0-0.69232,0.17001-1.0762,0.53821l-0.62021-0.94781c0.48053-0.43958,1.14432-0.75058,1.69641-0.75058\n        c1.20255,0,2.24802,1.0043,2.24802,2.25092v4.6315h-0.91745l-0.1149-0.72443c-0.14142,0.59769-0.86295,0.80875-1.21567,0.80875\n        C-301.63986,307.8446-302.65884,306.797-302.65884,305.57782z M-300.42398,306.69681c0.53674,0,1.10248-0.43896,1.10248-0.94815\n        v-0.69318c0-0.56732-0.49344-0.96378-1.10248-0.96378c-0.59396,0-1.09006,0.48273-1.09006,1.09052v0.3956\n        C-301.51404,306.18863-301.01794,306.69681-300.42398,306.69681z"/>\n        <path fill="#FFFFFF" d="M-295.93481,307.76028h-1.13022v-6.81284h0.88922l0.1424,0.66614\n        c0.28336-0.55182,0.80624-0.73572,1.21616-0.75085c0.56647-0.01401,1.31451,0.25461,1.66699,1.13306\n        c0.34079-0.87845,1.03333-1.13306,1.68546-1.13306c1.2157,0,2.20572,0.99191,2.20572,2.2518v4.64575h-1.13245v-4.64575\n        c0.01559-1.54349-2.2059-1.47281-2.2059,0v4.64575h-1.13147v-4.64575c0-0.59457-0.49438-1.10464-1.11731-1.10464\n        c-0.60806,0-1.08859,0.51007-1.08859,1.10464V307.76028z"/>\n    </g>\n</svg>\n'},function(t,e,n){"use strict";var o=n(56),i=n(837),r=n(536),a=n(183),s=n(123),l=n(540),u=n(865),c=n(545),h=n(869);n(31);i.inject();var p={findDOMNode:u,render:r.render,unmountComponentAtNode:r.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:o.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=c(t)),t?o.getNodeFromInstance(t):null}},Mount:r,Reconciler:a});t.exports=p},function(t,e,n){"use strict";(function(e){function o(t,e,n,o){if(t&&"object"==typeof t){var i=t,r=void 0===i[n];r&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return r(t,o,n),n}var r=(n(437),n(454));n(31);t.exports=i}).call(e,n(131))},function(t,e,n){"use strict";function o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in l)return s[t]=e[n];return""}var r=n(75),a={animationend:o("Animation","AnimationEnd"),animationiteration:o("Animation","AnimationIteration"),animationstart:o("Animation","AnimationStart"),transitionend:o("Transition","TransitionEnd")},s={},l={};r.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=i},function(t,e,n){"use strict";function o(t){return r.isValidElement(t)?void 0:i("143"),t}var i=n(29),r=n(122);n(7);t.exports=o},,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(133),r=o(i),a=function(t){return t?void _.delay(_.bind(this.init,this),t+20):void this.init()};a.prototype={init:function(){this._cache={},this._timeouts={},this.findLiveDataCharts()},findLiveDataCharts:function(){var t=this;$('div.moveable.chart div[id^="Chart_"], div.moveable.chart div[id^="map_"], div.moveable.chart table[id^="Chart_"]').each(function(e,n){var o,i,a=$(n).attr("id").split("_"),s=a.pop(),l=a.pop(),u="map"===l,c=r["default"].getEntity(s);if(void 0!==c&&(o=c.custom||c.model.get("custom")||{},t._cache[s]={chart:c,processing:!1,custom:o,isMap:u},o&&o.live&&o.live.enabled)){if(i=Number(o.live.refresh)||0,0===i)return;t.fetchLiveData(s)}})},fetchLiveData:function(t){var e=this,n=this._cache[t];n.processing||(n.processing=!0,$.ajax({url:"/api/live/data/"+t+"/"+n.custom.live.updated,success:function(o){o.error||(n.custom.live.updated=o.updated,o.data&&e.updateChart(t,o.data))},error:function(){},complete:function(){n.processing=!1;var o=Number(n.custom.live.refresh)||0;e._timeouts[t]=_.delay(function(){e.fetchLiveData(t)},o)}}))},updateChart:function(t,e){var n=this._cache[t];JSON.stringify(e)!==JSON.stringify(n.data)&&(n.data=e,n.isMap?this.updateMaps(n,e):this.updateInfogramCharts(n,e))},updateInfogramCharts:function(t,e){t.chart.updateData(e)},updateMaps:function(t,e){var n=t.chart;n.importArrayData(e),n.showDataOnMap(0,!1)},destroy:function(){for(var t in this._timeouts)clearTimeout(this._timeouts[t])}},e["default"]=a},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(1),a=o(r),s=n(21),l=o(s),u=n(10),c=n(480),h=n(605),p=n(1229),d=o(p),f=n(1225),g=n(185),m=o(g),v=n(629),y=o(v),b=n(1234),_=o(b);i=function(t){var e=n(457),o=n(484),i=n(1239),r=n(418),s=n(609);return function(t){var n=$("body"),p="true"===n.attr("data-password-protected"),g=n.attr("data-export"),v=n.attr("data-notracking");window.graphicID=n.attr("data-window-graphicID"),window.ts=n.attr("data-window-ts"),window.__viewMode=n.attr("data-window-__viewMode"),window.InfoCharts=r,window.app.profile.id=n.attr("data-user-id")?parseInt(n.attr("data-user-id")):null;var b;p?b=new e({block_id:window.graphicID}):(window.infographicData=e.prototype.parse(window.infographicData),b=new e(window.infographicData));var x="undefined"!=typeof window.__viewMode?window.__viewMode:"default",w="#graphic";"embed"===window.__viewMode&&(w="#middle");var S=function k(t){if("embed"===window.__viewMode&&0===window.innerWidth)return void setTimeout(function(){k(t)},500);var e=t.get("theme").getVersion(),o=Array.prototype.slice.call(arguments,0),i=function(){C.apply(null,o)};return b.get("password")&&n.attr("data-password",""),g?i():void s.loadFonts(e.getFontArr(),i)},C=function(e){var i=function(){};g&&(i=function(){$("iframe").each(function(t,e){var n=$(e),o=n.attr("src");o&&"//"===o.substring(0,2)&&n.attr("src","https:"+o)})});var r,s,p;if(1===e.get("type")){var b=(0,f.readInfographicData)(e),S=(0,u.fromJS)(b.externalData);p=c.EditorState.createFromJSONObject(b.content);var C=p.getPageSize().screenWidth,E=1;r=s=function(){E="web"===x?window.innerWidth<C?window.innerWidth/C:1:window.innerWidth/C,l["default"].render(a["default"].createElement(c.InfographicEditor,{editorState:p,readOnly:!0,onChange:function(){},zoom:E,renderItemContentsFn:d["default"].bind(this,e,S),selectorTypeFromElementFn:f.mapEntityToSelector}),document.querySelector(w),function(){(0,h.updateEditorState)(p)})}}else r=function(){$("#graphic").empty();var t=new o({model:e,container:w,viewMode:x});t.render(i)};r(),"web"===x&&$(window).on("horizontalResize",r),t&&t(e,p),g||v||Stats.track({graphicID:e.get("id"),userID:e.get("user_id")}),n.tooltip(),"web"!==x&&(new _["default"]({path:window.graphicID,realpath:window.location.pathname.substr(1),title:$("h1:first").text()},s).sendReady(),g||new y["default"](m["default"].delayVisualInitialization))},E=function(){new i({submit:function(t){b.fetch({data:{key:encodeURIComponent(t.password),ref:"web"},success:S,error:T})}}).render().$el.appendTo(n),n.attr("data-password","")},T=function(t,e){"password protected"===e.responseText&&E()};p?E():S(b)}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},,,function(t,e,n){"use strict";var o;o=function(t){var e=n(719),o=n(718),i=n(717),r=n(720),a=n(607),s=n(191),l=Backbone.Collection.extend({initialize:function(t,e){this.block_id=e.block_id},model:function u(t,n){var u;if("particle"===t.type)switch(t.id="p_"+t.particle_id,t.particle_type){case"quote":u=new r(t,n);break;case"bodytitle":u=new o(t,n);break;case"bodytext":u=new i(t,n);break;case"maintitle":u=new e(t,n);break;default:u=new Backbone.Model(t,n)}else"chart"===t.type?(t.id="c_"+t.chart_id,u=new s(t,n)):"media"===t.type&&(t.id="m_"+t.object_id,u=new a(t,n));return u}});return l}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(496),r=o(i),a=Object.create(r["default"]);e["default"]=a,function(t){this.setupChartOptions=function(){t.setupChartOptions.call(this),this.chartOptions.series.percent=!0}}.call(a,r["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(422),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.AreaStepped,this.instanceType="area-stepped",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.grid.vertical=!0,n.grid.horizontal=!0,e.grid===!1&&(n.grid.vertical=!1,n.grid.horizontal=!1),n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(498),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.BarGrouped,this.instanceType="bar-grouped",this.defaultCategoryHeight=20,this.defaultCategoryPadding=20,this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.categories.shape=e.style,n.categories.padding=e.groupedBarCategoryPadding||this.defaultCategoryPadding,void 0!==e.showInLineValuesOutside&&(n.axis[0].valuesOutside=e.showInLineValuesOutside),n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(398),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(){this.instanceClass=i.Charts.Bubble,this.instanceType="bubble"}.call(s)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(398),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(){this.instanceClass=i.Charts.Scatter,this.instanceType="dot-plot",this.setupChartSheetOptionsItem=function(){var t=a["default"].setupChartSheetOptionsItem.apply(this,arguments),e=t.axis[0];return delete e.minLimit,delete e.maxLimit,t}}.call(s)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(397),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.Pie,this.instanceType="pie",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e),o=this.charts&&this.charts.doughnut;return n.series.innerRadiusPercent=.666666,o&&o.innerRadiusPercent&&(n.series.innerRadiusPercent=o.innerRadiusPercent),n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(){this.instanceClass=a.Charts.Pyramid,this.instanceType="pyramid",this.setupChartOptions=function(){l["default"].setupChartOptions.call(this),r["default"].has(this.custom,"height")?this.chartOptions.height=parseInt(this.custom.height,10):this.chartOptions.height=this.defaultHeight;
},this.setupChartSheetOptionsItem=function(t){var e=void 0;e=r["default"].has(t,"dynamicShape")&&!r["default"].has(t,"regularEdge")?!t.dynamicShape:r["default"].has(t,"regularEdge")?t.regularEdge:!1;var n={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},legend:{enabled:r["default"].has(t,"showLegend")?t.showLegend:!1},pyramid:{showValues:r["default"].has(t,"showValues")?t.showValues:!1,showText:r["default"].has(t,"showText")?t.showText:!0,direction:r["default"].has(t,"direction")?t.direction:"down",endType:r["default"].has(t,"endType")?t.endType:"asis",regularEdge:e},axis:[{}]};return this.assignNumberFormatValues(n.axis[0],t),n}}.call(u)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(500),r=o(i),a=n(16),s=o(a),l=Object.create(r["default"]);e["default"]=l,function(t){this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return s["default"].has(n.categories,"categoryWidth")&&delete n.categories.categoryWidth,n.grid.verticalZeroHighlight=!1,n}}.call(l,r["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(397),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.Pie,this.instanceType="pie",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.series.innerRadius=0,n.series.outerRadiusVaries=!0,n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(501),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.Double,this.instanceType="double",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.series=[{type:"line"},{type:"line"}],e.smooth===!0&&(n.series[0].interpolation="monotone",n.series[1].interpolation="monotone"),n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(502),l=o(s),u=n(91),c=o(u),h=Object.create(l["default"]);e["default"]=h,function(){this.instanceClass=a.Charts.PictorialBar,this.instanceType="pictorial-bar",this.defaultHeight=100,this.setupChartOptions=function(){c["default"].setupChartOptions.call(this);var t=this.custom,e=this.chartOptions;r["default"].has(t,"height")?e.height=parseInt(t.height,10):e.height=this.defaultHeight,e.series.showText=r["default"].has(t,"showText")?t.showText:!0},this.setupChartOptionsStyle=function(){l["default"].setupChartOptionsStyle.call(this);var t=this.chartOptions,e=this.chartsLegacy,n=$.extend(!0,{},e.common,e.pictobar);if(t.style.axisTick["font-family"]="PT Sans Narrow, Arial Narrow",t.style.axisTick["font-size"]="60px",n&&n.cellTextWrapperOptions&&n.cellTextWrapperOptions.text&&n.cellTextWrapperOptions.text.labelFontStyle){var o=r["default"].pick(n.cellTextWrapperOptions.text.labelFontStyle,"font-family","font-weight","font-size");o["font-size"]=this.addPx(o["font-size"]),r["default"].merge(t.style.axisTick,o)}},this.setupChartSheetOptionsItem=function(t,e){var n=this.chartsLegacy,o=$.extend(!0,{},n.common,n.pictobar),i="#959595";o&&o.shapeStyleEmpty&&o.shapeStyleEmpty.fill&&(i=o.shapeStyleEmpty.fill),t.inactive&&(i=t.inactive);var r=$.extend(!0,[],this.themeColors,t.colors||this.colors);t.colors||void 0===e||(r=[r[e]]);var a={categories:{colors:r,inactiveColor:i},legend:{enabled:this.custom.showLabels!==!1}},s=t.path;return this.addToChartOptionsShapes(s),a.categories.shapes=[s],a}}.call(h)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=Object.create(l["default"]);e["default"]=u,function(){this.instanceClass=a.Charts.Pyramid,this.instanceType="pyramid",this.setupChartOptions=function(){l["default"].setupChartOptions.call(this),r["default"].has(this.custom,"height")?this.chartOptions.height=parseInt(this.custom.height,10):this.chartOptions.height=this.defaultHeight},this.setupChartSheetOptionsItem=function(t){var e=void 0;e=r["default"].has(t,"dynamicShape")&&!r["default"].has(t,"regularEdge")?!t.dynamicShape:r["default"].has(t,"regularEdge")?t.regularEdge:!1;var n={categories:{colors:$.extend(!0,[],this.themeColors,t.colors||this.colors)},legend:{enabled:r["default"].has(t,"showLegend")?t.showLegend:!1},pyramid:{showValues:r["default"].has(t,"showValues")?t.showValues:!1,showText:r["default"].has(t,"showText")?t.showText:!0,direction:r["default"].has(t,"direction")?t.direction:"up",endType:r["default"].has(t,"endType")?t.endType:"zero",regularEdge:e},axis:[{}]};return this.assignNumberFormatValues(n.axis[0],t),n}}.call(u)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(398),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.Scatter,this.instanceType="scatter",this.initVariables=function(){var e;t.initVariables.apply(this,arguments),this.data&&(e=[],this.data.forEach(function(t){if(e.push([]),this.transposeImport())e[e.length-1]=t.slice(0,3);else{var n=e[e.length-1];t.forEach(function(t){n.push(t.slice(0,3))})}},this),this.data=e)}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(397),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.SemiPie,this.instanceType="semi-pie",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e);return n.series.innerRadiusPercent=.6,n}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(396),a=o(r),s=n(91),l=o(s),u=n(16),c=o(u),h=Object.create(a["default"]);e["default"]=h,function(){this.instanceClass=i.Charts.StreamGraph,this.instanceType="stream-graph",this.setupChartOptions=function(){l["default"].setupChartOptions.call(this);var t=this.chartOptions,e=this.custom;c["default"].has(e,"height")?t.height=parseInt(e.height,10):t.height=this.defaultHeight,t.series.data=e.absoluteDistribution===!0?"absolute":"separate"},this.setupChartSheetOptionsItem=function(t){var e=a["default"].sheetOptionsItemDefaults.call(this,t),n=e.axis[0],o=e.axis[1];return n.title=t.xlabel?t.xlabel:"",o.title=t.ylabel?t.ylabel:"",t.smooth===!0&&(e.series[0].interpolation="monotone"),"number"==typeof t.ymin&&(o.minLimit=t.ymin),"number"==typeof t.ymax&&(o.maxLimit=t.ymax),this.assignNumberFormatValues(o,t),this.assignCategoryLabelLayout(e.categories,t),e}}.call(h)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(91),a=o(r),s=Object.create(a["default"]);e["default"]=s,function(t){this.instanceClass=i.Charts.Timer,this.instanceType="timer",this.setupChartOptions=function(){t.setupChartOptions.call(this),this.chartOptions.width=$(this.chartOptions.container).width(),this.chartOptions.animate=-1===["download","capture"].indexOf(this.chart.view.parent.viewMode)},this.setupChartOptionsStyle=function(){t.setupChartOptionsStyle.call(this);var e=this.theme.attributes.charts,n=$.extend(!0,{},this.themeFont.common,this.themeFont.label||{},this.charts.timer&&this.charts.timer.digits||{});this.chartOptions.font=n.fontFamily,this.colors[0]===this.themeColors[0]&&this.colors[1]===this.themeColors[1]?e&&e.timer?this.chartOptions.colors=[e.timer.digits&&e.timer.digits.color||this.colors[0],e.timer.units&&e.timer.units.color||this.colors[0]]:this.chartOptions.colors=[this.colors[0],this.colors[0]]:this.chartOptions.colors=this.colors}}.call(s,a["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(25),s=n(91),l=o(s),u=n(503),c=o(u),h=Object.create(c["default"]);e["default"]=h,function(t){this.instanceClass=a.Charts.Wordcloud,this.instanceType="wordcloud",this.setupChartSheetOptionsItem=function(e){var n=t.setupChartSheetOptionsItem.call(this,e),o={"[0,-90,90,0]":"horizontalVertical","[0]":"horizontal","[90,-90]":"vertical","[45,-45]":"any"};return n.axis=[{}],this.assignNumberFormatValues(n.axis[0],e),n.categories.textDirection=r["default"].has(e,"rotate")?o[e.rotate]:o["[0,-90,90,0]"],n.labels=$.extend(!0,{},this.charts&&this.charts.wordcloud&&this.charts.wordcloud.labels||{}),n}}.call(h,l["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return{addCategory:function(e){var n=t.categories.data,o=n.indexOf(e);return-1===o&&(o=n.length,n.push(e)),o},addSeries:function(n){var o=t.series[n];return o||(o=t.series[n]=a["default"].merge({},e),o.data||(o.data=[]),o.rawData||(o.rawData=[])),o}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=o(r);e["default"]=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(680),s=o(a),l=n(135),u=o(l),c=Object.create(s["default"]);e["default"]=c,function(t){this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{showLabels:!0},t.common);return n.showInLineValues=this.inlineVals,$.extend(!0,n,t.bubble,e),this.gridsettings(n,e),r["default"].isUndefined(e.rotateYLabels)||null==e.rotateYLabels||(r["default"].isUndefined(n._gridOptions)&&(n._gridOptions={}),n._gridOptions.rotateYLabels=n.rotateYLabels),this.gridsettings(n,e),this.axes=this.getAxes(),n},this.getAxes=function(){return t.getAxes.call(this,null,this.modifier)}}.call(c,u["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(673),s=o(a),l=Object.create(s["default"]);e["default"]=l,function(){this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{showLabels:!1},t.common);return n.showInLineValues=this.inlineVals,$.extend(!0,n,t.bubble,e),this.gridsettings(n,e),r["default"].isUndefined(e.rotateYLabels)||null==e.rotateYLabels||(r["default"].isUndefined(n._gridOptions)&&(n._gridOptions={}),n._gridOptions.rotateYLabels=n.rotateYLabels),this.gridsettings(n,e),this.axes=this.getAxes(),n},this.importArrayData=function(){var t=this.replaceQuot(this.data),e=[],n=this.colors,o=n.length,i=0,r=this.createGetGroup();void 0!==this.sheetIndex&&(t=[t[this.sheetIndex]]);for(var a=0,s=t.length;s>a;a++){i=0;for(var l=1,u=t[a],c=u.length;c>l;l++)for(var h=1,p=u[l],d=p.length;d>h;h++){var f=p[0];this.inlineVals&&(f=f+": "+p[h]);var g=this.sheetnames[a]||u[0][0];e.push({value:[[[u[0][h],p[0],this.toNumber(p[h])]]],valueString:p[h],name:f,color:n[i%o],group:r(g,a),category:u[0][0]}),e[e.length-1].id=e.length.toString(),i++}}return e}}.call(l)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(135),r=o(i),a=Object.create(r["default"]);e["default"]=a,function(t){this.initVariables=function(e){this.type="Candle",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{},t.common,t.candle,this.custom),o=this.colors;return"colored"===n.type?(n.shapeStyleUp={"stroke-opacity":0,fill:o[0]},n.shapeStyleDown={"stroke-opacity":0,fill:o[1]},n.lineStyleUp={"stroke-width":0,"stroke-opacity":0,fill:o[0]},n.lineStyleDown={"stroke-width":0,"stroke-opacity":0,fill:o[1]}):null!=n.blankfill&&(n.shapeStyleDown={fill:n.blankfill}),null!=e.hilo&&e.hilo&&(n.shapeStyleUp=n.shapeStyleDown={"stroke-opacity":0,"fill-opacity":0}),this.gridsettings(n,e),n},this.importArrayData=function(){var t,e,n,o,i,r,a,s,l,u,c,h,p=this.replaceQuot(this.data),d=[],f=this.colors,g=this.createGetGroup();for(void 0!==this.sheetIndex&&(p=[p[this.sheetIndex]]),t=0,e=p.length;e>t;t++)if(o=p[t],i=o.length){for(h=[],n=1;i>n;n++)r=o[n],r.length<5||(a=this.toNumber(r[1]),s=this.toNumber(r[2]),l=this.toNumber(r[3]),u=this.toNumber(r[4]),isNaN(a)||isNaN(s)||isNaN(l)||isNaN(u)||h.push([r[0],0,a,u,s,l]));c=d.push({value:[h],name:"",color:f[0],group:g(this.sheetnames[t]||o[0][0],t),labels:[o[0][1]||"Open",o[0][2]||"High",o[0][3]||"Low",o[0][4]||"Close"]}),d[c-1].id=c.toString()}return d}}.call(a,r["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(135),s=o(a),l=Object.create(s["default"]);e["default"]=l,function(t){this.initVariables=function(e){this.type="Gauge",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{},t.common,t.gauge,this.custom);return e.inactive&&(n.gaugeStyle={fill:e.inactive}),1===this.colors.length&&null!=n.gaugeFillStyle&&null!=n.gaugeFillStyle.fill&&(n.gaugeFillStyle.fill=this.colors[0]),n},this.importArrayData=function(){function t(t,e){if(!(t.length<2||(2===t.length&&(t[2]=[]),t.length<4))){r["default"].isUndefined(t[1][1])&&(t[1][1]=0),r["default"].isUndefined(t[2][1])&&(t[2][1]=100);var n=t[1][1],l=t[2][1],u=50,c="",h="";if(r["default"].isUndefined(t[3])||r["default"].isUndefined(t[3][1])||(u=t[3][1],null!==u&&(c=u.toString())),r["default"].isUndefined(t[4])||r["default"].isUndefined(t[4][1])||(h=t[4][1]),!isNaN(this.toNumber(n))&&!isNaN(this.toNumber(l))&&this.toNumber(n)!==!1&&this.toNumber(l)!==!1){n=this.toNumber(n),l=this.toNumber(l);var p=Math.abs(n-l);u=100*Math.abs(n-this.toNumber(u))/p}r["default"].isUndefined(u)||(null===n&&(n=0),null===l&&(l=0),o.push({value:[n,l,u],valueString:c,name:h,color:i[e%a],group:s(t[0][1],e)}),o[o.length-1].id=o.length.toString())}}var e=this.replaceQuot(this.data),n=this.custom,o=[],i=this.colors,a=i.length,s=this.createGetGroup();return n.singleColor&&(i=[this.colors[0]],a=i.length),e.length<2&&(e=this.spreadSingleSheet(e[0])),void 0!==this.sheetIndex?(t.call(this,e[this.sheetIndex],this.sheetIndex),o):(e.forEach(function(e,n){t.call(this,e,n)},this),o)}}.call(l,s["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(418),s=o(a),l=n(135),u=o(l),c=Object.create(u["default"]);e["default"]=c,function(t){this.initVariables=function(e){t.initVariables.call(this,e),this.type="Pictosize",this.animation=">"},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{defaultPath:"circlePath",showInLineValues:!0},t.common,t.pictosize,e);return r["default"].isUndefined(s["default"].Visuals.ShapeGenerator.Path[n.defaultPath])&&(n.defaultPath="circlePath"),null!=e.showInLineValues&&(n.showInLineValues=e.showInLineValues),n},this.importArrayData=function(){function t(t,e){for(var a=0,s=t.length,l=1;s>l;l++){var u=t[l],c=u.length;if(c){for(var h=1;2>h;h++){var p=t[0][h],d="default";isNaN(this.toNumber(u[h]))||(n.push({value:this.toNumber(u[h]),valueString:u[h].toString(),name:u[0],color:o[a%i],group:r(p,e),category:d}),n[n.length-1].id=n.length.toString())}a++}}}var e=this.replaceQuot(this.data),n=[],o=this.colors,i=o.length,r=this.createGetGroup();return e.length<2&&(e=this.spreadSingleSheet(e[0])),void 0!==this.sheetIndex&&(e=[e[this.sheetIndex]]),e.forEach(function(e,n){t.call(this,e,n)},this),n}}.call(c,u["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(135),r=o(i),a=Object.create(r["default"]);e["default"]=a,function(t){this.initVariables=function(e){this.type="Progress",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{},t.common,t.progress,this.custom);return n.height&&(this.dimensions[1]=n.height),e.inactive&&(n.backgroundInactive={fill:e.inactive}),null!=e.showInLineValues&&(this.inlineValues=e.showInLineValues),n},this.importArrayData=function(){function t(t,e){var a=0;if(t)for(var s=1,l=t.length;l>s;s++){var u=t[s],c=u.length;if(c){var h=1,p=u[h],d=this.toNumber(p);if(!isNaN(d)){var f=u[0];this.inlineValues&&(f+=": "+p);var g=n.push({value:d,valueString:p,name:f,color:o[a%i],group:r(t[0][h],e)});n[g-1].id=g.toString(),a++}}}}var e=this.replaceQuot(this.data),n=[],o=this.colors,i=o.length,r=this.createGetGroup();return e.length<2&&(e=this.spreadSingleSheet(e[0])),void 0!==this.sheetIndex&&(e=[e[this.sheetIndex]]),e.forEach(function(e,n){t.call(this,e,n)},this),n}}.call(a,r["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=o(i),a=n(135),s=o(a),l=Object.create(s["default"]);e["default"]=l,function(t){this.initVariables=function(e){this.type="Pie",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=$.extend(!0,{showInLineValues:this.inlineVals,type:"polar"},t.common,t.pie,this.custom);return this.arrayValuesSame(this.colors)&&(e.separator||(e.separator="#fff"),e.pieElementStyle={"stroke-width":1,stroke:e.separator}),this.inlineVals&&(e.showInLineValues=this.inlineVals,e.inTextStyle={"font-weight":700},e.inLinePointerStyle={"stroke-width":2}),e},this.importArrayData=function(){function t(t){for(var e=[],n=1,i=t.length;i>n;n++)for(var r=1,a=t[n],s=a.length;s>r;r++){var l=this.toNumber(a[r]);isNaN(l)||(void 0===e[r]&&(e[r]=0),"radial"===o.distribution?e[r]=Math.max(e[r],l):e[r]+=l)}return e}function e(t,e,n){for(var r=0,l=1,h=t.length;h>l;l++){var p=t[l],d=p.length;if(0!==d){for(var f=1;2>f;f++){var g=this.toNumber(p[f]),m="polar"===o.type;isNaN(g)||(i.push({value:m?100*g/e[f]:g,valueString:p[f],name:m&&u?p[0]+": "+p[f]:p[0],color:a[r%s],group:c(t[0][f],n)}),i[i.length-1].id=i.length.toString())}r++}}}var n=this.replaceQuot(this.data),o=this.instanceOpts,i=[],a=this.colors,s=a.length,l=-1!==["download","capture"].indexOf(this.chart.view.parent.viewMode),u=l&&this.custom&&r["default"].has(this.custom,"showInLineValues")&&this.custom.showInLineValues,c=this.createGetGroup();return n.length<2&&(n=this.spreadSingleSheet(n[0])),void 0!==this.sheetIndex&&(n=[n[this.sheetIndex]]),n.forEach(function(n,o){var i=t.call(this,n);e.call(this,n,i,o)},this),i}}.call(l,s["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(135),r=o(i),a=Object.create(r["default"]);e["default"]=a,function(t){this.initVariables=function(e){this.type="Bubble",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=$.extend(!0,{fixedSize:4,bubbleStyle:{"stroke-width":1.5,"stroke-opacity":1,fill:"white",opacity:1}},t.common,t.scatter,e);return n.showInLineValues=this.inlineVals,"undefined"!=typeof e.rotateYLabels&&null!=e.rotateYLabels&&("undefined"==typeof n._gridOptions&&(n._gridOptions={}),n._gridOptions.rotateYLabels=n.rotateYLabels),this.axes=this.getAxes(),this.gridsettings(n,e),n},this.importArrayData=function(){var t,e,n,o,i,r,a,s=this.replaceQuot(this.data),l=[],u=s.length,c=this.colors,h=c.length,p=0,d=[],f={},g=!0;for(t=0;u>t;t++)for(e=1,n=s[t],o=n.length;o>e;e++)isNaN(this.toNumber(n[e][1]))&&(g=!1);if(g){for(t=0;u>t;t++)for(d[t]=[],e=0,n=s[t],o=n.length;o>e;e++){for(i=n[e],r=i.length;5>r;r++)n[e][r]="";d[t][e]=[i[0],i[4],i[1],i[2],i[3]]}s=d}for(t=0,u=s.length;u>t;t++)for(e=1,n=s[t],o=n.length;o>e;e++)i=n[e],r=i.length,r>1&&"undefined"==typeof f[i[1]]&&(f[i[1]]=c[p%h],p++);for(t=0;u>t;t++)for(p=0,e=1,n=s[t],o=n.length;o>e;e++)if(i=n[e],r=i.length,!(4>r)){var m=this.toNumber(i[2]),v=this.toNumber(i[3]);a=r>4?i[4]:i[3],l.push({value:[[[m,v,this.toNumber(a)]]],valueString:i[0],name:i[1],color:f[i[1]],group:n[0][0],category:n[0][0]}),l[l.length-1].id=l.length.toString()}return l}}.call(a,r["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(135),r=o(i),a=Object.create(r["default"]);e["default"]=a,function(t){this.initVariables=function(e){this.type="Waterfall",t.initVariables.call(this,e)},this.setupChartOptions=function(){var t=this.chartOptions,e=this.custom,n=this.colors,o=$.extend(!0,{showInLineValues:this.inlineVals},t.common,t.waterfall);return o.shapeStyleUp={"stroke-opacity":0,fill:n[1]},o.shapeStyleDown={"stroke-opacity":0,fill:n[2]},$.extend(!0,o,e),this.gridsettings(o,e),o},this.importArrayData=function(){function t(t,e){var r=t.length,a=r-1,s=1,l=[],u=[];u.push(t[1][s]);for(var c=2;a>c;c++){var h=t[c],p=h.length,d=this.toNumber(h[s]);p>s&&!isNaN(d)&&(l.push([h[0],d]),u.push(h[s]))}u.push(t[a][s]);var f=n.push({value:[l],origValue:[u],startValue:this.toNumber(t[1][s]),startValueX:t[1][0],endValueX:t[a][0],color:o[0],group:i(t[0][s],e)});n[f-1].id=f.toString()}var e=this.replaceQuot(this.data),n=[],o=this.colors,i=this.createGetGroup();return e.length<2&&(e=this.spreadSingleSheet(e[0])),void 0!==this.sheetIndex&&(e=[e[this.sheetIndex]]),e.forEach(function(e,n){t.call(this,e,n)},this),n}}.call(a,r["default"])},function(t,e,n){"use strict";var o;o=function(){return function(){var t=this,e={canvasWidth:0,canvasHeight:0};t.inner=e,t.options={canvasSelectorId:"",canvasWidth:300,canvasHeight:300,canvasWidthDefault:0,canvasHeightDefault:0,addSpaceButtons:!0,addSpaceLabels:!0,additionalHeight:0,deepExtend:!0,canAnimate:!0,canAnimateGrid:!1,animationStyle:"bounce",animationStyleGrid:">",canGlowPath:!0,canGlowLabel:!0,glowStyle:{width:5,opacity:.6,fill:!1},light:!1,animationDuration:700,animationSequenceDuration:500,resizeCallback:null,loadedCallback:null,errorCallback:null,reThrowException:!0,loadDataAsync:!0},t.state={visuals:{items:[],counter:0},fontOffsetY:0,originalLoadedCallback:null},t.paper=null,t.options.getOriginalSize=function(){return{width:e.canvasWidth,height:e.canvasHeight}},t.resizeHeight=function(n,o,i){t.options.canvasWidthDefault=e.canvasWidth,t.options.canvasHeightDefault=e.canvasHeight+(t.options.addSpaceButtons?n:0)+(t.options.addSpaceLabels?o:0)+(i||0),t.options.canvasWidth=t.options.canvasWidthDefault,t.options.canvasHeight=t.options.canvasHeightDefault,t.resize(t.options.canvasWidth,t.options.canvasHeight)},t.resizeWidth=function(e){t.options.canvasWidthDefault=e,t.options.canvasWidth=t.options.canvasWidthDefault,t.inner.canvasWidth=t.options.canvasWidthDefault,$("#"+t.options.canvasSelectorId).width(t.options.canvasWidth),t.paper.setSize(t.options.canvasWidth,t.options.canvasHeight)},t.loadedCallback=function(){t.resize(),t.state.originalLoadedCallback&&t.state.originalLoadedCallback()},t.init=function(n){return $.browser.msie&&parseInt($.browser.version,10)<9&&(t.state.fontOffsetY=2,t.options.canGlow=!1),t.options=$.extend(t.options,n),t.options.canvasWidthDefault=t.options.canvasWidth,t.options.canvasHeightDefault=t.options.canvasHeight,t.state.originalLoadedCallback=t.options.loadedCallback,t.options.loadedCallback=t.loadedCallback,e.canvasWidth=t.options.canvasWidthDefault,e.canvasHeight=t.options.canvasHeightDefault,$("#"+t.options.canvasSelectorId).width(t.options.canvasWidth),t.paper=Raphael(t.options.canvasSelectorId,t.options.canvasWidth,t.options.canvasHeight),t.bindEvents(),t},t.addVisual=function(e,n,o,i,r,a){n&&(n._labelWrapperOptions||(n._labelWrapperOptions=n.legendWrapperOptions),n._labelTextOptions||(n._labelTextOptions=n.legendOptions),n._buttonWrapperOptions||(n._buttonWrapperOptions=n.buttonWrapperOptions),n._buttonTextOptions||(n._buttonTextOptions=n.buttonOptions));var s=new e(t).init(n);return s.loadData(o,i,!0,r,a),s.id=++t.state.visuals.counter,t.state.visuals.items.push(s),s},t.resize=function(e,n){"undefined"==typeof e&&"undefined"==typeof n?$("#"+t.options.canvasSelectorId).width()===t.options.canvasWidth&&$("#"+t.options.canvasSelectorId).height()===t.options.canvasHeight||(t.paper.setSize(t.options.canvasWidth,t.options.canvasHeight),$("#"+t.options.canvasSelectorId).width(t.options.canvasWidth),t.options.resizeCallback&&t.options.resizeCallback({width:t.options.canvasWidth,height:t.options.canvasHeight})):(t.options.canvasWidth=e,t.options.canvasHeight=n)},t.getCenter=function(){return{x:t.options.canvasWidth/2,y:t.options.canvasHeight/2}},t.bindEvents=function(){},t.eventing={},t.getMousePosition=function(t){try{return t||(t=event),{x:t.clientX+$(document).scrollLeft()||0,y:t.clientY+$(document).scrollTop()||0}}catch(e){}return null}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return{setAbs:function(t){_.each(t,function(t){t.value=Math.abs(t.value)})},getGroups:function(t){return _.uniq(_.reduce(t,function(t,e){return t.push(e.group),t},[]))},getActiveData:function(t,e,n){var o=this.getGroups(t);return e&&o.length>1?(n=n||o[0],_.filter(t,function(t){return t.group==this},n)):t},getLabelsUniq:function(t,e){var n=" | ",o=[],i=1,r=null,a=null;return _.each(t,function(t){var s=""+t.name;s&&s.length>=32&&(s=s.substring(0,32)+"..."),r=_.find(o,function(o){return(e?o.name==s+n+t.valueString:o.name==s)&&o.color==t.color}),r?t.objectId=r.objectId:(""!==t.name&&(a={name:s,color:t.color,objectId:i},e&&(a.name+=n+t.valueString),o.push(a)),t.objectId=i,i++)}),o},getPropertyValuesUniq:function(t,e){return _.uniq(_.pluck(t,e))},getValueSum:function(t){return _.reduce(t,function(t,e){return t+e.value},0)},getValueSumMax:function(t,e){for(var n=this.getLabelsUniq(t,e),o=[],i=function(t){return t.name==n[a].name&&t.color==n[a].color},r=function(t,e){return isNaN(t)?e.value:Math.max(t,e.value)},a=0;a<n.length;a++)o.push(_.reduce(_.filter(t,i),r,NaN));return _.reduce(o,function(t,e){return t+e},0)},sortByCategory:function(t){var e=_.sortBy(t,function(t){return t.category.toLowerCase()});return e},setDefaults:function(t){_.each(t,function(t){t.group=t.group||"",t.category=t.category||"",t.name=t.name||"",t.inValueString=t.inValueString||t.valueString||""})},copyDataArray:function(t){return t?_.map(t,function(t){return $.extend(!0,{},t)}):null},getGridDefinition:function(t,e,n){if(e)return _.find(t,function(t){return null===n||t.group==n}).gridDef;var o=[[],[]];return _.each(t,function(t){o[0].push(t.gridDef[0]),o[1].push(t.gridDef[1])}),[_.uniq(_.flatten(o[0])),_.uniq(_.flatten(o[1]))]},getAxesTitle:function(t,e){if(t){var n=_.find(t,function(t){return null===e||t.group==e});if(n)return n.gridDef}return[null,null]},transformStackedPoints:function(t,e){var n,o="undefined"==typeof o?!1:o,i=[];if(_.each(t,function(t){_.each(t.value,function(t){_.each(t,function(t){o&&(t[1]=Math.abs(t[1])),i.push(t[0])})})}),e&&e.length>0)for(i=[],n=0;n<e.length;n++)i.push(e[n]);var r=!1,a={};if("number"==typeof i[0])i=_.uniq(_.sortBy(i,function(t){return t}),!0);else{for(i=_.uniq(i),n=0;n<i.length;n++)a[i[n].toString()]=n+1;r=!0}var s,l=function(t){return t[0]===i[s]};_.each(t,function(t){for(var e=0;e<t.value.length;e++){var n,o=[];for(s=0;s<i.length;s++)n=_.find(t.value[e],l),n&&o.push(n);t.value[e]=o}});var u=[];if(r)for(n=0;n<i.length;n++)u[a[i[n].toString()]]=0;else for(n=0;n<i.length;n++)u[i[n].toString()]=0;if(r)for(n=0;n<i.length;n++)i[n]=a[i[n]];var c,h,p;_.each(t,function(t){t.originalValue=[];for(var e=function(t){c[r][0]="number"==typeof c[r][0]?c[r][0]:a[c[r][0].toString()],c[r+1][0]="number"==typeof c[r+1][0]?c[r+1][0]:a[c[r+1][0].toString()],c[r][0]!=c[r+1][0]&&c[r][0]<t&&t<c[r+1][0]&&(c[r][1]==c[r+1][1]?h.push([t,c[r][1],!0]):h.push([t,c[r][1]+(c[r][0]-t)*(c[r+1][1]-c[r][1])/(c[r][0]-c[r+1][0]),!0]),p.push([0,0,!0]))},n=0;n<t.value.length;n++){c=t.value[n],t.originalValue.push([]),h=[],p=[];for(var o=$.extend(!0,[],c),r=0;r<c.length-1;r++)h.push(c[r]),p.push($.extend(!0,[],o[r])),_.each(i,e);h.push(c[c.length-1]),p.push($.extend(!0,[],o[c.length-1])),t.value[n]=h,t.originalValue[n]=p}});var d={min:NaN,max:NaN};_.each(t,function(t){_.each(t.value,function(t){for(var e=0;e<t.length;e++)t[e]=t[e].slice(),t[e][1]=t[e][1]+u[t[e][0].toString()],u[t[e][0].toString()]=t[e][1],d.min=isNaN(d.min)?t[e][1]:Math.min(t[e][1],d.min),d.max=isNaN(d.max)?t[e][1]:Math.max(t[e][1],d.max)})});var f=[];for(n=t.length-1;n>=0;n--)f.push(t[n]);return{data:this.copyDataArray(f),minMax:d}},transformStreamPoints:function(t,e,n,o){e=e||"center",n="undefined"==typeof n?!0:n;var i,r=[];if(_.each(t,function(t){_.each(t.value,function(t){_.each(t,function(t){n&&(t[1]=Math.abs(t[1])),r.push(t[0])})})}),o&&o.length>0)for(r=[],i=0;i<o.length;i++)r.push(o[i]);var a=!1,s={};if("number"==typeof r[0])r=_.uniq(_.sortBy(r,function(t){return t}),!0);else{for(r=_.uniq(r),i=0;i<r.length;i++)s[r[i].toString()]=i+1;a=!0}var l,u=function(t){return t[0]===r[l]};_.each(t,function(t){for(var e=0;e<t.value.length;e++){var n,o=[];for(l=0;l<r.length;l++)n=_.find(t.value[e],u),n&&o.push(n);t.value[e]=o}});var c=[],h={};if(a)for(i=0;i<r.length;i++)c[s[r[i].toString()]]=0,h[s[r[i].toString()]]=0;else for(i=0;i<r.length;i++)c[r[i].toString()]=0,h[r[i].toString()]=0;if(a)for(i=0;i<r.length;i++)r[i]=s[r[i]];var p,d,f;_.each(t,function(t){t.originalValue=[];for(var e=function(t){p[i][0]="number"==typeof p[i][0]?p[i][0]:s[p[i][0].toString()],p[i+1][0]="number"==typeof p[i+1][0]?p[i+1][0]:s[p[i+1][0].toString()],p[i][0]!=p[i+1][0]&&p[i][0]<t&&t<p[i+1][0]&&(p[i][1]==p[i+1][1]?d.push([t,p[i][1],!0]):d.push([t,p[i][1]+(p[i][0]-t)*(p[i+1][1]-p[i][1])/(p[i][0]-p[i+1][0]),!0]),f.push([0,0,!0]))},n=0;n<t.value.length;n++){p=t.value[n],t.originalValue.push([]),d=[],f=[];for(var o=$.extend(!0,[],p),i=0;i<p.length-1;i++)d.push(p[i]),f.push($.extend(!0,[],o[i])),_.each(r,e);d.push(p[p.length-1]),f.push($.extend(!0,[],o[p.length-1])),t.value[n]=d,t.originalValue[n]=f}}),_.each(t,function(t){_.each(t.value,function(t){for(var e=0;e<t.length;e++)h[t[e][0].toString()]+=t[e][1]})});var g=0;for(i=0;i<r.length;i++)h[r[i].toString()]=-h[r[i].toString()]/2,g=Math.max(Math.abs(h[r[i].toString()]),g);for(i=0;i<r.length;i++)"center"==e?h[r[i].toString()]+=g:h[r[i].toString()]=0;var m={min:0,max:2*g};return _.each(t,function(t){t.range=[],_.each(t.value,function(e,n){t.range[n]=[];for(var o=0,i=e.length;i>o;o++)t.range[n][o]=[e[o][0],{bottom:h[e[o][0].toString()],top:h[e[o][0].toString()]+e[o][1]},e[o][2]],e[o][1]=h[e[o][0].toString()]+e[o][1],e.push([e[o][0],h[e[o][0].toString()]]),h[e[o][0].toString()]=t.range[n][o][1].top})}),{data:t,minMax:m,offset:"center"==e?g:0}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return{addProperty:function(t,e,n){return t[e]=n,t},constrainValue:function(t,e,n){return n>e?e:t>n?t:n},getHoverColor:function(t,e){var n;return e?(n=_.clone(Raphael.color(t)),n.r=.5*n.r+127,n.g=.5*n.g+127,n.b=.5*n.b+127,Raphael.rgb(n.r,n.g,n.b)):(n=_.clone(Raphael.rgb2hsb(t)),n.b>.5?n.b-=.17:n.b+=.17,Raphael.hsb2rgb(n).hex)},parseFontStyle:function(t){var e=$.extend({},t);if($.browser.msie&&parseInt($.browser.version,10)<9){var n="'Arial Narrow'",o=(e["font-size"]||"16")+"px",i=e["font-weight"]||"normal";delete e["font-family"],delete e["font-size"],delete e["font-weight"],delete e.font,e.font="normal normal "+i+" "+o+" "+n}return e},Guid:{New:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},Empty:"00000000-0000-0000-0000-000000000000"},forEachDeep:function(t,e){if(t.length)for(var n=0;n<t.length;n++)this.forEachDeep(t[n],e);else e(t)},getContrastColor:function(t,e){if(!e)return t;var n=Raphael.rgb2hsb(t),o=Raphael.rgb2hsb(e);if(n.h==o.h&&n.s==o.s){var i=Math.abs(n.b-o.b);.2>i&&(n.b>.5?n.b-=1-i:n.b+=1-i,t=Raphael.hsb2rgb(n).hex)}return t},
getContrastYIQ:function(t,e,n){t=Raphael.color(t).hex,e=Raphael.color(e||"#000000").hex,n=Raphael.color(n||"#ffffff").hex;var o=parseInt(t.substr(1,2),16),i=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16),a=(299*o+587*i+114*r)/1e3;return a>=128?e:n},linePathToCurvedPath:function(t,e,n,o){var i,r,a=[];if(o){for(r=0;r<t.length;r++)"LL"==t[r][0]&&a.length>0&&("RR"==a[a.length-1][0]||"LL"==a[a.length-1][0])?("LL"==a[a.length-1][0]&&(a[a.length-1][0]="RR"),a[a.length-1].push(t[r][1],t[r][2])):(a.length>0&&"RR"==a[a.length-1][0]&&(i=a[a.length-1],a.push(["LL",i[i.length-2],i[i.length-1]])),a.push(t[r]));a.length>0&&"RR"==a[a.length-1][0]&&(i=a[a.length-1],a.push(["LL",i[i.length-2],i[i.length-1]]))}else a=t;for(r=0;r<a.length;r++)if(2==a[r][0].length&&(a[r][0]=a[r][0].charAt(0)),n&&"R"==a[r][0]){var s=[];s.push("R");for(var l=(a[r].length-1)/2;l>0;l--)s.push(a[r][2*l-1]),s.push(a[r][2*l]);a[r]=s}return a},addPadding:function(t,e,n){t=t.toString();var o="-"==t.charAt(0);return o&&(t=t.replace("-","")),n=n||"0",(o?"-":"")+(t.length<e?this.addPadding(n+t,e,n):t)}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){function t(){this.setLoadAndDispose=function(t){t.onmouseoutFuncList=null,t.loadData=function(e,n,o,i,r){t.root.options.loadDataAsync?setTimeout(function(){t.loadDataActual(e,n,o,i,r)},0):t.loadDataActual(e,n,o,i,r)},t.loadDataActual=function(){if(t.dispose(),t.root.options.errorCallback)try{t._loadDataActual.apply(t,arguments)}catch(e){if(t.root.options.errorCallback.call(t.root,e),t.root.options.reThrowException)throw e}else t._loadDataActual.apply(t,arguments)},t.dispose=function(){if(t.onmouseoutFuncList)for(var e=0;e<t.onmouseoutFuncList.length;e++)t.onmouseoutFuncList[e](null)}}}return new t}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(424);return function(t){var n=new e(t);return n.options.showArea=!0,n.options.showLines=!0,n.options.gridPostOptions={gridToFront:!1,labelsToFront:!0,baseLinesToFront:!1,gridHide:!1,labelsHide:!1,baseLinesHide:!1},n.options.pathStyle["stroke-width"]=0,n}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.setOpacity=function(t,e){return"rgba("+t.r+","+t.g+","+t.b+","+e+")"},e.options={showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,fixedSize:0,bubbleMaxSizePercentage:.1,absoluteDistribution:!1,gridPostOptions:{gridToFront:!1,labelsToFront:!0,baseLinesToFront:!1},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},bubbleStyle:{"stroke-width":0,"stroke-opacity":0},bubbleOpacity:.7,axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridOptions:{}},e.state={interactionsEnabled:!1,axesTitle:null},e.visualSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o,i,r){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;o&&_.each(e.data,function(t){_.each(t.value,function(t){_.each(t,function(t){t[2]=Math.abs(t[2])})})}),InfoCharts.Helper.Data.setDefaults(e.data);var a=InfoCharts.Helper.Data.getGroups(e.data);n=n||a[0]||null;var s=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var l=0,u=e.root.getCenter();if(o&&e.options.showGroups&&e.options.hasGroups&&a.length>1&&new InfoCharts.Visuals.RadioButtons({groups:a,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.grid&&(e.grid.dispose(),e.grid=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var c=InfoCharts.Helper.Data.getLabelsUniq(s);c.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),c),l=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,l),e.labels&&e.labels.setPosition({x:u.x,y:e.root.options.canvasHeight-l/2+e.options.panelMarginY}),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var h=0,p=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(h=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(p=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.background.attr({x:0+h,y:e.buttonHeight,width:e.root.options.canvasWidth-h*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:e.root.options.canvasHeight-e.buttonHeight-l-p}),e.background.bb=e.background.getBBox(),h&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:h/2,y:e.background.bb.y+e.background.bb.height/2})),p&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+p/2}));var d=NaN,f=0,g=0,m=[],v=[],y=null,b=1,x=0;if(_.each(s,function(t){_.each(t.value,function(t){_.each(t,function(t){d=isNaN(d)?t[2]:Math.max(d,t[2]),f+=t[2],g++})})}),!e.options.fixedSize){e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(!0,{},e.options._gridOptions,{pos:[0+h,e.buttonHeight],size:[e.root.options.canvasWidthDefault-h*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-l],offset:[{start:0,end:0},{start:0,end:0}],forceDataMargin:!1,canResize:!1}),e.options.absoluteDistribution?e.data:s);var w=Math.max(e.grid.state.maxVal[0],e.grid.state.maxVal[1]);e.grid=null,b=w*e.options.bubbleMaxSizePercentage,x=b}e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(!0,{},e.options._gridOptions,{pos:[0+h,e.buttonHeight],size:[e.root.options.canvasWidthDefault-h*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-l-p],offset:[{start:0,end:0},{start:0,end:0}],dataMarginSize:x,forceDataMargin:!0,canResize:!1}),e.options.absoluteDistribution?e.data:s),e.grid.createGrid();var S=[];b=.08*Math.min(e.grid.options.size[0],e.grid.options.size[1]),_.each(s,function(t){_.each(t.value,function(n){_.each(n,function(n){m=e.grid.getValuePosition(n),e.options.fixedSize||(v=Math.sqrt(n[2]/d)*b),S.push({size:e.options.fixedSize?e.options.fixedSize:v,x:m[0].value,y:m[1].value,data:t,coords:n})})})}),S=_.sortBy(S,function(t){return t.size}),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var C=[];e.onmouseoutFuncList=[];var E;for(E=S.length-1;E>=0;E--){e.root.options.canAnimate?(y=e.root.paper.circle(S[E].x,S[E].y,0),C.push({obj:y,anim:Raphael.animation({r:S[E].size},e.root.options.animationDuration,e.root.options.animationStyle).delay(e.root.options.animationDuration/S.length*E)})):y=e.root.paper.circle(S[E].x,S[E].y,S[E].size);var T=Raphael.color(S[E].data.color);y.attr($.extend({fill:e.setOpacity(T,e.options.bubbleOpacity),stroke:S[E].data.color},e.options.bubbleStyle)),e.visualSet.push(y);var k={data:{name:S[E].data.name+" ("+S[E].coords[2]+")",valueString:S[E].data.valueString+" ("+S[E].coords[0]+" | "+S[E].coords[1]+")",objectId:S[E].data.objectId},path:y},M=$.proxy(e.eventing.onMouseOver,k),O=$.proxy(e.eventing.onMouseOut,k);e.onmouseoutFuncList.push(O),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+k.data.objectId,M),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+k.data.objectId,O)),y.mouseover(M),y.mousemove($.proxy(e.eventing.onMouseMove,k)),y.mouseout(O)}e.grid.postDisplayMods(e.options.gridPostOptions);var I=0;for(E=0;E<C.length;E++)C[E].obj.stop(),C[E].obj.animate(C[E].anim),I=Math.max(I,C[E].anim.ms+C[E].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},I),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill");var n=Raphael.color(this.path.attr("fill"));this.path.attr({fill:e.setOpacity(n,1)}),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.path.attr("stroke")})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.path.attr("stroke"))},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,absoluteDistribution:!1,gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-opacity":0,"stroke-width":0,stroke:"none"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridOptions:{forceDataMargin:!0},shapeStyleUp:{"stroke-opacity":1},shapeStyleDown:{"stroke-opacity":1,fill:"#ffffff"},lineStyleUp:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},lineStyleDown:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},barPercentage:.7,style:"bar-bar",styleUp:"bar-bar",styleDown:"bar-bar",lineWidth:2,lineWidthDeviation:2,showDeviation:!0},e.visualSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.gridDef=null,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.options.smooth&&(e.options.complexAnimations=!1),e},e.state={currentState:{line:{path:null,attr:null},points:[]},newState:{line:{path:null,attr:null},points:[]},minMax:null,interactionsEnabled:!1,axesTitle:null},e._loadDataActual=function(t,n,o,i){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=[e.options.xlabel,e.options.ylabel],_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0,l=e.root.getCenter();if(o&&e.options.showGroups&&e.options.hasGroups&&r.length>1&&new InfoCharts.Visuals.RadioButtons({groups:r,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.grid&&(e.grid.dispose(),e.grid=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var u=InfoCharts.Helper.Data.getLabelsUniq(a);u.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),u),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:l.x,y:e.root.options.canvasHeight-s/2}),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var c=0,h=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(c=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(h=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.background.attr({x:0+c,y:e.buttonHeight,width:e.root.options.canvasWidth-c*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:e.root.options.canvasHeight-e.buttonHeight-s-h}),e.background.bb=e.background.getBBox(),c&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:c/2,y:e.background.bb.y+e.background.bb.height/2})),h&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+h/2})),e.state.minMax={min:NaN,max:NaN};var p=function(t){var n=Math.min(t[2],t[3],t[4],t[5]),o=Math.max(t[2],t[3],t[4],t[5]);e.state.minMax.min=isNaN(e.state.minMax.min)?n:Math.min(e.state.minMax.min,n),e.state.minMax.max=isNaN(e.state.minMax.max)?o:Math.max(e.state.minMax.max,o)};_.each(a,function(t){for(var e=0;e<t.value.length;e++)_.each(t.value[e],p)});var d=null;d={},d.minMax={min:NaN,max:NaN},e.state.minMax=e.state.minMax||d.minMax,e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[c,e.buttonHeight],size:[e.root.options.canvasWidthDefault-c*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-s-h],offset:[{start:0,end:0},{start:0,end:0}],minMax:[{min:NaN,max:NaN},e.state.minMax],canResize:!1}),e.options.absoluteDistribution?e.data:a),d.data&&(a=d.data),e.grid.createGrid(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var f,g,m=[],v=0,y=e.options.absoluteDistribution?e.data:a;for(f=0;f<y.length;f++)for(g=0;g<y[f].value[0].length;g++)m.push(y[f].value[0][g][0]);v=_.uniq(m).length;var b,x=(e.root.options.canvasWidthDefault-c*(e.options.axesTitleBalanceHorizontalSpaceing?2:1))/(v+1)*e.options.barPercentage/a.length,w=[],S=e.grid.getGridPositionBase(),C=[e.options.styleUp,e.options.styleDown,"bar-bar"],E=[];for(f=0;f<C.length;f++)b=C[f]||e.options.style,E[f]="ipg-"+b,InfoCharts.Visuals.ShapeGenerator.Anim[b]?InfoCharts.Visuals.ShapeGenerator.Anim[b](e.root.paper,E[f]):(b=b.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,E[f],b));for(e.options.shapeStyleUp["stroke-width"]=e.options.lineWidth,e.options.shapeStyleDown["stroke-width"]=e.options.lineWidth,e.onmouseoutFuncList=[],f=0;f<a.length;f++){b=a[f].styleName||e.options.style;var T=null;null!==b&&(T="ipg-"+b,InfoCharts.Visuals.ShapeGenerator.Anim[b]?InfoCharts.Visuals.ShapeGenerator.Anim[b](e.root.paper,T):(b=b.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,T,b)));for(var k=T,M=a[f].labels,O=0;O<a[f].value.length;O++)for(g=0;g<a[f].value[O].length;g++){var I=a[f].value[O][g],P=e.root.paper.path(),L=I[2]-I[3]>0;T=null!==k?k:E[I[2]-I[3]>0?0:1];var D=M[0]+": "+I[4]+", "+M[1]+": "+I[5]+", "+M[2]+": "+I[3]+", "+M[3]+": "+I[2],A={data:{name:a[f].name,valueString:D,objectId:a[f].objectId},path:P},N=e.grid.getPositionAuto([I[0],I[2]]),B=e.grid.getPositionAuto([I[0],I[3]]),j=$.proxy(e.eventing.onMouseOver,A),R=$.proxy(e.eventing.onMouseOut,A);e.onmouseoutFuncList.push(R),P.attr($.extend({fill:a[f].color,stroke:a[f].color},L?e.options.shapeStyleUp:e.options.shapeStyleDown)),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+A.data.objectId,j),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+A.data.objectId,R)),P.mouseover(j),P.mousemove($.proxy(e.eventing.onMouseMove,A)),P.mouseout(R),P.attr(InfoCharts.Helper.Misc.addProperty({},T,[N[0].value+x/2-x*a.length/2+x*f,S[1].value,x,0])),e.visualSet.push(P);var H=InfoCharts.Helper.Misc.addProperty({},T,[N[0].value+x/2-x*a.length/2+x*f,B[1].value,x-e.options.lineWidth,N[1].value-B[1].value]),F=e.root.paper.path();if(e.visualSet.push(F),e.options.showDeviation){var z=e.grid.getPositionAuto([I[0],I[4]]),V=e.grid.getPositionAuto([I[0],I[5]]),U=InfoCharts.Helper.Misc.addProperty($.extend({fill:a[f].color,stroke:a[f].color,opacity:0},L?e.options.lineStyleUp:e.options.lineStyleDown),"ipg-bar-bar",[N[0].value+x/2-x*a.length/2+x*f,V[1].value,e.options.lineWidthDeviation,z[1].value-V[1].value]);F.attr(U),F.insertBefore(P)}var W=$.proxy(e.afterAnimation,{data:a[f],shape:P,line:F,actionCounter:e.state.actionCounter});e.root.options.canAnimate?w.push({obj:P,anim:Raphael.animation(H,e.root.options.animationDuration,e.root.options.animationStyle,W).delay(g/a[f].value[O].length*e.root.options.animationSequenceDuration)}):(P.attr(H),W())}}e.grid.postDisplayMods(e.options.gridPostOptions);var G=0;for(g=0;g<w.length;g++)w[g].obj.stop(),w[g].obj.animate(w[g].anim),G=Math.max(G,w[g].anim.ms+w[g].anim.del);e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),setTimeout(function(){e.state.interactionsEnabled=!0},G),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){this.line.attr({opacity:1})},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t,e){var n=this;n.root=t,n.parent=e,n.labelArray=[],n.bg=null,n.set=null,n.height=0,n.rotate=!1,n.options={backgroundStyle:{fill:"#F3F3F3","stroke-width":0,"stroke-opacity":0,stroke:"none"},wrapper:{marginX:2,marginY:0},text:{paddingX:0,paddingY:1,enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"}}},n.init=function(t,e,o){o=o||!1,n.options=$.extend(n.root.options.deepExtend,n.options,t);var i,r=n.parent.options.barMaxWidth,a=InfoCharts.Helper.Data.getPropertyValuesUniq(e,"category"),s=n.parent.background.bb.width-n.parent.grid.state.axisSize[1];i=o?s/a.length*n.parent.options.barSpaceFraction:s/e.length*n.parent.options.barSpaceFraction,i>1&&(i=Math.floor(i)),i>r&&(i=r),s-=o?i*a.length:i*e.length;for(var l=s/2*n.parent.options.chartDistribution.canvasMargin,u=s/2/(n.parent.options.showcategories?a.length:1)*n.parent.options.chartDistribution.groupMargin,c=s/2/e.length*n.parent.options.chartDistribution.barMargin,h=l+n.parent.grid.state.axisSize[1]+n.parent.background.bb.x,p=0,d=n.root.paper.set(),f=function(t){return!n.parent.options.showcategories||t.category==a[g]},g=0;g<(n.parent.options.showcategories?a.length:1);g++){var m,v=_.filter(e,f);m=o?1*c*2+1*i+2*u:v.length*c*2+v.length*i+2*u;for(var y=a[g].toString().split(" "),b=[],x=0;x<y.length;x++)b.push({name:y[x]||"",color:null});var w=new InfoCharts.Visuals.Wrapper(n.root).init(InfoCharts.Visuals.Text,$.extend(n.options.wrapper,{maxWidth:.95*m}),n.options.text,b);w.bb=w.set.getBBox(),n.labelArray.push({x:h+m/2,y:0,label:w}),d.push(w.set),n.parent.options.norotate||w.bb.height<i+c?p=Math.max(p,w.bb.height||0):(n.rotate=!0,p=Math.max(p,w.bb.width||0)),h+=m}return n.height=p,n.bg=n.root.paper.rect(n.parent.background.bb.x,0,n.parent.background.bb.width,n.height).attr(n.options.backgroundStyle),d.insertAfter(n.bg),d.push(n.bg),n.set=d,n},n.setPosition=function(t){for(var e=0;e<n.labelArray.length;e++)n.rotate?n.labelArray[e].label.setPositionVertical({x:n.labelArray[e].x+t.x,y:n.labelArray[e].y+t.y}):n.labelArray[e].label.setPosition({x:n.labelArray[e].x+t.x,y:n.labelArray[e].y+t.y});n.bg.transform([["T",t.x,t.y-n.height/2]])},n.dispose=function(){n.set.remove()}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t,e){var n=this;n.root=t,n.parent=e,n.labelArray=[],n.bg=null,n.set=null,n.height=0,n.rotate=!1,n.options={backgroundStyle:{fill:"#F3F3F3","stroke-width":0,"stroke-opacity":0,stroke:"none"},wrapper:{marginX:2,marginY:0},text:{paddingX:0,paddingY:1,enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{"stroke-width":0}}},n.init=function(t,e,o){o=o||!1,n.options=$.extend(n.root.options.deepExtend,n.options,t);var i,r=n.parent.options.barMaxWidth,a=InfoCharts.Helper.Data.getPropertyValuesUniq(e,"category"),s=n.parent.background.bb.height-n.parent.options.textStyle["font-size"];i=o?s/a.length*n.parent.options.barSpaceFraction:s/e.length*n.parent.options.barSpaceFraction,i>1&&(i=Math.floor(i)),i>r&&(i=r),s-=o?i*a.length:i*e.length;for(var l=s/2*n.parent.options.chartDistribution.canvasMargin,u=s/2/(n.parent.options.showcategories?a.length:1)*n.parent.options.chartDistribution.groupMargin,c=s/2/e.length*n.parent.options.chartDistribution.barMargin,h=l,p=0,d=n.root.paper.set(),f=function(t){return!n.parent.options.showcategories||t.category==a[g]},g=0;g<(n.parent.options.showcategories?a.length:1);g++){var m,v=_.filter(e,f);m=o?1*c*2+1*i+2*u:v.length*c*2+v.length*i+2*u;for(var y=a[g].toString().split(" "),b=[],x=0;x<y.length;x++)b.push({name:y[x]||"",color:null});var w=new InfoCharts.Visuals.Wrapper(n.root).init(InfoCharts.Visuals.Text,$.extend(n.options.wrapper,{maxWidth:.95*m}),n.options.text,b);w.bb=w.set.getBBox(),n.labelArray.push({x:0,y:h+m/2,label:w}),d.push(w.set),i+c>=w.bb.height?p=Math.max(p,w.bb.height):(p=Math.max(p,w.bb.width),n.rotate=!0),h+=m}return n.height=p,n.bg=n.root.paper.rect(0,0,n.height,n.parent.background.bb.height).attr(n.options.backgroundStyle),d.insertAfter(n.bg),d.push(n.bg),n.set=d,n},n.setPosition=function(t){for(var e=0;e<n.labelArray.length;e++)n.rotate?n.labelArray[e].label.setPosition({x:n.labelArray[e].x+t.x,y:n.labelArray[e].y+t.y}):n.labelArray[e].label.setPositionVertical({x:n.labelArray[e].x+t.x,y:n.labelArray[e].y+t.y});n.bg.transform([["T",t.x-n.height/2,t.y]])},n.dispose=function(){n.set.remove()}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},dotStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none",fill:"#444444"},fontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","text-anchor":"end",cursor:"default","font-weight":"bold","stroke-width":0,"stroke-opacity":0,stroke:"none"},fontStyleText:{"font-family":"PT Sans Narrow, Arial Narrow","text-anchor":"center",cursor:"default",fill:"#6F6F6F","stroke-width":0,"stroke-opacity":0,stroke:"none"},padding:15,spaceing:20,textMarginTop:5,showSubText:!0,valuesToShow:{years:!0,month:!0,days:!0,hours:!0,minutes:!0,seconds:!0},timerItemNames:["Years","Month","Days","Hours","Minutes","Seconds"],timerItemNamesAsIs:["Year","Month","Day","Hours","Minutes","Seconds"]},e.state={interactionsEnabled:!1,actionCounter:0},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&r.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),r),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:i.x,y:e.buttonHeight/2}))),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var u=[],c=e.background.bb,h={x:c.x+e.options.padding,y:c.y+e.options.padding,x2:c.x2-e.options.padding,y2:c.y2-e.options.padding,width:c.width-2*e.options.padding,height:c.height-2*e.options.padding};e.options.itemsTotal=e.getItemsTotals();var p,d=a[0].value.search(/\[up\]/g)>-1?"up":a[0].value.search(/\[down\]/g)>-1?"down":"asis",f=(h.width-e.options.spaceing*(e.options.itemsTotal-1))/(e.options.itemsTotal+("asis"==d?1:0)),g=200,m=0,v=0;do{if(e.options.fontStyle["font-size"]=g,p=e.root.paper.text(0,0,"00").attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.fontStyle)),p.bb=p.getBBox(),p.bb.width<=f&&p.bb.height<=h.height){m=p.bb.width,v=p.bb.height,p.remove();break}p.remove(),g-=2}while(g>1);var y;if(e.timer)for(e.timer.timer&&clearTimeout(e.timer.timer),y=0;y<e.timerItems.length;y++){var b=e.timerItems[y];e.timer.shape[b]&&(e.timer.shape[b].stop(),e.timer.shape[b].remove())}var x=0;if(e.options.showSubText){g=30;var w=_.reduce(e.options.timerItemNames,function(t,e){return e.length>t.length?e:t},"");do{if(e.options.fontStyleText["font-size"]=g,p=e.root.paper.text(0,0,w).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.fontStyleText)),p.bb=p.getBBox(),p.bb.width<=m){x=p.bb.height,p.remove();break}p.remove(),g-=2}while(g>1);e.options.fontStyleText["font-size"]+=4}e.options.timeTextHeight=v,e.options.labelHeight=s,e.options.labHeight=x,e.options.center=i,e.options.box=h,e.timer={timer:"asis"!=d?setTimeout(e.onTick,1e3):null,dirty:{years:0,month:0,days:0,hours:0,minutes:0,seconds:0},dateTime:new Date(a[0].value.replace("["+d+"]","")),direction:d,value:{},valuePrev:{},shape:{},textWidth:m,y:h.y+h.height/2,style:$.extend({fill:a[0].color,stroke:a[0].color},e.options.fontStyle)},e.getBoxX(),e.drawText(),e.onTick(!0);var S=0;for(y=0;y<u.length;y++)u[y].obj.stop(),u[y].obj.animate(u[y].anim),S=Math.max(S,u[y].anim.ms+u[y].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},S),e.root.options.loadedCallback&&e.root.options.loadedCallback(),e.root.options.canAnimate?setTimeout(function(){e.onTick(!0)},1):clearTimeout(e.timer.timer)},e.getItemsTotals=function(){return e.options.valuesToShow.years+e.options.valuesToShow.month+e.options.valuesToShow.days+e.options.valuesToShow.hours+e.options.valuesToShow.minutes+e.options.valuesToShow.seconds},e.getBoxX=function(){e.timer.x=e.options.box.x+(e.options.box.width-(e.timer.textWidth*e.options.itemsTotal+e.options.spaceing*(e.options.itemsTotal-1)))/2+e.timer.textWidth+("asis"==e.timer.direction&&e.options.valuesToShow.years?e.timer.textWidth/2:0)},e.drawText=function(){var t=0;e.visualSet.remove();for(var n=0;n<e.timerItems.length;n++)if(e.options.valuesToShow[e.timerItems[n]]){if(e.options.showSubText){var o="asis"==e.timer.direction?e.options.timerItemNamesAsIs[n]:e.options.timerItemNames[n];
e.visualSet.push(e.root.paper.text(e.timer.x+t*(e.timer.textWidth+e.options.spaceing)-e.timer.textWidth/2,e.timer.y+e.options.timeTextHeight/2+e.options.textMarginTop,o).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.fontStyleText)))}if(t<e.options.itemsTotal-1){var i,r,a,s,l=Math.round(e.timer.textWidth/9);i=r=Math.round(e.timer.x+t*(e.timer.textWidth+e.options.spaceing)+e.options.spaceing/2-l/2),a=Math.round(e.timer.y-l),s=Math.round(e.timer.y+l),"asis"==e.timer.direction?(n>2&&5>n&&(e.visualSet.push(e.root.paper.rect(i,a,l,l).attr(e.options.dotStyle)),e.visualSet.push(e.root.paper.rect(r,s,l,l).attr(e.options.dotStyle))),2>n&&(a=Math.round(e.timer.y+e.options.timeTextHeight/4),e.visualSet.push(e.root.paper.rect(i,a,l,l).attr(e.options.dotStyle)))):(e.visualSet.push(e.root.paper.rect(i,a,l,l).attr(e.options.dotStyle)),e.visualSet.push(e.root.paper.rect(r,s,l,l).attr(e.options.dotStyle)))}t++}e.options.showSubText&&(e.root.resizeHeight(e.buttonHeight,e.options.labelHeight,e.options.labHeight+e.options.textMarginTop),e.labels&&e.labels.setPosition({x:e.options.center.x,y:e.root.options.canvasHeight-e.options.labelHeight/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-e.options.labelHeight}))},e.afterAnimation=function(){},e.timer=null,e.timerItems=["years","month","days","hours","minutes","seconds"];var n;e.onTick=function(t){switch(e.timer.direction){case"up":n=new Date(Math.max(0,new Date-e.timer.dateTime));break;case"down":n=new Date(Math.max(0,e.timer.dateTime-new Date));break;case"asis":n=e.timer.dateTime}"asis"==e.timer.direction?e.timer.value={years:n.getFullYear(),month:n.getMonth()+1,days:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds()}:e.timer.value={years:-1970+n.getUTCFullYear(),month:n.getUTCMonth(),days:-1+n.getUTCDate(),hours:n.getUTCHours(),minutes:n.getUTCMinutes(),seconds:n.getUTCSeconds()};for(var o=0,i=0;i<e.timerItems.length;i++){for(var r=e.timerItems[i],a=0;a<e.timerItems.length;a++){var s=e.timerItems[a];if(0!==e.timer.value[s]||"seconds"===s)break;e.options.valuesToShow[e.timerItems[a]]=!1}e.options.itemsTotal=e.getItemsTotals(),e.getBoxX(),e.drawText(),e.options.valuesToShow[e.timerItems[i]]&&(e.timer.dirty[r]=e.timer.value[r]!=e.timer.valuePrev[r],e.timer.dirty[r]&&(e.timer.shape[r]&&(e.timer.shape[r].stop(),e.timer.shape[r].remove()),e.timer.shape[r]=e.root.paper.text(e.timer.x+o*(e.timer.textWidth+e.options.spaceing),e.timer.y,InfoCharts.Helper.Misc.addPadding(e.timer.value[r],2)).attr(InfoCharts.Helper.Misc.parseFontStyle(e.timer.style)),e.root.options.canAnimate&&(e.timer.shape[r].attr({opacity:0}),e.timer.shape[r].animate({opacity:1},600,e.root.options.animationStyle))),o++)}e.timer.valuePrev=$.extend({},e.timer.value);var l=$("#"+e.root.options.canvasSelectorId),u=l.length>0;!t&&u&&(e.timer.timer=setTimeout(e.onTick,1e3))},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.opts.remove(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.root.options.canGlowPath){var n=$.extend({color:e.eventing.helper.preHoverColor[this.data.objectId]},e.root.options.glowStyle);InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow||(t.myGlow=t.glow(n),e.visualSet.push(t.myGlow))})}e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t)})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.opts.setPosition(e.root.getMousePosition(t))},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.opts.remove(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.root.options.canGlowPath&&InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow&&(t.myGlow.remove(),t.myGlow=null)}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,gaugeMargins:15,needleRadius:15,innerRadiusKoeficient:.7,needleRadiusKoeficient:.07,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},showText:!0,gaugeStyle:{"stroke-width":1,stroke:"transparent",fill:"#E9E9E9"},gaugeFillStyle:{"stroke-width":1,stroke:"#C9C9C9"},gaugeNeedleStyle:{"stroke-width":0,"stroke-opacity":0,fill:"#484848",stroke:"none"},_gaugeTextOptions:{paddingX:0,paddingY:3,enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":17,"text-anchor":"start",fill:"#7D7D7D",cursor:"default"},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,opacity:0,stroke:"none"}},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.visualSet=null,e.visualSubSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.state={currentState:{gauge:{path:null,attr:null},gaugeFill:{path:null,attr:null},gaugeNeedle:{path:null,attr:null}},newState:{gauge:{path:null,attr:null},gaugeFill:{path:null,attr:null},gaugeNeedle:{path:null,attr:null}},interactionsEnabled:!1},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.options._gaugeTextOptions.labelFontStyle["text-anchor"]="start",e.visualSet=e.root.paper.set(),e.visualSubSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),InfoCharts.Visuals.ShapeGenerator.Anim["gauge-gauge"](e.root.paper,"ipg-gauge-gauge"),InfoCharts.Visuals.ShapeGenerator.Anim["gauge-needle"](e.root.paper,"ipg-gauge-needle"),e},e._loadDataActual=function(t,n,o){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var i=InfoCharts.Helper.Data.getGroups(e.data);n=n||i[0]||null;var r=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.visualSubSet.remove(),e.visualSubSet=e.root.paper.set(),e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var a=0,s=e.root.getCenter();if(o&&e.options.showGroups&&e.options.hasGroups&&i.length>1&&new InfoCharts.Visuals.RadioButtons({groups:i,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(r,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-a}),e.background.bb=e.background.getBBox();var u=r[0],c=new InfoCharts.Visuals.Text(e.root,null).init({name:u.value[0],color:"#FFFFFF"},e.options._gaugeTextOptions),h=new InfoCharts.Visuals.Text(e.root,null).init({name:u.value[1],color:"#FFFFFF"},e.options._gaugeTextOptions),p=Math.min(e.background.bb.height,e.background.bb.width/2)*e.options.needleRadiusKoeficient,d=Math.min(e.background.bb.height,e.background.bb.width/2)-e.options.gaugeMargins-p,f=d*e.options.innerRadiusKoeficient,g=e.background.bb.x+e.background.bb.width/2,m=e.background.bb.y+d+(e.background.bb.height-d)/2-c.box.height/2,v=Math.PI/180,y=180-180*InfoCharts.Helper.Misc.constrainValue(.001,99.999,Math.abs(u.value[2]))/100;c.setPosition({x:g+(f+(d-f)/2)*Math.cos(-180*v),y:m+(f+(d-f)/2)*Math.sin(-180*v)+c.box.height/2}),h.setPosition({x:g+(f+(d-f)/2)*Math.cos(-0*v),y:m+(f+(d-f)/2)*Math.sin(-0*v)+h.box.height/2}),e.state.currentState.gauge.path=e.state.currentState.gauge.path||e.root.paper.path(),e.state.currentState.gaugeFill.path=e.state.currentState.gaugeFill.path||e.root.paper.path(),e.state.currentState.gaugeNeedle.path=e.state.currentState.gaugeNeedle.path||e.root.paper.path(),u.color&&$.extend(!0,e.options.gaugeFillStyle,{fill:u.color}),e.root.options.canAnimate?(e.state.currentState.gauge.attr||(e.state.currentState.gauge.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,179.999,0],fill:u.color},e.options.gaugeStyle),e.state.currentState.gaugeFill.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,180,179.999],fill:u.color},e.options.gaugeFillStyle),e.state.currentState.gaugeNeedle.attr=$.extend({"ipg-gauge-needle":[g,m,d+p,179.999,p],fill:u.color},e.options.gaugeNeedleStyle),e.state.currentState.gauge.path.attr(e.state.currentState.gauge.attr),e.state.currentState.gaugeFill.path.attr(e.state.currentState.gaugeFill.attr),e.state.currentState.gaugeNeedle.path.attr(e.state.currentState.gaugeNeedle.attr)),e.state.newState=e.state.currentState,e.state.newState.gauge.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,y,0],fill:u.color},e.options.gaugeStyle),e.state.newState.gaugeFill.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,180,y],fill:u.color},e.options.gaugeFillStyle),e.state.newState.gaugeNeedle.attr=$.extend({"ipg-gauge-needle":[g,m,d+p,y,p],fill:u.color},e.options.gaugeNeedleStyle),e.state.newState.gauge.path.stop(),e.state.newState.gauge.path.animate(e.state.newState.gauge.attr,e.root.options.animationDuration,e.root.options.animationStyle),e.state.newState.gaugeFill.path.stop(),e.state.newState.gaugeFill.path.animate(e.state.newState.gaugeFill.attr,e.root.options.animationDuration,e.root.options.animationStyle),e.state.newState.gaugeNeedle.path.stop(),e.state.newState.gaugeNeedle.path.animate(e.state.newState.gaugeNeedle.attr,e.root.options.animationDuration,e.root.options.animationStyle)):(e.state.newState=e.state.currentState,e.state.newState.gauge.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,y,0],fill:u.color},e.options.gaugeStyle),e.state.newState.gaugeFill.attr=$.extend({"ipg-gauge-gauge":[g,m,f,d,180,y],fill:u.color},e.options.gaugeFillStyle),e.state.newState.gaugeNeedle.attr=$.extend({"ipg-gauge-needle":[g,m,d+p,y,p],fill:u.color},e.options.gaugeNeedleStyle),e.state.newState.gauge.path.attr(e.state.newState.gauge.attr),e.state.newState.gaugeFill.path.attr(e.state.newState.gaugeFill.attr),e.state.newState.gaugeNeedle.path.attr(e.state.newState.gaugeNeedle.attr)),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*")),e.onmouseoutFuncList=[];var b={data:{name:u.name,valueString:u.valueString,objectId:u.objectId},path:e.state.newState.gaugeFill.path},x=$.proxy(e.eventing.onMouseOver,b),w=$.proxy(e.eventing.onMouseOut,b);e.onmouseoutFuncList.push(w),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+b.data.objectId,x),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+b.data.objectId,w)),e.state.newState.gaugeFill.path.unbindAll(),e.state.newState.gaugeFill.path.mouseover(x),e.state.newState.gaugeFill.path.mousemove($.proxy(e.eventing.onMouseMove,b)),e.state.newState.gaugeFill.path.mouseout(w),e.visualSubSet.push(c.set),e.visualSubSet.push(h.set),e.root.options.canAnimate||(e.visualSet.push(e.state.newState.gauge),e.visualSet.push(e.state.newState.gaugeFill),e.visualSet.push(e.state.newState.gaugeNeedle)),e.state.currentState=e.state.newState,e.state.newState=null,setTimeout(function(){e.state.interactionsEnabled=!0},e.root.options.animationDuration),e.options.showText||(c.dispose(),h.dispose()),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};o=function(){return function(t){var e=this;e.root=t,e.options={pos:[0,0],minGridlineCount:[4,3],offset:[{start:0,end:0},{start:0,end:0}],size:[e.root.options.canvasWidthDefault,e.root.options.canvasHeightDefault],zeroValues:[{top:1,bottom:-1},{top:1,bottom:-1}],valueType:["number","number"],format:[{prefix:"",sufix:""},{prefix:"",sufix:""}],hideGrid:[!1,!1],hideLines:[!1,!1],minMax:[{min:NaN,max:NaN},{min:NaN,max:NaN}],gridDef:[[],[]],labelOffset:2,invert:!1,canResize:!0,showGridOnEdge:!1,forceDataMargin:!1,dataMarginSize:5e-7,typeAutoDetect:!0,canAnimate:!1,labelXToBottom:!0,rotateYLabels:0,fontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},lineStyle:{"stroke-width":1,stroke:"#A6A6A6","stroke-dasharray":"."},marginLineStyle:{"stroke-width":3,stroke:"White"},baseLineStyle:{"stroke-width":1,stroke:"#959595"},range:[{min:NaN,max:NaN},{min:NaN,max:NaN}],autoZoom:!1},e.state={axisSize:[0,0],offset:[{start:0,end:0},{start:0,end:0}],pow:null,maxSize:[0,0],startValue:[0,0],endValue:[0,0],koeficient:[1,1],maxVal:[NaN,NaN],minVal:[NaN,NaN],empty:[!1,!1],labelXToBottom:!1,gridLabels:e.root.paper.set(),gridLines:e.root.paper.set(),gridLinesBorder:e.root.paper.set(),gridBaseLines:e.root.paper.set(),baseVal:[0,0],range:[{min:NaN,max:NaN},{min:NaN,max:NaN}]},e.textBuffer=[[],[]],e.baseLineBuffer=[],e.valueMap=[{},{}],e.gridMap=[{},{}],e.baseLine=null,e.set=null,e.getValuePositionY=function(t){var n=1,o=(-e.valueMap[n][t].valueGrid+e.state.startValue[n])*e.state.koeficient[n]+e.options.pos[n]+e.state.offset[n].start,i=(-e.state.baseVal[n]+e.state.startValue[n])*e.state.koeficient[n]+e.options.pos[n]+e.state.offset[n].start;return{value:o,baseline:i,height:o-i,dev:o>i?1:-1}},e.getValuePositionX=function(t,n){var o=0,i=(e.valueMap[o][t].valueGrid-e.state.endValue[o])*e.state.koeficient[o]+e.options.pos[o]+e.state.offset[o].start,r=(e.state.baseVal[o]-e.state.endValue[o])*e.state.koeficient[o]+e.options.pos[o]+e.state.offset[o].start,a=i>r?1:-1;return n&&n>0&&i==r&&(a=1),{value:i,baseline:r,height:i-r,dev:a}},e.getValuePosition=function(t){for(var n,o,i=[],r=0;2>r;r++){switch(r){case 0:n=(e.valueMap[r][t[r]].valueGrid-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(e.state.baseVal[r]-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start;break;case 1:n=(-e.valueMap[r][t[r]].valueGrid+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(-e.state.baseVal[r]+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start}i[r]={value:n,baseline:o,data:e.valueMap[r][t[r]]}}return i},e.getGridPosition=function(t){for(var n,o,i=[],r=0;2>r;r++){switch(r){case 0:n=(t[r]-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(e.state.baseVal[r]-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start;break;case 1:n=(-t[r]+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(-e.state.baseVal[r]+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start}i[r]={value:n,baseline:o,data:e.gridMap[r][t[r]]}}return i},e.getPositionAuto=function(t){for(var n,o,i=[],r=0;2>r;r++){var a="undefined"==typeof e.valueMap[r][t[r]],s=a?t[r]:e.valueMap[r][t[r]].valueGrid,l=a?e.gridMap[r][t[r]]:e.valueMap[r][t[r]];switch(r){case 0:n=(s-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(e.state.baseVal[r]-e.state.endValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start;break;case 1:n=(-s+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start,o=(-e.state.baseVal[r]+e.state.startValue[r])*e.state.koeficient[r]+e.options.pos[r]+e.state.offset[r].start}i[r]={value:n,baseline:o,data:l}}return i},e.getGridPositionBase=function(){return e.getPositionAuto([e.state.baseVal[0],e.state.baseVal[1]])},e.postDisplayMods=function(t){t.gridToFront&&e.state.gridLines.toFront(),t.labelsToFront&&e.state.gridLabels.toFront(),t.baseLinesToFront&&e.state.gridBaseLines.toFront(),t.gridHide&&(e.state.gridLines.hide(),e.state.gridLinesBorder.hide()),t.labelsHide&&e.state.gridLabels.hide(),t.baseLinesHide&&e.state.gridBaseLines.hide()},e.initGridMap=function(t){var n={},o={};if(e.options.gridDef[t].length>0)for(var i=0;i<e.options.gridDef[t].length;i++){var r={valueOriginal:e.options.gridDef[t][i],valueString:e.options.format[t].prefix+e.options.gridDef[t][i]+e.options.format[t].sufix,valueGrid:i+1};n[i+1]=r,o[e.options.gridDef[t][i]]=r}return{gridmap:n,valuegrid:o}},e.init=function(t,n,o){e.set=e.root.paper.set(),e.options=$.extend(e.root.options.deepExtend,e.options,t);var r,a,s=0,l=null;if(o){switch(r=1,o){case"y":s=1;break;case"x":s=0}e.options.typeAutoDetect&&(e.options.valueType[s]=n[0]?i(n[0].value):e.options.valueType[s]),e.options.gridDef[s].length>0?(a=e.initGridMap(s),e.valueMap[s]=a.valuegrid,e.gridMap[s]=a.gridmap,e.state.maxVal[s]=e.options.gridDef[s].length,e.state.minVal[s]=1):_.each(n,function(t){l={valueOriginal:t.value,valueString:e.options.format[s].prefix+t.value+e.options.format[s].sufix,valueGrid:"number"==e.options.valueType[s]?t.value:r++},e.valueMap[s][l.valueOriginal]=l,e.gridMap[s][l.valueGrid]=l,e.state.maxVal[s]=isNaN(e.state.maxVal[s])?l.valueGrid:Math.max(e.state.maxVal[s],l.valueGrid),e.state.minVal[s]=isNaN(e.state.minVal[s])?l.valueGrid:Math.min(e.state.minVal[s],l.valueGrid)})}else{r=[1,1];var u=function(t){_.each(t.value,function(t){_.each(t,function(t){e.valueMap[s][t[s]]||(l={valueOriginal:t[s],valueString:e.options.format[s].prefix+t[s]+e.options.format[s].sufix,valueGrid:"number"==e.options.valueType[s]?t[s]:r[s]++},e.valueMap[s][l.valueOriginal]=l,e.gridMap[s][l.valueGrid]=l,e.state.maxVal[s]=isNaN(e.state.maxVal[s])?l.valueGrid:Math.max(e.state.maxVal[s],l.valueGrid),e.state.minVal[s]=isNaN(e.state.minVal[s])?l.valueGrid:Math.min(e.state.minVal[s],l.valueGrid))})})};for(s=0;2>s;s++)e.options.typeAutoDetect&&(e.options.valueType[s]=n[0]&&n[0].value[0]&&n[0].value[0][0]?i(n[0].value[0][0][s]):e.options.valueType[s]),e.options.gridDef[s].length>0?(a=e.initGridMap(s),e.valueMap[s]=a.valuegrid,e.gridMap[s]=a.gridmap,e.state.maxVal[s]=e.options.gridDef[s].length,e.state.minVal[s]=1):_.each(n,u)}return"number"!=e.options.valueType[0]&&(e.state.maxVal[0]+=1),"number"!=e.options.valueType[1]&&(e.state.maxVal[1]+=1),e.options.forceDataMargin&&("number"!=e.options.valueType[0]&&(e.state.maxVal[0]-=e.options.dataMarginSize),"number"!=e.options.valueType[1]&&(e.state.maxVal[1]-=e.options.dataMarginSize)),e.state.maxSize=[2*e.options.fontStyle["font-size"]+2*e.options.labelOffset,2*e.options.fontStyle["font-size"]+2*e.options.labelOffset],e.baseLine=e.root.paper.set(),e.state.maxVal[0]=isNaN(e.options.minMax[0].max)?e.state.maxVal[0]:e.options.minMax[0].max,e.state.minVal[0]=isNaN(e.options.minMax[0].min)?e.state.minVal[0]:e.options.minMax[0].min,e.state.maxVal[1]=isNaN(e.options.minMax[1].max)?e.state.maxVal[1]:e.options.minMax[1].max,e.state.minVal[1]=isNaN(e.options.minMax[1].min)?e.state.minVal[1]:e.options.minMax[1].min,e},e.getPower=function(t){for(var e=10;e>=-10;e--)if(t-t%Math.pow(10,e)!==0)return e},e.createGrid=function(t){t="undefined"==typeof t?!0:t,e.textBuffer=[[],[]],e.baseLineBuffer=[[0,0],[0,0]],e.baseOffset=[[1,1],[1,1]];var n,o,i,r=[],a=[];for(n=0;2>n;n++)e.options.showGridOnEdge&&(e.options.pos[n]+=1,e.options.size[n]-=2),!e.options.forceDataMargin||0===e.state.maxVal[n]&&0===e.state.minVal[n]||(e.state.maxVal[n]+=e.options.dataMarginSize,(0===n||1===n&&0!==e.state.minVal[n])&&(e.state.minVal[n]-=e.options.dataMarginSize)),e.options.autoZoom&&(e.options.range[n]={min:e.state.minVal[n],max:e.state.maxVal[n]}),o=e.state.maxVal[n]>0?e.state.maxVal[n]:0,i=e.state.minVal[n]<0?e.state.minVal[n]:0,o=isNaN(e.options.range[n].max)?o:e.options.range[n].max,i=isNaN(e.options.range[n].min)?i:e.options.range[n].min,0===o&&0===i&&(o=e.options.zeroValues[n].top,i=e.options.zeroValues[n].bottom),o==i&&(o>0&&i>0?o+=1:0>o&&0>i?i-=1:o+=1),r[n]=o,a[n]=i;for(e.state.labelXToBottom=e.options.labelXToBottom&&(0===a[1]||r[1]>0&&a[1]>0),e.state.labelXToBottom&&(e.options.size[1]-=e.options.fontStyle["font-size"]+2*e.options.labelOffset+3),n=0;2>n;n++){o=r[n],i=a[n];var s;s=0!==o&&0!==i&&(o>0&&i>0||0>o&&0>i)?Math.abs(Math.abs(o)-Math.abs(i)):Math.abs(o)+Math.abs(i),0===s&&(s=-2),e.state.pow=e.getPower(.5*s);var l=Math.pow(10,e.state.pow),u=s/l,c=e.options.size[n]/e.state.maxSize[n];u>c&&(l*=Math.ceil(u/c),u=s/l),u<=e.options.minGridlineCount[n]&&"number"==e.options.valueType[n]&&(l/=2,e.state.pow-=1,u=s/l,u>c&&(l*=Math.ceil(u/c))),0===n&&(e.state.numOfLines=u),0>=l&&(l=.25);var h=o%l;o=Math.ceil(o/l)*l,i=Math.floor(i/l)*l,0===n&&10===l&&0!==h&&(o-=l-h),o=Math.round(o*Math.pow(10,Math.abs(e.state.pow)))/Math.pow(10,Math.abs(e.state.pow)),i=Math.round(i*Math.pow(10,Math.abs(e.state.pow)))/Math.pow(10,Math.abs(e.state.pow)),0>o&&0>i&&(e.state.baseVal[n]=o),o>0&&i>0&&(e.state.baseVal[n]=i),s=0!==o&&0!==i&&(o>0&&i>0||0>o&&0>i)?Math.abs(Math.abs(o)-Math.abs(i)):Math.abs(o)+Math.abs(i);var p=e.options.size[n]/s;e.state.startValue[n]=o,e.state.endValue[n]=i,e.state.koeficient[n]=p;var d=Math.round(s/l);switch(n){case 0:e.state.offset[n].start=e.options.offset[n].start-(e.state.baseVal[n]-i)*p;break;case 1:e.state.offset[n].start=e.options.offset[n].start-(-e.state.baseVal[n]+o)*p}if(e.state.offset[n].start=e.state.offset[n].start>0?e.state.offset[n].start:0,0===n&&isNaN(i)||1===n&&isNaN(o))break;for(var f=0,g=NaN,m=NaN;!0;f++){var v=[1,1];switch(n){case 0:g=i+f*l,g=Math.round(g*Math.pow(10,Math.abs(e.state.pow)))/Math.pow(10,Math.abs(e.state.pow)),m=Math.abs(g-i)*p+e.state.offset[n].start+e.options.pos[n];break;case 1:g=o-f*l,g=Math.round(g*Math.pow(10,Math.abs(e.state.pow)))/Math.pow(10,Math.abs(e.state.pow)),m=Math.abs(g-o)*p+e.state.offset[n].start+e.options.pos[n]}if(1===n&&i>=g||0===n&&g>=o){switch(g==e.state.baseVal[n]&&(1==n&&e.options.labelXToBottom||(e.baseOffset[+!n][n]=-1)),0===n&&g==o&&(v[0]=-1),1==n&&g==i&&(v[1]=-1),t&&(e.options.showGridOnEdge||g==e.state.baseVal[n]||0!==f&&f!=d)&&e.drawLine(m,g,v,n),n){case 0:e.state.offset[n].end=e.options.offset[n].end-(m-((e.state.baseVal[n]-i)*p+e.state.offset[n].start+e.options.pos[n]));break;case 1:e.state.offset[n].end=e.options.offset[n].end-(m-((-e.state.baseVal[n]+o)*p+e.state.offset[n].start+e.options.pos[n]))}e.state.offset[n].end=e.state.offset[n].end>0?e.state.offset[n].end:0;break}t&&(e.options.showGridOnEdge||g==e.state.baseVal[n]||0!==f&&f!=d)&&e.drawLine(m,g,v,n)}}t&&(e.state.gridBaseLines.toFront(),e.drawText(),e.options.canResize&&e.root.resize(e.root.options.canvasWidthDefault+e.state.offset[0].start+e.state.offset[0].end,e.root.options.canvasHeightDefault+e.state.offset[1].start+e.state.offset[1].end))},e.drawText=function(){for(var t,n=e.textBuffer[0].length>0&&e.textBuffer[1].length>0,o=0,i="number"==e.options.valueType[0]?1:0,r=0;2>r;r++){e.state.axisSize[r]=0;for(var a=0;a<e.textBuffer[r].length;a++)if(e.options.hideGrid[0]||e.options.hideGrid[1]||!n||r!=i||e.textBuffer[r][a].value!=e.state.baseVal[r]){if(e.options.invert&&1==r&&(e.textBuffer[r][a].text=-1*e.textBuffer[r][a].text),t=0===e.textBuffer[r][a].value?e.textBuffer[r][a].text:e.options.format[r].prefix+e.textBuffer[r][a].text+e.options.format[r].sufix,o=0,e.textBuffer[r][a].coords[+!r]+=e.baseLineBuffer[+!r][+!r],e.textBuffer[r][a].coords[+!r]-=e.options.pos[+!r]+e.state.offset[+!r].start,-1==e.baseOffset[r][0]||-1==e.textBuffer[r][a].fix[0]){var s=e.root.paper.text(e.textBuffer[r][a].coords[0],e.textBuffer[r][a].coords[1],t).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.fontStyle));o=s.getBBox().width||0,s.remove()}e.textBuffer[r][a].coords[0]+=e.baseOffset[r][0]*e.textBuffer[r][a].fix[0]*(e.options.labelOffset+o),e.textBuffer[r][a].coords[1]+=e.baseOffset[r][1]*e.textBuffer[r][a].fix[1]*(e.options.fontStyle["font-size"]/2+e.options.labelOffset);var l=e.root.paper.text(e.textBuffer[r][a].coords[0],e.textBuffer[r][a].coords[1],t).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.fontStyle));if(0===r&&e.state.labelXToBottom&&e.textBuffer[r][a].fix[0]>0&&0!==a){var u=e.options.size[0]/(e.textBuffer[r].length-2),c=l.getBBox();if(c.width>u){for(var h=t.split(" "),p="",d=0;d<h.length;d++)if(l.attr("text",p+" "+h[d]),l.getBBox().width>u){for(;l.attr("text",h[d]).getBBox().width>u&&h[d].length>0;)h[d]=h[d].substring(0,h[d].length-1);p+="\n"+h[d]}else p+=" "+h[d];l.attr("text",p.substring(1))}l.attr("text-anchor","middle"),l.transform([["T",-e.options.labelOffset,(l.getBBox().height-c.height)/2]]),e.root.options.additionalHeight=Math.max(e.root.options.additionalHeight,l.getBBox().height-c.height-15)}e.state.axisSize[r]=Math.max(e.state.axisSize[r],l.getBBox().width||0),e.set.push(l),e.state.gridLabels.push(l)}}},e.baseOffset=[[1,1],[1,1]],e.drawLine=function(t,n,o,i){if(!e.options.hideGrid[i]||n==e.state.baseVal[i]){var r=0===i?Math.floor(t)+e.options.baseLineStyle["stroke-width"]/2:e.options.pos[+!i]+e.state.offset[+!i].start,a=1===i?Math.floor(t)+e.options.baseLineStyle["stroke-width"]/2:e.options.pos[+!i]+e.state.offset[+!i].start,s=0===i?r:e.options.size[+!i]+e.options.pos[+!i]+e.state.offset[+!i].start,l=1===i?a:e.options.size[+!i]+e.options.pos[+!i]+e.state.offset[+!i].start;if(!e.options.hideGrid[i]&&!e.options.hideLines[i]){var u=e.root.paper.path([["M",r,a],["L",s,l]]).attr(e.options.marginLineStyle);e.set.push(u),e.state.gridLinesBorder.push(u)}if(n==e.state.baseVal[i]){if(e.baseLineBuffer[i]=[r,a],!e.options.hideGrid[i]&&!e.options.hideLines[i]){var c=e.root.paper.path([["M",r,a],["L",s,l]]).attr(e.options.baseLineStyle);e.state.gridBaseLines.push(c),e.set.push(c)}}else if(!e.options.hideGrid[i]&&!e.options.hideLines[i]){var h=e.root.paper.path([["M",r,a],["L",s,l]]).attr(e.options.lineStyle);e.state.gridLines.push(h),e.set.push(h)}e.options.hideGrid[i]||e.textBuffer[i].push({text:"string"==e.options.valueType[i]?e.gridMap[i][n]?e.gridMap[i][n].valueString:"":Math.round(n*Math.pow(10,Math.abs(e.state.pow)))/Math.pow(10,Math.abs(e.state.pow)),coords:[r,a],fix:o,value:n})}},e.dispose=function(){e.set.stop(),e.set.remove()}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},cellTextWrapperOptions:{canRotate:!1,text:{labelFontStyle:{"font-size":25,fill:"#FFFFFF"}}},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},showText:!0,showValue:!1,padding:10,dynamicShape:!0,staticShapeSharpTip:!0,endType:"asis",direction:"down",type:"fluid"},e.visualSet=null,e.visualSubSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.state={interactionsEnabled:!1,actionCounter:0,modifiedTextStyle:null},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.state.modifiedTextStyle=$.extend(!0,{},e.options.cellTextWrapperOptions),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setAbs(e.data),e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&r.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),r),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:i.x,y:e.buttonHeight/2}))),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var u,c=(e.background.bb.height-2*e.options.padding)/a.length;u=e.options.dynamicShape?(e.background.bb.width-2*e.options.padding)/_.reduce(a,function(t,e){
return Math.max(t,e.value)},0):(e.background.bb.width-2*e.options.padding)/(a.length+(e.options.staticShapeSharpTip?0:1)),i=e.background.bb.width/2;var h=[],p=null;e.onmouseoutFuncList=[];for(var d=0;d<a.length;d++){var f=a[d];f.valueO=f.value;var g=d==a.length-1?"asis"==e.options.endType?f:{value:0,valueO:0}:a[d+1];g.valueO=g.value,e.options.dynamicShape||(f.valueO=a.length-d+(e.options.staticShapeSharpTip?0:1),g.valueO=a.length-d-1+(e.options.staticShapeSharpTip?0:1),d==a.length-1&&"asis"==e.options.endType&&(g.valueO=1+(e.options.staticShapeSharpTip?0:1)));var m=null,v=null;"down"==e.options.direction?(m=e.createShape(f.valueO*u,g.valueO*u,c,i,f,e.options.type),m.attr({transform:[["T",0,e.background.bb.y+e.options.padding]],opacity:1}),v={transform:[["T",0,e.background.bb.y+e.options.padding+d*c]],opacity:1}):(m=e.createShape(f.valueO*u,g.valueO*u,-c,i,f,e.options.type),m.attr({transform:[["T",0,e.background.bb.y2-e.options.padding]],opacity:1}),v={transform:[["T",0,e.background.bb.y2-e.options.padding-d*c]],opacity:1}),null!==p&&m.insertBefore(p),p=m,e.visualSet.push(m);var y={data:f,path:m},b=$.proxy(e.eventing.onMouseOver,y),x=$.proxy(e.eventing.onMouseOut,y);e.onmouseoutFuncList.push(x),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+y.data.objectId,b),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+y.data.objectId,x)),m.mouseover(b),m.mousemove($.proxy(e.eventing.onMouseMove,y)),m.mouseout(x);var w=$.proxy(e.afterAnimation,{data:f,shape:m,width:Math.min(f.valueO*u,g.valueO*u)+(Math.max(f.valueO*u,g.valueO*u)-Math.min(f.valueO*u,g.valueO*u))/2*.5,height:.6*c,actionCounter:e.state.actionCounter});e.root.options.canAnimate?h.push({obj:m,anim:Raphael.animation(v,e.root.options.animationDuration,e.root.options.animationStyle,w).delay((d-1>0?d-1:0)/a.length*e.root.options.animationSequenceDuration)}):(m.attr(v),w()),m.attr($.extend({fill:f.color,stroke:f.color},e.options.shapeStyle))}var S=0;for(d=0;d<h.length;d++)h[d].obj.stop(),h[d].obj.animate(h[d].anim),S=Math.max(S,h[d].anim.ms+h[d].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},S),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.createShape=function(t,n,o,i,r,a){switch(a){case"fluid":var s=(t-n)/2;return e.root.paper.path([["M",i-t/2,0],["L",i+t/2,0],["L",i+t/2-s,o],["L",i-t/2+s,o],["Z"]]);case"rect":return e.root.paper.path([["M",i-t/2,0],["L",i+t/2,0],["L",i+t/2,o],["L",i-t/2,o],["Z"]])}},e.afterAnimation=function(){if((e.options.showValue||e.options.showText)&&this.actionCounter===e.state.actionCounter){e.state.modifiedTextStyle.text.labelFontStyle.fill=InfoCharts.Helper.Misc.getContrastColor(e.options.cellTextWrapperOptions.text.labelFontStyle.fill,this.data.color);var t="";e.options.showText&&e.options.showValue?t=this.data.name+" ("+this.data.valueString+")":e.options.showText?t=this.data.name:e.options.showValue&&(t=this.data.valueString);var n=new InfoCharts.Visuals.TextWrapper(e.root).init(e.state.modifiedTextStyle,t,this.width,this.height),o=this.shape.getBBox();n.setPosition({x:o.x+o.width/2,y:o.y+o.height/2}),e.visualSet.push(n.set)}},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=Infogram.Charts.tooltip,e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,autoLabelToggle:!0,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,showBarLabels:!0,showcategories:!0,style:"bar-bar",panelMarginY:15,barMaxWidth:40,barMinWidth:25,barSpaceFraction:.8,absoluteDistribution:!1,showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,fill:"#FFFFFF"},chartDistribution:{canvasMargin:.15,groupMargin:.7,barMargin:.15},gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},textStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,cursor:"default"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_categoryOptions:{},_gridOptions:{},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.data=null,e.set=null,e.background=null,e.grid=null,e.buttons=null,e.labels=null,e.categoryLabel=null,e.tooltip=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,e.state={currentState:[],showBarLabels:!0,interactionsEnabled:!1,axesTitle:null,inTextStyleFontSize:0,actionCounter:0},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.set=e.root.paper.set(),e.options=$.extend(e.root.options.deepExtend,e.options,t),e.state.inTextStyleFontSize=e.options.inTextStyle["font-size"],e.state.showBarLabels=e.options.showBarLabels,e.set=e.root.paper.set(),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e.setPosition=function(t){e.set.transform(["T",t.x,t.y])},e._loadDataActual=function(t,n,o,i,r){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},e.options.showBarLabels=e.state.showBarLabels,o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=0,s=e.root.getCenter(),l=InfoCharts.Helper.Data.getGroups(e.data);n=n||l[0]||"";var u=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),e.state.axesTitle[0]=null;var c=e.options.xlabel;""!==c&&null!==c&&void 0!==c&&(e.state.axesTitle[1]=""+e.options.xlabel);var h=InfoCharts.Helper.Data.getPropertyValuesUniq(e.data,"category");e.options.barSpaceFraction=1-h.length/(h.length+9),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&l.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),l),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.categoryLabel&&(e.categoryLabel.dispose(),e.categoryLabel=null),e.labels&&(e.labels.dispose(),e.labels=null);var p,d=0;if(e.root.resizeHeight(e.buttonHeight,0,d),e.root.options.canvasHeightDefault-e.buttonHeight<u.length*e.options.barMinWidth*1.1?(p=u.length*e.options.barMinWidth*1.1+e.buttonHeight,d=p-e.root.options.canvasHeightDefault):e.root.options.canvasHeightDefault-e.buttonHeight>u.length*e.options.barMaxWidth*1.1+40+10*u.length&&(p=u.length*e.options.barMaxWidth*1.1+e.buttonHeight+40+10*u.length,d=p-e.root.options.canvasHeightDefault),e.root.resizeHeight(e.buttonHeight,0,d),e.options.autoLabelToggle){var f=e.root.options.canvasHeight-e.buttonHeight-e.options.textStyle["font-size"],g=Math.round(f/u.length*e.options.barSpaceFraction);g>e.options.barMaxWidth&&(g=e.options.barMaxWidth),e.options.textStyle["font-size"]>=g?(e.options.showLabels=!0,e.options.showBarLabels=!1):(e.options.showLabels=!1,e.options.showBarLabels=!0)}var m;e.options.showLabels&&(m=InfoCharts.Helper.Data.getLabelsUniq(u,e.options.hasValueInLabel),m.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Text,$.extend(e.options._labelWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),m),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)),e.root.resizeHeight(e.buttonHeight,a,d),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var v=0,y=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(v=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(y=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing));var b=e.root.options.canvasHeight-a-e.buttonHeight,_=e.buttonHeight;e.background.attr({y:_,height:b-y}),e.background.bb=e.background.getBBox();var x=-1;e.options.showcategories&&h&&h.length>1&&(e.categoryLabel=new InfoCharts.Visuals.categoriesHorizontal(e.root,e).init(e.options._categoryOptions,u),x=e.categoryLabel.height+2,e.categoryLabel.setPosition({x:e.categoryLabel.height/2,y:_})),e.background.attr({x:x+v,width:e.root.options.canvasWidth-x-v*(e.options.axesTitleBalanceHorizontalSpaceing?2:1)});var w={top:0,bottom:0};if(e.options.showBarLabels&&(w=e.getAxesOffsetTopBottom(u),w.bottom+w.top>=.7*(e.root.options.canvasWidthDefault-x)&&(w.bottom=0,w.top=0,e.options.showBarLabels=!1,e.options.showLabels=!0,e.categoryLabel&&(e.categoryLabel.dispose(),e.categoryLabel=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels&&(m=InfoCharts.Helper.Data.getLabelsUniq(u),m.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Text,$.extend(e.options._labelWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),m),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)),e.root.resizeHeight(e.buttonHeight,a,d),b=e.root.options.canvasHeight-a-e.buttonHeight,_=e.buttonHeight,e.background.attr({y:_,height:b-y}),e.background.bb=e.background.getBBox(),x=-1,e.options.showcategories&&h&&h.length>1&&(e.categoryLabel=new InfoCharts.Visuals.categoriesHorizontal(e.root,e).init(e.options._categoryOptions,u),x=e.categoryLabel.height+2,e.categoryLabel.setPosition({x:e.categoryLabel.height/2,y:_})))),e.background.bb=e.background.getBBox(),v&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:x+v/2,y:e.background.bb.y+e.background.bb.height/2})),y&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+y/2})),e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[x+v,e.buttonHeight],size:[e.root.options.canvasWidthDefault-x-v*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeight-e.buttonHeight-a-y],offset:[{start:w.bottom+3,end:w.top},{start:0,end:0}],zeroValues:[{top:0,bottom:1},{top:1,bottom:0}],hideGrid:[!1,!0],showGridOnEdge:!1,labelXToBottom:!1,canResize:!1}),e.options.absoluteDistribution?e.data:u,"x"),w.bottom+w.top!==0){if(e.grid.createGrid(!1),e.grid.state.maxVal[0]>0&&e.grid.state.minVal[0]<0){var S=Math.abs(e.grid.state.minVal[0]/(Math.abs(e.grid.state.minVal[0])+e.grid.state.maxVal[0]));e.grid.state.offset[0].start=e.grid.state.offset[0].start/(1-S);var C=Math.abs(e.grid.state.maxVal[0]/(Math.abs(e.grid.state.minVal[0])+e.grid.state.maxVal[0]));e.grid.state.offset[0].end=e.grid.state.offset[0].end/(1-C)}e.grid.state.offset[0].end+e.grid.state.offset[0].start>=.9*(e.root.options.canvasWidthDefault-x)?e.options.showBarLabels=!1:(e.grid.options.pos=[x+e.grid.state.offset[0].start+v,e.buttonHeight],e.grid.options.size=[e.root.options.canvasWidthDefault-x-e.grid.state.offset[0].start-e.grid.state.offset[0].end-v*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeight-e.buttonHeight-a-y]),e.grid.options.offset=[{start:0,end:0},{start:0,end:0}]}e.grid.createGrid(),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.generateBars(u),e.grid.postDisplayMods(e.options.gridPostOptions),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.getAxesOffsetTopBottom=function(t){if(e.options.showBarLabels){var n=_.reduce(t,function(t,n){if("number"==typeof n.value&&n.value<0){var o=e.root.paper.text(0,0,n.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),i=o.getBBox().width+4;return o.remove(),Math.max(t,i)}return t},null),o=_.reduce(t,function(t,n){if("string"==typeof n.value||n.value>=0){var o=e.root.paper.text(0,0,n.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),i=o.getBBox().width+4;return o.remove(),Math.max(t,i)}return t},null);return 0>n&&(n=0),0>o&&(o=0),{top:n,bottom:o}}return{top:0,bottom:0}},e.getAxesOffsetTopBottom_=function(t){if(e.options.showBarLabels){var n=_.reduce(t,function(t,e){return"number"==typeof e.value&&e.value<0&&(!t||e.name.length>t.name.length)?e:t},null),o=_.reduce(t,function(t,e){return("string"==typeof e.value||e.value>0)&&(!t||e.name.length>t.name.length)?e:t},null),i=0,r=0;if(n){var a=e.root.paper.text(0,0,n.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle));i=a.getBBox().width+4,a.remove()}if(o){var s=e.root.paper.text(0,0,o.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle));r=s.getBBox().width+4,s.remove()}return{top:i,bottom:r}}return{top:0,bottom:0}},e.generateBars=function(t){_.each(e.set,function(t){t.stop()}),e.set.remove(),e.set=e.root.paper.set();var n=e.options.barMaxWidth,o=InfoCharts.Helper.Data.getPropertyValuesUniq(t,"category"),i=e.background.bb.height-e.options.textStyle["font-size"],r=i/t.length*e.options.barSpaceFraction;r>1&&(r=Math.floor(r)),r>n&&(r=n),i-=r*t.length;var a=i/2*e.options.chartDistribution.canvasMargin,s=i/2/(e.options.showcategories?o.length:1)*e.options.chartDistribution.groupMargin,l=i/2/t.length*e.options.chartDistribution.barMargin,u=e.background.bb.y+a,c=0;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var h=[];e.onmouseoutFuncList=[];var p,d=function(t){return!e.options.showcategories||t.category==o[p]};for(p=0;p<(e.options.showcategories?o.length:1);p++){var f=_.filter(t,d);u+=s;for(var g=0;g<f.length;g++){u+=l;var m=f[g].styleName||e.options.style,v=m;m+="-horizontal";var y="ipg-"+m;InfoCharts.Visuals.ShapeGenerator.Anim[m]?InfoCharts.Visuals.ShapeGenerator.Anim[m](e.root.paper,y):(m=v.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path-horizontal"](e.root.paper,y,m));var b=e.grid.getValuePositionX(f[g].value,e.grid.state.maxVal[0]),x=e.root.paper.path();e.state.currentState[c]?(e.state.currentState[c].anim[0]=b.baseline,e.state.currentState[c].anim[1]=u+r/2,x.attr(InfoCharts.Helper.Misc.addProperty(e.state.currentState[c].base,y,e.state.currentState[c].anim))):x.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),y,[b.baseline,u+r/2,0,r])),e.state.currentState[c]={},e.state.currentState[c].anim=[b.baseline,u+r/2,b.height,r],e.state.currentState[c].base=$.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle);var w=$.proxy(e.afterAnimation,{anim:e.state.currentState[c].anim,data:f[g],shape:x,vb:b,actionCounter:e.state.actionCounter});e.root.options.canAnimate?h.push({obj:x,anim:Raphael.animation(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),y,e.state.currentState[c].anim),e.root.options.animationDuration,e.root.options.animationStyle,w).delay(c/t.length*e.root.options.animationSequenceDuration)}):(x.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),y,e.state.currentState[c].anim)),w()),e.set.push(x);var S={data:f[g],path:x},C=$.proxy(e.eventing.onMouseOver,S),E=$.proxy(e.eventing.onMouseOut,S);if(e.onmouseoutFuncList.push(E),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+S.data.objectId,C),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+S.data.objectId,E)),x.mouseover(C),x.mousemove($.proxy(e.eventing.onMouseMove,S)),x.mouseout(E),e.options.showBarLabels){var T=e.root.paper.text(b.baseline-3*b.dev,u+r/2,f[g].name).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({"text-anchor":b.dev>0?"end":"start",fill:f[g].color},e.options.textStyle)));e.set.push(T)}u+=r+l,c++}u+=s}for(;e.state.currentState.length>c;)e.state.currentState.pop();e.grid.baseLine.toFront();var k=0;for(p=0;p<h.length;p++)h[p].obj.stop(),h[p].obj.animate(h[p].anim),k=Math.max(k,h[p].anim.ms+h[p].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},k)},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t,n=this.data;if(n.inValueString.length>0){var o=this.anim,i=this.shape.getBBox(),r=this.vb;if(i.height<=15)return;e.options.inTextStyle["font-size"]=e.state.inTextStyleFontSize;var a=InfoCharts.Helper.Misc.getContrastColor(e.options.inTextStyle.fill,n.color);do{if(t=e.root.paper.text(r.baseline-3*-r.dev,o[1],n.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-r.dev>0?"end":"start",fill:a}))),t.bb=t.getBBox(),t.bb.width+6<i.width&&t.bb.height<i.height){e.set.push(t);break}t.remove(),e.options.inTextStyle["font-size"]-=1}while(e.options.inTextStyle["font-size"]>=8);if(e.options.inTextStyle["font-size"]<8){var s=-r.dev>0?-i.width:i.width;t=e.root.paper.text(r.baseline-3*-r.dev+s,o[1],n.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-r.dev>0?"end":"start",fill:n.color,"font-size":e.state.inTextStyleFontSize}))),e.set.push(t)}}}},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.opts.remove(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.root.options.canGlowPath){var n=$.extend({color:e.eventing.helper.preHoverColor[this.data.objectId]},e.root.options.glowStyle);InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow||(t.myGlow=t.glow(n),e.visualSet.push(t.myGlow))})}e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t)})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.opts.setPosition(e.root.getMousePosition(t))},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.opts.remove(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.root.options.canGlowPath&&InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow&&(t.myGlow.remove(),t.myGlow=null)}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,showcategories:!0,style:"bar-bar",panelMarginY:15,barMaxWidth:40,barSpaceFraction:.8,absoluteDistribution:!1,showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,fill:"#FFFFFF"},chartDistribution:{canvasMargin:.5,groupMargin:.5,barMargin:0},gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,opacity:1,stroke:"none"},textStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,cursor:"default"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_categoryOptions:{},_gridOptions:{},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.data=null,e.set=null,e.background=null,e.grid=null,e.buttons=null,e.labels=null,e.categoryLabel=null,e.tooltip=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,e.state={currentState:[],interactionsEnabled:!1,axesTitle:null,actionCounter:0,inTextStyleFontSize:0},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.set=e.root.paper.set(),e.options=$.extend(e.root.options.deepExtend,e.options,t),e.state.inTextStyleFontSize=e.options.inTextStyle["font-size"],e.set=e.root.paper.set(),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e.setPosition=function(t){e.set.transform(["T",t.x,t.y])},e._loadDataActual=function(t,n,o,i,r){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=0,s=e.root.getCenter(),l=InfoCharts.Helper.Data.getGroups(e.data);n=n||l[0]||"";var u=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),e.state.axesTitle[0]=null;var c=e.options.xlabel;""!==c&&null!==c&&void 0!==c&&(e.state.axesTitle[1]=""+e.options.xlabel);var h=InfoCharts.Helper.Data.getPropertyValuesUniq(u,"category");if(e.options.barSpaceFraction=1-h.length/(h.length+9),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&l.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),l),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.categoryLabel&&(e.categoryLabel.dispose(),e.categoryLabel=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var p=InfoCharts.Helper.Data.getLabelsUniq(u,e.options.hasValueInLabel);p.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"realLeft"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),p),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var d=0,f=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(d=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(f=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing));var g=e.root.options.canvasHeight-a-e.buttonHeight,m=e.buttonHeight;e.background.attr({x:0+d,width:e.root.options.canvasWidth-d*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),y:m,height:g-f}),e.background.bb=e.background.getBBox();var v=-1;e.options.showcategories&&h&&h.length>0&&(e.categoryLabel=new InfoCharts.Visuals.categoriesHorizontal(e.root,e).init(e.options._categoryOptions,u,!0),v=e.categoryLabel.height+2,e.categoryLabel.setPosition({x:e.categoryLabel.height/2,y:m})),e.background.attr({x:v+d,width:e.root.options.canvasWidth-v-d*(e.options.axesTitleBalanceHorizontalSpaceing?2:1)});var y={min:NaN,max:NaN};e.options.absoluteDistribution&&e.options.hasGroups?_.each(l,function(t){e.getGroupMinMax(_.filter(e.data,function(e){return e.group==t}),e.options.showcategories?h:[""],y)}):e.getGroupMinMax(u,e.options.showcategories?h:[""],y),e.background.bb=e.background.getBBox(),d&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:d/2+v,y:e.background.bb.y+e.background.bb.height/2})),f&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+f/2})),e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[v+d,e.buttonHeight],size:[e.root.options.canvasWidthDefault-v-d*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-a-f],offset:[{start:0,end:0},{start:0,end:0}],zeroValues:[{top:0,bottom:1},{top:1,bottom:0}],hideGrid:[!1,!0],showGridOnEdge:!1,canResize:!1,labelXToBottom:!1,minMax:[y,{min:NaN,max:NaN}]}),e.options.absoluteDistribution?e.data:u,"x"),e.grid.createGrid(),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.generateBars(u),e.grid.postDisplayMods(e.options.gridPostOptions),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.getGroupMinMax=function(t,e,n){var o={},i={};_.each(t,function(t){1===e.length&&""===e[0]?(i[""]=i[""]||0,o[""]=o[""]||0,t.value>0?i[""]+=t.value:o[""]+=t.value):(i[t.category]=i[t.category]||0,o[t.category]=o[t.category]||0,t.value>0?i[t.category]+=t.value:o[t.category]+=t.value)}),_.each(e,function(t){n.max=isNaN(n.max)?i[t]:Math.max(n.max,i[t]),n.min=isNaN(n.min)?o[t]:Math.min(n.min,o[t])})},e.generateBars=function(t){_.each(e.set,function(t){t.stop()}),e.set.remove(),e.set=e.root.paper.set(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var n=e.options.showcategories?InfoCharts.Helper.Data.getPropertyValuesUniq(t,"category"):[""],o=e.options.showcategories?n.length:1,i=e.options.barMaxWidth,r=e.background.bb.height-e.getGridBottomLabelHeight(),a=2,s=r/o,l=s-2*a;l>i&&(a=.5*(l-i),l=i);var u=e.background.bb.y,c=0,h=[];e.onmouseoutFuncList=[];var p=e.categoryLabel&&e.categoryLabel.labelArray&&e.categoryLabel.labelArray.length&&e.categoryLabel.rotate,d={};e.options.showcategories?_.each(t,function(t){_.has(d,t.category)||(d[t.category]=[]),d[t.category].push(t)}):d[""]=t;for(var f=0;o>f;f++){var g=d[n[f]],m=0,v=0;u+=a,p?e.adjustHorizontalCategoryLabel(f,u+.5*l):e.adjustVerticalCategoryLabel(f,u+.5*l);for(var y=0;y<g.length;y++){var b=g[y].styleName||e.options.style,x=b;b+="-horizontal";var w="ipg-"+b;InfoCharts.Visuals.ShapeGenerator.Anim[b]?InfoCharts.Visuals.ShapeGenerator.Anim[b](e.root.paper,w):(b=x.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path-horizontal"](e.root.paper,w,b));var S=e.grid.getValuePositionX(g[y].value),C=e.root.paper.path();e.state.currentState[c]&&e.state.currentState[c].colIndex==f?(e.state.currentState[c].anim[1]=u+l/2,C.attr(InfoCharts.Helper.Misc.addProperty(e.state.currentState[c].base,w,e.state.currentState[c].anim))):C.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),w,[S.baseline,u+l/2,0,l])),e.state.currentState[c]={},S.dev<0?e.state.currentState[c].anim=[S.baseline-m,u+l/2,S.height,l]:e.state.currentState[c].anim=[S.baseline+v,u+l/2,S.height,l],e.state.currentState[c].base=$.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),e.state.currentState[c].colIndex=f;var E=$.proxy(e.afterAnimation,{anim:e.state.currentState[c].anim,data:g[y],shape:C,vb:S,actionCounter:e.state.actionCounter});e.root.options.canAnimate?h.push({obj:C,anim:Raphael.animation(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),w,e.state.currentState[c].anim),e.root.options.animationDuration,e.root.options.animationStyle,E).delay(f/o*e.root.options.animationSequenceDuration)}):(C.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),w,e.state.currentState[c].anim)),E()),e.set.push(C);var T={data:g[y],path:C},k=$.proxy(e.eventing.onMouseOver,T),M=$.proxy(e.eventing.onMouseOut,T);e.onmouseoutFuncList.push(M),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+T.data.objectId,k),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+T.data.objectId,M)),C.mouseover(k),C.mousemove($.proxy(e.eventing.onMouseMove,T)),C.mouseout(M),S.dev<0?m-=S.height:v+=S.height,c++}u+=l,u+=a}for(;e.state.currentState.length>c;)e.state.currentState.pop();e.grid.baseLine.toFront();var O=0;_.each(h,function(t){t.obj.stop(),t.obj.animate(t.anim),O=Math.max(O,t.anim.ms+t.anim.del)}),setTimeout(function(){e.state.interactionsEnabled=!0},O)},e.adjustHorizontalCategoryLabel=function(t,n){if(e.categoryLabel&&e.categoryLabel.labelArray){var o=e.categoryLabel.labelArray[t].label,i=e.categoryLabel.bg.getBBox().width,r=o.set.getBBox();o.set.transform(["T",.5*(i-r.width),n])}},e.adjustVerticalCategoryLabel=function(t,n){if(e.categoryLabel&&e.categoryLabel.labelArray){var o=e.categoryLabel.labelArray[t].label,i=o.set.getBBox(),r=.5*i.width+1,a=n+.5*i.height,s=e.grid.getGridPositionBase();s&&s.length>0&&(r=.5*s[0].baseline+1),o.set.transform([["T",r,a],["R",-90,r,a]])}},e.getGridBottomLabelHeight=function(){for(var t=e.grid.set.length-1;t>=0;t--){var n=e.grid.set[t];if("text"===n.type)return n.getBBox().height}return e.options.textStyle["font-size"]},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t=this.data;if(t.inValueString.length>0){
var n=this.anim,o=this.shape.getBBox(),i=this.vb;if(o.height<=15)return;e.options.inTextStyle["font-size"]=e.state.inTextStyleFontSize;var r=InfoCharts.Helper.Misc.getContrastColor(e.options.inTextStyle.fill,t.color),a=n[0]-i.baseline;do{var s=e.root.paper.text(i.baseline-3*-i.dev+a,n[1],t.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-i.dev>0?"end":"start",fill:r})));if(s.bb=s.getBBox(),s.bb.width+6<o.width&&s.bb.height<o.height){e.set.push(s);break}s.remove(),e.options.inTextStyle["font-size"]-=1}while(e.options.inTextStyle["font-size"]>=8)}}},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.opts.remove(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.root.options.canGlowPath){var n=$.extend({color:e.eventing.helper.preHoverColor[this.data.objectId]},e.root.options.glowStyle);InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow||(t.myGlow=t.glow(n),e.visualSet.push(t.myGlow))})}e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t)})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.opts.setPosition(e.root.getMousePosition(t))},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.opts.remove(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.root.options.canGlowPath&&InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow&&(t.myGlow.remove(),t.myGlow=null)}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.text=null,e.background=null,e.item=null,e.box=null,e.set=null,e.overlay=null,e.options={paddingX:6,paddingY:2,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,"text-anchor":"start",fill:"rgb(67, 63, 57)","fill-opacity":1},labelHoverStyle:{"fill-opacity":.7},toUpperCase:!1,enableHover:!0,onClickCallback:null,onOverCallback:null,onOutCallback:null},e.state={dx:0,dy:0},e.toDashCase=function(t){var e,n={};for(var o in t)e=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n[e]=t[o];return n},e.init=function(t,n){if(e.options=$.extend(e.root.options.deepExtend,e.options,n),e.options.labelFontStyle=$.extend(e.options.labelFontStyle,e.toDashCase(e.options.font)),e.options.chart&&e.options.chart.text&&(e.options.labelFontStyle.fill=e.options.chart.text),e.set=e.root.paper.set(),e.item=t,e.options.toUpperCase&&(e.item.name=e.item.name.toUpperCase()),e.circle=e.root.paper.circle(6,0,8),e.circle.attr({fill:e.item.color||"none",stroke:"none"}),e.text=e.root.paper.text(21,-.5+e.root.state.fontOffsetY,e.item.name),e.text.attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({fill:e.item.color},e.options.labelFontStyle))),e.box=e.text.getBBox(),e.box.width+=36,e.options.enableHover&&(e.overlay=e.root.paper.rect(-8,-e.options.labelFontStyle["font-size"]/2,20+e.box.width,e.options.labelFontStyle["font-size"])),e.options.enableHover&&e.overlay.attr({fill:"#FFFFFF",opacity:0,cursor:"pointer"}),e.set.push(e.circle),e.set.push(e.text),e.options.enableHover&&e.item.objectId){var o={path:e.circle,data:e.item},i=$.proxy(e.eventing.onMouseOver,o),r=$.proxy(e.eventing.onMouseOut,o);eve.on("mouseoverdata."+e.root.options.canvasSelectorId+"."+e.item.objectId,i),eve.on("mouseoutdata."+e.root.options.canvasSelectorId+"."+e.item.objectId,r),e.overlay.mouseover(i),e.overlay.mouseout(r)}return e},e.dispose=function(){eve.off("mouseoverdata."+e.root.options.canvasSelectorId+"."+e.item.objectId),eve.off("mouseoutdata."+e.root.options.canvasSelectorId+"."+e.item.objectId),e.overlay&&e.overlay.remove(),e.set.remove()},e.setPosition=function(t){var n=[["T",t.x-e.box.width/2+e.state.dx,t.y+e.state.dy]];e.set.attr({transform:n}),e.overlay&&e.overlay.attr({transform:n})},e.setPositionVertical=function(t){e.set.transform([["T",t.x-e.box.width/2+e.state.dx,t.y+e.state.dy],["R",-90,t.x,t.y]])},e.eventing={helper:{preHoverColor:null},onMouseOver:function(t){e.options.enableHover&&(e.eventing.helper.preHoverColor=this.path.attr("fill"),e.text.attr({"fill-opacity":e.options.labelHoverStyle["fill-opacity"]}),t&&this.data.objectId&&eve("mouseovertext."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null),e.options.onOverCallback&&e.options.onOverCallback())},onMouseOut:function(t){e.options.enableHover&&null!==e.eventing.helper.preHoverColor&&(e.text.attr({"fill-opacity":e.options.labelFontStyle["fill-opacity"]}),e.eventing.helper.preHoverColor=null,t&&this.data.objectId&&eve("mouseouttext."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null),e.options.onOutCallback&&e.options.onOutCallback())}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},padding:15,path:"boyPath",showText:!0,shapeStyle:{"stroke-width":0,"stroke-opacity":0},shapeStyleEmpty:{"stroke-width":0,"stroke-opacity":0,fill:"#959595"},cellTextWrapperOptions:{canRotate:!1,text:{labelFontStyle:{"font-size":60}}}},e.state={interactionsEnabled:!1,actionCounter:0,modifiedTextStyle:null},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.state.modifiedTextStyle=$.extend(!0,{},e.options.cellTextWrapperOptions),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&r.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),r),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:i.x,y:e.buttonHeight/2}))),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox();var u=e.background.bb;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var c=[],h={x:u.x+e.options.padding,y:u.y+e.options.padding,x2:u.x2-e.options.padding,y2:u.y2-e.options.padding,width:u.width-2*e.options.padding,height:u.height-2*e.options.padding},p=InfoCharts.Visuals.ShapeGenerator.Path[a[0].path||e.options.path];if(InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(p),e.options.showText){e.state.modifiedTextStyle.text.labelFontStyle.fill=a[0].color;var d=new InfoCharts.Visuals.TextWrapper(e.root).init(e.state.modifiedTextStyle,a[0].valueString,h.width/2,h.height);d.bb=d.set.getBBox(),d.setPosition({x:h.x2-d.bb.width/2,y:h.y+h.height/2}),e.visualSet.push(d.set),h.x2-=d.bb.width+e.options.padding,h.width-=d.bb.width+e.options.padding}var f=h.width/a[0].value[1],g=Math.min(f/p.width,h.height/p.height),m={};m=InfoCharts.Visuals.ShapeGenerator.Func.scalePath(p,.95*g),e.onmouseoutFuncList=[];var v,y,b,x,w=0;for(b=0;b<a[0].value[1];b++){w++;var S=null,C=null;S=m.image?e.root.paper.image(m.image,0,0,m.width,m.height):e.root.paper.path(m.path),w-1<a[0].value[0]&&w>a[0].value[0]&&(C=m.image?e.root.paper.image(m.image,0,0,m.width,m.height):e.root.paper.path(m.path),C.attr($.extend({fill:a[0].color,stroke:a[0].color},e.options.shapeStyle)),x={data:a[0],path:C},v=$.proxy(e.eventing.onMouseOver,x),y=$.proxy(e.eventing.onMouseOut,x),e.onmouseoutFuncList.push(y),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+x.data.objectId,v),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+x.data.objectId,y)),C.mouseover(v),C.mousemove($.proxy(e.eventing.onMouseMove,x)),C.mouseout(y)),m.path&&(w<=a[0].value[0]?(S.attr($.extend({fill:a[0].color,stroke:a[0].color},e.options.shapeStyle)),x={data:a[0],path:S},v=$.proxy(e.eventing.onMouseOver,x),y=$.proxy(e.eventing.onMouseOut,x),e.onmouseoutFuncList.push(y),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+x.data.objectId,v),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+x.data.objectId,y)),S.mouseover(v),S.mousemove($.proxy(e.eventing.onMouseMove,x)),S.mouseout(y)):S.attr($.extend({fill:a[0].color,stroke:a[0].color},e.options.shapeStyleEmpty))),m.image&&(w<=a[0].value[0]?S.attr({opacity:1}):S.attr({opacity:.1})),S.attr({transform:[["T",h.x+f/2+b*f-m.width/2,h.y+h.height/2-m.height/2],["S",0,0]]}),null!==C&&(C.attr({transform:[["T",h.x+f/2+b*f-m.width/2,h.y+h.height/2-m.height/2],["S",0,0]]}),e.visualSet.push(C));var E,T={transform:[["T",h.x+f/2+b*f-m.width/2,h.y+h.height/2-m.height/2],["S",1,1]]};null!==C&&(E={transform:[["T",h.x+f/2+b*f-m.width/2,h.y+h.height/2-m.height/2],["S",1,1]],"clip-rect":[0,0,m.width*(a[0].value[0]-w+1),m.height]}),e.visualSet.push(S);var k,M=$.proxy(e.afterAnimation,{data:a[0],shape:S,actionCounter:e.state.actionCounter}),O=$.proxy(e.afterAnimation,{data:a[0],shape:C,actionCounter:e.state.actionCounter});e.root.options.canAnimate?(c.push({obj:S,anim:Raphael.animation(T,e.root.options.animationDuration,e.root.options.animationStyle,M).delay(b/a[0].value[1]*e.root.options.animationSequenceDuration)}),null!==C&&(k=C.getBBox(),C.attr({"clip-rect":[0,0,0,0]}),c.push({obj:C,anim:Raphael.animation(E,e.root.options.animationDuration,e.root.options.animationStyle,M).delay(b/a[0].value[1]*e.root.options.animationSequenceDuration)}))):(S.attr(T),null!==C&&(C.attr(T),k=C.getBBox(),C.attr({"clip-rect":[0,0,k.width*(a[0].value[0]-w+1),k.height]}),O()),M())}var I=0;for(b=0;b<c.length;b++)c[b].obj.stop(),c[b].obj.animate(c[b].anim),I=Math.max(I,c[b].anim.ms+c[b].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},I),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,hasGroups:!0,highlightLegendItem:!0,showGroups:!0,showLabels:!0,maxRows:6,padding:20,pictoMargin:5,panelMarginY:15,realNumbers:!1,defaultPath:"boyPath",absoluteDistribution:!1,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.state={currentState:[],interactionsEnabled:!1},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o){if(e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;var i=0,r=e.root.getCenter();InfoCharts.Helper.Data.setAbs(e.data),InfoCharts.Helper.Data.setDefaults(e.data),_.each(e.data,function(t){t.pathName=t.pathName||e.options.defaultPath});var a=InfoCharts.Helper.Data.getGroups(e.data);n=n||a[0]||null;var s=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);if(e.labels&&(e.labels.dispose(),e.labels=null),_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set(),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&a.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),a),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:r.x,y:e.buttonHeight/2}))),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight}),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(s,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"realLeft"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),i=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,0);var u;u=e.options.absoluteDistribution&&e.options.hasGroups?InfoCharts.Helper.Data.getValueSumMax(e.data,e.options.hasValueInLabel):InfoCharts.Helper.Data.getValueSum(s),e.options.realNumbers&&u>200&&(e.options.realNumbers=!1);var c,h=InfoCharts.Visuals.ShapeGenerator.Path,p=InfoCharts.Helper.Data.getPropertyValuesUniq(e.data,"pathName"),d=0,f=0;for(c=0;c<p.length;c++)InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(h[p[c]]),d=Math.max(d,h[p[c]].width+e.options.pictoMargin),f=Math.max(f,h[p[c]].height+e.options.pictoMargin);var g,m,v=e.root.options.canvasWidthDefault-2*e.options.padding,y=e.root.options.canvasHeightDefault-2*e.options.padding,b=Math.floor(v/d),x=Math.floor(y/f),w=b*x,S=e.options.padding+(v-b*d)/2,C=e.options.padding+(y-x*f)/2;m=C+e.buttonHeight;var E=[],T=x*b,k=0,M=[];for(c=0;c<s.length;c++){var O=s[c].value/u;e.options.realNumbers?s[c].itemCount=s[c].value:s[c].itemCount=Math.round(O*w),s[c].itemCountFraction=O*w-s[c].itemCount,k+=s[c].itemCount,M.push(s[c])}if(!e.options.absoluteDistribution&&!e.options.realNumbers){k=T-k,_.sortBy(M,function(t){return-t.itemCountFraction});for(var I=0,P=k>0?1:-1;0!==k;)M[I].itemCount+=P,k-=P,I++,I>=s.length&&(I=0)}for(c=0;c<s.length;c++)E.push(s[c].itemCount);InfoCharts.Visuals.ShapeGenerator.Anim["picto-visibility"](e.root.paper,"visibility-attribute");var L=0,D=0,A=null,N=0,B=0,j=E[0],R=e.root.paper.set(),H=s[B],F=$.extend({fill:H.color,stroke:H.color},e.options.shapeStyle);e.state.currentState=[],e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*")),e.onmouseoutFuncList=[];t:for(var z=0;x+1>z;z++){for(D++,m+=f/2,g=S,c=0;b>c;c++){if(0>=j){if(E[B]>=0){var V={data:s[B],path:R},U=$.proxy(e.eventing.onMouseOver,V),W=$.proxy(e.eventing.onMouseOut,V);e.onmouseoutFuncList.push(W),"VML"==Raphael.type&&h[H.pathName].image||(e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+V.data.objectId,U),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+V.data.objectId,W)),R.mouseover(U),R.mousemove($.proxy(e.eventing.onMouseMove,V)),R.mouseout(W)),e.visualSet.push(R)}if(B++,!(B<s.length)){0===c&&D--,m+=f/2;break t}j=E[B],H=s[B],F=$.extend({fill:H.color,stroke:H.color},e.options.shapeStyle),R=e.root.paper.set()}g+=d/2,h[H.pathName].image?A=e.root.paper.image(h[H.pathName].image,0,0,h[H.pathName].width,h[H.pathName].height):(A=e.root.paper.path(h[H.pathName].path),A.attr(F)),!e.root.options.canAnimate||"VML"==Raphael.type&&h[H.pathName].image||(A.attr({opacity:0}),e.state.currentState.push({path:A,koef:L})),A.transform([["T",Math.round(g-h[H.pathName].width/2),Math.round(m-h[H.pathName].height/2)]]),R.push(A),L++,j--,g+=d/2}m+=f/2}e.root.resize(e.root.options.canvasWidthDefault,e.root.options.canvasHeightDefault+i+e.buttonHeight-(x-D)*f),e.labels&&e.labels.setPosition({x:r.x,y:e.root.options.canvasHeight-i/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-i-e.buttonHeight});var G=0;for(c=0;c<e.state.currentState.length;c++)N=100*e.state.currentState[c].koef/L,e.state.currentState[c].path.attr({"visibility-attribute":[0,N]}),e.state.currentState[c].path.stop(),e.state.currentState[c].path.animate({"visibility-attribute":[100,N]},e.root.options.animationDuration,e.root.options.animationStyle);G=e.root.options.animationDuration,setTimeout(function(){e.state.interactionsEnabled=!0},G),e.state.interactionsEnabled,e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path[0].attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,hasGroups:!0,showGroups:!0,showLabels:!0,showTooltip:!0,highlightLegendItem:!0,padding:15,pictoMargin:15,panelMarginY:15,defaultPath:"boyPath",align:"middle",fluidTransition:!0,showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":22},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},autoResizeCanvas:!0},e.state={currentState:[],interactionsEnabled:!1,actionCounter:0,inTextStyleFontSize:0},e.visualSet=null,e.visualSubSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.state.inTextStyleFontSize=e.options.inTextStyle["font-size"],e.visualSet=e.root.paper.set(),e.visualSubSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o){if(e.root.options.canvasWidth<=0)return void("function"==typeof e.root.options.loadedCallback&&e.root.options.loadedCallback());if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setAbs(e.data),InfoCharts.Helper.Data.setDefaults(e.data),_.each(e.data,function(t){t.pathName=t.pathName||e.options.defaultPath});var i=InfoCharts.Helper.Data.getGroups(e.data);n=n||i[0]||null;var r=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.visualSet.remove(),e.visualSet=e.root.paper.set(),_.each(e.visualSubSet,function(t){t.stop()}),e.visualSubSet.remove(),e.visualSubSet=e.root.paper.set();var a=0,s=e.root.getCenter();if(o&&e.options.showGroups&&e.options.hasGroups&&i.length>1&&new InfoCharts.Visuals.RadioButtons({groups:i,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(r,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,e.options.legendOptions,{enableHover:e.options.highlightLegendItem}),l),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-a-e.buttonHeight}),e.background.bb=e.background.getBBox();var u,c=InfoCharts.Visuals.ShapeGenerator.Path,h=InfoCharts.Helper.Data.getPropertyValuesUniq(r,"pathName"),p=e.background.bb.width-2*e.options.padding-r.length*e.options.pictoMargin*2,d=e.background.bb.height-2*e.options.padding-1*e.options.pictoMargin*2,f=NaN,g=NaN,m={};for(u=0;u<h.length;u++)InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(c[h[u]]),f=isNaN(f)?c[h[u]].width:Math.min(f,c[h[u]].width),g=isNaN(g)?c[h[u]].height:Math.min(g,c[h[u]].height),m[h[u]]||(m[h[u]]={});for(u=0;u<h.length;u++){var v=Math.max(f/c[h[u]].width,g/c[h[u]].height);m[h[u]]=InfoCharts.Visuals.ShapeGenerator.Func.scalePath(c[h[u]],v)}var y=0,b=0;for(u=0;u<r.length;u++)y=Math.max(y,m[r[u].pathName].height*Math.sqrt(r[u].value)),b+=m[r[u].pathName].width*Math.sqrt(r[u].value);var x=Math.min(p/b,d/y);e.options.autoResizeCanvas&&x==p/b&&(e.root.resizeHeight(e.buttonHeight,a,x*y+2*e.options.pictoMargin+2*e.options.padding-e.root.inner.canvasHeight),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-a-e.buttonHeight}),e.background.bb=e.background.getBBox()),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var w,S,C=e.options.padding,E=e.background.bb.height/2+e.buttonHeight;for(e.onmouseoutFuncList=[],u=0;u<r.length;u++){var T=x*Math.sqrt(r[u].value);if(m[r[u].pathName].image?(w=e.root.paper.image(m[r[u].pathName].image,0,0,m[r[u].pathName].width,m[r[u].pathName].height),S=e.root.paper.image(m[r[u].pathName].image,0,0,m[r[u].pathName].width,m[r[u].pathName].height)):(w=e.root.paper.path(m[r[u].pathName].path),S=e.root.paper.path(m[r[u].pathName].path)),C+=e.options.pictoMargin,w.attr({opacity:0}),w.transform([["S",T,T,0,0],["T",C,E-m[r[u].pathName].height/2*T]]),S.attr({opacity:0}),S.transform([["S",T,T,0,0],["T",C,E-m[r[u].pathName].height/2*T]]),e.visualSet.push(S),e.visualSubSet.push(w),r[u].name&&""!==r[u].name&&m[r[u].pathName].path){var k={data:r[u],path:w},M=$.proxy(e.eventing.onMouseOver,k),O=$.proxy(e.eventing.onMouseOut,k);e.onmouseoutFuncList.push(O),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+k.data.objectId,M),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+k.data.objectId,O)),w.mouseover(M),w.mousemove($.proxy(e.eventing.onMouseMove,k)),w.mouseout(O)}r[u].tempPath=w,r[u].tempScale=T,C+=e.options.pictoMargin+m[r[u].pathName].width*T}var I=e.visualSet.getBBox();switch(e.visualSet.remove(),C=(e.root.options.canvasWidth-I.width)/2,e.options.align){case"middle":E=e.background.bb.y+e.background.bb.height/2;break;case"top":E=e.background.bb.y+(e.background.bb.height-I.height)/2;break;case"bottom":E=e.background.bb.y2-(e.background.bb.height-I.height)/2}var P=[];for(u=0;u<r.length;u++){C+=0!==u?e.options.pictoMargin+m[r[u].pathName].width/2*r[u].tempScale:0===u?m[r[u].pathName].width*r[u].tempScale/2:0;var L;switch(e.options.align){case"middle":L=E;break;case"top":L=E+m[r[u].pathName].height/2*r[u].tempScale;break;case"bottom":L=E-m[r[u].pathName].height/2*r[u].tempScale}var D=[["T",-(m[r[u].pathName].width/2)+C,-(m[r[u].pathName].height/2)+L],["S",r[u].tempScale,r[u].tempScale,-(m[r[u].pathName].width/2)+C+m[r[u].pathName].width/2,-(m[r[u].pathName].height/2)+L+m[r[u].pathName].height/2]],A=[["T",-(m[r[u].pathName].width/2)+C,-(m[r[u].pathName].height/2)+L],["S",0,0,-(m[r[u].pathName].width/2)+C+m[r[u].pathName].width/2,-(m[r[u].pathName].height/2)+L+m[r[u].pathName].height/2]],N=$.proxy(e.afterAnimation,{data:r[u],newShape:m[r[u].pathName],x:C,y:L,actionCounter:e.state.actionCounter});if(e.root.options.canAnimate){var B=$.extend({opacity:1,fill:r[u].color,stroke:r[u].color,transform:A},e.options.shapeStyle);m[r[u].pathName].image&&e.removeStyle(B),e.options.fluidTransition&&e.state.currentState[u]?r[u].tempPath.attr(e.state.currentState[u]):r[u].tempPath.attr(B),e.state.currentState[u]=$.extend({opacity:1,fill:r[u].color,stroke:r[u].color,transform:D},e.options.shapeStyle),m[r[u].pathName].image&&e.removeStyle(e.state.currentState[u]),P.push({obj:r[u].tempPath,anim:Raphael.animation(e.state.currentState[u],e.root.options.animationDuration,e.root.options.animationStyle,N).delay(u/r.length*e.root.options.animationSequenceDuration)})}else{var j=$.extend({opacity:1,fill:r[u].color,stroke:r[u].color,transform:D},e.options.shapeStyle);m[r[u].pathName].image&&e.removeStyle(j),r[u].tempPath.attr(j),N()}C+=e.options.pictoMargin+m[r[u].pathName].width/2*r[u].tempScale}for(;e.state.currentState.length>r.length;)e.state.currentState.pop();var R=0;for(u=0;u<P.length;u++)P[u].obj.stop(),P[u].obj.animate(P[u].anim),R=Math.max(R,P[u].anim.ms+P[u].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},R),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.removeStyle=function(t){delete t.fill,delete t.stroke},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t=this.data,n=this.newShape.width*this.data.tempScale,o=this.newShape.height*this.data.tempScale,i=e.options.padding+e.options.pictoMargin;if(t.inValueString.length>0&&t.name){if(15>=n)return;e.options.inTextStyle["font-size"]=e.state.inTextStyleFontSize;do{var r=e.root.paper.text(this.x,this.y+o/2+i/2,t.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({fill:t.color},e.options.inTextStyle)));if(r.bb=r.getBBox(),r.bb.height<i&&r.bb.width<n){e.visualSet.push(r);break}r.remove(),e.options.inTextStyle["font-size"]-=1}while(e.options.inTextStyle["font-size"]>=8)}}},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t,!1)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,cx:0,cy:0,startAngle:90,radius:150,radiusInner:100,hasGroups:!0,showGroups:!0,showLabels:!0,highlightLegendItem:!0,type:"pie",panelMarginY:15,inLinePointerSize:13,inLinePointerStyle:{},showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16},pieElementStyle:{"stroke-width":.2},captionFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow",
"font-size":24,"text-anchor":"start",cursor:"default",fill:"#626262"},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},innerPathStyle:{"stroke-width":0,"stroke-opacity":0,fill:"#626262",stroke:"none"},innerPathOff:!1,tooltipOptions:{},_labelWrapperOptions:{},_labelTextOptions:{},_buttonWrapperOptions:{},_buttonTextOptions:{}},e.data=null,e.labels=null,e.visualSet=null,e.visualSubSet=null,e.background=null,e.buttonHeight=0,e.pieAnimationName="",e.state={currentState:[],newState:[],interactionsEnabled:!1,actionCounter:0},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.options.showInLineValues&&(e.root.options.canGlowPath=!1),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),InfoCharts.Visuals.ShapeGenerator.Anim["pie-"+e.options.type](e.root.paper,"ipg-pie"),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data),InfoCharts.Helper.Data.setAbs(e.data);var i=0,r=e.root.getCenter(),a=InfoCharts.Helper.Data.getGroups(e.data);n=n||a[0]||null;var s=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);if(o&&e.options.showGroups&&e.options.hasGroups&&a.length>1&&new InfoCharts.Visuals.RadioButtons({groups:a,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(s,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{onOverCallback:e.eventing.onLabelOver,onOutCallback:e.eventing.onLabelOut,enableHover:e.options.highlightLegendItem}),l),i=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,i),e.labels&&e.labels.setPosition({x:r.x,y:e.root.options.canvasHeight-i/2});var u=e.root.options.canvasHeight-i-e.buttonHeight,c=e.buttonHeight;e.background.attr({y:c,height:u});var h=.85*Math.min(u,e.root.options.canvasWidth)/2;e.options.radius=h,e.options.radiusInner=.65*e.options.radius;var p=Number(e.options.radiusInnerPercent);!isNaN(p)&&p>0&&1>p&&(e.options.radiusInner=e.options.radius*p),e.generate.generate(e.options.type,s),e.setPosition({x:r.x,y:c+u/2}),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.setPosition=function(t){if(e.visualSet.transform([["T",t.x,t.y]]),e.options.showInLineValues){var n=e.background.getBBox(),o=e.visualSet.getBBox(),i=Math.min(n.width/o.width,n.height/o.height,n.width/2/Math.abs(o.x2-(n.x+n.width/2)),n.height/2/Math.abs(o.y2-(n.y+n.height/2)),n.width/2/Math.abs(n.x+n.width/2-o.x),n.height/2/Math.abs(n.y+n.height/2-o.y));i=Math.abs(i)>1?1:.95*i,e.visualSet.transform([["T",t.x,t.y],["S",i,i,t.x,t.y]])}},e.eventing={helper:{preHoverColor:{}},onLabelOver:function(){},onLabelOut:function(){},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setText(this.data.name).setValue(this.data.valueString).setPosition(e.root.getMousePosition(t),this.data.color)),e.options.highlightLegendItem&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}},e.generate={generate:function(t,n){e.visualSubSet?e.visualSubSet.length>0&&(e.visualSubSet.remove(),e.visualSubSet=e.root.paper.set()):e.visualSubSet=e.root.paper.set(),e.root.options.canAnimate||e.visualSet&&e.visualSet.length>0&&e.visualSet.remove(),e.visualSet=e.root.paper.set();var o=e.generate[t](n);e.options.highlightLegendItem&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*")),e.onmouseoutFuncList=[];for(var i=0;i<o.length;i++){var r=$.proxy(e.eventing.onMouseOver,o[i].context),a=$.proxy(e.eventing.onMouseOut,o[i].context);e.onmouseoutFuncList.push(a),e.options.highlightLegendItem&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+o[i].context.data.objectId,r),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+o[i].context.data.objectId,a)),o[i].unbindAll(),o[i].mouseover(r),o[i].mousemove($.proxy(e.eventing.onMouseMove,o[i].context)),o[i].mouseout(a),e.visualSet.push(o[i])}},pie:function(t){var n=[],o=_.reduce(t,function(t,e){return t+e.value},0),i=e.options.startAngle,r=0,a=0===e.state.currentState.length;e.state.newState=[];var s,l=Math.PI/180,u=null,c=[],h=function(){},p=function(){this.show()};for(s=0;s<t.length;s++){t[s].percentage=Math.abs(t[s].value/o),t[s].percentage=InfoCharts.Helper.Misc.constrainValue(1e-4,.9999,t[s].percentage),r=i-360*t[s].percentage;var d=e.state.currentState[s]?e.state.currentState[s].path:e.root.paper.path();if(e.options.showInLineValues){var f=!0,g=e.options.radius+e.options.inLinePointerSize,m=i+e.options.startAngle+(r-i)/2,v=m-e.options.startAngle<-(180-e.options.startAngle)?-1:1,y=e.root.paper.path([["M",Math.sin(l*m)*e.options.radius,Math.cos(l*m)*e.options.radius],["L",Math.sin(l*m)*g,Math.cos(l*m)*g],["L",Math.sin(l*m)*g+e.options.inLinePointerSize*v,Math.cos(l*m)*g]]);y.attr($.extend({},{stroke:t[s].color},e.options.inLinePointerStyle));var b=e.root.paper.text(Math.sin(l*m)*g+(e.options.inLinePointerSize+3)*v,Math.cos(l*m)*g,t[s].inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},{"text-anchor":0>v?"end":"start",fill:t[s].color},e.options.inTextStyle)));b.bb=b.getBBox();for(var x=0;x<c.length;x++)if(Raphael.isBBoxIntersect(c[x],b.bb)){f=!1;break}var w=e.root.paper.set();f?(c.push(b.bb),w.push(y),w.push(b),w.hide(),e.visualSet.push(w),e.visualSubSet.push(w)):(y.remove(),b.remove()),u=$.proxy(p,w)}else u=h;if(e.root.options.canAnimate){var S;a?(S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,e.options.startAngle-360*(1/t.length)*s,e.options.startAngle-360*(1/t.length)*(s+1),e.options.radius],fill:t[s].color,stroke:t[s].color},e.options.pieElementStyle)},S.path.attr(S.attr),e.state.currentState[s]=S):e.state.currentState[s]||(S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,0!==s?e.state.currentState[s-1].attr["ipg-pie"][3]:e.options.startAngle-360*1e-4,0!==s?e.state.currentState[s-1].attr["ipg-pie"][3]-360*1e-4:e.options.startAngle-360*1e-4,e.options.radius],fill:t[s].color,stroke:t[s].color},e.options.pieElementStyle)},S.path.attr(S.attr),e.state.currentState[s]=S),S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,i,r,e.options.radius],fill:t[s].color,stroke:t[s].color},e.options.pieElementStyle),after:u},e.state.currentState[s].attr["ipg-pie"][4]=e.options.radius,S.path.attr(e.state.currentState[s].attr),e.state.newState[s]=S}else d.attr({"ipg-pie":[e.options.cx,e.options.cy,i,r,e.options.radius]}),d.attr($.extend({fill:t[s].color,stroke:t[s].color},e.options.pieElementStyle)),u();d.context={data:t[s],path:d},n.push(d),i=r}for(s=t.length;s<e.state.currentState.length;s++)e.state.currentState[s].path.stop(),e.state.currentState[s].path.remove(),e.state.currentState[s]=null;if(e.root.options.canAnimate)for(s=0;s<e.state.newState.length;s++)e.state.newState[s].path.stop(),e.state.newState[s].path.animate(e.state.newState[s].attr,e.root.options.animationDuration,e.root.options.animationStyle,e.state.newState[s].after);return setTimeout(function(){e.state.interactionsEnabled=!0},e.root.options.animationDuration),e.state.currentState=e.state.newState,n},doughnut:function(t){var n=_.reduce(t,function(t,e){return t+e.value},0),o=e.options.startAngle,i=0,r=[],a=0===e.state.currentState.length;e.state.newState=[];for(var s=Math.PI/180,l=[],u=null,c=function(){},h=function(){this.show()},p=0;p<t.length;p++){t[p].percentage=Math.abs(t[p].value/n),t[p].percentage=InfoCharts.Helper.Misc.constrainValue(1e-4,.9999,t[p].percentage),i=o-360*t[p].percentage;var d=e.state.currentState[p]?e.state.currentState[p].path:e.root.paper.path();if(e.options.showInLineValues){var f=!0,g=e.options.radius+e.options.inLinePointerSize,m=o+e.options.startAngle+(i-o)/2,v=m-e.options.startAngle<-(180-e.options.startAngle)?-1:1,y=e.root.paper.path([["M",Math.sin(s*m)*e.options.radius,Math.cos(s*m)*e.options.radius],["L",Math.sin(s*m)*g,Math.cos(s*m)*g],["L",Math.sin(s*m)*g+e.options.inLinePointerSize*v,Math.cos(s*m)*g]]);y.attr($.extend({},{stroke:t[p].color},e.options.inLinePointerStyle));var b=e.root.paper.text(Math.sin(s*m)*g+(e.options.inLinePointerSize+3)*v,Math.cos(s*m)*g,t[p].inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},{"text-anchor":0>v?"end":"start",fill:t[p].color},e.options.inTextStyle)));b.bb=b.getBBox();for(var x=0;x<l.length;x++)if(Raphael.isBBoxIntersect(l[x],b.bb)){f=!1;break}var w=e.root.paper.set();f?(l.push(b.bb),w.push(y),w.push(b),w.hide(),e.visualSet.push(w),e.visualSubSet.push(w)):(y.remove(),b.remove()),u=$.proxy(h,w)}else u=c;var S;e.root.options.canAnimate?(a?(S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,e.options.radiusInner,e.options.radius,e.options.startAngle-360*(1/t.length)*p,e.options.startAngle-360*(1/t.length)*(p+1)],fill:t[p].color,stroke:t[p].color},e.options.pieElementStyle)},d.attr(S.attr),e.state.currentState[p]=S):e.state.currentState[p]||(S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,e.options.radiusInner,e.options.radius,0!==p?e.state.currentState[p-1].attr["ipg-pie"][5]:e.options.startAngle-360*1e-4,0!==p?e.state.currentState[p-1].attr["ipg-pie"][5]-360*1e-4:e.options.startAngle-360*1e-4],fill:t[p].color,stroke:t[p].color},e.options.pieElementStyle)},d.attr(S.attr),e.state.currentState[p]=S),S={path:d,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,e.options.radiusInner,e.options.radius,o,i],fill:t[p].color,stroke:t[p].color},e.options.pieElementStyle),after:u},e.state.currentState[p].attr["ipg-pie"][2]=e.options.radiusInner,e.state.currentState[p].attr["ipg-pie"][3]=e.options.radius,S.path.attr(e.state.currentState[p].attr),e.state.newState[p]=S):(d.attr({"ipg-pie":[e.options.cx,e.options.cy,e.options.radiusInner,e.options.radius,o,i]}),d.attr($.extend({fill:t[p].color,stroke:t[p].color},e.options.pieElementStyle)),u()),d.context={data:t[p],path:d},r.push(d),o=i}if(e.options.hasGroups&&(!t[0].shape||e.options.innerPathOff))for(var C;;){if(C=e.root.paper.text(0,0+e.root.state.fontOffsetY,t[0].group),C.attr(e.options.captionFontStyle),2*e.options.radiusInner-15>C.getBBox().width){C.attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.captionFontStyle)),C.attr({x:-C.getBBox().width/2}),e.visualSet.push(C),e.visualSubSet.push(C);break}if(C.remove(),e.options.captionFontStyle["font-size"]--,e.options.captionFontStyle["font-size"]<5)break}if(t[0].shape&&!e.options.innerPathOff){InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(InfoCharts.Visuals.ShapeGenerator.Path[t[0].shape]);var E=Math.min((2*e.options.radiusInner-15)/InfoCharts.Visuals.ShapeGenerator.Path[t[0].shape].width,(2*e.options.radiusInner-15)/InfoCharts.Visuals.ShapeGenerator.Path[t[0].shape].height),T=InfoCharts.Visuals.ShapeGenerator.Func.scalePath(InfoCharts.Visuals.ShapeGenerator.Path[t[0].shape],E),k=null;T.image?k=e.root.paper.image(T.image,-T.width/2,-T.height/2,T.width,T.height):(T.path=Raphael.transformPath(T.path,[["T",-T.width/2,-T.height/2]]),k=e.root.paper.path(T.path).attr(e.options.innerPathStyle)),e.visualSet.push(k),e.visualSubSet.push(k)}for(p=t.length;p<e.state.currentState.length;p++)e.state.currentState[p].path.stop(),e.state.currentState[p].path.remove(),e.state.currentState[p]=null;if(e.root.options.canAnimate)for(p=0;p<e.state.newState.length;p++)e.state.newState[p].path.stop(),e.state.newState[p].path.animate(e.state.newState[p].attr,e.root.options.animationDuration,e.root.options.animationStyle,e.state.newState[p].after);return setTimeout(function(){e.state.interactionsEnabled=!0},e.root.options.animationDuration),e.state.currentState=e.state.newState,r},polar:function(t){var n=e.options.startAngle,o=0,i=[],r=0===e.state.currentState.length;e.state.newState=[];for(var a=0;a<t.length;a++){t[a].percentage=Math.abs(t[a].value/100),t[a].percentage=InfoCharts.Helper.Misc.constrainValue(1e-4,.9999,t[a].percentage);var s=(t.length-.7*a)/t.length,l=e.options.radius*s,u=e.options.radius*s-e.options.radius/t.length*.4;o=n-360*t[a].percentage;var c,h=e.state.currentState[a]?e.state.currentState[a].path:e.root.paper.path();e.root.options.canAnimate?(r?(c={path:h,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,l,u,n,n-360*1e-4],fill:t[a].color,stroke:t[a].color},e.options.pieElementStyle)},h.attr(c.attr),e.state.currentState[a]=c):e.state.currentState[a]||(c={path:h,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,l,u,0!==a?e.state.currentState[a-1].attr["ipg-pie"][5]:n-360*1e-4,0!==a?e.state.currentState[a-1].attr["ipg-pie"][5]-360*1e-4:n-360*1e-4],fill:t[a].color,stroke:t[a].color},e.options.pieElementStyle)},h.attr(c.attr),e.state.currentState[a]=c),c={path:h,attr:$.extend({"ipg-pie":[e.options.cx,e.options.cy,l,u,n,o],fill:t[a].color,stroke:t[a].color},e.options.pieElementStyle)},e.state.currentState[a].attr["ipg-pie"][2]=l,e.state.currentState[a].attr["ipg-pie"][3]=u,c.path.attr(e.state.currentState[a].attr),e.state.newState[a]=c):(h.attr({"ipg-pie":[e.options.cx,e.options.cy,l,u,n,o]}),h.attr($.extend({fill:t[a].color,stroke:t[a].color},e.options.pieElementStyle))),h.context={data:t[a],path:h},i.push(h)}for(a=t.length;a<e.state.currentState.length;a++)e.state.currentState[a].path.stop(),e.state.currentState[a].path.remove(),e.state.currentState[a]=null;if(e.root.options.canAnimate)for(a=0;a<e.state.newState.length;a++)e.state.newState[a].path.stop(),e.state.newState[a].path.animate(e.state.newState[a].attr,e.root.options.animationDuration,e.root.options.animationStyle);return setTimeout(function(){e.state.interactionsEnabled=!0},e.root.options.animationDuration),e.state.currentState=e.state.newState,i}},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t=this.data;t.inValueString.length>0}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},padding:15,maxValueAuto:!1,maxValue:100,backgroundInactive:{fill:"#DFDFDF","stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"}},e.state={interactionsEnabled:!1,actionCounter:0},e.visualSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setAbs(e.data),e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&e.options.showGroups&&e.options.hasGroups&&r.length>1&&new InfoCharts.Visuals.RadioButtons({groups:r,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox();var u=e.background.bb;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var c=[];e.options.maxValueAuto&&(e.options.maxValue=_.reduce(a,function(t,e){return t+e.value},0));var h={x:u.x+e.options.padding,y:u.y+e.options.padding,x2:u.x2-e.options.padding,y2:u.y2-e.options.padding,width:u.width-2*e.options.padding,height:u.height-2*e.options.padding};e.root.paper.rect(h.x,h.y,h.width,h.height).attr(e.options.backgroundInactive);var p=h.width/e.options.maxValue,d=0,f=null;e.onmouseoutFuncList=[];for(var g=0;g<a.length;g++){var m=a[g],v=e.root.paper.rect(h.x,h.y,0,h.height),y={x:h.x+d*p,width:m.value*p};v.attr($.extend({fill:m.color,stroke:m.color},e.options.shapeStyle)),f&&v.insertBefore(f),e.visualSet.push(v);var b={data:m,path:v},x=$.proxy(e.eventing.onMouseOver,b),w=$.proxy(e.eventing.onMouseOut,b);e.onmouseoutFuncList.push(w),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+b.data.objectId,x),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+b.data.objectId,w)),v.mouseover(x),v.mousemove($.proxy(e.eventing.onMouseMove,b)),v.mouseout(w);var S=$.proxy(e.afterAnimation,{data:m,shape:v,actionCounter:e.state.actionCounter});e.root.options.canAnimate?c.push({obj:v,anim:Raphael.animation(y,e.root.options.animationDuration,e.root.options.animationStyle,S).delay(g/a.length*e.root.options.animationSequenceDuration)}):(v.attr(y),S()),d+=m.value,f=v}var C=0;for(g=0;g<c.length;g++)c[g].obj.stop(),c[g].obj.animate(c[g].anim),C=Math.max(C,c[g].anim.ms+c[g].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},C),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},padding:15,shapeStyle:{"stroke-width":3,"stroke-opacity":1},cellTextWrapperOptions:{canRotate:!1,text:{labelFontStyle:{"font-size":60}}}},e.state={interactionsEnabled:!1,actionCounter:0,modifiedTextStyle:null},e.visualSet=null,e.data=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.state.modifiedTextStyle=$.extend(!0,{},e.options.cellTextWrapperOptions),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&e.options.showGroups&&e.options.hasGroups&&r.length>1&&new InfoCharts.Visuals.RadioButtons({groups:r,selectedGroup:n,onClickCallback:e.eventing.onGroupChanged,el:document.getElementById(e.root.options.canvasSelectorId),tabs:e.root.options.tabs}),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"realLeft"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox();var u=e.background.bb;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var c=[],h={x:u.x+e.options.padding,y:u.y+e.options.padding,x2:u.x2-e.options.padding,y2:u.y2-e.options.padding,width:u.width-2*e.options.padding,height:u.height-2*e.options.padding},p=InfoCharts.Visuals.ShapeGenerator.Path.brainImage;e.visualSet.push(e.root.paper.image(p.image,h.x+h.width/2-p.width/2,h.y+h.height/2-p.height/2,p.width,p.height));for(var d=0,f=0;f<c.length;f++)c[f].obj.stop(),c[f].obj.animate(c[f].anim),d=Math.max(d,c[f].anim.ms+c[f].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},d),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.opts.remove(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t)})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.opts.setPosition(e.root.getMousePosition(t))},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.opts.remove(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i,r=n(399),a=o(r);i=function(){return function(t){if(t.tabs){$(t.el).parent().find(".igc-tabs").remove(),a["default"].createTabs(t.groups,t.el);var e=$(t.el).parent().find(".igc-tab");$(e[0]).addClass("active");var o=function(e){var n=$(e.target).closest(".igc-tab"),o=n.attr("data-value");n.parent().find(".igc-tab").removeClass("active"),n.addClass("active"),t.onClickCallback(t.groups[o])};e.click(o)}else{t.$el=$(t.el);var i=n(524);if(t.$el.parent().find(".igc-sheets").remove(),t.groups.length>1){var r=_.template(i)({radiobuttons:t.groups,sheet:0});t.$el.prepend(r);var s=t.$el.parent().find(".igc-sheet"),l=function(e){var n=$(e.target).closest(".igc-sheet"),o=n.attr("data-value");n.parent().find(".igc-sheet").removeClass("active"),n.addClass("active"),t.onClickCallback(t.groups[o])};s.mousedown(l)}}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,inLinePointerSize:13,inLinePointerStyle:{},showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16},panelMarginY:15,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},padding:15,type:"pie",startAngle:90},e.state={interactionsEnabled:!1,actionCounter:0},e.visualSet=null,e.visualSubSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.visualSubSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),InfoCharts.Visuals.ShapeGenerator.Anim["pie-"+e.options.type](e.root.paper,"ipg-pie"),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;InfoCharts.Helper.Data.setAbs(e.data),e.animationQueue=[];var i=e.root.getCenter();InfoCharts.Helper.Data.setDefaults(e.data);var r=InfoCharts.Helper.Data.getGroups(e.data);n=n||r[0]||null;var a=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var s=0;if(i=e.root.getCenter(),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&r.length>1?(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),r),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:i.x,y:e.buttonHeight/2})):e.options.showInLineValues&&(e.options.padding=20)),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(a,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),s=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,s),e.labels&&e.labels.setPosition({x:i.x,y:e.root.options.canvasHeight-s/2+e.options.panelMarginY}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-s}),e.background.bb=e.background.getBBox(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var u=[],c=e.background.bb,h={x:c.x+e.options.padding,y:c.y+e.options.padding,x2:c.x2-e.options.padding,y2:c.y2-e.options.padding,width:c.width-2*e.options.padding,height:c.height-2*e.options.padding},p=Math.max(_.reduce(a,function(t,e){return Math.max(t,e.value)},0)),d=Math.min(h.width,h.height),f=d/Math.sqrt(p),g=h.x+h.width/2,m=h.y+h.height/2,v=360/a.length;e.onmouseoutFuncList=[];for(var y=function(){e.state.interactionsEnabled=!0},b=function(){this.show()},x=function(){},w=a.length,S=1===w,C=0;w>C;C++){var E,T,k,M=a[C],O=-e.options.startAngle+v*C;if("pie"==e.options.type)T=f*Math.sqrt(M.value)/2,E=e.root.paper.path().attr({"ipg-pie":[g,m,O,O,T]}),k={"ipg-pie":[g,m,O,O-v+(S?1e-4:0),T]};else{T=f*Math.sqrt(M.value)/2;var I=.5*T;E=e.root.paper.path().attr({"ipg-pie":[g,m,T,I,O,O]}),k={"ipg-pie":[g,m,T,I,O,O-v]}}E.attr($.extend({fill:M.color,stroke:M.color},e.options.shapeStyle)),e.visualSet.push(E);var P={data:M,path:E},L=$.proxy(e.eventing.onMouseOver,P),D=$.proxy(e.eventing.onMouseOut,P);e.onmouseoutFuncList.push(D),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+P.data.objectId,L),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+P.data.objectId,D)),E.mouseover(L),E.mousemove($.proxy(e.eventing.onMouseMove,P)),E.mouseout(D);var A=$.proxy(e.afterAnimation,{data:M,shape:E,actionCounter:e.state.actionCounter});e.root.options.canAnimate?u.push({obj:E,anim:Raphael.animation(k,e.root.options.animationDuration,e.root.options.animationStyle,A).delay(C/a.length*e.root.options.animationSequenceDuration)}):(E.attr(k),A());var N,B=O,j=O-v,R=Math.PI/180,H=[],F=T;if(e.options.showInLineValues){var z=!0,V=F+e.options.inLinePointerSize,U=B+e.options.startAngle+(j-B)/2,W=180>U&&U>0?1:-1,G=e.root.paper.path([["M",g+Math.sin(R*U)*F,m+Math.cos(R*U)*F],["L",g+Math.sin(R*U)*V,m+Math.cos(R*U)*V],["L",g+Math.sin(R*U)*V+e.options.inLinePointerSize*W,m+Math.cos(R*U)*V]]);G.attr($.extend({},{stroke:M.color},e.options.inLinePointerStyle));
var K=e.root.paper.text(g+Math.sin(R*U)*V+(e.options.inLinePointerSize+3)*W,m+Math.cos(R*U)*V,M.valueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},{"text-anchor":0>W?"end":"start",fill:M.color},e.options.inTextStyle)));K.bb=K.getBBox();for(var q=0;q<H.length;q++)if(Raphael.isBBoxIntersect(H[q],K.bb)){z=!1;break}var Y=e.root.paper.set();z?(H.push(K.bb),Y.push(G),Y.push(K),Y.hide(),e.visualSet.push(Y),e.visualSubSet.push(Y)):(G.remove(),K.remove()),N=$.proxy(b,Y)}else N=x;N()}var Z=0;for(C=0;C<u.length;C++)u[C].obj.stop(),u[C].obj.animate(u[C].anim),Z=Math.max(Z,u[C].anim.ms+u[C].anim.del);setTimeout(y,Z),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.afterAnimation=function(){},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.showTooltip&&t&&(e.tooltip=InfoCharts.tooltip(),e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return{Func:{appendViewBox:function(t){if((!t.width||!t.height)&&t.path){var e=Raphael.pathBBox(t.path);t.width=e.width,t.height=e.height}return t},addNewShape:function(t,e){InfoCharts.Visuals.ShapeGenerator.Path[t]={},InfoCharts.Visuals.ShapeGenerator.Path[t].path=e},addNewImage:function(t,e,n,o){InfoCharts.Visuals.ShapeGenerator.Path[t]={},InfoCharts.Visuals.ShapeGenerator.Path[t].image=e,InfoCharts.Visuals.ShapeGenerator.Path[t].width=n,InfoCharts.Visuals.ShapeGenerator.Path[t].height=o},getPaths:function(t,e){var n=t.split(","),o=InfoCharts.Visuals.ShapeGenerator.Path;window.inlineShapes&&_.each(n,function(t){window.inlineShapes[t+"Path"]&&(o[t+"Path"]=window.inlineShapes[t+"Path"])}),t=n.filter(function(t){return o[t+"Path"]?void 0:t}),t.length?$.get("/api/shapes/"+t.join(","),_.bind(function(t){t&&_.each(t,function(t){var e=t.title+"Path";o[e]={path:t.path,dimensions:t.dimensions,title:e}})},this),"json").then(e):e()},rotatePath:function(t,e,n){if(!InfoCharts.Visuals.ShapeGenerator.Path[e]){var o=Raphael.transformPath(InfoCharts.Visuals.ShapeGenerator.Path[t].path,[["T",-InfoCharts.Visuals.ShapeGenerator.Path[t].width/2,-InfoCharts.Visuals.ShapeGenerator.Path[t].height/2],["r",n],["T",InfoCharts.Visuals.ShapeGenerator.Path[t].height/2,InfoCharts.Visuals.ShapeGenerator.Path[t].width/2]]);InfoCharts.Visuals.ShapeGenerator.Func.addNewShape(e,o),InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(InfoCharts.Visuals.ShapeGenerator.Path[e])}},scalePath:function(t,e){if(!t)return!1;var n={};return t.path&&(n.path=Raphael.transformPath(t.path,[["S",e,e,0,0]])),t.image&&(n.image=t.image,n.width=t.width*e,n.height=t.height*e),InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(n),n}},Path:{},Anim:{"bar-bar":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=t-n/2;return{path:[["M",i,e],["L",i,e+o],["L",i+n,e+o],["L",i+n,e],["Z"]]}})},"bar-bar-horizontal":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=e-o/2;return{path:[["M",t,i],["L",t,i+o],["L",t+n,i+o],["L",t+n,i],["Z"]]}})},"bar-bow":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=t-n/2;return{path:[["M",i,e],["L",i+n,e+o],["L",i,e+o],["L",i+n,e],["Z"]]}})},"bar-bow-horizontal":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=e-o/2;return{path:[["M",t,i],["L",t,i+o],["L",t+n,i],["L",t+n,i+o],["Z"]]}})},"bar-triangle":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=t-n/2;return{path:[["M",i,e],["L",t,e+o],["L",i+n,e],["Z"]]}})},"bar-triangleInverse":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=t-n/2;return{path:[["M",i,e+o],["L",i+n,e+o],["L",t,e],["Z"]]}})},"bar-triangle-horizontal":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=e-o/2;return{path:[["M",t,i],["L",t+n,e],["L",t,i+o],["Z"]]}})},"bar-curve":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=t-n/2;return{path:[["M",i,e],["C",i,e+o,t-2,e+o,t,e+o],["C",t+2,e+o,i+n,e+o,i+n,e],["Z"]]}})},"bar-curve-horizontal":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=e-o/2;return{path:[["M",t,i],["C",t+n,i,t+n,e-2,t+n,e],["C",t+n,e+2,t+n,i+o,t,i+o],["Z"]]}})},"bar-path":function(t,e,n){InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(InfoCharts.Visuals.ShapeGenerator.Path[n]),t.customAttributes[e]||(t.customAttributes[e]=function(t,e,o,i){var r=Raphael.transformPath(InfoCharts.Visuals.ShapeGenerator.Path[n].path,[["T",t-InfoCharts.Visuals.ShapeGenerator.Path[n].width/2,e-InfoCharts.Visuals.ShapeGenerator.Path[n].height],["S",o/InfoCharts.Visuals.ShapeGenerator.Path[n].width,-i/InfoCharts.Visuals.ShapeGenerator.Path[n].height,t,e]]);return{path:r}})},"bar-path-horizontal":function(t,e,n){InfoCharts.Visuals.ShapeGenerator.Func.appendViewBox(InfoCharts.Visuals.ShapeGenerator.Path[n]),InfoCharts.Visuals.ShapeGenerator.Func.rotatePath(n,n+"-horizontal",-90),n+="-horizontal",t.customAttributes[e]||(t.customAttributes[e]=function(t,e,o,i){var r=Raphael.transformPath(InfoCharts.Visuals.ShapeGenerator.Path[n].path,[["T",t-InfoCharts.Visuals.ShapeGenerator.Path[n].width,e-InfoCharts.Visuals.ShapeGenerator.Path[n].height/2],["S",-o/InfoCharts.Visuals.ShapeGenerator.Path[n].width,i/InfoCharts.Visuals.ShapeGenerator.Path[n].height,t,e]]);return{path:r}})},"bar-stick":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=3,r=i/2,a=4,s=.5,l=[];l.push(["M",t-r,e]),l.push(["L",t+r,e]),l.push(["L",t+r,e+o]),l.push(["L",t-r,e+o]),l.push(["Z"]);for(var u=Math.floor(Math.abs(o/(n/2*s))),c=o>0?1:-1,h=0,p=0;u>p;p++){var d=e+n/2*c+a*c+h;if(c>0){if(d>e+o)break}else if(e+o>d)break;l.push(["M",t+r,e+h+a*c]),l.push(["L",t+r,e+h]),l.push(["L",t+n/2,e+n/2*c+h]),l.push(["L",t+n/2,d]),l.push(["Z"]),l.push(["M",t-r,e+h+a*c]),l.push(["L",t-r,e+h]),l.push(["L",t-n/2,e+n/2*c+h]),l.push(["L",t-n/2,d]),l.push(["Z"]),h+=n/2*s*c}return{path:l}})},"bar-stick-horizontal":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e,n,o){var i=3,r=i/2,a=4,s=.5,l=[];l.push(["M",t,e-r]),l.push(["L",t,e+r]),l.push(["L",t+n,e+r]),l.push(["L",t+n,e-r]),l.push(["Z"]);for(var u=Math.floor(Math.abs(n/(o/2*s))),c=n>0?1:-1,h=0,p=0;u>p;p++){var d=t+o/2*c+a*c+h;if(c>0){if(d>t+n)break}else if(t+n>d)break;l.push(["M",t+h+a*c,e+r]),l.push(["L",t+h,e+r]),l.push(["L",t+o/2*c+h,e+o/2]),l.push(["L",d,e+o/2]),l.push(["Z"]),l.push(["M",t+h+a*c,e-r]),l.push(["L",t+h,e-r]),l.push(["L",t+o/2*c+h,e-o/2]),l.push(["L",d,e-o/2]),l.push(["Z"]),h+=o/2*s*c}return{path:l}})},"picto-visibility":function(t,e){t.customAttributes[e]||(t.customAttributes[e]=function(t,e){return e>t?{opacity:0}:{opacity:1}})},"pie-pie":function(t,e){if(!t.customAttributes[e]){var n=Math.PI/180;t.customAttributes[e]=function(t,e,o,i,r){return{path:[["M",t,e],["L",t+r*Math.cos(-i*n),e+r*Math.sin(-i*n)],["A",r,r,0,+(Math.abs(i-o)>180),0,t+r*Math.cos(-o*n),e+r*Math.sin(-o*n)],["z"]]}}}},"pie-doughnut":function(t,e){if(!t.customAttributes[e]){var n=Math.PI/180;t.customAttributes[e]=function(t,e,o,i,r,a){return{path:[["M",t+o*Math.cos(-a*n),e+o*Math.sin(-a*n)],["L",t+i*Math.cos(-a*n),e+i*Math.sin(-a*n)],["A",i,i,0,+(Math.abs(a-r)>180),0,t+i*Math.cos(-r*n),e+i*Math.sin(-r*n)],["L",t+o*Math.cos(-r*n),e+o*Math.sin(-r*n)],["A",o,o,0,+(Math.abs(r-a)>180),1,t+o*Math.cos(-a*n),e+o*Math.sin(-a*n)],["z"]]}}}},"pie-polar":function(t,e){if(!t.customAttributes[e]){var n=Math.PI/180;t.customAttributes[e]=function(t,e,o,i,r,a){return{path:[["M",t+i*Math.cos(-a*n),e+i*Math.sin(-a*n)],["L",t+o*Math.cos(-a*n),e+o*Math.sin(-a*n)],["A",o,o,0,+(Math.abs(a-r)>180),0,t+o*Math.cos(-r*n),e+o*Math.sin(-r*n)],["L",t+i*Math.cos(-r*n),e+i*Math.sin(-r*n)],["A",i,i,0,+(Math.abs(r-a)>180),1,t+i*Math.cos(-a*n),e+i*Math.sin(-a*n)],["z"]]}}}},"gauge-gauge":function(t,e){if(!t.customAttributes[e]){var n=Math.PI/180;t.customAttributes[e]=function(t,e,o,i,r,a){return{path:[["M",t+o*Math.cos(-a*n),e+o*Math.sin(-a*n)],["L",t+i*Math.cos(-a*n),e+i*Math.sin(-a*n)],["A",i,i,0,+(Math.abs(a-r)>180),0,t+i*Math.cos(-r*n),e+i*Math.sin(-r*n)],["L",t+o*Math.cos(-r*n),e+o*Math.sin(-r*n)],["A",o,o,0,+(Math.abs(r-a)>180),1,t+o*Math.cos(-a*n),e+o*Math.sin(-a*n)],["z"]]}}}},"gauge-needle":function(t,e){if(!t.customAttributes[e]){var n=Math.PI/180;t.customAttributes[e]=function(t,e,o,i,r){return{path:[["M",t+o*Math.cos(-i*n),e+o*Math.sin(-i*n)],["L",t+r*Math.cos(-(i+90)*n),e+r*Math.sin(-(i+90)*n)],["A",r,r,0,+(Math.abs(i+90-(i+270))>180),0,t+r*Math.cos(-(i+270)*n),e+r*Math.sin(-(i+270)*n)],["Z"]]}}}}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(505);return function(t){var n=new e(t);return n.options.alignment="bottom",n.options.showPoints=!0,n}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(424);return function(t){var n=new e(t);return n.options.showArea=!1,n.options.showLines=!0,n.options.stacked=!0,n.options.pathStyle={"stroke-width":3,"fill-opacity":1},n}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.text=null,e.background=null,e.item=null,e.box=null,e.set=null,e.overlay=null,e.options={paddingX:6,paddingY:2,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,"text-anchor":"start",fill:"#FFFFFF",cursor:"default"},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},toUpperCase:!1,enableHover:!0,onClickCallback:null,onOverCallback:null,onOutCallback:null},e.state={dx:0,dy:0},e.init=function(t,n){if(e.options=$.extend(e.root.options.deepExtend,e.options,n),e.options.labelFontStyle["font-size"]=e.options.labelFontStyle["font-size"]||16,e.set=e.root.paper.set(),e.item=t,e.options.toUpperCase&&(e.item.name=e.item.name.toUpperCase()),e.text=e.root.paper.text(0,-.5+e.root.state.fontOffsetY,e.item.name),e.text.attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({fill:e.item.color},e.options.labelFontStyle))),e.box=e.text.getBBox(),e.background=e.root.paper.rect(-e.options.paddingX,-e.options.labelFontStyle["font-size"]/2-e.options.paddingY,e.box.width+2*e.options.paddingX,e.options.labelFontStyle["font-size"]+2*e.options.paddingY),e.options.enableHover&&(e.overlay=e.root.paper.rect(-e.options.paddingX,-e.options.labelFontStyle["font-size"]/2-e.options.paddingY,e.box.width+2*e.options.paddingX,e.options.labelFontStyle["font-size"]+2*e.options.paddingY)),e.box=e.background.getBBox(),e.background.insertBefore(e.text),e.background.attr($.extend({fill:e.item.color||"none",stroke:e.item.color},e.options.backgroundStyle)),e.options.enableHover&&e.overlay.attr({fill:"#FFFFFF",opacity:0}),0!==e.background.attr("opacity")){var o=InfoCharts.Helper.Misc.getContrastColor(e.text.attr("fill"),e.background.attr("fill"));e.text.attr({fill:o})}if(e.set.push(e.background),e.set.push(e.text),e.options.enableHover&&e.item.objectId){var i={path:e.background,data:e.item},r=$.proxy(e.eventing.onMouseOver,i),a=$.proxy(e.eventing.onMouseOut,i);eve.on("mouseoverdata."+e.root.options.canvasSelectorId+"."+e.item.objectId,r),eve.on("mouseoutdata."+e.root.options.canvasSelectorId+"."+e.item.objectId,a),e.overlay.mouseover(r),e.overlay.mouseout(a)}return e},e.dispose=function(){eve.off("mouseoverdata."+e.root.options.canvasSelectorId+"."+e.item.objectId),eve.off("mouseoutdata."+e.root.options.canvasSelectorId+"."+e.item.objectId),e.overlay&&e.overlay.remove(),e.set.remove()},e.setPosition=function(t){var n=[["T",t.x-e.box.width/2+e.state.dx+e.options.paddingX,t.y+e.state.dy+e.options.paddingY]];e.set.attr({transform:n}),e.overlay&&e.overlay.attr({transform:n})},e.setPositionVertical=function(t){e.set.transform([["T",t.x-e.box.width/2+e.state.dx+e.options.paddingX,t.y+e.state.dy+e.options.paddingY],["R",-90,t.x,t.y]])},e.eventing={helper:{preHoverColor:null},onMouseOver:function(t){if(e.options.enableHover){e.eventing.helper.preHoverColor=this.path.attr("fill");var n=InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor,e.root.options.light);this.path.attr({fill:n}),e.root.options.canGlowLabel&&(this.glow=this.path.glow($.extend({color:n},e.root.options.glowStyle)),e.set.push(this.glow)),t&&this.data.objectId&&eve("mouseovertext."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null),e.options.onOverCallback&&e.options.onOverCallback()}},onMouseOut:function(t){e.options.enableHover&&null!==e.eventing.helper.preHoverColor&&(this.path.attr({fill:e.eventing.helper.preHoverColor}),e.eventing.helper.preHoverColor=null,e.root.options.canGlowLabel&&this.glow&&this.glow.remove(),t&&this.data.objectId&&eve("mouseouttext."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null),e.options.onOutCallback&&e.options.onOutCallback())}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.label=null,e.set=null,e.isVertical=!1,e.options={canRotate:!0,wrapper:{marginX:2,marginY:0},text:{enableHover:!1,paddingX:0,paddingY:1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":20,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"}},minFontSize:10,minResizeStep:2},e.init=function(t,n,o,i){$.extend(!0,e.options,t);for(var r="undefined"!=typeof n?n.split(" "):[],a=[],s=0;s<r.length;s++)a.push({name:r[s]||"",color:null});for(var l=e.options.text.labelFontStyle["font-size"],u=null;;){if(!(l&&l>=e.options.minFontSize)){u&&u.dispose(),e.label=null;break}e.options.text.labelFontStyle["font-size"]=l,u=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Text,$.extend({},e.options.wrapper,{maxWidth:.95*o}),$.extend({},e.options.text),a);var c=u.set.getBBox();if(c.height<=.95*i&&c.width<=.95*o){e.label=u;break}if(u.dispose(),l-=e.options.minResizeStep,!e.isVertical&&e.options.canRotate&&i>1.5*o){var h=o;o=i,i=h,e.isVertical=!0}}return e.label&&(e.set=e.label.set),e},e.setPosition=function(t){e.label&&(e.isVertical?e.label.setPositionVertical({x:t.x,y:t.y}):e.label.setPosition({x:t.x,y:t.y}))}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!1,panelMarginY:15,gridInnerMargin:2,gridOuterMargin:10,groupMaximum:!0,horizontalKoeficient:1,maxFontSize:30,minFontSize:11,maxFontSizeInLine:20,minFontSizeInLine:10,showText:!0,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{},_gridTextOptions:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":0,"text-anchor":"start",fill:"#FFFFFF",cursor:"default","font-weight":"bold",colorMethod:"default",contrastDarkColor:"#000000",contrastLightColor:"#ffffff"},backgroundStyle:{opacity:0}},showInLineValues:!1,_gridTextOptionsInLine:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":0,"text-anchor":"start",fill:"#FFFFFF",cursor:"default",colorMethod:"default",contrastDarkColor:"#000000",contrastLightColor:"#ffffff"},backgroundStyle:{opacity:0}}},e.state={interactionsEnabled:!1,modifiedTextStyle:null,modifiedTextStyleInLine:null,actionCounter:0},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.animationQueue=[],InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e.state.modifiedTextStyle=$.extend(!0,{},e.options._gridTextOptions),e.state.modifiedTextStyleInLine=$.extend(!0,{},e.options._gridTextOptionsInLine),e},e._loadDataActual=function(t,n,o){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;e.originalData=InfoCharts.Helper.Data.copyDataArray(t),InfoCharts.Helper.Data.setAbs(e.data),e.animationQueue=[],InfoCharts.Helper.Data.setDefaults(e.data);var i=InfoCharts.Helper.Data.getGroups(e.data);n=n||i[0]||null;var r=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var a=0,s=e.root.getCenter();if(o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&i.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),i),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(r,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Text,$.extend(e.options._labelWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-a}),e.background.bb=e.background.getBBox(),e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*")),e.onmouseoutFuncList=[],e.createBox({x:e.background.bb.x+e.options.gridOuterMargin,y:e.background.bb.y+e.options.gridOuterMargin,width:e.background.bb.width-2*e.options.gridOuterMargin,height:e.background.bb.height-2*e.options.gridOuterMargin},r);var u=[];if(e.root.options.canAnimate){var c=e.animationQueue.length;_.each(e.animationQueue,function(t,n){t.path.attr({transform:["S",0,0,t.box.x+t.box.width/2,t.box.y+t.box.height/2]}),u.push({obj:t.path,anim:Raphael.animation({transform:["S",1,1,t.box.x+t.box.width/2,t.box.y+t.box.height/2]},e.root.options.animationDuration,e.root.options.animationStyle,function(){t.text&&t.text.show(),t.textInLine&&t.textInLine.show()}).delay(n/c*e.root.options.animationSequenceDuration)})})}for(var h=0,p=0;p<u.length;p++)u[p].obj.stop(),u[p].obj.animate(u[p].anim),h=Math.max(h,u[p].anim.ms+u[p].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},h),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.createBox=function(t,n){if(1==n.length){var o=n[0].color,i=e.root.paper.rect(t.x,t.y,t.width,t.height);i.attr({fill:o,"stroke-width":0,"stroke-opacity":0,stroke:"none"});var r=0,a=0;t.width>=t.height?(r=t.width,a=t.height):(r=t.height,a=t.width);var s,l,u=null,c=null,h=e.root.paper.set(),p=e.options.maxFontSize,d=e.options.maxFontSizeInLine,f=e.options._gridTextOptions.labelFontStyle,g=e.options._gridTextOptionsInLine.labelFontStyle,m=InfoCharts.Helper.Misc;if(s="default"===f.colorMethod?m.getContrastColor(f.fill,o):m.getContrastYIQ(o,f.contrastDarkColor,f.contrastLightColor),l="default"===g.colorMethod?m.getContrastColor(g.fill,o):m.getContrastYIQ(o,g.contrastDarkColor,g.contrastLightColor),e.options.showText){for(;;){if(e.state.modifiedTextStyle.labelFontStyle["font-size"]=p,e.state.modifiedTextStyle.labelFontStyle.fill=s,e.options.showInLineValues&&(e.state.modifiedTextStyleInLine.labelFontStyle["font-size"]=d,e.state.modifiedTextStyleInLine.labelFontStyle.fill=l),u=new InfoCharts.Visuals.Text(e.root).init({name:n[0].name,color:""},e.state.modifiedTextStyle),e.options.showInLineValues&&(c=new InfoCharts.Visuals.Text(e.root).init({name:n[0].inValueString,color:""},e.state.modifiedTextStyleInLine)),e.options.showInLineValues){if(Math.max(u.box.width,c.box.width)<=r&&u.box.height+c.box.height<=a){u.text.hide(),c.text.hide();break}p-=2,d-=2,d<e.options.minFontSizeInLine&&(d=e.options.minFontSizeInLine)}else{if(u.box.width<=r&&u.box.height<=a){u.text.hide();break}p-=2}if(u.set.remove(),u=null,e.options.showInLineValues&&(c.set.remove(),c=null),p<e.options.minFontSize){u=null,c=null;break}}if(u&&c){var v=(u.box.height-c.box.height)/2;t.width>=t.height?(u.setPosition({x:t.x+t.width/2,y:t.y+t.height/2-u.box.height/2+v}),c.setPosition({x:t.x+t.width/2,y:t.y+t.height/2+c.box.height/2+v})):(u.setPositionVertical({x:t.x+t.width/2-u.box.height/2+v,y:t.y+t.height/2}),c.setPositionVertical({x:t.x+t.width/2+c.box.height/2+v,y:t.y+t.height/2})),h.push(u.set),h.push(c.set)}else u&&!c&&(t.width>=t.height?u.setPosition({x:t.x+t.width/2,y:t.y+t.height/2}):u.setPositionVertical({x:t.x+t.width/2,y:t.y+t.height/2}),h.push(u.set))}h.push(i);var y={data:{name:n[0].name,valueString:n[0].valueString,objectId:n[0].objectId},path:i},b=$.proxy(e.eventing.onMouseOver,y),x=$.proxy(e.eventing.onMouseOut,y);return e.onmouseoutFuncList.push(x),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+y.data.objectId,b),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+y.data.objectId,x)),h.mouseover(b),h.mousemove($.proxy(e.eventing.onMouseMove,y)),h.mouseout(x),e.root.options.canAnimate?e.animationQueue.push({box:t,path:i,text:u&&u.set,textInLine:c&&c.set}):(u&&u.text.show(),c&&c.text.show()),void e.visualSet.push(h)}for(var w=_.reduce(n,function(t,e){return t+e.value},0),S=[],C=[],E=0,T=0,k=!0,M=w/2,O=0;O<n.length;O++)k?(S.push(n[O]),E+=n[O].value,(E>=M||2==n.length||O==n.length-2)&&(e.options.groupMaximum||S.length>1&&(S.pop(),E-=n[O].value,O--),k=!1)):C.push(n[O]);T=w-E;var I={},P={};t.width>=t.height*e.options.horizontalKoeficient?(I={x:t.x,y:t.y,width:t.width*E/w-e.options.gridInnerMargin/2,height:t.height},P={x:t.x+I.width+e.options.gridInnerMargin,y:t.y,width:t.width*T/w-e.options.gridInnerMargin/2,height:t.height}):(I={x:t.x,y:t.y,width:t.width,height:t.height*E/w-e.options.gridInnerMargin/2},P={x:t.x,y:t.y+I.height+e.options.gridInnerMargin,width:t.width,height:t.height*T/w-e.options.gridInnerMargin/2}),S.length>0&&e.createBox(I,S),C.length>0&&e.createBox(P,C)},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.root.options.canGlowPath){var n=$.extend({color:e.eventing.helper.preHoverColor[this.data.objectId]},e.root.options.glowStyle);InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow||(t.myGlow=t.glow(n),e.visualSet.push(t.myGlow))})}e.options.showTooltip&&t&&(e.tooltip=Infogram.Charts.tooltip,e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:e.eventing.helper.preHoverColor[this.data.objectId]})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),e.eventing.helper.preHoverColor[this.data.objectId])},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.root.options.canGlowPath&&InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow&&(t.myGlow.remove(),t.myGlow=null)}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,autoLabelToggle:!0,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,showBarLabels:!0,showcategories:!0,style:"bar-bar",panelMarginY:15,barMaxWidth:40,barSpaceFraction:.8,absoluteDistribution:!1,chartDistribution:{canvasMargin:.15,groupMargin:.7,barMargin:.15},gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},textStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,cursor:"default"},showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,fill:"#FFFFFF"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_categoryOptions:{},_gridOptions:{},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.data=null,e.set=null,e.background=null,e.grid=null,e.buttons=null,e.labels=null,e.categoryLabel=null,e.tooltip=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,e.state={currentState:[],interactionsEnabled:!1,axesTitle:null,actionCounter:0,inTextStyleFontSize:0},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.set=e.root.paper.set(),e.options=$.extend(e.root.options.deepExtend,e.options,t),e.state.inTextStyleFontSize=e.options.inTextStyle["font-size"],e.set=e.root.paper.set(),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e.setPosition=function(t){e.set.transform(["T",t.x,t.y])},e._loadDataActual=function(t,n,o,i,r){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,e.eventing.helper.preHoverColor={},o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=0,s=e.root.getCenter(),l=InfoCharts.Helper.Data.getGroups(e.data);n=n||l[0]||"";var u=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),e.state.axesTitle[1]=null;var c=InfoCharts.Helper.Data.getPropertyValuesUniq(e.data,"category");if(e.options.barSpaceFraction=1-c.length/(c.length+9),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&l.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),l),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.categoryLabel&&(e.categoryLabel.dispose(),e.categoryLabel=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.autoLabelToggle&&l.length>1){var h=e.root.options.canvasWidth-20,p=Math.round(h/u.length*e.options.barSpaceFraction);p>e.options.barMaxWidth&&(p=e.options.barMaxWidth),e.options.textStyle["font-size"]>=p&&!e.options.visibleLabels?(e.options.showLabels=!0,e.options.showBarLabels=!1):(e.options.showLabels=!1,e.options.showBarLabels=!0)}if(e.options.showLabels&&e.options.showBarLabels&&(e.options.showBarLabels=!1),e.options.showLabels){var d=InfoCharts.Helper.Data.getLabelsUniq(u,e.options.hasValueInLabel);d.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"realLeft"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),d),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var f=0,g=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(f=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(g=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing));var m=e.getAxesOffsetTopBottom(u);e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[0+f,e.buttonHeight],size:[e.root.options.canvasWidthDefault-f*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-a-g],offset:[{start:0,end:0},{start:m.top,end:m.bottom}],zeroValues:[{top:1,bottom:0},{top:-1,bottom:0}],hideGrid:[!0,!1],labelXToBottom:!1,showGridOnEdge:!1}),e.options.absoluteDistribution?e.data:u,"y"),e.grid.createGrid();var v=e.root.options.canvasHeight-a-e.buttonHeight,y=e.buttonHeight;e.background.attr({x:0+f,y:y,width:e.root.options.canvasWidth-f*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),height:v-g}),e.background.bb=e.background.getBBox(),f&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:f/2,y:e.background.bb.y+e.background.bb.height/2})),g&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+g/2}));var b=0;e.options.showcategories&&c&&c.length>1&&(e.categoryLabel=new InfoCharts.Visuals.categories(e.root,e).init(e.options._categoryOptions,u),b=e.categoryLabel.height+2,e.categoryLabel.setPosition({x:0,y:y+v+e.categoryLabel.height/2+2})),e.root.resize(e.root.options.canvasWidth,e.root.options.canvasHeight+b),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2
}),e.generateBars(u),e.grid.postDisplayMods(e.options.gridPostOptions),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.getAxesOffsetTopBottom=function(t){if(e.options.showBarLabels){var n=_.reduce(t,function(t,n){if("number"==typeof n.value&&n.value<0){var o=e.root.paper.text(0,0,n.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),i=(o.getBBox().width||0)+2*e.options.textStyle["font-size"];return o.remove(),Math.max(t,i)}return t},null),o=_.reduce(t,function(t,n){if("string"==typeof n.value||n.value>0){var o=e.root.paper.text(0,0,n.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),i=(o.getBBox().width||0)+2*e.options.textStyle["font-size"];return o.remove(),Math.max(t,i)}return t},null);return n>0==!1&&(n=0),o>0==!1&&(o=0),{top:n,bottom:o}}return{top:0,bottom:0}},e.getAxesOffsetTopBottom_=function(t){if(e.options.showBarLabels){var n,o=_.reduce(t,function(t,e){return"number"==typeof e.value&&e.value<0&&(!t||e.name.length>t.name.length)?e:t},null),i=_.reduce(t,function(t,e){return("string"==typeof e.value||e.value>0)&&(!t||e.name.length>t.name.length)?e:t},null),r=0,a=0;return o&&(n=e.root.paper.text(0,0,o.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),r=(n.getBBox().width||0)+2*e.options.textStyle["font-size"],n.remove()),i&&(n=e.root.paper.text(0,0,i.name).attr(InfoCharts.Helper.Misc.parseFontStyle(e.options.textStyle)),a=(n.getBBox().width||0)+2*e.options.textStyle["font-size"],n.remove()),{top:r,bottom:a}}return{top:0,bottom:0}},e.generateBars=function(t){_.each(e.set,function(t){t.stop()}),e.set.remove(),e.set=e.root.paper.set();var n=e.options.barMaxWidth,o=InfoCharts.Helper.Data.getPropertyValuesUniq(t,"category"),i=e.background.bb.width-e.grid.state.axisSize[1],r=i/t.length*e.options.barSpaceFraction;r>1&&(r=Math.floor(r)),r>n&&(r=n),i-=r*t.length;var a=i/2*e.options.chartDistribution.canvasMargin,s=i/2/(e.options.showcategories?o.length:1)*e.options.chartDistribution.groupMargin,l=i/2/t.length*e.options.chartDistribution.barMargin,u=a+e.grid.state.axisSize[1]+e.background.bb.x,c=0;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var h=[];e.onmouseoutFuncList=[];var p,d=function(t){return!e.options.showcategories||t.category==o[p]};for(p=0;p<(e.options.showcategories?o.length:1);p++){var f=_.filter(t,d);u+=s;for(var g=0;g<f.length;g++){u+=l;var m=f[g].styleName||e.options.style,v="ipg-"+m;InfoCharts.Visuals.ShapeGenerator.Anim[m]?InfoCharts.Visuals.ShapeGenerator.Anim[m](e.root.paper,v):(m=m.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,v,m));var y=e.grid.getValuePositionY(f[g].value),b=e.root.paper.path();e.state.currentState[c]?(e.state.currentState[c].anim[0]=u+r/2,e.state.currentState[c].anim[1]=y.baseline,b.attr(InfoCharts.Helper.Misc.addProperty(e.state.currentState[c].base,v,e.state.currentState[c].anim))):b.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),v,[u+r/2,y.baseline,r,0])),e.state.currentState[c]={},e.state.currentState[c].anim=[u+r/2,y.baseline,r,y.height],e.state.currentState[c].base=$.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle);var x=$.proxy(e.afterAnimation,{anim:e.state.currentState[c].anim,data:f[g],shape:b,vb:y,actionCounter:e.state.actionCounter});e.root.options.canAnimate?h.push({obj:b,anim:Raphael.animation(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),v,e.state.currentState[c].anim),e.root.options.animationDuration,e.root.options.animationStyle,x).delay(c/t.length*e.root.options.animationSequenceDuration)}):(b.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:f[g].color,stroke:f[g].color},e.options.shapeStyle),v,e.state.currentState[c].anim)),x()),e.set.push(b);var w={data:f[g],path:b},S=$.proxy(e.eventing.onMouseOver,w),C=$.proxy(e.eventing.onMouseOut,w);if(e.onmouseoutFuncList.push(C),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+w.data.objectId,S),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+w.data.objectId,C)),b.mouseover(S),b.mousemove($.proxy(e.eventing.onMouseMove,w)),b.mouseout(C),e.options.showBarLabels&&f[g].name&&f[g].name.length>0){var E=e.root.paper.text(u+r/2,y.baseline-e.options.textStyle["font-size"]/2*y.dev,f[g].name).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({"text-anchor":y.dev<0?"end":"start",fill:f[g].color},e.options.textStyle)));E.transform(["R",-90,u+r/2,y.baseline-e.options.textStyle["font-size"]/2*y.dev]),e.set.push(E)}u+=r+l,c++}u+=s}for(;e.state.currentState.length>c;)e.state.currentState.pop();e.grid.baseLine.toFront();var T=0;for(p=0;p<h.length;p++)h[p].obj.stop(),h[p].obj.animate(h[p].anim),T=Math.max(T,h[p].anim.ms+h[p].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},T)},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t=this.data;if(t.inValueString.length>0){var n=this.anim,o=this.shape.getBBox(),i=this.vb;if(o.width<=15)return;e.options.inTextStyle["font-size"]=e.state.inTextStyleFontSize;var r=InfoCharts.Helper.Misc.getContrastColor(e.options.inTextStyle.fill,t.color),a=e.root.paper.text(n[0],n[1]-e.options.inTextStyle["font-size"]/2*i.dev*-1,t.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-1*i.dev<0?"end":"start",fill:r})));a.bb=a.getBBox(),a.bb.width+e.options.inTextStyle["font-size"]<o.height?a.transform(["R",-90,n[0],n[1]-e.options.inTextStyle["font-size"]/2*i.dev*-1]):(a.remove(),a=e.root.paper.text(n[0],n[1]-o.height-3,t.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-1*i.dev<0?"end":"start",fill:t.color}))),a.transform(["R",-90,n[0],n[1]-o.height-3])),e.set.push(a)}}},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){if(e.state.interactionsEnabled){if(e.tooltip&&(this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.hide(),e.tooltip=null),e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)}),e.root.options.canGlowPath){var n=$.extend({color:e.eventing.helper.preHoverColor[this.data.objectId]},e.root.options.glowStyle);InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow||(t.myGlow=t.glow(n),e.visualSet.push(t.myGlow))})}e.options.showTooltip&&t&&(e.tooltip=Infogram.Charts.tooltip,e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)}},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&e.eventing.helper.preHoverColor[this.data.objectId]&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.root.options.canGlowPath&&InfoCharts.Helper.Misc.forEachDeep(this.path,function(t){t.myGlow&&(t.myGlow.remove(),t.myGlow=null)}),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,showTooltip:!0,highlightLegendItem:!0,hasGroups:!0,showGroups:!0,showLabels:!0,showcategories:!0,style:"bar-bar",panelMarginY:15,barMaxWidth:40,barSpaceFraction:.8,absoluteDistribution:!1,chartDistribution:{canvasMargin:.5,groupMargin:.5,barMargin:0},showInLineValues:!1,inTextStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,fill:"#FFFFFF"},gridPostOptions:{gridToFront:!1,labelsToFront:!1,baseLinesToFront:!1},backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},shapeStyle:{"stroke-width":0,"stroke-opacity":0,opacity:1,stroke:"none"},textStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":16,cursor:"default"},axesTitleSpaceing:3,axesTitleBalanceHorizontalSpaceing:!1,axesTitleStyle:{enableHover:!1,labelFontStyle:{"font-family":"PT Sans Narrow, Arial Narrow","font-size":14,"text-anchor":"start",fill:"#767676",cursor:"default"},backgroundStyle:{opacity:0}},_categoryOptions:{},_gridOptions:{},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.data=null,e.set=null,e.background=null,e.grid=null,e.buttons=null,e.labels=null,e.categoryLabel=null,e.tooltip=null,e.buttonHeight=0,e.axesTitle=null,e.axesTitleX=null,e.axesTitleY=null,e.state={currentState:[],interactionsEnabled:!1,axesTitle:null,actionCounter:0,inTextStyleFontSize:e.options.inTextStyle["font-size"]},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.set=e.root.paper.set(),e.options=$.extend(e.root.options.deepExtend,e.options,t),e.set=e.root.paper.set(),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e.setPosition=function(t){e.set.transform(["T",t.x,t.y])},e._loadDataActual=function(t,n,o,i,r){if(e.state.actionCounter++,e.state.interactionsEnabled=!e.root.options.canAnimate,o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),0===e.data.length)return;e.gridDef=InfoCharts.Helper.Data.copyDataArray(i),e.axesTitle=InfoCharts.Helper.Data.copyDataArray(r)}else e.data=t;InfoCharts.Helper.Data.setDefaults(e.data);var a=0,s=e.root.getCenter(),l=InfoCharts.Helper.Data.getGroups(e.data);n=n||l[0]||"";var u=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.options._gridOptions&&e.gridDef&&(e.options._gridOptions.gridDef=InfoCharts.Helper.Data.getGridDefinition(e.gridDef,e.options.hasGroups,n)),e.state.axesTitle=InfoCharts.Helper.Data.getAxesTitle(e.axesTitle,n),e.state.axesTitle[1]=null;var c=InfoCharts.Helper.Data.getPropertyValuesUniq(u,"category");if(e.options.barSpaceFraction=1-c.length/(c.length+9),o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&l.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),l),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.grid&&(e.grid.dispose(),e.grid=null),e.categoryLabel&&(e.categoryLabel.dispose(),e.categoryLabel=null),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var h=InfoCharts.Helper.Data.getLabelsUniq(u,e.options.hasValueInLabel);h.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),h),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a);var p={min:NaN,max:NaN};e.options.absoluteDistribution&&e.options.hasGroups?_.each(l,function(t){e.getGroupMinMax(_.filter(e.data,function(e){return e.group==t}),e.options.showcategories?c:[""],p)}):e.getGroupMinMax(u,e.options.showcategories?c:[""],p),e.axesTitleX&&e.axesTitleX.dispose(),e.axesTitleY&&e.axesTitleY.dispose();var d=0,f=0;e.state.axesTitle&&(e.state.axesTitle[0]&&(d=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing),e.state.axesTitle[1]&&(f=e.options.axesTitleStyle.labelFontStyle["font-size"]+2*e.options.axesTitleSpaceing)),e.grid=new InfoCharts.Visuals.Grid(e.root).init($.extend(e.options._gridOptions,{pos:[0+d,e.buttonHeight],size:[e.root.options.canvasWidthDefault-d*(e.options.axesTitleBalanceHorizontalSpaceing?2:1),e.root.options.canvasHeightDefault-e.buttonHeight-a-f],offset:[{start:0,end:0},{start:0,end:0}],zeroValues:[{top:1,bottom:0},{top:0,bottom:1}],hideGrid:[!0,!1],showGridOnEdge:!1,labelXToBottom:!1,minMax:[{min:NaN,max:NaN},p]}),u,"y"),e.grid.createGrid();var g=e.root.options.canvasHeight-a-e.buttonHeight-f,m=e.buttonHeight;e.background.attr({y:m,height:g,x:0+d,width:e.root.options.canvasWidth-d*(e.options.axesTitleBalanceHorizontalSpaceing?2:1)}),e.background.bb=e.background.getBBox(),d&&(e.axesTitleX=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[0],color:""},e.options.axesTitleStyle),e.axesTitleX.setPositionVertical({x:d/2,y:e.background.bb.y+e.background.bb.height/2})),f&&(e.axesTitleY=new InfoCharts.Visuals.Text(e.root).init({name:e.state.axesTitle[1],color:""},e.options.axesTitleStyle),e.axesTitleY.setPosition({x:e.background.bb.x+e.background.bb.width/2,y:e.background.bb.y2+f/2}));var v=0;e.options.showcategories&&c&&c.length>1&&(e.categoryLabel=new InfoCharts.Visuals.categories(e.root,e).init(e.options._categoryOptions,u,!0),v=e.categoryLabel.height+2,e.categoryLabel.setPosition({x:0,y:m+g+e.categoryLabel.height/2+2+f})),e.root.resize(e.root.options.canvasWidth,e.root.options.canvasHeight+v),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.generateBars(u),e.grid.postDisplayMods(e.options.gridPostOptions),e.root.options.canAnimate&&e.root.options.canAnimateGrid&&(e.grid.set.attr({opacity:0}),e.grid.set.animate({opacity:1},e.root.options.animationDuration,e.root.options.animationStyleGrid)),e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.getGroupMinMax=function(t,e,n){var o={},i={};_.each(t,function(t){1==e.length&&""===e[0]?(i[""]=i[""]||0,o[""]=o[""]||0,t.value>0?i[""]+=t.value:o[""]+=t.value):(i[t.category]=i[t.category]||0,o[t.category]=o[t.category]||0,t.value>0?i[t.category]+=t.value:o[t.category]+=t.value)}),_.each(e,function(t){n.max=isNaN(n.max)?i[t]:Math.max(n.max,i[t]),n.min=isNaN(n.min)?o[t]:Math.min(n.min,o[t])})},e.generateBars=function(t){_.each(e.set,function(t){t.stop()}),e.set.remove(),e.set=e.root.paper.set();var n=e.options.barMaxWidth,o=e.options.showcategories?InfoCharts.Helper.Data.getPropertyValuesUniq(t,"category"):[""],i=e.root.options.canvasWidth-e.grid.state.axisSize[1],r=Math.round(i/o.length*e.options.barSpaceFraction);r>n&&(r=n),i-=r*o.length;var a=i/2*e.options.chartDistribution.canvasMargin,s=i/2/(e.options.showcategories?o.length:1)*e.options.chartDistribution.groupMargin,l=i/2/t.length*e.options.chartDistribution.barMargin,u=a+e.grid.state.axisSize[1],c=0,h=e.options.showcategories?o.length:1;e.options.highlightLegendItem&&e.options.showLabels&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*"));var p=[];e.onmouseoutFuncList=[];var d,f=function(t){return!e.options.showcategories||t.category==o[d]};for(d=0;h>d;d++){var g=_.filter(t,f),m=0,v=0;u+=s,u+=l;for(var y=0;y<g.length;y++){var b=g[y].styleName||e.options.style,x="ipg-"+b;InfoCharts.Visuals.ShapeGenerator.Anim[b]?InfoCharts.Visuals.ShapeGenerator.Anim[b](e.root.paper,x):(b=b.replace("bar-path-",""),InfoCharts.Visuals.ShapeGenerator.Anim["bar-path"](e.root.paper,x,b));var w=e.grid.getValuePositionY(g[y].value),S=e.root.paper.path();e.state.currentState[c]&&e.state.currentState[c].colIndex==d?(e.state.currentState[c].anim[0]=u+r/2,S.attr(InfoCharts.Helper.Misc.addProperty(e.state.currentState[c].base,x,e.state.currentState[c].anim))):S.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),x,[u+r/2,w.baseline,r,0])),e.state.currentState[c]={},w.dev<0?e.state.currentState[c].anim=[u+r/2,w.baseline-m,r,w.height]:e.state.currentState[c].anim=[u+r/2,w.baseline+v,r,w.height],e.state.currentState[c].colIndex=d,e.state.currentState[c].base=$.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle);var C=$.proxy(e.afterAnimation,{anim:e.state.currentState[c].anim,data:g[y],shape:S,vb:w,actionCounter:e.state.actionCounter});e.root.options.canAnimate?p.push({obj:S,anim:Raphael.animation(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),x,e.state.currentState[c].anim),e.root.options.animationDuration,e.root.options.animationStyle,C).delay(d/h*e.root.options.animationSequenceDuration)}):(S.attr(InfoCharts.Helper.Misc.addProperty($.extend({fill:g[y].color,stroke:g[y].color},e.options.shapeStyle),x,e.state.currentState[c].anim)),C()),e.set.push(S);var E={data:g[y],path:S},T=$.proxy(e.eventing.onMouseOver,E),k=$.proxy(e.eventing.onMouseOut,E);e.onmouseoutFuncList.push(k),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+E.data.objectId,T),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+E.data.objectId,k)),S.mouseover(T),S.mousemove($.proxy(e.eventing.onMouseMove,E)),S.mouseout(k),w.dev<0?m-=w.height:v+=w.height,c++}u+=r+l,u+=s}for(;e.state.currentState.length>c;)e.state.currentState.pop();e.grid.baseLine.toFront();var M=0;for(d=0;d<p.length;d++)p[d].obj.stop(),p[d].obj.animate(p[d].anim),M=Math.max(M,p[d].anim.ms+p[d].anim.del);setTimeout(function(){e.state.interactionsEnabled=!0},M)},e.afterAnimation=function(){if(e.options.showInLineValues&&this.actionCounter===e.state.actionCounter){var t=this.data;if(t.inValueString.length>0){var n=this.anim,o=this.shape.getBBox(),i=this.vb;if(o.width<=15)return;e.options.inTextStyle["font-size"]=e.state.inTextStyleFontSize;var r=InfoCharts.Helper.Misc.getContrastColor(e.options.inTextStyle.fill,t.color);do{var a=e.root.paper.text(n[0],n[1]-e.options.inTextStyle["font-size"]/2*i.dev*-1,t.inValueString).attr(InfoCharts.Helper.Misc.parseFontStyle($.extend({},e.options.inTextStyle,{"text-anchor":-1*i.dev<0?"end":"start",fill:r})));if(a.bb=a.getBBox(),a.bb.height<o.width&&a.bb.width+e.options.inTextStyle["font-size"]<o.height){a.transform(["R",-90,n[0],n[1]-e.options.inTextStyle["font-size"]/2*i.dev*-1]),e.set.push(a);break}a.remove(),e.options.inTextStyle["font-size"]-=1}while(e.options.inTextStyle["font-size"]>=8)}}},e.eventing={onMouseOver:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.showTooltip&&t&&(e.tooltip=Infogram.Charts.tooltip,e.tooltip.setOptions({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t),color:this.data.color})),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onMouseMove:function(t){e.state.interactionsEnabled&&e.options.showTooltip&&e.tooltip&&e.tooltip.setPosition(e.root.getMousePosition(t),this.data.color)},onMouseOut:function(t){e.state.interactionsEnabled&&(e.tooltip&&(e.tooltip.hide(),e.tooltip=null),e.options.highlightLegendItem&&e.options.showLabels&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null))},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(504);return function(t){var n=new e(t);return n.options.increment=!0,n.options.incrementShowStart=!0,n.options.incrementShowEnd=!0,n.options.styleUp="bar-bar",n.options.styleDown="bar-bar",n.options.guidPathShow=!1,n.options.guidPathStyle={"stroke-width":2,"stroke-opacity":1,stroke:"#959595"},n.options.guidSizeFull=!0,n}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.options={hasValueInLabel:!1,hasGroups:!0,showGroups:!0,showLabels:!0,panelMarginY:15,showTooltip:!1,randomRotate:!1,highlightLegendItem:!0,spiralDelta:.5,spiralStep:.2,useSpiralPool:!1,sortData:!0,wordcloudScale:.95,backgroundStyle:{"stroke-width":0,"stroke-opacity":0,stroke:"none"},fontStyle:{"font-family":"Arial","font-size":25,"font-weight":"bold","text-anchor":"middle"},_buttonWrapperOptions:{},_labelWrapperOptions:{},_buttonTextOptions:{},_labelTextOptions:{}},e.visualSet=null,e.data=null,e.buttons=null,e.labels=null,e.background=null,e.buttonHeight=0,e.state={},InfoCharts.Mixins.setLoadAndDispose(e),e.init=function(t){return e.options=$.extend(e.root.options.deepExtend,e.options,t),e.visualSet=e.root.paper.set(),e.background=e.root.paper.rect(0,0,e.root.options.canvasWidth,e.root.options.canvasHeight),e.background.attr(e.options.backgroundStyle),e},e._loadDataActual=function(t,n,o){if(o){if(e.data=InfoCharts.Helper.Data.copyDataArray(t),e.data=_.filter(e.data,function(t){return 0!==t.value}),0===e.data.length)return}else e.data=t;e.originalData=InfoCharts.Helper.Data.copyDataArray(t),InfoCharts.Helper.Data.setDefaults(e.data);var i=InfoCharts.Helper.Data.getGroups(e.data);n=n||i[0]||null,o&&e.options.sortData&&(e.data=_.sortBy(e.data,function(t){return-t.value}));var r=InfoCharts.Helper.Data.getActiveData(e.data,e.options.hasGroups,n);e.root.options.canAnimate&&_.each(e.visualSet,function(t){t.stop()}),e.visualSet.remove(),e.visualSet=e.root.paper.set();var a=0,s=e.root.getCenter();if(o&&(e.buttons&&(e.buttons.dispose(),e.buttons=null),e.options.showGroups&&e.options.hasGroups&&i.length>1&&(e.buttons=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.RadioButton,$.extend(e.options._buttonWrapperOptions,{maxWidth:.9*e.root.options.canvasWidth}),$.extend(e.options._buttonTextOptions,{selectedGroup:n,onClickCallback:e.eventing.onGroupChanged}),i),e.buttonHeight=e.buttons.set.getBBox().height+2*e.options.panelMarginY,e.buttons.setPosition({x:s.x,y:e.buttonHeight/2}))),e.labels&&(e.labels.dispose(),e.labels=null),e.options.showLabels){var l=InfoCharts.Helper.Data.getLabelsUniq(r,e.options.hasValueInLabel);l.length>0&&(e.labels=new InfoCharts.Visuals.Wrapper(e.root).init(InfoCharts.Visuals.Legend,$.extend(e.options._labelWrapperOptions,{maxWidth:e.root.options.canvasWidth,align:"center"}),$.extend(e.options._labelTextOptions,{enableHover:e.options.highlightLegendItem}),l),a=e.labels.set.getBBox().height+2*e.options.panelMarginY)}e.root.resizeHeight(e.buttonHeight,a),e.labels&&e.labels.setPosition({x:s.x,y:e.root.options.canvasHeight-a/2}),e.background.attr({x:0,y:e.buttonHeight,width:e.root.options.canvasWidth,height:e.root.options.canvasHeight-e.buttonHeight-a}),e.background.bb=e.background.getBBox();var u,c,h,p,d,f,g=e.background.bb.x+e.background.bb.width/2,m=e.background.bb.y+e.background.bb.height/2,v=[],y=null,b=null,x=null,w=Math.sqrt(_.reduce(r,function(t,e){return Math.max(t,e.value)},0)),S=0,C={},E=InfoCharts.Helper.Misc.parseFontStyle($.extend(!0,{},e.options.fontStyle)),T=[];for(p=0;p<r.length;p++){if(d=r[p],u=g,c=m,y=e.root.paper.text(0,0,d.valueString),S=Math.sqrt(d.value)/w,E.fill=d.color,y.attr(E),e.options.randomRotate?d.rotate=Math.random()>.5?0:-90:d.rotate="undefined"==typeof d.rotate?0:d.rotate,y.transform([["T",u,c],["R",d.rotate],["S",S,S]]),y.hide(),x=$.extend(!0,{},y.getBBox()),(x.x>x.x2||x.y>x.y2)&&(x.x=g-x.width/2,x.y=m-x.height/2,x.x2=x.x+x.width,x.y2=x.y+x.height),b=$.extend(!0,{},x),0!==v.length){for(f=e.options.useSpiralPool?C[d.value.toString()]||.5:.5;!0;f+=e.options.spiralStep/f){for(var k=!0,M=0;M<v.length;M++)if(Raphael.isBBoxIntersect(x,v[M])){k=!1;break}if(k){d.dx=u,d.dy=c,d.scale=S,y.transform([["T",g+u,m+c],["R",d.rotate],["S",S,S]]);break}u=e.options.spiralDelta*f*Math.cos(f),c=e.options.spiralDelta*(f*e.background.bb.height/e.background.bb.width)*Math.sin(f),x.x=b.x+u,x.y=b.y+c,x.x2=b.x2+u,x.y2=b.y2+c}e.options.useSpiralPool&&(C[d.value.toString()]=f)}else d.dx=0,d.dy=0,d.scale=S;e.visualSet.push(y),v.push(x)}var O=e.visualSet.getBBox();S=Math.min(e.background.bb.width/O.width,e.background.bb.height/O.height)*e.options.wordcloudScale;var I=O.x+O.width/2-g,P=O.y+O.height/2-m;for(e.visualSet.remove(),e.visualSet=e.root.paper.set(),e.options.highlightLegendItem&&(eve.off("mouseovertext."+e.root.options.canvasSelectorId+".*"),eve.off("mouseouttext."+e.root.options.canvasSelectorId+".*")),e.onmouseoutFuncList=[],p=0;p<r.length;p++){d=r[p],u=g+(d.dx-I)*S,c=m+(d.dy-P)*S,y=e.root.paper.text(0,0,d.valueString),e.root.options.canAnimate&&y.attr({opacity:0}),E.fill=d.color,y.attr(E),y.transform([["T",u,c],["R",d.rotate],["S",d.scale*S,d.scale*S]]),e.visualSet.push(y);var L=y.getBBox(),D=e.root.paper.rect(L.x,L.y,L.width,L.height).attr({opacity:0,fill:"#FFFFFF"});h={data:{name:d.name,valueString:d.value.toString(),objectId:d.objectId},path:null};var A=$.proxy(e.eventing.onMouseOver,h),N=$.proxy(e.eventing.onMouseOut,h);e.onmouseoutFuncList.push(N),D.unbindAll(),D.mouseover(A),D.mousemove($.proxy(e.eventing.onMouseMove,h)),D.mouseout(N),e.options.highlightLegendItem&&e.options.showLabels&&(eve.on("mouseovertext."+e.root.options.canvasSelectorId+"."+h.data.objectId,A),eve.on("mouseouttext."+e.root.options.canvasSelectorId+"."+h.data.objectId,N)),e.visualSet.push(D),y.attr({fill:d.color}),e.root.options.canAnimate&&T.push({obj:y,anim:Raphael.animation({opacity:1},e.root.options.animationDuration,e.root.options.animationStyle).delay(e.root.options.animationDuration*p/r.length)})}for(f=0;f<T.length;f++)T[f].obj.stop(),T[f].obj.animate(T[f].anim);e.root.options.loadedCallback&&e.root.options.loadedCallback()},e.eventing={helper:{preHoverColor:{}},onMouseOver:function(t){e.tooltip&&(this.path&&this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.tooltip.opts.remove(),e.tooltip=null),this.path&&(e.eventing.helper.preHoverColor[this.data.objectId]=this.path.attr("fill"),this.path.attr({fill:InfoCharts.Helper.Misc.getHoverColor(e.eventing.helper.preHoverColor[this.data.objectId],e.root.options.light)})),e.options.showTooltip&&t&&(e.tooltip=new Infogram.ToolTip({text:this.data.name,value:this.data.valueString,pos:e.root.getMousePosition(t)})),e.options.highlightLegendItem&&t&&this.data.objectId&&eve("mouseoverdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)},onMouseMove:function(t){e.options.showTooltip&&e.tooltip&&e.tooltip.opts.setPosition(e.root.getMousePosition(t))},onMouseOut:function(t){e.tooltip&&(e.tooltip.opts.remove(),e.tooltip=null),this.path&&this.path.attr({fill:e.eventing.helper.preHoverColor[this.data.objectId]}),e.options.highlightLegendItem&&t&&this.data.objectId&&eve("mouseoutdata."+e.root.options.canvasSelectorId+"."+this.data.objectId,null,null)},onGroupChanged:function(t){e.loadData(e.data,t)}}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(){return function(t){var e=this;e.root=t,e.state={x:0,y:0,dx:0,dy:0},e.options={maxWidth:300,marginX:2,marginY:0,onClickCallback:null,onOverCallback:null,onOutCallback:null,align:"center"},e.lines=[],e.items=[],e.set=null,e.init=function(t,n,o,i){e.options=$.extend(e.root.options.deepExtend,e.options,n),e.set=e.root.paper.set();var r=0,a=0;i.length>0?e.lines[a]=[]:e.set.push(e.root.paper.rect(0,0,0,0));var s;for(s=0;s<i.length;s++){var l=new t(e.root,e).init(i[s],o);e.set.push(l.set),e.lines[a].length>0&&r+l.box.width+2*e.options.marginX>e.options.maxWidth&&(e.lines[++a]=[],r=0),e.lines[a].push(l),e.items.push(l),r+=l.box.width+2*e.options.marginX}var u=function(t,n){return t+n.box.width+2*e.options.marginX};for(s=0;s<e.lines.length;s++){var c,h=_.reduce(e.lines[s],u,0);switch(e.options.align){case"center":c=(e.options.maxWidth-h)/2;break;case"left":c=e.options.maxWidth/2;break;case"realLeft":c=0;break;case"right":c=e.options.maxWidth-h}for(var p=s*e.lines[s][0].options.labelFontStyle["font-size"]+e.options.marginY*s+2*s*e.lines[s][0].options.paddingY,d=0;d<e.lines[s].length;d++){var f=e.lines[s][d];c+=(f.box.width+2*e.options.marginX)/2,f.state.dx=c,f.state.dy=p,i[0]&&i[0].color||(f.state.dy+=f.box.height/2),c+=(f.box.width+2*e.options.marginX)/2}}return e.setPosition({x:0,y:0}),e},e.setPosition=function(t){for(var n=e.set.getBBox(),o=0;o<e.lines.length;o++)for(var i=0;i<e.lines[o].length;i++)e.lines[o][i].setPosition({x:t.x-e.options.maxWidth/2,y:t.y-n.height/2})},e.setPositionVertical=function(t){for(var n=e.set.getBBox(),o=0;o<e.lines.length;o++)for(var i=0;i<e.lines[o].length;i++)e.lines[o][i].setPositionVertical({x:t.x-n.height/2,y:t.y+e.options.maxWidth/2})},e.dispose=function(){_.each(e.items,function(t){t.dispose()}),e.set.remove()}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(204),o=e.extend({});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(204),o=e.extend({});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(204),o=e.extend({});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var o;o=function(t){var e=n(204),o=e.extend({});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t,e){function n(e){this.rawData=e,this.data={},this.version=t,this.refresh()}return i=e,n.prototype=h[t],n}var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=n(16),s={colorify:function(t){var e=t[0];return"t"===e||"undefined"==typeof e?t="transparent":"#"!==e&&(t="#"+t),t},hexToRgba:function(t,e){t=t||"000000",e=e||1,t="#"===t[0]?t.substring(1,7):t,"t"===t[0]&&(t="ffffff",e=0);var n={r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:e};return"rgba("+n.r+","+n.g+","+n.b+","+n.a+")"},findFonts:function(t,e){a.each(t,function(t,n,o){var i="undefined"==typeof t?"undefined":r(t);if("string"===i&&"font-family"===n){var a={"font-family":t};o["font-weight"]&&(a["font-weight"]=o["font-weight"]),o["font-style"]&&(a["font-style"]=o["font-style"]),e.push(a)}else"object"===i&&"undefined"==typeof t.length&&this.findFonts(t,e)},this)},extend:function(){var t=Array.prototype.slice.call(arguments,0),e=t.shift();return t=a.map(t,function(t){return a.cloneDeep(t)}),t.unshift(e),a.extend.apply(null,t)}},l={getFontArr:function(){var t=this.data,e=s.extend({},t.chartFonts,t.chartColors,t.chartCustom),n=[];return n=n.concat(a.values(t.font)),s.findFonts(e,n),n=n.concat([{"font-family":"PT Sans Narrow"},{"font-family":"PT Sans Narrow","font-weight":800}])},refresh:function(){this.templates=i[this.version]},renderCss:function(){return this.data.elementTpl=this.templates.element,a.template(this.templates.css)(this.data)}},u={refresh:function(){l.refresh.call(this);var t=this.data;this.offsets(),t.chartCustom=s.extend({},this.rawData.chartOptions,this.rawData.charts),t.color=s.extend({},this.rawData.color),t.charts=s.extend({},this.rawData.charts),t.css=this.rawData.css,this.fontLogic()},offsets:function(){var t=this.data,e=this.rawData;t.top=e.top,t.padding=e.padding,t.spacing=e.spacing},fontLogic:function(){var t=this.data;t.font=this.readGoogleFont(this.rawData.fonts),this.rawData.localFonts&&this.rawData.localFonts.length&&(t.font=t.font.concat(this.rawData.localFonts))},readGoogleFont:function(t){var e=[];if(!t)return e;var n=t.split(";");return a.each(n,function(t){if(-1===t.indexOf(":"))return void e.push({"font-family":t.split("+").join(" ")});var n=t.split(":"),o=n.shift().split("+").join(" "),i=n.shift();
return-1===i.indexOf(",")?void e.push(this.getGoogleFontVariation(i,o)):void a.each(i.split(","),function(t){e.push(this.getGoogleFontVariation(t,o))},this)},this),e},getGoogleFontVariation:function(t,e){var n={"font-family":e};/italic/.test(t)&&(n["font-style"]="italic");var o=t.replace(/(italic)/gi,"");return o&&(n["font-weight"]=o),n},getFontArr:function(){var t=this.data,e=s.extend({},t.chartCustom),n=[];return n=n.concat(t.font),s.findFonts(e,n),n=n.concat([{"font-family":"PT Sans Narrow"},{"font-family":"PT Sans Narrow","font-weight":800}])},renderCss:function(){var t=a.template(this.templates.element),e=this.data.charts,n=e&&e.treemap&&e.treemap.labels,o=e&&e.timer;return this.data.treemapTextName="",this.data.treemapTextValue="",this.data.timer={},o&&(o.digits&&(this.data.timer.digits=t({style:o.digits})),o.units&&(this.data.timer.units=t({style:o.units})),o.dots&&(this.data.timer.dots=t({style:o.dots}))),n&&(n.name&&(this.data.treemapTextName=t({style:n.name})),n.value&&(this.data.treemapTextValue=t({style:n.value}))),a.template(this.templates.css)(this.data)}};u=a.extend({},l,u);var c={refresh:function(){l.refresh.call(this);var t=this.data;t.css=this.rawData.css,t.chartCustom=s.extend({},this.rawData.chartOptions),this.fontLogic(),this.offsetLogic(),this.colorLogic(),this.chartFonts(),this.chartColors()},fontLogic:function(){var t=this.rawData.font||{};t.common=t.common||{};var e=["title","chartTitle","quoteText","quoteAuthor","bodyText","label"];this.data.font={},a.each(e,function(e){this.data.font[e]=a.extend({},t.common,t[e]||{})},this),this.data.font.valueLabel=a.extend({},this.data.font.label),this.data.font.valueLabel.fontSize=Number(this.data.font.valueLabel.fontSize)+2,this.data.fonts=this.rawData.fonts},offsetLogic:function(){var t=this.data,e=this.rawData;t.top=e.top,t.padding=e.padding,t.spacing=e.spacing,t.spacingElementMin=e.spacingElementMin||20,t.spacingElementMax=e.spacingElementMax||40},colorLogic:function(){var t=this.data,e=this.rawData.color||{chart:{},element:{}},n={bg:"#ffffff",text:"#000000",chart:{bg:"transparent"},element:{bg:"transparent"}};t.color={},t.color=a.extend(n,e),a.extend(t.color.chart,e.chart),a.extend(t.color.element,e.element),t.color.textRgba=s.hexToRgba(t.color.text,.4)},chartFonts:function(){var t=this.data,e=t.font.label,n=t.font.chartTitle,o=t.font.bodyText,i=t.font.valueLabel,r={bar:{_categoryOptions:{text:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize)}}}},pictobar:{cellTextWrapperOptions:{text:{labelFontStyle:{"font-family":e.fontFamily}}}},gauge:{_gaugeTextOptions:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}}},table:{headerTextWrapperOptions:{text:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}}},cellTextWrapperOptions:{text:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}}}},hierarchy:{cellTextWrapperOptions:{text:{labelFontStyle:{"font-family":e.fontFamily,"font-weight":Number(e.fontWeight)}}}},textual:{topTextStyle:{"font-family":n.fontFamily,"font-weight":Number(n.fontWeight),"font-size":Number(n.fontSize)},textWrapperBottomOptions:{text:{labelFontStyle:{"font-family":o.fontFamily,"font-weight":Number(o.fontWeight),"font-size":Number(o.fontSize)}}}},datetime:{fontStyle:{"font-family":n.fontFamily,"font-weight":Number(n.fontWeight),"font-size":Number(n.fontSize)},fontStyleText:{"font-family":e.fontFamily,"font-weight":Number(e.fontWeight),"font-size":Number(i.fontSize)}},common:{axesTitleStyle:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize)}},legendOptions:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}},_gridOptions:{fontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}},_buttonTextOptions:{labelFontStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}},textStyle:{"font-family":e.fontFamily,"font-size":Number(e.fontSize),"font-weight":Number(e.fontWeight)}}};t.chartFonts=r},chartColors:function(){var t=this.data,e=s.colorify(t.color.text),n="string"==typeof this.rawData.colors?this.rawData.colors.split(" "):this.rawData.colors.slice(0),o=s.colorify(n.shift()),i=s.colorify(n.shift()),r=t.color.chart.bg;"t"===r[0]&&(r=t.color.bg),r=s.colorify(r);var a={bar:{_categoryOptions:{text:{labelFontStyle:{fill:e}}}},gauge:{gaugeStyle:{fill:e,opacity:.1},_gaugeTextOptions:{labelFontStyle:{fill:e}},gaugeNeedleStyle:{fill:e}},pictobar:{shapeStyleEmpty:{fill:e,opacity:.1}},progress:{backgroundInactive:{fill:e,opacity:.1}},table:{columnHeaderStyle:{fill:o},rowHeaderStyle:{fill:o},cellStyle:{fill:o,opacity:.5},headerTextWrapperOptions:{text:{labelFontStyle:{fill:"#ffffff"}}},cellTextWrapperOptions:{text:{labelFontStyle:{fill:i}}},showCellColor:!1},textual:{topTextStyle:{fill:e},textWrapperBottomOptions:{text:{labelFontStyle:{fill:e}}}},datetime:{fontStyle:{fill:e},fontStyleText:{fill:e}},candle:{shapeStyleDown:{fill:r}},common:{axesTitleStyle:{labelFontStyle:{fill:e}},legendOptions:{labelFontStyle:{fill:"#ffffff"}},_gridOptions:{fontStyle:{fill:e},lineStyle:{stroke:e},baseLineStyle:{stroke:e}},_buttonTextOptions:{labelFontStyle:{fill:e},buttonStyle:{stroke:e},buttonCenterStyle:{fill:e}},textStyle:{fill:e}}};t.chartColors=a}};c=a.extend({},l,c);var h={1:u,2:c};t.exports=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement("div",{className:"empty-placeholder"},u["default"].createElement("div",{className:"empty-placeholder-message"},u["default"].createElement("p",{className:"center_vh"},i18n.t("app.infographic.add_elements"))))}}]),e}(u["default"].Component);c.displayName="EmptyInfographicPlaceholder",t.exports=c},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(){function t(t){t.each(function(){var t=d3.select(this),n=t.selectAll(".text_tick").data(i);n.enter().append("text").attr("class","text_tick"),n.exit().remove(),n.style(o).attr("fill",o.color),n.each(function(t){var n=t.text,o=t.x,i=t.y,s=t.lineHeight,l=t.maxWidth,u=d3.select(this);if(n.constructor===Array){var c=u.selectAll("tspan").data(n);c.enter().append("tspan"),c.exit().remove(),c.text(function(t){return t}).attr("x",function(){var t=0,n=this.getComputedTextLength();return a===r.TEXT_ALIGN.CENTER&&(t=.5*(l-n)),a===r.TEXT_ALIGN.RIGHT&&(t=l-n),e.x+o+t}).attr("y",function(){return e.y+i}).attr("dy",function(t,e){return e*s})}else u.text(n)}),n.style("opacity",l.eps).attr("transform",function(t){return t.transform?t.transform.call(e,t):null}).attr("text-anchor",function(t){return t.textAnchor}).attr("x",function(t){return e.x+t.x}).attr("y",function(t){return e.y+t.y}).transition().style("opacity",1),t.attr("height",null)})}var e={x:0,y:0,width:0,height:0},n="horizontal",o=s["default"].prototype.defaults().style.axisTick,i=[],a=r.TEXT_ALIGN.CENTER,u={bounds:function(n){return arguments.length?(Object.assign(e,n),t):e},style:function(e){return arguments.length?(o=e,t):o},data:function(e){return arguments.length?(i=e,t):i},layout:function(e){return arguments.length?(n=e,t):n},textAlign:function(e){return arguments.length?(a=-1===_.values(r.TEXT_ALIGN).indexOf(e)?a:e,t):a}};return Object.assign(t,u)}Object.defineProperty(e,"__esModule",{value:!0}),e.BottomTilted=r;var a=n(30),s=i(a),l=n(48),u=n(724),c=o(u);r.LAYOUT={REGULAR:"regular",TILTED:"tilted"},r.TEXT_ALIGN={LEFT:1,CENTER:2,RIGHT:3},r.createLabels=function(t,e){return e=-1===_.values(r.LAYOUT).indexOf(e)?r.LAYOUT.REGULAR:e,c[e].call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(507);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n(725);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=this.runtime,n=t.renderData,o=n.length-1;if(-1===o)return!1;var i=e.graphWidth,r=n[o],a=r.x+r.w+r.b*d.vect45;return p["default"].DOUBLE===this.options.type&&(i+=e.marginAxis.right+e.marginTitle.right),a>i}function a(t){var e=t.indices,n=t.positions,o=t.m,i={x:1/0,i:0};return e.forEach(function(t,e){var r=o.text[t].width,a=o.text[t].height,s=o.text[t].baseLineOffset,l=n[e]-(r+(a-s))*d.vect45;l<i.x&&(i.x=l,i.i=t)}),i.x===1/0&&(i.x=0),i}function s(){var t=this,e=this.runtime,n=this.options,o=e.xScale,i=e.sheet,s=n.style.axisTick,u=Math.sqrt(2),h=!(!i.grid||!i.grid.reverse),p=e.spacing.maxBeforeXAxisTick,g=e.xScaleResize,m=p;g||(g="function"==typeof o.rangeBands?function(t,e){t.rangeBands(e,0)}:function(t,e){t.range(e)});var v=f.getPositions.call(this),y=d3.range(0,v.length),b=f.getCategories.call(this),_=v,x=b,w=f.getLimits.call(this,v),S=w.maxCategoryWidth,C=w.maxCategoryHeight,E=(0,l.TextMetric)().parent(this.svg.node()).style(s).text(b),T=E.run().out(),k=E.limit({width:Math.max(0,S),height:C}).run().out(),M=T.lineHeight,O=T.baseLineOffset,I=M>S&&T.text.max.width>S,P={domainIndex:y},L=0,D=void 0,A=function(t){P=c.filterToFit(_,x,t),b=P.domainIndex.map(function(t){return x[t]}),v=P.range,y=P.domainIndex},N=function(t){if(0===m||0===t)return!1;m-=t,e.igcLeftOffset+=t,e.graphWidth-=t,e.margin.left+=t,g(o,[0,e.graphWidth]),v=f.getPositions.call(this);var n=c.getStepsInRange(v,M+4);return n>0&&n>L?(A(n),L=n):v=y.map(function(t){return v[t]}),D=a({indices:y,positions:v,m:T}),!0},B=function(t){var e=0,n=0,o=t.linesFit;return t.forEach(function(t){var i=t.length;if(i>e)e=i,n=d3.sum(t.widths.slice(0,o));else if(0!==i&&i===e){var r=d3.sum(t.widths.slice(0,o));r>n&&(n=r)}}),n};I&&(L=c.getStepsInRange(_,M+4),A(L),k=E.text(b).clear().run().out());var j=-e.igcLeftOffset,R=void 0;if(k.text.max.width<S)return f.horizontal.call(this,{m:k,indices:y,positions:v,labels:b,style:s,filterMetrics:P});var H=S>=C,F=S>=100;if((H||F)&&k.wrapped.fits)return f.horizontal.call(this,{m:k,indices:y,positions:v,labels:b,style:s,filterMetrics:P});if(F&&!k.wrapped.fits){N.call(this,p);var z=Math.min(e.igcLeftOffset+v[D.i]+O*d.vect45,C),V=(z-M*d.vect45)*u,U=B(k.wrapped);if(m=p,e.igcLeftOffset-=p,e.graphWidth+=p,e.margin.left-=p,g(o,[0,e.graphWidth]),L=I?c.getStepsInRange(_,M+4):0,A(L),U>=V)return f.horizontal.call(this,{m:k,indices:y,positions:v,labels:b,style:s,filterMetrics:P})}D=a({indices:y,positions:v,m:T});var W,G,$=D.x<j;$?!function(){for(var n=Math.min(p,Math.abs(j-D.x));n>.5;){var i=Math.min(m,n),r=v[D.i];n=N.call(t,i)?r-v[D.i]:0}g(o,[0,Math.round(e.graphWidth)]),v=f.getPositions.call(t),v=y.map(function(t){return v[t]});var a=e.igcLeftOffset+v[D.i]+M/2*d.vect45,c=Math.min(a-C,0);0>c&&m>0&&(c+=m),G=(C+c-M*d.vect45)*u,W=l.Text.getTrimmedText(t.svg,b,s,G,M);var _=E.text(W).clear().run().out();G=_.text.max.width;var x=(G+_.text.max.height)*d.vect45;e.igcLeftOffset=Math.round(e.igcLeftOffset),e.graphWidth=Math.round(e.graphWidth),e.margin.left=Math.round(e.margin.left),R=y.map(function(t,e){var n=_.text.max.width,o=_.text[e].height,i=_.text[e].baseLineOffset;return{x:v[e]-n-(o-i),y:h?x:i,w:n,b:i,h:o,text:[W[e]],lineHeight:M,maxWidth:n,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w,n=this.y+t.y-t.b,o=-45;return h&&(o=45,n+=t.h),"rotate("+o+" "+e+" "+n+")"}}})}():!function(){G=(T.text.max.height+T.text.max.width)*d.vect45>C?(C-M/2*d.vect45)*u:T.text.max.width,W=l.Text.getTrimmedText(t.svg,b,s,G);var e=E.text(W).clear().run().out();G=e.text.max.width;var n=(G+e.text.max.height)*d.vect45;R=y.map(function(t,o){var i=e.text.max.width,r=e.text[o].height,a=e.text[o].baseLineOffset;return{x:v[o]-i-(r-a),y:h?n:a,w:i,b:a,h:r,text:[W[o]],lineHeight:M,maxWidth:i,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w,n=this.y+t.y-t.b,o=-45;return h&&(o=45,n+=t.h),"rotate("+o+" "+e+" "+n+")"}}})}(),R.textAlign=c.BottomTilted.TEXT_ALIGN.RIGHT;var K=Math.ceil((G+M)*d.vect45),q={renderData:R,height:K,layout:"tilted"};return f.chartSpecific.call(this,q,P),r.call(this,q)&&q.renderData.pop(),q}Object.defineProperty(e,"__esModule",{value:!0}),e.tilted=s;var l=n(66),u=n(76),c=i(u),h=n(515),p=o(h),d=n(48),f=n(507)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(){function t(t){t.each(function(){var t=d3.select(this);t.attr("transform","translate("+o.left+","+o.top+")");var c=this.__chart__=n.copy(),h=c.range(),v=u.slice(0);e&&(v=e.map(function(t){return u[t]}),h=e.map(function(t){return h[t]}));var y=h.map(function(t,e){return{y:t,d:v[e]}}),b=l.getAllTextDimensions(v,t,s),_=(0,p.getRangeStep)(h),x=[];t.selectAll(".tick").each(function(t){return x.push(t)}),m&&(m=!l.compare(x,y,function(t,e){return t.d===e.d})),1===h.length&&(_=i.height),_-=r.top+r.bottom;var w=b.max.width<=_,S=0;c.rangeBand&&(S=c.rangeBand()/2);var C=i.width-r.right;w&&(v=l.limitTextArr(v,t,_,s));var E=t.selectAll(".tick").data(y);if(E.exit().remove(),E.enter().append("text").attr("class","tick"),E.style(s).attr("fill",s.color).style("opacity",a.eps),w)E.attr("x",r.right).attr("y",function(t){return t.y+S}).attr("dy",function(t,e){return b[e].height-r.right}).attr("text-anchor","middle").text(function(t,e){return v[e]}).attr("transform",function(t){return"rotate(-90,"+r.right+","+(t.y+S)+")"}),t.attr("height","");else{var T=d3.max(b,function(t){return t.height});E.attr("y",function(t,e){return t.y+b[e].baseLineOffset}).attr("x",C+"px").attr("dy","").attr("transform","").attr("text-anchor","end").text(function(t,e){return v[e]}),E.selectAll("tspan").attr("x",C+"px");var k=i.width-r.left-r.right;d.Text.wrap(E,k,T);var M=c.rangeBand();E.each(function(t,e){for(var n=d3.select(this),o=n.selectAll("tspan")[0],i=o.length,r=i;r*T>M;)r--;if(0>=r&&(r=1),i!==r){for(var a=r;i>=a;a++)d3.select(o[a]).remove();var s=d3.select(n.selectAll("tspan")[0][n.selectAll("tspan")[0].length-1]),l=s.text();n.selectAll("tspan")[0].length>0&&(s.text(l+"..."),s.node().getBoundingClientRect().width>k?l=l.substring(0,l.length-3)+"...":l+="..."),s.text(l)}var u=(M-r*T)/2;n.selectAll("tspan").attr("y",function(){return t.y+u+b[e].baseLineOffset})})}if(g&&(m?d3.transition(E).call(g):E.call(g)),f){var O=h[0],I=h.slice(0),P=0,L="function"==typeof c.padding,D=h[h.length-1];L&&(O=c.padding()/2),1===h.length?I.push(D+c.rangeBand()+2*O):(P=h[1]-(h[0]+c.rangeBand()),I.push(D+c.rangeBand()+P)),P=L?c.padding():((h.length-1)*P+2*O)/h.length;var A=P/2,N=t.selectAll(".igc-y-axis-separator").data(I);N.exit().remove(),N.enter().append("rect").attr("class","igc-y-axis-separator"),N.attr("x",0).attr("width",i.width-1).attr("y",function(t){return Math.round(t-A)}).style({fill:s.color,stroke:"none","stroke-width":0}).attr("height",1)}var B=t.selectAll(".igc-y-axis-border").data([0]);B.enter().append("rect").attr("class","igc-y-axis-border"),B.exit().remove(),B.attr("x",i.width-1).attr("y",0).attr("height",i.height).attr("width",2).style({fill:s.color,stroke:"none","stroke-width":0})})}var e,n=d3.scale.linear(),o={left:0,top:0},i={width:0,height:0},r={top:0,right:0,bottom:0,left:0},s=c["default"].prototype.defaults().style.axisTick,u=[],f=!1,g=function(t){t.style("opacity",1)},m=!0,v={scale:function(e){return arguments.length?(n=e,t):n},offset:function(e){return arguments.length?(o.left="number"==typeof e.left?e.left:o.left,o.top="number"==typeof e.top?e.top:o.top,t):o},bounds:function(e){return arguments.length?(i.width="number"==typeof e.width?e.width:i.width,i.height="number"==typeof e.height?e.height:i.height,t):i},style:function(e){return arguments.length?(s=e,t):s},data:function(e){return arguments.length?(u=e,t):u},padding:function(e){return arguments.length?(r.top="number"==typeof e.top?e.top:r.top,r.right="number"==typeof e.right?e.right:r.right,r.bottom="number"==typeof e.bottom?e.bottom:r.bottom,r.left="number"==typeof e.left?e.left:r.left,t):r},drawSeparators:function(e){return arguments.length?(f=!!e,t):f},transition:function(e){return arguments.length?(g=e,t):g},indexFilter:function(n){return arguments.length?(e=n,t):n}};return(0,h.injectFunctions)(t,v),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Left=r;var a=n(48),s=n(22),l=i(s),u=n(30),c=o(u),h=n(15),p=n(425),d=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(){function t(t){t.each(function(){var t=d3.select(this);t.attr("transform","translate("+o.left+","+o.top+")");var c=this.__chart__=n.copy(),h=c.range(),f=u.slice(0);e&&(f=e.map(function(t){return u[t]}),h=e.map(function(t){return h[t]}));var v=h.map(function(t,e){return{y:t,d:f[e]}}).filter(function(t){return void 0!==t.d}),y=l.getAllTextDimensions(f,t,s),b=(0,p.getRangeStep)(h),_=[];t.selectAll(".tick").each(function(t){return _.push(t)}),m&&(m=!l.compare(_,v,function(t,e){return t.d===e.d})),1===h.length&&(b=i.height),b-=r.top+r.bottom;var x=i.width-r.right,w=t.selectAll(".tick").data(v);w.exit().remove(),w.enter().append("text").attr("class","tick"),w.style(s).attr("fill",s.color).style("opacity",a.eps);var S=d3.max(y,function(t){return t.height});w.attr("y",function(t,e){return t.y+(y[e].height-y[e].height/4)}).attr("x",0).attr("dy","").attr("transform","").attr("text-anchor","start").text(function(t,e){return f[e]}),w.selectAll("tspan").attr("x",x+"px");var C=i.width-r.left-r.right;d.Text.wrap(w,C,S),w.selectAll("tspan").attr("text-anchor","start");var E=c.rangeBand();w.each(function(t,e){for(var n=d3.select(this),o=n.selectAll("tspan")[0],i=o.length,r=i;r*S>E;)r--;if(0>=r&&(r=1),i!==r){for(var a=r;i>=a;a++)d3.select(o[a]).remove();var s=d3.select(n.selectAll("tspan")[0][n.selectAll("tspan")[0].length-1]),l=s.text();n.selectAll("tspan")[0].length>0&&(s.text(l+"..."),s.node().getBoundingClientRect().width>C?l=l.substring(0,l.length-3)+"...":l+="..."),s.text(l)}var u=(E-r*S)/2;n.selectAll("tspan").attr("y",function(){return t.y+u+(y[e].height-y[e].height/4)})}),g&&(m?d3.transition(w).call(g):w.call(g))})}var e,n=d3.scale.linear(),o={left:0,top:0},i={width:0,height:0},r={top:0,right:0,bottom:0,left:0},s=c["default"].prototype.defaults().style.axisTick,u=[],f=!1,g=function(t){t.style("opacity",1)},m=!0,v={scale:function(e){return arguments.length?(n=e,t):n},offset:function(e){return arguments.length?(o.left="number"==typeof e.left?e.left:o.left,o.top="number"==typeof e.top?e.top:o.top,t):o},bounds:function(e){return arguments.length?(i.width="number"==typeof e.width?e.width:i.width,i.height="number"==typeof e.height?e.height:i.height,t):i},style:function(e){return arguments.length?(s=e,t):s},data:function(e){return arguments.length?(u=e,t):u},padding:function(e){return arguments.length?(r.top="number"==typeof e.top?e.top:r.top,r.right="number"==typeof e.right?e.right:r.right,r.bottom="number"==typeof e.bottom?e.bottom:r.bottom,r.left="number"==typeof e.left?e.left:r.left,t):r},drawSeparators:function(e){return arguments.length?(f=!!e,t):f},transition:function(e){return arguments.length?(g=e,t):g},indexFilter:function(n){return arguments.length?(e=n,t):n}};return(0,h.injectFunctions)(t,v),t}Object.defineProperty(e,"__esModule",{value:!0}),e.LeftStart=r;var a=n(48),s=n(22),l=i(s),u=n(30),c=o(u),h=n(15),p=n(425),d=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(){return o[n]()}function e(){var t=u.map(function(t){return(0,s.replaceBlank)(Number(t),0)}).sort(function(t,e){return t-e}),e=[d3.min(t),d3.max(t)];return e=h(e,c,l),a["default"].prototype.limitDomain(r[0],r[1],e),d3.scale.linear().domain(e).range(l)}var n="ordinal",o={numeric:e},r=[],l=[0,1],u=[],c=0,h=i.linearScaleTicksDomainAdjust;return(0,s.injectFunctions)(t,{type:function(e){return arguments.length&&e in o?(n=e,t):t},sheet:function(){return arguments.length?t:t},domainLimit:function(e){return arguments.length?(r=e.slice(0),t):t},range:function(e){return arguments.length?(l=e.slice(0),t):t},data:function(e){return arguments.length?(u=e.slice(0),t):u},rangePointRadius:function(e){return arguments.length?(c=e,t):c}}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleHelper=i;var r=n(30),a=o(r),s=n(15);i.linearScaleTicksDomainAdjust=function(t,e,n){function o(t,e){t>e&&s.domain([s.ticks()[0],t]).nice(10).nice(10)}function i(t,e){var n,o;e>t&&(n=s.ticks(),o=n.length-1,s.domain([t,n[o]]).nice(10).nice(10))}function r(t,e,n){(n="<"===n?i:o)(s.invert(t),e)}e=e||0;var a=t.slice(0),s=d3.scale.linear().domain(a).range(n).nice(10).nice(10);return r(s(a[0])-e,s.domain()[0],"<"),r(s(a[1])+e,s.domain()[1],">"),s.domain()}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.AreaStepped=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function c(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:c(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},l=n(509),u=n(171);e.AreaStepped=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"categoryBandOpts",value:function(){return{padding:0,outerPadding:5}}},{key:"createHorizontalScaleResize",value:function(){var t=this.categoryBandOpts();return function(e,n){e.rangeBands(n,t.padding,t.outerPadding);var o=e.rangeBand(),i=o%1;0!==i&&(o=parseInt(o,10),t.outerPadding+=i*(e.domain().length-1)/2),t.outerPadding=parseInt(t.outerPadding,10),e.rangeBandsByWidth(o,t.padding,t.outerPadding)}}},{key:"createHorizontalScale",value:function(t,e){var n=this.categoryBandOpts(),o=(0,u.Ordinal)().domain(t).rangeBands(e,n.padding,n.outerPadding),i=o.rangeBand(),r=i%1;return 0!==r&&(i=parseInt(i,10),n.outerPadding+=r*(t.length-1)/2),n.outerPadding=parseInt(n.outerPadding,10),o.rangeBandsByWidth(i,n.padding,n.outerPadding),o}},{key:"featuresColumnWidth",value:function(){return null}},{key:"graphInstanceSetup",value:function(t){s(Object.getPrototypeOf(e.prototype),"graphInstanceSetup",this).apply(this,arguments),t.opacity(.7).transitionDelay(function(){return 0}).transitionDuration(0).transitionTiming({duration:{x:0,y:0,text:50}})}},{key:"emptySheetData",value:function(){return _.merge({},s(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{padding:20},series:[{type:"column-stacked"}],axis:[{title:""},{title:"",ticks:!0,showValues:!1}],grid:{horizontalZeroHighlight:!1,vertical:!0,horizontal:!0}})}}]),e}(l.ColumnStacked)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BarGrouped=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function k(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:k(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(428),d=n(427),f=n(76),g=o(f),m=n(136),v=i(m),y=n(137),b=n(77),x=o(b),w=n(66),S=n(171),C=n(48),E=n(22),T=n(15);e.BarGrouped=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e,n={top:0,right:0,bottom:0,left:0},o={left:0,right:0,top:0,bottom:0},i={left:0,right:0},r=this.getSheetData(),a=this.prepareSheetData(r),s=this.options,l=a.categories,u=!!r.legend.enabled,c={maxLeftCategoryWidth:0,maxLeftCategoryHeight:0},h={top:2,right:10,bottom:2,left:0},p=this.createAnimationCounter(3);this.setupNumberFormatter(r),r.categories.categoryHeight&&(e=Number(r.categories.categoryHeight));var d=this.renderGraphs.bind(this),f=this.renderPart.bind(this),m=C.math.preciseNumber,b=r.axis[1]&&r.axis[1].title;b&&(o.left=(0,E.getTextDimensions)(b,this.svg).height+10);var _=r.axis[0]&&r.axis[0].title;_&&(o.bottom=(0,E.getTextDimensions)(_,this.svg).height+10);var T={width:0,height:0};a.ticks&&(T=(0,E.getTextDimensions)(["0123456789,."+this.numberFormatX.tick(1e3)],this.svg,s.style.axisTick),T.height=Math.min(T.height,30));var k=T.height+5,M=r.categories.padding,O=k+M/2,I=s.width-n.left-o.left-n.right-o.right,P=s.height-n.top-o.top-n.bottom-o.bottom,L=d3.range(0,l.length),D=(0,S.Ordinal)().domain(L),A={width:s.width};if(this.renderSheetSwitch(A),!a.graphs||a.graphs&&0===a.graphs.length)return this.animation.start(),this.animation.end(),this.resetRootElement();if(e){for(var N=d3.max(a.graphs,function(t){return t.data.length}),B=.2,j=e,R=d3.scale.ordinal().domain(d3.range(0,N)).rangeBands([0,j],B,0);e>R.rangeBand();)j+=1,R.rangeBands([0,j],B,0);D.rangeBandsByWidth(j,M,O);var H=D.range()[D.range().length-1]+D.rangeBand()+O;s.height=H+n.top+o.top+n.bottom+o.bottom,P=H}else{D.rangeBands([0,P],M,O);var F=L.length*D.rangeBand()+(L.length-1)*D.padding();F=m(F),0===m(P-F)&&(M=.1*((P-2*O)/L.length-.1),M=m(M),O=k+M/2,D.rangeBands([0,P],M,O))}var z=I-i.left-i.right,V=this.getDomain(a.graphs);"absolute"===s.series.data&&(V=this.getSheetsSeriesDomain());var U=r.axis[0],W=this.limitDomain(U.minLimit,U.maxLimit,V),G=h.right,$=V[0]<0;$&&(G=2*G),c.maxLeftCategoryWidth=Math.floor(.35*z)-h.right;var K=(0,E.getTextDimensions)(l,this.svg,s.style.axisTick);c.maxLeftCategoryHeight=D.rangeBand()+D.padding()-h.top-h.bottom;var q;K.width<=c.maxLeftCategoryHeight?q=K.height:(q=w.Measure.wrappedText(this.svg,c.maxLeftCategoryWidth,l,s.style.axisTick,K.height).width,q=Math.ceil(q)<=c.maxLeftCategoryWidth?Math.ceil(q):Math.floor(q));var Y=g.Left().scale(D).data(l).style(s.style.axisTick).padding(h).bounds({width:q+h.right,height:P}).offset({left:-(q+G),top:0}).drawSeparators(!0);z-=q+h.right+G;var Z=d3.scale.linear().rangeRound([0,z]).clamp(W);Z.domain(V);var X=a.valuesOutside;X&&a.showValues&&this.adjustScaleDomainToOutsideValues(Z,a.graphs,U);var J=(0,v["default"])().scale(D).orient("left").tickSize(-I,0).highlightZero(r.grid.horizontalZeroHighlight).style(s.style.grid).tickFormat("");r.grid.horizontal||J.tickValues([]);var Q=(0,v["default"])().scale(Z).orient("bottom").tickSize(P,0).highlightZero(r.grid.verticalZeroHighlight).style(s.style.grid).tickFormat(""),tt=(0,v["default"])().scale(Z).orient("bottom").drawLines(!1).style(s.style.axisTick).textOffset(-5).tickFormat(this.numberFormatX.tick).offset({top:P-T.height/4});if(a.ticks){var et=tt.scale(),nt=[],ot=[],it=[],rt=[];et.ticks().forEach(function(t){0===t?(nt.push(t),ot.push(et(t)),it.push(t),rt.push(et(t))):0>t?(nt.push(t),ot.push(et(t))):(it.push(t),rt.push(et(t)))}),T=(0,E.getTextDimensions)(nt.concat(it).map(function(e){return t.numberFormatX.tick(e,et)}),this.svg,s.style.axisTick);var at=g.getStepsInRange(ot,T.width+5,-1),st=g.getStepsInRange(rt,T.width+5),lt=g.filterToFit(ot,nt,at,-1),ut=g.filterToFit(rt,it,st,1);lt.domain.length&&"0"===lt.domain[0]&&lt.domain.shift();var ct={domain:lt.domain.concat(ut.domain)};$||ct.domain[0]===V[0]||ct.domain.unshift(V[0]),tt.tickValues(ct.domain),Q.tickValues(ct.domain),Q.tickValues().length>0&&0===Z(Q.tickValues()[0])&&Q.hideLinesByIndex([0]);var ht=[],pt=(0,E.getAllTextDimensions)(tt.tickValues().map(function(e){return t.numberFormatX.tick(e,et)}),this.svg,s.style.axisTick);tt.tickValues().forEach(function(t,e){var n=tt.scale()(t),o=pt[e].width,i=n-o+tt.textOffset();$&&(i+=h.right);var r=i>0;0===e&&Q.tickValues().length>0&&0===Z(Q.tickValues()[0])&&q+h.right>o+Math.abs(tt.textOffset())||r||ht.push(e)}),tt.hideTicksByIndex(ht)}else tt.tickValues([]);r.grid.vertical||Q.tickValues([]);var dt=(0,y.Label)().text(b).orientBounds({x1:0,y1:n.top+o.top,x2:s.width,y2:n.top+o.top+P}).style(s.style.axisTitle).orient("left"),ft=(0,y.Label)().text(_).orientBounds({x1:n.left+o.left+i.left+q+h.right,y1:n.top,x2:s.width,y2:s.height}).style(s.style.axisTitle).orient("bottom");ft.dispatch().on("animationEnd",p);var gt;if(u){var mt=this.prepareLegendData(r),vt=x.TextItemMetrics().width(A.width).texts(mt.map(function(t){return t.title})).parentContainer(this.container).style(s.style.legend).reservedSize(36);gt=x.Legend().data(mt).width(A.width).style(s.style.legend).chartId(this.chartId).textMetrics(vt()),this.renderLegend(gt)}else this.container.selectAll(".igc-legend").remove();var yt=this.svg.datum(s).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);yt.each(function(t){var e=d3.select(this),r=e.attr("width",t.width).attr("height",t.height),s=r.selectAll(".igc").data([0]).enter().append("g").attr("class","igc"),l=s.append("g").attr("class","parts"),u=r.selectAll(".igc");s.empty()&&(l=u.select(".parts")),
u.attr("transform","translate("+(n.left+o.left+i.left+(q+G))+","+(n.top+o.top)+")"),f(l,Y,"igc-y-axis-text"),f(l,J,"igc-ygrid"),f(l,Q,"igc-xgrid"),d(u,[{graphs:a.graphs,x:Z,y:D,textStyle:t.style.axisTick,legend:gt,transitionDuration:t.animation.duration,animationEnd:p}]),f(l,tt,"igc-x-axis-text"),f(e,dt,"igc-title-left"),f(e,ft,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){p()})}},{key:"renderGraphInstances",value:function(){var t,e=this,n=this.graphInstances.enterCount,o=this.graphInstances.updateCount,i=o+n,r=0===o&&n>0,a=o>0&&n>0,s=this.graphInstances.length,l=this.graphInstances[0].group,u=_.after(2,l.animationEnd),c=_.after(s,u);this.graphInstances.forEach(function(e){"update"===e.type&&(t=e.instance)});var h=function(){0===--i&&!function(){var t=_.after(s,u);e.graphInstances.forEach(function(e){var n=e.instance;n.dispatch().on("animationTextEnd",t),n.renderText()})}()};this.graphInstances.forEach(function(e){var n=e.instance,o=n.dispatch();if(a&&"enter"===e.type){o.on("animationEnterStart",h);var i=n.transitionTiming().duration;t&&(i=t.transitionTiming().duration);var s=i.x+i.y;n.renderDelay(s)}else r?o.on("animationStart",h):o.on("animationUpdateEnd",h);o.on("animationEnd",c),e.selection.call(e.instance)})}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=e.data.length,r=this.numberFormatX;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(n).textStyle(o.textStyle).shape(e.shape).showValues(e.showValues).legend(o.legend).valuesOutside(e.valuesOutside).tooltipText(function(t){return t.yLabel+": "+r.tooltip(t.xLabel)}).tooltipValue(function(t){return t.groupLabel}).transitionDelay(function(t,e){return e/i*(o.transitionDuration-200)}).transitionDuration(o.transitionDuration)}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.min(t.data,function(t){return t.x})}),d3.max(t,function(t){return d3.max(t.data,function(t){return t.x})})];return e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1)),this.adjustDomain(e),e}},{key:"getSheetsSeriesDomain",value:function(){var t;return this.options.sheets.forEach(function(e,n){var o=_.merge({},this.emptySheetData(),e),i=this.prepareSheetData(o),r=this.getDomain(i.graphs);0===n?t=r.slice(0):(t[0]=Math.min(r[0],t[0]),t[1]=Math.max(r[1],t[1]))},this),t}},{key:"adjustDomain",value:function(t){var e=t[0]<0&&t[1]<0,n=t[0]>0&&t[1]>0;e&&!n&&(t[1]=0),n&&!e&&(t[0]=0)}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{data:"separate"}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{shape:"bar-bar",padding:20},series:[{type:"bar-grouped"}],axis:[{title:"",ticks:!0,valuesOutside:!1,showValues:!0},{title:""}],grid:{verticalZeroHighlight:!0,vertical:!0,horizontal:!1}})}},{key:"prepareSheetData",value:function(t){var e,n=_.merge({},t.axis[0]);if(n){t.categories.data||(t.categories.data=[]);var o=t.categories.data.length;return n.graphs=t.categories.data.map(function(){return{colors:t.categories.colors,data:[],showValues:n.showValues===!0,valuesOutside:!!n.valuesOutside,type:"bar-grouped",shape:t.categories.shape}}),t.series.forEach(function(e,i){e.data.length<o&&t.categories.data.forEach(function(t,n){e.data[n]=e.data[n]}),e.data.forEach(function(o,r){var a=t.categories.data[r];"undefined"!=typeof a&&n.graphs[r].data.push({x:(0,T.replaceBlank)(o,null),y:r,xLabel:(0,T.replaceBlank)(e.rawData[r]),yLabel:(0,T.replaceBlank)(e.title),groupLabel:(0,T.replaceBlank)(a),seriesIdx:i})})}),e=n.graphs,n.graphs.forEach(function(t){var e=t.data.length,n=0;0!==e&&(t.data.forEach(function(t){null===t.x&&n++}),n===e&&(t.data=[]))}),n.categories=t.categories.data.slice(0).filter(function(t,e){return n.graphs[e]&&n.graphs[e].data.length>0}),n.graphs=n.graphs.filter(function(t){return t.data&&t.data.length>0}),n.graphs.length!==e&&n.graphs.forEach(function(t,e){t.data.forEach(function(t){t.y=e})}),n}}},{key:"adjustScaleDomainToOutsideValues",value:function(){d.Bar.prototype.adjustScaleDomainToOutsideValues.apply(this,arguments)}},{key:"prepareLegendData",value:function(t){var e=t.categories.colors;return t.series.map(function(t,n){return{color:(0,E.getColor)(n,e),title:t.title}})}},{key:"applySheetOptions",value:function(t){p.BarStacked.prototype.applySheetOptions.call(this,t)}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bubble=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function h(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:h(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},l=n(76),u=n(15),c=n(513);e.Bubble=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"defaults",value:function(){return _.merge({},s(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:0,dataPoints:!0}})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=this.getRadiusFn(),a=this.numberFormatX,s=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(i).radius(r).legend(o.legend).filterFn(function(t){return null!==t.y}).tooltipText(function(t){return t.groupSubLabel?t.groupLabel+"\n"+t.groupSubLabel+" ("+t.valueLabel+": "+t.value+")":t.groupLabel}).tooltipValue(function(t){return(t.xValueLabel?t.xValueLabel+": ":"")+a.tooltip(t.x)+"\n"+(t.yValueLabel?t.yValueLabel+": ":"")+s.tooltip(t.y)}).dispatch().on("animationEnd",o.animationEnd)}},{key:"getRadiusFn",value:function(){var t=this.runtime.sizeScale;return function(e){return null===e.value?0:t(e.value)}}},{key:"createSizeScale",value:function(t){var e=[1,Math.min(this.options.width,this.options.height)/Math.PI*.35],n=d3.scale.sqrt(),o=[],i=[0,0];t.forEach(function(t){o=_.union(o,t.data.map(function(t){return t.value}).filter(function(t){return(0,u.isNumber)(t)}))}),0===o.length?e=[0,0]:o.forEach(function(t){i[0]=Math.min(i[0],t),i[1]=Math.max(i[1],t)}),e[1]=Math.ceil(e[1]),n.domain(i).range(e),this.runtime.sizeScale=n}},{key:"numericCategoriesScale",value:function(){var t=this.runtime,e=t.xAxisOptions,n=[0,t.graphWidth],o=this.getDomain(t.graphs,"x"),i=d3.scale.linear().domain(o).range(n);return this.expandScaleDomainToBubbleSizes(i,"x"),o=i.domain(),o=l.ScaleHelper.linearScaleTicksDomainAdjust(o,0,n),this.limitDomain(e.minLimit,e.maxLimit,o),i.domain(o),i}},{key:"expandScaleDomainToBubbleSizes",value:function(t,e){function n(n){return t(n[e])+i(n.value)}function o(n){return t(n[e])-i(n.value)}var i=this.runtime.sizeScale,r=this.runtime.graphs,a=[];if(r.forEach(function(t){t.data.forEach(function(t){a[0]||(a[0]=t),a[1]||(a[1]=t);var e=a[0],i=a[1];o(t)<o(e)&&(a[0]=t),n(t)>n(i)&&(a[1]=t)})}),0!==a.length){var s=[];do s[0]=Math.ceil(t.invert(o(a[0]))),s[1]=Math.ceil(t.invert(n(a[1]))),t.domain(s);while(Math.ceil(t.invert(o(a[0])))<s[0]||Math.ceil(t.invert(n(a[1])))>s[1])}}},{key:"adjustYDomain",value:function(t,e){var n=this.runtime,o=n.yAxisOptions,i=[0,e];n.sizeScale||this.createSizeScale(n.graphs);var r=d3.scale.linear().domain(t).range(i);return this.expandScaleDomainToBubbleSizes(r,"y"),t=r.domain(),t=l.ScaleHelper.linearScaleTicksDomainAdjust(t,0,i),this.limitDomain(o.minLimit,o.maxLimit,t),t}}]),e}(c.Scatter)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Column=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function w(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:w(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(429),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(171),y=n(22),b=n(15),x=n(430);e.Column=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.options;if(this.detectDimensions(),this.renderSheetSwitch({width:e.width}),e.sheets&&e.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var n=.27,o=this.renderGraphs.bind(this),i=this.renderPart.bind(this),r=this.runtime={},a=r.margin={top:0,right:0,bottom:2,left:0},s={left:0,right:0,top:0,bottom:0},l={left:0,right:0},u=r.limits={maxCategoryWidth:0,maxCategoryHeight:0},c=r.bottomLabelPadding={top:6,right:2,bottom:0,left:2},h=r.sheet=this.getSheetData(),p=h.axis[1],f=h.axis[0],v=this.prepareSheetData(h),b=r.categoryData=v.categories;this.setupNumberFormatter(h);var _="absolute"===e.series.data?this.getSheetsSeriesDomain():this.getDomain(v.graphs),x=this.limitDomain(p.minLimit,p.maxLimit,_),w=_[0]<0,S=d3.scale.linear().domain(_).clamp(x),C=!!h.legend.enabled;r.categoryLayout=h.categories.layout,r.columnWidth=h.categories.categoryWidth?Number(h.categories.categoryWidth):null,r.xScaleResize=r.columnWidth?function(t,e){t.rangeBandsFixed(e,r.columnWidth)}:function(t,e){t.rangeBandsPct(e)};var E=r.spacing={maxBeforeXAxisTick:50,beforeCategoryBorder:w?c.top:0,beforeBottomCategories:5},T=this.createAnimationCounter(v.graphs.length+2),k=(0,g["default"])().scale(S).orient("left").drawLines(!1).tickFormat(this.numberFormatY.tick).style(e.style.axisTick);if(b.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var M=h.axis[1]&&h.axis[1].title;M&&(s.left=(0,y.getTextDimensions)(M,this.svg,e.style.axisTitle).height+10);var O=f&&f.title;O&&(c.bottom=c.top,s.bottom=(0,y.getTextDimensions)(O,this.svg,e.style.axisTitle).height,u.maxCategoryHeight+=c.bottom);var I,P=e.width-a.left-s.left-a.right-s.right,L={width:0,height:0};v.ticks&&(I=S.ticks().map(function(e){return t.numberFormatY.tick(e,S)}),L=(0,y.getTextDimensions)(I,this.svg,e.style.axisTick),l.left=L.width,a.top=L.height);var D=e.height-a.top-s.top-a.bottom-s.bottom;u.maxCategoryHeight+=Math.floor(D*n),r.graphWidth=P-l.left-l.right,r.igcLeftOffset=a.left+s.left+l.left;var A=this.createXScale();u.maxCategoryWidth=A.rangeBand()+A.padding()-c.left-c.right,1===b.length&&(u.maxCategoryWidth=r.graphWidth-c.left-c.right);var N=this.createCategoryLabels();u.maxCategoryHeight=N.height+c.top+c.bottom;var B=b.length!==N.renderData.length;B&&C&&(N.renderData=[],u.maxCategoryHeight=O?c.top:0);var j=d.BottomTilted().style(e.style.axisTick).data(f.ticks?N.renderData:[]).textAlign(N.renderData.textAlign).bounds({height:u.maxCategoryHeight,y:D-u.maxCategoryHeight+E.beforeBottomCategories}),R=D-u.maxCategoryHeight-E.beforeCategoryBorder;S.rangeRound([R,0]);var H=h.axis[1].valuesOutside;H&&h.axis[1].showValues&&this.adjustScaleDomainToOutsideValues(S,v.graphs,p);var F=(0,g["default"])().scale(S).orient("left").tickSize(-P).highlightZero(h.grid.horizontalZeroHighlight).style(e.style.grid).tickFormat("").offset({left:-l.left}),z=(0,g["default"])().scale(A).orient("bottom").tickSize(R).highlightZero(h.grid.verticalZeroHighlight).style(e.style.grid).tickFormat("");if(h.grid.vertical||z.tickValues([]),k.textOffset(-(.25*L.height)).offset({left:-l.left}),v.ticks){var V=this.filterAxisTicks(k);w||V.domain[V.domain.length-1]===_[0]||V.domain.push(_[0]),k.tickValues(V.domain),F.tickValues(V.domain);var U=F.tickValues().length-1;-1===U||S(F.tickValues()[U])!==R||w||F.hideLinesByIndex([U]);var W=[],G=(0,y.getAllTextDimensions)(k.tickValues().map(function(e){return t.numberFormatY.tick(e,S)}),this.svg,e.style.axisTick),$=k.tickValues().length-1,K=null;-1!==$&&(K=k.scale()(k.tickValues()[$])-G[$].height),k.tickValues().forEach(function(t,e){var n=k.scale()(t);null!==K&&$!==e&&-1===W.indexOf($)&&n>K&&W.push($)}),k.hideTicksByIndex(W)}else k.tickValues([]);h.grid.horizontal||F.tickValues([]);var q=0;v.ticks&&(q=k.getBorderingTick()-L.height,q>0&&(q=0));var Y=(0,m.Label)().text(M).orientBounds({x1:a.left,y1:a.top+s.top+q,x2:e.width,y2:a.top+s.top+R+E.beforeCategoryBorder}).style(e.style.axisTitle).orient("left"),Z=(0,m.Label)().text(O).orientBounds({x1:a.left+s.left,y1:0,x2:e.width,y2:e.height}).style(e.style.axisTitle).orient("bottom");Z.dispatch().on("animationEnd",T);var X=void 0;B&&C?(X=this.createLegend(),this.renderLegend(X)):this.container.selectAll(".igc-legend").remove();var J=this.svg.datum(e).transition().ease(e.animation.ease).duration(e.animation.duration);J.each(function(t){var e=d3.select(this),n=e.attr("width",t.width).attr("height",t.height),u=n.selectAll(".igc").data([0]).enter().append("g").attr("class","igc");u.append("g").attr("class","parts");var c=n.selectAll(".igc"),h=c.select(".parts");c.attr("transform","translate("+(a.left+s.left+l.left)+","+(a.top+s.top)+")"),i(h,k,"igc-y-axis-text"),i(h,F,"igc-ygrid"),i(h,z,"igc-xgrid"),i(h,j,"igc-x-axis-text"),o(c,[{graphs:v.graphs,x:A,y:S,textStyle:t.style.axisTick,legend:X,transitionDuration:t.animation.duration,animationEnd:T}]),i(h,function(e){e.each(function(){var e=d3.select(this),n=e.selectAll(".igc-x-axis-border-line").data([0]);n.enter().append("rect").transition().attr("class","igc-x-axis-border-line"),n.exit().remove(),n.transition().attr("x",-l.left).attr("y",R+E.beforeCategoryBorder).attr("width",r.graphWidth+l.left).attr("height",2).style({fill:t.style.axisTick.color,stroke:"none","stroke-width":0})})},"igc-x-axis-border"),i(e,Y,"igc-title-left"),i(e,Z,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){T()})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length,a=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(i).textStyle(o.textStyle).showValues(e.showValues).valuesOutside(e.valuesOutside).legend(o.legend).tooltipText(function(t){return t.xLabel}).tooltipValue(function(t){return a.tooltip(t.yLabel)}).transitionDelay(function(t,e){return e/r*(o.transitionDuration-200)}).transitionDuration(o.transitionDuration).behaviour(x.ColumnGrouped.BEHAVIOURS.COLUMN)}},{key:"createXScale",value:function(){var t=this.runtime,e=t.categoryData,n=t.graphWidth,o=t.xScaleResize,i=d3.range(0,e.length),r=t.xScale=(0,v.Ordinal)().domain(i);return o(r,[0,n]),r}},{key:"prepareLegendData",value:function(){var t=this.runtime,e=t.sheet,n=t.categoryData,o=e.categories.colors;return n.map(function(t,e){return{color:(0,y.getColor)(e,o),title:t}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{type:"column",axisIndex:1}],axis:[{},{valuesOutside:!1}]})}},{key:"prepareSheetData",value:function(t){var e=_.merge({},t.axis[1]);return e.graphs=[{type:"column-grouped",data:[],colors:t.categories.colors,showValues:!!e.showValues,valuesOutside:!!e.valuesOutside}],t.series.forEach(function(n){var o=_.reduce(n.data,function(e,o,i){return o=(0,b.replaceBlank)(o,null),null===o?e:(e.push({x:0,xLabel:(0,b.replaceBlank)(t.categories.data[i],""),y:o,yLabel:(0,b.replaceBlank)(n.rawData[i]),categoryIdx:i,seriesIdx:i}),e)},[]);e.graphs[0].data=e.graphs[0].data.concat(o)}),e.categories=e.graphs[0].data.map(function(t){return t.xLabel}),e}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnGrouped=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function w(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:w(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(429),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(171),y=n(22),b=n(15),x=n(430);e.ColumnGrouped=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.options;if(this.detectDimensions(),this.renderSheetSwitch({width:e.width}),e.sheets&&e.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var n=.27,o=this.renderGraphs.bind(this),i=this.renderPart.bind(this),r=this.runtime={},a=r.margin={top:0,right:2,bottom:0,left:0},s={left:0,right:0,top:0,bottom:0},l={left:0,right:0},u=r.limits={maxCategoryWidth:0,maxCategoryHeight:10},c=r.bottomLabelPadding={top:6,right:2,bottom:4,left:2},h=r.sheet=this.getSheetData(),p=h.axis[1],f=h.axis[0],b=this.prepareSheetData(h),_=r.categoryData=b.categories;this.setupNumberFormatter(h);var x="absolute"===e.series.data?this.getSheetsSeriesDomain():this.getDomain(b.graphs),w=this.limitDomain(p.minLimit,p.maxLimit,x),S=x[0]<0,C=d3.scale.linear().domain(x).clamp(w),E=h.categories.categoryWidth,T=E&&"string"==typeof E&&"%"===E[E.length-1];E=E?Math.round(parseFloat(h.categories.categoryWidth)):null;var k=!!h.legend.enabled;r.categoryLayout=h.categories.layout;var M=this.createAnimationCounter(3),O=r.spacing={maxBeforeXAxisTick:50,beforeCategoryBorder:S?c.top:0,beforeBottomCategories:5},I=(0,g["default"])().scale(C).orient("left").drawLines(!1).tickFormat(this.numberFormatY.tick).style(e.style.axisTick),P=p&&p.title;P&&(s.left=(0,y.getTextDimensions)(P,this.svg,e.style.axisTitle).height+10);var L=f&&f.title;L&&(s.bottom=(0,y.getTextDimensions)(L,this.svg,e.style.axisTitle).height+5);var D,A=e.width-a.left-s.left-a.right-s.right,N={width:0,height:0};b.ticks&&(D=C.ticks().map(function(e){return t.numberFormatY.tick(e,C)}),N=(0,y.getTextDimensions)(D,this.svg,e.style.axisTick),l.left=N.width,a.top=N.height);var B=e.height-a.top-s.top-a.bottom-s.bottom;u.maxCategoryHeight+=Math.floor(B*n),r.graphWidth=A-l.left-l.right;var j=d3.range(0,_.length),R=1===j.length,H=R?1:null,F=r.xScale=(0,v.Ordinal)().domain(j).rangeBandsPct([0,r.graphWidth],T?.01*E:H),z=!T&&E;z&&(F=r.xScale=(0,v.Ordinal)().domain(j).rangeBandsFixed([0,r.graphWidth],E)),r.xScaleResize=z?function(t,e){t.rangeBandsFixed(e,E)}:function(t,e){t.rangeBandsPct(e,T?.01*E:H)};var V={scaleType:z?"fixed":"pct",only:R};if(!b.graphs||b.graphs&&0===b.graphs.length)return this.animation.start(),this.animation.end(),this.resetRootElement();r.igcLeftOffset=a.left+s.left+l.left,u.maxCategoryWidth=F.rangeBand()+F.padding()-c.left-c.right,R&&(u.maxCategoryWidth=r.graphWidth-c.left-c.right);var U=this.createCategoryLabels();u.maxCategoryHeight=U.height+c.top+c.bottom;var W=_.length!==U.renderData.length;W&&(u.maxCategoryHeight=0,U.renderData=[],u.maxCategoryHeight=L?c.top:0);var G=d.BottomTilted().style(e.style.axisTick).data(f.ticks?U.renderData:[]).textAlign(U.renderData.textAlign).bounds({height:u.maxCategoryHeight,y:B-u.maxCategoryHeight+O.beforeBottomCategories}),$=B-u.maxCategoryHeight-O.beforeCategoryBorder;C.range([$,0]);var K=p.valuesOutside;K&&p.showValues&&this.adjustScaleDomainToOutsideValues(C,b.graphs,p);var q=(0,g["default"])().scale(C).orient("left").tickSize(-A,0).highlightZero(h.grid.horizontalZeroHighlight).style(e.style.grid).tickFormat("").offset({left:-l.left}),Y=(0,g["default"])().scale(F).orient("bottom").tickSize($,0).highlightZero(h.grid.verticalZeroHighlight).style(e.style.grid).tickFormat("");if(h.grid.vertical||Y.tickValues([]),I.textOffset(-(.25*N.height)).offset({left:-l.left}),b.ticks){var Z=this.filterAxisTicks(I);S||Z.domain[Z.domain.length-1]===x[0]||Z.domain.push(x[0]),I.tickValues(Z.domain),q.tickValues(Z.domain);var X=q.tickValues().length-1;-1===X||C(q.tickValues()[X])!==$||S||q.hideLinesByIndex([X]);var J=[],Q=(0,y.getAllTextDimensions)(I.tickValues().map(function(e){return t.numberFormatY.tick(e,C)}),this.svg,e.style.axisTick),tt=I.tickValues().length-1,et=null;-1!==tt&&(et=I.scale()(I.tickValues()[tt])-Q[tt].height),I.tickValues().forEach(function(t,e){var n=I.scale()(t);null!==et&&tt!==e&&-1===J.indexOf(tt)&&n>et&&J.push(tt)}),I.hideTicksByIndex(J)}else I.tickValues([]);h.grid.horizontal||q.tickValues([]);var nt=0;b.ticks&&(nt=I.getBorderingTick()-N.height,nt>0&&(nt=0));var ot=(0,m.Label)().text(P).orientBounds({x1:a.left,y1:a.top+s.top+nt,x2:e.width,y2:a.top+s.top+$+O.beforeCategoryBorder}).style(e.style.axisTitle).orient("left"),it=(0,m.Label)().text(L).orientBounds({x1:a.left+s.left,y1:0,x2:a.left+s.left+A,y2:e.height}).style(e.style.axisTitle).orient("bottom");it.dispatch().on("animationEnd",M);var rt=void 0;k?(rt=this.createLegend(),this.renderLegend(rt)):this.container.selectAll(".igc-legend").remove();var at=this.svg.datum(e).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);at.each(function(t){var e=d3.select(this),n=e.attr("width",t.width).attr("height",t.height),c=n.selectAll(".igc").data([0]).enter().append("g").attr("class","igc");c.append("g").attr("class","parts");var h=n.selectAll(".igc"),p=h.select(".parts");h.attr("transform","translate("+r.igcLeftOffset+","+(a.top+s.top)+")"),i(p,I,"igc-y-axis-text"),i(p,q,"igc-ygrid"),i(p,Y,"igc-xgrid"),i(p,G,"igc-x-axis-text"),o(h,[{graphs:b.graphs,x:F,y:C,textStyle:t.style.axisTick,legend:rt,transitionDuration:t.animation.duration,animationEnd:M,groupOpts:V}]),i(p,function(e){e.each(function(){var e=d3.select(this),n=e.selectAll(".igc-x-axis-border-line").data([0]);n.enter().append("rect").transition().attr("class","igc-x-axis-border-line"),n.exit().remove(),n.transition().attr("x",-l.left).attr("width",r.graphWidth+a.right+l.left).attr("y",$+O.beforeCategoryBorder).attr("height",2).style({fill:t.style.axisTick.color,stroke:"none","stroke-width":0})})},"igc-x-axis-border"),i(p,function(e){e.each(function(){var e=d3.select(this),n=r.xScale,o="function"==typeof n.padding,i=(0,v.getScalePositions)(n),a=i.slice(0),s=i[i.length-1],l=i[0],c=0;o&&(l=n.padding()/2),1===i.length?a.push(s+n.rangeBand()+2*l):(c=i[1]-(i[0]+n.rangeBand()),a.push(s+n.rangeBand()+c)),c=o?n.padding():((i.length-1)*c+2*l)/i.length;var h=c/2,p=e.selectAll(".igc-x-axis-separator").data(a),d="tilted"===U.layout?2*O.beforeBottomCategories:u.maxCategoryHeight;p.exit().transition().attr("height",0).remove(),p.enter().append("rect").attr("class","igc-x-axis-separator"),p.transition().attr("y",$+O.beforeCategoryBorder).attr("height",d).attr("x",function(t){return Math.round(t-h-n.rangeBand()/2)}).attr("width",1).style({fill:t.style.axisTick.color,stroke:"none","stroke-width":0})})},"igc-x-axis-separators"),i(e,ot,"igc-title-left"),i(e,it,"igc-title-bottom")}).each("start",function(){t.animation.start()}).each("end",function(){M()})}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=e.data.length,r=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(n).textStyle(o.textStyle).showValues(e.showValues).valuesOutside(e.valuesOutside).legend(o.legend).tooltipText(function(t){return t.xLabel+": "+r.value(t.yLabel)}).tooltipValue(function(t){return t.groupLabel}).transitionDelay(function(t,e){return e/i*(o.transitionDuration-200)}).transitionDuration(o.transitionDuration).groupOpts(o.groupOpts).behaviour(x.ColumnGrouped.BEHAVIOURS.COLUMN_GROUPED)}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{padding:20},series:[{type:"column-grouped"}],axis:[{},{valuesOutside:!1}]})}},{key:"prepareSheetData",value:function(t){var e,n=_.merge({},t.axis[1]);if(n){t.categories.data||(t.categories.data=[]);var o=t.categories.data.length;return n.graphs=t.categories.data.map(function(){return{colors:t.categories.colors,data:[],showValues:n.showValues===!0,valuesOutside:!!n.valuesOutside,type:"column-grouped"}}),t.series.forEach(function(e,i){e.data.length<o&&t.categories.data.forEach(function(t,n){e.data[n]=e.data[n]}),e.data.forEach(function(o,r){var a=t.categories.data[r];void 0!==a&&n.graphs[r].data.push({x:r,y:(0,b.replaceBlank)(o,null),xLabel:(0,b.replaceBlank)(e.title),yLabel:(0,b.replaceBlank)(e.rawData[r]),groupLabel:(0,b.replaceBlank)(a),seriesIdx:i})})}),e=n.graphs,n.graphs.forEach(function(t){var e=t.data.length,n=0;0!==e&&(t.data.forEach(function(t){null===t.y&&n++}),n===e&&(t.data=[]))}),n.categories=t.categories.data.slice(0).filter(function(t,e){return n.graphs[e]&&n.graphs[e].data.length>0}),n.graphs=n.graphs.filter(function(t){return t.data&&t.data.length>0}),n.graphs.length!==e&&n.graphs.forEach(function(t,e){t.data.forEach(function(t){t.x=e})}),n}}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DotPlot=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:p(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(30),c=o(u),h=n(170);e.DotPlot=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{numeric:!1},series:[{type:"circle"}]})}},{key:"defaults",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:8,dataPoints:!0,data:"separate"}})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=function(t){return function(e){return"string"==typeof e.y?0:t}}(this.options.series.dataPointRadius),a=this.numberFormatY;t.scaleX(o.x).scaleY(o.y).data(e.data).pX("x").pY("y").colors(e.colors).groupId(i).legend(o.legend).radius(r).filterFn(function(t){return null!==t.y}).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){return t.xLabel+": "+a.tooltip(t.yLabel)}).dispatch().on("animationEnd",o.animationEnd)}},{key:"renderGraphs",value:function(t,e){var n=[];e[0].graphs.forEach(function(t){n.push({graphs:[t],x:e[0].x,y:e[0].y,legend:e[0].legend,bounds:e[0].bounds,offset:e[0].offset,animationEnd:e[0].graphObjArr})}),c["default"].prototype.renderGraphs.call(this,t,n)}},{key:"renderDataPoints",value:function(){}},{key:"curtainAnimation",value:function(){}}]),e}(h.Line)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Double=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function M(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:M(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(76),d=o(p),f=n(136),g=i(f),m=n(137),v=n(77),y=o(v),b=n(516),x=i(b),w=n(518),S=o(w),C=n(180),E=n(22),T=n(15),k=n(170);e.Double=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=.27,n=this.svg,o=this.runtime={},i=o.margin={top:10,right:0,bottom:10,left:0},r=o.marginTitle={left:0,right:0,top:0,bottom:0},a=o.marginAxis={left:0,right:0},s=o.spacing={maxBeforeXAxisTick:50,beforeBottomCategories:5,afterYAxisTick:5},l=o.bottomLabelPadding={right:2,left:2},u=o.sheet=this.getSheetData(),c=this.prepareSheetData(u),h=this.options,p=u.axis[0],f=u.axis[1];o.categoryLayout=u.categories.layout,this.setupNumberFormatter(u);var v=!!u.legend.enabled,b=!1,_=this.renderGraphs.bind(this),x=this.renderDataPoints.bind(this),w=this.renderPart.bind(this),S=u.axis[0]&&u.axis[0].title;S&&(r.left=(0,E.getTextDimensions)(S,this.svg).height+10);
var C=u.axis[1]&&u.axis[1].title;C&&(r.right=(0,E.getTextDimensions)(C,this.svg).height+10);var M=c[0],O=c[1],I=this.createAnimationCounter(2),P=this.getDomain(M.graphs);(0,T.isBlank)(p.minLimit)||(P[0]=isNaN(Number(p.minLimit))?P[0]:Number(p.minLimit),b=!0),(0,T.isBlank)(p.maxLimit)||(P[1]=isNaN(Number(p.maxLimit))?P[1]:Number(p.maxLimit),b=!0);var L=this.getDomain(O.graphs);(0,T.isBlank)(f.minLimit)||(L[0]=isNaN(Number(f.minLimit))?L[0]:Number(f.minLimit),b=!0),(0,T.isBlank)(f.maxLimit)||(L[1]=isNaN(Number(f.maxLimit))?L[1]:Number(f.maxLimit),b=!0);var D=d3.scale.linear().domain(P),A=d3.scale.linear().domain(L),N=(0,g["default"])().scale(D).orient("left").drawLines(!1).tickFormat(this.numberFormatY.tick).style(h.style.axisTick),B=h.width-i.left-r.left-i.right-r.right,j=h.height-i.top-r.top-i.bottom-r.bottom,R=o.limits={maxCategoryHeight:Math.floor(j*e)};D.range([j,0]),A.range([j,0]);var H,F,z=D.ticks().map(function(t){return D(t)}),V=this.gridTickOffset([j,0],z),U=D.ticks().map(function(t){return d3.round(A.invert(D(t)),2)}),W={width:0,height:0};if(M.ticks){H=D.ticks().map(function(e){return t.numberFormatY.tick(e,D)}),W=(0,E.getTextDimensions)(H,this.svg,h.style.axisTick),a.left=W.width+s.afterYAxisTick,F=z[z.length-1];var G=F-W.height;0>G&&(i.top+=Math.abs(i.top+G))}var $={width:0,height:0};if(O.ticks){var K=U.map(function(e){return t.numberFormatY.tick(e,A,{keepDecimals:!0,maxPrecision:2})});$=(0,E.getTextDimensions)(K,this.svg,h.style.axisTick),a.right=$.width}o.graphWidth=B-a.left-a.right;var q=o.xScale=d3.scale.ordinal().domain(d3.range(0,u.categories.data.length)).rangeBands([0,o.graphWidth],.1);o.xScaleResize=function(t,e){t.rangeBands(e,.1)},R.maxCategoryWidth=this.getCategoryWidth(q)-l.left-l.right,o.igcLeftOffset=i.left+a.left+r.left;var Y=k.Line.prototype.createCategoryLabels.call(this),Z=Y.height;B=h.width-i.left-r.left-i.right-r.right;var X,J=this.axisGraphsSameType([M.graphs,O.graphs],"line");X={enabled:h.series.dataPoints===!0,radius:h.series.dataPointRadius,sameAxisGraphTypes:J,svgContainer:this.svg.node(),x:q,y:D,y1:A,offset:{left:i.left+r.left+a.left,top:i.top+r.top},graphs:[M.graphs,O.graphs],bounds:{height:j,width:o.graphWidth}};var Q=(0,g["default"])().scale(D).orient("left").tickSize(-B,0).highlightZero(u.grid.horizontalZeroHighlight).style(h.style.grid).tickFormat("");u.grid.horizontal||Q.tickValues([]);var tt=(0,g["default"])().scale(q).orient("bottom").tickSize(j,0).highlightZero(u.grid.verticalZeroHighlight).style(h.style.grid).tickFormat("");u.grid.vertical?tt.tickValues(Y.filterMetrics.domainIndex):tt.tickValues([]),N.textOffset(W.baseLineOffset-W.height),M.ticks||N.tickValues([]);var et=(0,g["default"])().scale(A).orient("right").drawLines(!1).style(h.style.axisTick).tickValues(U).tickFormat(function(e){return t.numberFormatY.tick(e,A,{keepDecimals:!0,maxPrecision:2})}).textOffset($.baseLineOffset-$.height);O.ticks||et.tickValues([]);var nt={x1:i.left,y1:0,x2:h.width,y2:h.height},ot=(0,m.Label)().text(S).orientBounds(nt).style(h.style.axisTitle).orient("left"),it={x1:0,y1:0,x2:h.width-i.right,y2:h.height},rt=(0,m.Label)().text(C).orientBounds(it).style(h.style.axisTitle).orient("right"),at=d.BottomTilted().data(Y.renderData).bounds({height:R.maxCategoryHeight,y:j+s.beforeBottomCategories}).textAlign(Y.renderData.textAlign).style(h.style.axisTick),st={width:h.width};if(this.renderSheetSwitch(st),this.sheetSeriesDataEmpty(u))return this.animation.start(),this.animation.end(),this.resetRootElement();var lt,ut=this.prepareLegendData(c);if(v){var ct=y.TextItemMetrics().width(st.width).texts(ut.map(function(t){return t.title})).parentContainer(this.container).style(h.style.legend).reservedSize(36);lt=y.Legend().data(ut).width(st.width).style(h.style.legend).chartId(this.chartId).chartType("double").textMetrics(ct()),this.renderLegend(lt)}else this.container.selectAll(".igc-legend").remove();var ht=this.svg.datum(this).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);this.containerSetup(),n.attr("width",h.width).attr("height",h.height+15+Z),ht.each(function(t){var e=n.select("defs"),s=n.select(".igc").attr("transform","translate("+(i.left+r.left+a.left)+","+(i.top+r.top)+")"),l=s.select(".igc-grid"),c=n.select(".igc-titles");if(w(l,Q,"igc-ygrid"),u.grid.horizontal&&l.select(".igc-ygrid").selectAll(".tick").select("rect").attr("transform","translate("+-a.left+",0)").style({stroke:h.style.grid.color}),w(l,tt,"igc-xgrid"),u.grid.vertical&&l.select(".igc-xgrid").selectAll(".tick").select("rect").style({stroke:h.style.grid.color}),_(s,[{graphs:M.graphs,x:q,y:D,legend:lt,animationEnd:I},{graphs:O.graphs,x:q,y:A,legend:lt}]),b){var p={x:0,y:V.top,width:o.graphWidth,height:j-V.top,clipPathId:"igc-cp-"+t.chartId};X.pointRect={x:0,y:V.top,width:o.graphWidth,height:j},t.graphsSetupClipPath(s,e,p)}x(s,X);var d={x:-(i.left+r.left+a.left),y:-(i.top+r.top),width:h.width,height:h.height,clipPathId:"igc-cp-line-"+t.chartId};s.selectAll(".igc-graph-line").attr("clip-path","url(#"+d.clipPathId+")"),t.createRectClipPath(e,d);var f=e.select("#"+d.clipPathId).selectAll("path");f.attr("transform","translate(-"+(d.width-d.x)+", 0)").transition().duration(500).ease("linear").attr("transform","translate(0, 0)"),w(l,N,"igc-y0-axis-text"),M.ticks&&l.select(".igc-y0-axis-text").selectAll(".tick").select("text").attr("transform","translate("+-a.left+",0)"),w(l,et,"igc-y1-axis-text"),O.ticks&&l.select(".igc-y1-axis-text").selectAll(".tick").select("text").attr("transform","translate("+(B-a.left)+",0)"),w(c,ot,"igc-title-left"),w(c,rt,"igc-title-right"),w(l,at,"igc-x-axis-text")}).each("start",function(){t.animation.start()}).each("end",function(){I()})}},{key:"renderGraphs",value:function(t,e){var n="igc-graph-group";t.selectAll("."+n).remove();var o=t.selectAll("."+n).data(e);o.enter().append("g").attr("class",n),o.selectAll(".igc-graph").remove();var i=o.selectAll(".igc-graph").data(function(t){return t.graphs}),r=i.enter(),a=_.reduce(e,function(t,e){return t+(e.graphs&&e.graphs.length||0)},0),s=_.after(a,function(){e[0]&&e[0].animationEnd&&e[0].animationEnd()}),l=this.numberFormatY,u=this.chartId;r.call(function(t){t.forEach(function(t,n){t.forEach(function(o){var i=d3.select(t.parentNode),r=i.append("g").attr("class","igc-graph"),a=o.__data__,c=a.type,h=c.charAt(0).toUpperCase()+c.slice(1),p=S[h];if(p){var d=e[n],f=a.data.length,g=p().scaleX(d.x).scaleY(d.y).data(a.data).pX("x").pY("y").colors(a.colors).groupId(n).chartId(u).legend(d.legend);if("line"===c&&(g.interpolate(a.interpolation),g.animate(!1),r.classed({"igc-graph-line":!0})),"column"===c){var m=a.data[0].groupLabel;g.tooltipText(function(){return m}).tooltipValue(function(t){return"("+t.xLabel+": "+l.tooltip(t.yLabel)+")"}).transitionDelay(function(t,e){return e/f*500})}g.dispatch().on("animationEnd",s),r.call(g)}})})})}},{key:"getCategoryWidth",value:function(t){var e=t.range();return 0===t.domain().length?0:1===t.domain().length?this.runtime.graphWidth:e[1]-e[0]}},{key:"gridTickOffset",value:function(t,e){return{top:e[e.length-1]-t[1],bottom:t[0]-e[0]}}},{key:"renderDataPoints",value:function(t,e){var n=this.chartId,o=[],i=this.numberFormatY;if(e.sameAxisGraphTypes){e.graphs.forEach(function(t,e){t.forEach(function(t){o=o.concat(t.data.map(function(n){return n.colors=t.colors,n.scale=0===e?"y":"y1",n}))})});var r=(0,x["default"])().data(o).scaleX(e.x).scaleY(e.y).scaleY1(e.y1).offset(e.offset).bounds(e.bounds).svgContainer(e.svgContainer).targetParent(t).chartId(n).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){return t.xLabel+": "+i.tooltip(t.yLabel)}).pointRect(e.pointRect),a=t.selectAll(".igc-crosshair-overlay").data([0]);a.enter().append("rect").attr("x",0).attr("y",0).attr("height",e.bounds.height).attr("width",e.bounds.width).attr("class","igc-crosshair-overlay"),a=t.selectAll(".igc-crosshair-overlay"),r.target(a),a.style({"stroke-width":"0px","fill-opacity":0}).call(r)}e.enabled&&t.selectAll(".igc-graph-group").each(function(t,e){d3.select(this).selectAll(".igc-graph").each(function(t,o){var r=t.graphs[o];if("line"===r.type){var a=(0,C.Circle)().scaleX(t.x).scaleY(t.y).data(r.data).pX("x").pY("y").colors(r.colors).groupId(e).chartId(n).filterFn(function(t){return null!==t.y}).legend(t.legend).tooltipText(function(t){return t.groupLabel}).tooltipValue(function(t){return"("+t.xLabel+": "+i.tooltip(t.yLabel)+")"}).animate(!1);d3.select(this).call(a)}})})}},{key:"axisGraphsSameType",value:function(t,e){var n,o,i,r;for(i=t.length-1;i>=0;i--)for(n=t[i],r=n.length-1;r>=0;r--)if(o=n[r],o.type!==e)return!1;return!0}},{key:"getDomain",value:function(t){var e=[d3.min(t,function(t){return d3.min(t.data,function(t){return t.y})}),d3.max(t,function(t){return d3.max(t.data,function(t){return t.y})})];e[0]===e[1]&&(e[0]>0?e[0]=0:e[0]<0?e[1]=0:(e[0]=-1,e[1]=1));var n=e[0]<0&&e[1]<0,o=e[0]>0&&e[1]>0;return n&&!o&&(e[1]=0),o&&!n&&(e[0]=0),e}},{key:"defaults",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{series:{dataPointRadius:5,dataPoints:!0}})}},{key:"emptySheetData",value:function(){return _.merge({},u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"column",axisIndex:0},{title:"",type:"line",axisIndex:1}],axis:[{title:""},{title:""}]})}},{key:"prepareSheetData",value:function(t){var e=_.merge([],t.axis);return e.forEach(function(e,n){e&&(e.graphs||(e.graphs=[]),t.series.forEach(function(o){if(n===o.axisIndex){var i=(0,T.replaceBlank)(t.axis[o.axisIndex].title,""),r=t.categories.data.map(function(t,e){var r={x:e,y:null,yLabel:(0,T.replaceBlank)(o.rawData[e]),xLabel:(0,T.replaceBlank)(t,""),groupLabel:i,categoryIdx:n};return o.data&&(r.y=(0,T.replaceBlank)(o.data[e],null)),r}),a={type:o.type,data:r,colors:[(0,E.getColor)(o.axisIndex,t.categories.colors)]};"line"===o.type&&(a.interpolation=o.interpolation||"linear"),e.graphs.push(a)}},this))},this),e}},{key:"prepareLegendData",value:function(t){return t.map(function(t){for(var e="transparent",n=0;n<t.graphs.length;n++)if(t.graphs[n].colors[0]){e=t.graphs[n].colors[0];break}return{color:e,title:t.title}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.categories&&_.merge(t.categories,o.categories),t.series.forEach(function(t){var e=o.series&&o.series[t.axisIndex];e&&_.merge(t,e)}),o.grid&&_.merge(t.grid,o.grid),o.legend&&_.merge(t.legend,o.legend),o.axis&&o.axis.length&&_.merge(t.axis,o.axis)})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PictorialBar=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(77),c=o(u),h=n(22),p=n(15),d=n(511);e.PictorialBar=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e={top:10,right:10,bottom:10,left:10,pictorial:1},n=this.getSheetData(),o=this.prepareSheetData(n),i=this.options,r=o[0],a=!!n.legend.enabled,s=r.graphs[0].data,l=!!i.series.showText,u=l?s[0].text:"",h=this.createAnimationCounter(2);this.setupNumberFormatter(n),s=s.filter(function(t){return null!==t.value});var p=this.renderGraphs.bind(this),d=i.width-e.left-e.right,f=i.height-e.top-e.bottom,g=i.height,m=this.setupBarText(u,r.graphs[0].colors,i.style.axisTick),v={width:d/2,height:f},y=parseInt(i.style.axisTick["font-size"],10),b=this.drawBarText(m,v,e,y),x=v.height-b.height;x>=0?m.style({top:e.top+x/2+"px"}):(f+=Math.abs(x),g+=Math.abs(x)),b.width>0&&(d-=b.width+10);var w,S=this.defaults().shapes.map(function(t){return t.title});w=n.categories.shapes,w.length||(w=S.slice(0)),w=this.initShapes(w);var C=_.reduce(w,function(t,n){return t.width=Math.max(t.width,n.bbox.width+e.pictorial),t.height=Math.max(t.height,n.bbox.height),t},{width:0,height:0}),E=this.getValueSum(s),T=d/E,k=Math.min(T/C.width,f/C.height);w=this.initShapesScaled(w,k),C=_.reduce(w,function(t,n){return t.width=Math.max(t.width,n.bbox.width+e.pictorial),t.height=Math.max(t.height,n.bbox.height),t},{width:0,height:0});var M={cols:Math.min(E,Math.floor(d/C.width)),rows:1,cellMetrics:C};M.cellCount=M.rows*M.cols,M.colPosition=d3.scale.ordinal().domain(d3.range(0,M.cols)).rangeBands([0,d],0,0),M.rowPosition=d3.scale.ordinal().domain(d3.range(0,M.rows)).rangeBands([(f-C.height)/2,f],0,0),M.realNumbers=!1;var O=r.graphs[0].data=this.getShapeDataScattered(n,s,M,w,E);r.graphs[0].overlayData=this.getShapeGroupOverlayPaths(s,O,M),this.prepareShapes(w,k);var I={width:i.width,insertBefore:".igc-text-container"};if(this.renderSheetSwitch(I),i.sheets&&i.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var P;if(a){var L=this.prepareLegendData(s.slice(0,1),r.graphs[0].colors),D=c.TextItemMetrics().width(I.width).texts(L.map(function(t){return t.title})).parentContainer(this.container).style(i.style.legend).reservedSize(36);P=c.Legend().data(L).width(I.width).style(i.style.legend).chartId(this.chartId).chartType("pictorial-grid").textMetrics(D()),this.renderLegend(P)}else this.container.selectAll(".igc-legend").remove();var A=this.svg.datum(i).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);A.each(function(t){var n=d3.select(this),o=n.attr("width",t.width).attr("height",g),i=o.selectAll("g.igc").data([0]).enter().append("g").attr("class","igc");i.append("g").attr("class","parts");var a=o.selectAll("g.igc");i.empty()&&a.select("g.parts"),a.attr("transform","translate("+e.left+","+e.top+")"),p(a,[{graphs:r.graphs,textStyle:t.style.axisTick,transitionDuration:t.animation.duration,legend:P,scale:k,animationEnd:h}])}).each("start",function(){t.animation.start()}).each("end",function(){h()})}},{key:"prepareSheetData",value:function(t){var e=_.merge([],t.axis);return e.forEach(function(e,n){if(e){e.graphs||(e.graphs=[]);var o=t.categories.shapes;t.categories.colors=[t.categories.colors[0],t.categories.inactiveColor],t.series.forEach(function(i){if(n===i.axisIndex){var r=[],a=""+i.rawData[0],s=-1!==(0,p.replaceBlank)(a).indexOf("%"),l={value:(0,p.replaceBlank)(Math.abs(i.data[0]),null),valueLabel:(0,p.replaceBlank)(i.rawData[3]),category:(0,p.replaceBlank)(i.rawData[2]),text:(0,p.replaceBlank)(i.rawData[3]),shape:o[0],categoryIdx:0},u={value:(0,p.replaceBlank)(Math.abs(i.data[1]),null),valueLabel:(0,p.replaceBlank)(i.rawData[3]),category:(0,p.replaceBlank)(""),shape:o[0],categoryIdx:1};s?(l.value=u.value*(l.value/100),u.value-=l.value):l.value>u.value?u.value=0:(l.value=u.value-(u.value-l.value),u.value-=l.value),r.push(l),r.push(u),e.graphs.push({type:i.type,data:r,colors:t.categories.colors,showValues:i.showValues===!0})}},this)}},this),e}},{key:"initShapesScaled",value:function(t,e){return _.reduce(t,function(t,n,o){var i=n.shape,r=(0,h.measurePath)(i,this.svg,e);return t[o]={shape:i,bbox:r},t},{},this)}},{key:"prepareShapes",value:function(t,e){var n=this.svg;n.selectAll("defs").data([0]).enter().append("defs");var o=n.selectAll("defs");Object.keys(t).forEach(function(n){var i=t[n].shape,r="igc-cp-"+n+this.chartId,a=o.selectAll("#"+r).data([0]).enter().append("clipPath").attr("id",r),s=a.selectAll("path").data([0]).enter().append("path");s.attr("d",i),o.selectAll("#"+r).attr("transform","scale("+e+")")},this)}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length,a=this.numberFormatX;t.data(e.data).overlayData(e.overlayData).colors(e.colors).groupId(i).textStyle(o.textStyle).showValues(e.showValues).highlightFirstOnly(!0).tooltipText(function(t){return t.category}).tooltipValue(function(t){return a.tooltip(t.valueLabel)}).transitionDelay(function(t,e){return e/r*500}).transitionDuration(o.transitionDuration),t.dispatch().on("animationEnd",o.animationEnd)}},{key:"setupBarText",value:function(t,e,n){var o="igc-text-container";this.container.selectAll("."+o).data([0]).enter().insert("div",".igc-root").attr("class",o);var i=this.container.selectAll("."+o);i.style({position:"relative",width:this.options.width+"px"});var r="igc-text-pictorial-bar";i.selectAll("."+r).data([0]).enter().append("div").attr("class",r);var a=i.selectAll("."+r);return a.text(t),a.style({color:e[0],position:"absolute","font-family":n["font-family"],"font-weight":n["font-weight"],"font-style":n["font-style"]}),a}},{key:"drawBarText",value:function(t,e,n,o,i){t.style({"font-size":o+"px",top:n.top+"px",right:n.right+"px"}),t.style("width",null),i&&t.style("width",e.width+"px");var r=t.node().getBoundingClientRect();return r.width>e.width?this.drawBarText(t,e,n,o,!0):r.height>e.height&&o>11?(o--,this.drawBarText(t,e,n,o,!1)):r}},{key:"defaults",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"defaults",this).call(this),{style:{axisTick:{"font-size":"60px"}}})}},{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{categories:{inactiveColor:"#959595"}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}if(t){var n=1===t.length;this.options.sheets.forEach(function(t,o){var i=e(o+1);if(i.categories&&(_.merge(t.categories,i.categories),n)){var r=i.categories.colors.length;t.categories.colors=[i.categories.colors[o%r]]}t.series.forEach(function(t){"bar"===t.type&&i.bar&&_.merge(t,i.bar)}),i.legend&&_.merge(t.legend,i.legend)})}}}]),e}(d.PictorialGrid)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Pyramid=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function _(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:_(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(30),h=i(c),p=n(16),d=i(p),f=n(15),g=n(77),m=n(22),v=o(m),y=n(76),b=o(y);e.Pyramid=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this.options;if(t.sheets&&t.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();this.detectDimensions(),this.renderSheetSwitch({width:t.width}),this.sheet=this.getSheetData(),this.data=this.prepareSheetData(this.sheet);var e=this.sheet.pyramid;return this.categories=this.data.map(function(t){return t.label}),"up"===e.direction&&this.categories.reverse(),this.renderSideLabels=!this.sheet.legend.enabled&&t.width>300&&e.showText,this.sheet.legend.enabled?this.prepareAndRenderLegend():this.legend&&this.container.selectAll(".igc-legend").remove(),this.layout=this.getLayout(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setupNumberFormatter(this.sheet),this.renderSideLabels?(this.gridLines=this.getGridLines(),this.labels=this.getLabels()):(this.gridLines&&(this.svg.selectAll(".igc-ygrid").remove(),delete this.gridLines),this.labels&&(this.svg.selectAll(".igc-ylabels").remove(),delete this.labels)),this.renderTransitions()}},{key:"getLabels",value:function(){var t=this.layout,e=this.options,n=this.yScale,o=n.rangeBand();return b.LeftStart().scale(n).bounds({width:t.labelWidth,height:o}).data(this.categories).style(d["default"].extend({"text-anchor":"start"},e.style.axisTick))}},{key:"getLayout",value:function(){var t=this.options,e=t.width,n=t.height,o=.33*e,i=10,r=0,a=void 0,s=void 0;if(this.renderSideLabels){a=v.getAllTextDimensions(this.categories,this.svg,this.options.style.axisTick);var l=d3.max(a.map(function(t){return t.width}));s=Math.min(l,o)}t.sheets.length>1&&t.sheetSwitch&&(r+=this.container.select(t.tabs?".igc-tabs":".igc-sheets").node().offsetHeight),this.sheet.legend.enabled&&(r+=this.container.select(".igc-legend").node().offsetHeight);var u={top:0,bottom:0,left:this.renderSideLabels?s+i:0,right:0};return{margins:u,labelWidth:s,labelDimensions:a,graph:{width:e-u.left-u.right,height:n-u.top-u.bottom-r},chart:{width:e,height:n}}}},{key:"prepareAndRenderLegend",value:function(){var t=this.data.map(function(t){return Object({title:t.label,color:t.color})}),e=(0,g.TextItemMetrics)().width(this.options.width).texts(t.map(function(t){return t.title})).parentContainer(this.container).style(this.options.style.legend).reservedSize(36);this.legend=(0,g.Legend)().data(t).width(this.options.width).style(this.options.style.legend).chartId(this.chartId).textMetrics(e()),this.renderLegend(this.legend)}},{key:"getYScale",value:function(){var t=this.layout,e=t.margins,n=t.graph;return d3.scale.ordinal().rangeRoundBands([e.top,n.height]).domain(this.getYDomain())}},{key:"getXScale",value:function(){var t=this.layout,e=t.margins,n=t.graph,o=t.chart,i=[e.left+n.width/2,o.width-e.right],r=void 0;return r=this.sheet.pyramid.regularEdge?d3.scale.ordinal().rangeRoundPoints(i).domain(this.getXDomain()):d3.scale.linear().rangeRound(i).domain(this.getXDomain())}},{key:"getGridLines",value:function(){var t=this.yScale,e=this.xScale,n=this.options,o=e(0);return function(e){function i(e,n){var o=e?t(e):t(r[n-1])+t.rangeBand();return o>1&&(o-=1),o}var r=t.domain().concat([0]),a=!0,s=e.selectAll(".tick"),l=s.data(r);l.transition().duration(0),s.size()&&s.size()===r.length&&(a=!1),l.exit().remove(),l.enter().append("line"),l.style({stroke:n.style.grid.color,"shape-rendering":"crispEdges",opacity:a?0:.25}).attr({x1:0,y1:i,x2:o,y2:i,"class":"tick"}),a&&l.transition().duration(n.animation.duration).style("opacity",.25)}}},{key:"getYDomain",value:function(){var t=this.data.map(function(t){return t.index});return"up"===this.sheet.pyramid.direction&&t.reverse(),t}},{key:"getXDomain",value:function(){var t=void 0;return t=this.sheet.pyramid.regularEdge?[0].concat(this.data.map(function(t){return t.index}).reverse()):[0,d3.max(this.sheet.series[0].data)]}},{key:"getTransitions",value:function(){return this.svg.datum(this.options).transition().ease(this.options.animation.ease).duration(this.options.animation.duration)}},{key:"renderTransitions",value:function(){var t=this,e=this,n=this.createAnimationCounter(2);return this.getTransitions().each(function(t){var o=d3.select(this),i=o.attr("width",t.width).attr("height",e.layout.graph.height),r=i.selectAll(".igc").data([0]).enter().append("g").attr("class","igc"),a=r.append("g").attr("class","parts"),s=i.selectAll(".igc");r.empty()&&(a=s.select(".parts")),e.gridLines&&e.renderPart(a,e.gridLines,"igc-ygrid"),e.labels&&e.renderPart(a,e.labels,"igc-ylabels"),e.renderGraphs(s,[{graphs:[{type:"pyramid",data:e.data,x:e.layout.graph.x,y:e.layout.graph.y,animationEnd:n}]}])}).each("start",function(){t.animation.start()}).each("end",function(){n()})}},{key:"graphInstanceSetup",value:function(t,e,n){var o=this.numberFormatX;t.setup({x:e.x,y:e.y,xScale:this.xScale,yScale:this.yScale,transitionDuration:500,zeroEnding:"asis"!==this.sheet.pyramid.endType,regularEdge:this.sheet.pyramid.regularEdge,direction:this.sheet.pyramid.direction,singleColor:this.options.custom.singleColor&&"#FFF",showValues:this.sheet.pyramid.showValues,textStyle:this.options.style.axisTick,tooltipText:function(t){return t.label},tooltipValue:function(t){return o.tooltip(t.rawValue)}}).numberFormat(this.numberFormatX).data(e.data).groupId(n),t.dispatch().on("animationEnd",e.animationEnd)}},{key:"emptySheetData",value:function(){return d["default"].merge(u(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pyramid"}],categories:{},pyramid:{showValues:!1,showText:!0,regularEdge:!0,endType:"zero",direction:"up"},legend:{enabled:!1}})}},{key:"prepareSheetData",value:function(t){var e=t.series[0],n=t.categories.colors,o=t.categories.data;return e.data.map(function(t,i){return Object({value:(0,f.replaceBlank)(t,null),label:(0,f.replaceBlank)(o[i]),color:v.getColor(i,n),rawValue:e.rawData[i],index:i+1})}).filter(function(t){return null!==t.value})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}this.options.sheets.forEach(function(t,n){var o=e(n+1);d["default"].extend(t.categories,o.categories),d["default"].extend(t.pyramid,o.pyramid),d["default"].extend(t.legend,o.legend),o.axis&&(t.axis||(t.axis=[{}]),d["default"].extend(t.axis[0],o.axis[0]))})}}]),e}(h["default"])},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SemiPie=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},u=n(77),c=o(u),h=n(180),p=n(512),d=n(48);e.SemiPie=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.svg,n=this.options,o=this.getSheetData(),i=this.prepareSheetData(o),r=this.createAnimationCounter(2),a=!!o.legend.enabled,s=this.renderGraphs.bind(this),l=this.renderPart.bind(this);this.setupNumberFormatter(o);var u=n.width,p=n.height,d={top:15,bottom:10};p=.6*u;var f={width:u};if(this.renderSheetSwitch(f),i.data&&0===i.data.length)return this.animation.start(),this.animation.end(),this.resetRootElement();var g;if(a){var m=this.prepareLegendData(i),v=c.TextItemMetrics().width(f.width).texts(m.map(function(t){return t.title})).parentContainer(this.container).style(n.style.legend).reservedSize(36);g=c.Legend().data(m).width(f.width).style(n.style.legend).chartId(this.chartId).textMetrics(v()),this.renderLegend(g)}else this.container.selectAll(".igc-legend").remove();var y=Math.min(u,p),b=u/2*.9,_=i.outerRadiusVaries;25>y-b&&(b=Math.min(u,p)-25);var x=i.innerRadiusPercent?i.innerRadiusPercent*b:i.innerRadius,w={width:2*x/Math.sqrt(2),height:x/Math.sqrt(2)},S=(0,h.Text)().style({}).value(o.categories.title).offset({left:u/2-w.width/2,top:p-10-w.height}).bounds({width:w.width,height:w.height}).align("center").cssClassName("igc-pie-center-text-node").autoFontSize(!0);0===x&&S.value(""),this.containerSetup(),e.attr("width",u).attr("height",p);var C=e.datum(n).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);C.each(function(t){var n=e.select("defs"),o=e.selectAll(".igc"),a=o.select(".parts");s(o,[{graphs:[i],textStyle:t.style.axisTick,outerRadius:b,outerRadiusVaries:_,center:{x:u/2,y:p-d.bottom},bounds:{width:u,height:p},legend:g,defs:n,animationEnd:r}]),l(a,S,"igc-semi-pie-center-text")}).each("start",function(){t.animation.start()}).each("end",function(){r()})}},{key:"graphInstanceSetup",value:function(t,e,n,o){var i=this.numberFormatX,r=this.getCalloutFormat(e);t.data(e.data).groupId(n).textStyle(o.textStyle).legend(o.legend).startAngle(-d.PIhalf).endAngle(d.PIhalf).innerRadius(e.innerRadiusPercent?e.innerRadiusPercent*o.outerRadius:e.innerRadius).outerRadius(o.outerRadius).outerRadiusVaries(o.outerRadiusVaries).center(o.center).bounds(o.bounds).numberFormat(i).showValues(e.showValues).textFormat(r).defs(o.defs),e.showPercent&&(t.tooltipText(function(t){return t.data.categoryLabel+": "+t.value.toFixed(2)+"%"}),t.tooltipValue(function(t){return"("+i.tooltip(t.data.valueLabel)+")"})),t.dispatch().on("animationEnd",function(){o.animationEnd()})}},{key:"emptySheetData",value:function(){return _.merge({},l(Object.getPrototypeOf(e.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pie",showValues:!1,showPercent:!1}]})}}]),e}(p.Pie)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.StreamGraph=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function h(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:h(i,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},l=n(170),u=n(426),c=n(508);e.StreamGraph=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"renderGraphs",value:function(t,e){l.Line.prototype.renderGraphs.call(this,t,e,function(t){
var e=d3.layout.stack().offset("wiggle").out(function(t,e,n){t.y0=e,t.y=n}).values(function(t){return t.data}),n=e(t.graphs);return n})}},{key:"prepareSheetData",value:function(t){var n=s(Object.getPrototypeOf(e.prototype),"prepareSheetData",this).call(this,t);return n.graphs.forEach(function(t){t.data.forEach(function(t){t.y=Math.abs(t.y)})}),n}},{key:"renderDataPoints",value:function(t,e){e.animationEnd()}},{key:"getDomain",value:function(){return c.AreaStacked.prototype.getDomain.apply(this,arguments)}}]),e}(u.Area)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(77),u=n(30),c=o(u),h=n(754),p=o(h);e.Timer=function(t){function e(t){return i(this,e),r(this,Object.getPrototypeOf(e).call(this,t,"div"))}return a(e,t),s(e,[{key:"render",value:function(){var t,e,n,o,i=this,r=this.options.sheets[0],a=r.categories.title;return r?(o={node:this.container[0],time:new Date(r.value),colors:{digits:r.categories.colors[0],text:r.categories.colors[1]},units:r.units,mode:r.mode,width:r.width,font:this.options.font,animate:this.options.animate},this.animation.start(),this.timer?this.timer.update(o):(this.timer=new p["default"](o),this.timer.start()),a&&a.length?(e=[{title:a,color:r.categories.colors[0]}],t=(0,l.TextItemMetrics)().width(this.options.width).texts(e.map(function(t){return t.title})).parentContainer(this.container).style(this.options.style.legend).reservedSize(36),n=(0,l.Legend)().data(e).width(this.options.width).style(this.options.style.legend).chartId(this.chartId).textMetrics(t()),this.renderLegend(n)):this.container.selectAll(".igc-legend").remove(),void setTimeout(function(){i.animation.end()},500)):(this.animation.start(),this.animation.end(),this.resetRootElement())}},{key:"applySheetOptions",value:function(){}}]),e}(c["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Wordcloud=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(30),u=o(l),c=n(22),h=n(15),p=n(514);e.Wordcloud=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.svg,n={top:0,right:0,bottom:0,left:0},o={left:0,right:0,top:0,bottom:0},i=this.options,r=this.getSheetData(),a=this.prepareSheetData(r);this.setupNumberFormatter(r);var s=i.width-n.left-o.left-n.right-o.right,l=i.height-n.top-o.top-n.bottom-o.bottom,u={width:i.width},c=this.createAnimationCounter(2);if(this.renderSheetSwitch(u),i.sheets&&i.sheets.length<1)return this.animation.start(),this.animation.end(),this.resetRootElement();var h=this.svg.datum(this).transition().ease(this.options.animation.ease).duration(this.options.animation.duration);this.containerSetup(),e.attr("width",i.width).attr("height",i.height),h.each(function(t){var o=e.select(".igc");t.renderGraphs(o,[{graphs:[a],textStyle:i.style.axisTick,bounds:{width:s,height:l},offset:{left:n.left,top:n.top},transitionDuration:i.animation.duration,animationEnd:c}])}).each("start",function(){t.animation.start()}).each("end",function(){c()})}},{key:"graphInstanceSetup",value:function(t,e,n,o,i){var r=e.data.length,a=this.numberFormatX;t.data(e.data).groupId(i).bounds(o.bounds).offset(o.offset).textDirection(e.textDirection).transitionDelay(function(t,e){return e/r*o.transitionDuration}).labelOptions(e.labels).transitionDuration(o.transitionDuration).tooltipText(function(t){return t.categoryLabel}).tooltipValue(function(t){return a.tooltip(t.valueLabel)}),t.dispatch().on("animationEnd",o.animationEnd)}},{key:"defaults",value:function(){return _.merge({},p.Treemap.prototype.defaults(),{animation:{duration:700}})}},{key:"emptySheetData",value:function(){return _.merge({},p.Treemap.prototype.emptySheetData(),{labels:{fontFamily:"Arial"},axis:[{}],series:[{title:"",type:"wordcloud"}]})}},{key:"prepareSheetData",value:function(t){var e=t.series[0],n=[],o=t.categories.colors;e.data.forEach(function(i,r){var a={categoryLabel:(0,h.replaceBlank)(t.categories.data[r],""),valueLabel:(0,h.replaceBlank)(e.rawData[r]),size:(0,h.replaceBlank)(i,null),color:(0,c.getColor)(r,o)};null!==a.size&&(a.sizeAbs=Math.abs(a.size),n.push(a))});var i={type:e.type,data:n,textDirection:t.categories.textDirection,labels:t.labels};return i}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,n){var o=e(n+1);o.labels&&_.merge(t.labels,o.labels),o.axis&&_.merge(t.axis,o.axis),o.categories&&_.merge(t.categories,o.categories)})}}]),e}(u["default"])},function(t,e){"use strict";function n(t){return t.text}function o(){return"serif"}function i(){return"normal"}function r(t){return Math.sqrt(t.value)}function a(){return 30*(~~(6*Math.random())-3)}function s(){return 1}function l(t,e,n,o){if(!e.sprite){var i=t.context,r=t.ratio;i.clearRect(0,0,(y<<5)/r,b/r);var a=0,s=0,l=0,u=n.length;for(--o;++o<u;){e=n[o],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/r)+"px "+e.font;var c=i.measureText(e.text+"m").width*r,h=e.size<<1;if(e.rotate){var p=Math.sin(e.rotate*v),d=Math.cos(e.rotate*v),f=c*d,g=c*p,m=h*d,_=h*p;c=Math.max(Math.abs(f+_),Math.abs(f-_))+31>>5<<5,h=~~Math.max(Math.abs(g+m),Math.abs(g-m))}else c=c+31>>5<<5;if(h>l&&(l=h),a+c>=y<<5&&(a=0,s+=l,l=0),s+h>=b)break;i.translate((a+(c>>1))/r,(s+(h>>1))/r),e.rotate&&i.rotate(e.rotate*v),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=h,e.xoff=a,e.yoff=s,e.x1=c>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=c}for(var x=i.getImageData(0,0,(y<<5)/r,b/r).data,w=[];--o>=0;)if(e=n[o],e.hasText){for(var c=e.width,S=c>>5,h=e.y1-e.y0,C=0;h*S>C;C++)w[C]=0;if(a=e.xoff,null==a)return;s=e.yoff;for(var E=0,T=-1,k=0;h>k;k++){for(var C=0;c>C;C++){var M=S*k+(C>>5),O=x[(s+k)*(y<<5)+(a+C)<<2]?1<<31-C%32:0;w[M]|=O,E|=O}E?T=k:(e.y0++,h--,k--,s++)}e.y1=e.y0+T,e.sprite=w.slice(0,(e.y1-e.y0)*S)}}}function u(t,e,n){n>>=5;for(var o,i=t.sprite,r=t.width>>5,a=t.x-(r<<4),s=127&a,l=32-s,u=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),h=0;u>h;h++){o=0;for(var p=0;r>=p;p++)if((o<<l|(r>p?(o=i[h*r+p])>>>s:0))&e[c+p])return!0;c+=n}return!1}function c(t,e){var n=t[0],o=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>o.x&&(o.x=e.x+e.x1),e.y+e.y1>o.y&&(o.y=e.y+e.y1)}function h(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function p(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function d(t){var e=4,n=e*t[0]/t[1],o=0,i=0;return function(t){var r=0>t?-1:1;switch(Math.sqrt(1+4*r*t)-r&3){case 0:o+=n;break;case 1:i+=e;break;case 2:o-=n;break;default:i-=e}return[o,i]}}function f(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function g(){return document.createElement("canvas")}function m(t){return"function"==typeof t?t:function(){return t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(y<<5)/e,t.height=b/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function e(t,e,n){for(var o,i,r,a=([{x:0,y:0},{x:v[0],y:v[1]}],e.x),s=e.y,l=Math.sqrt(v[0]*v[0]+v[1]*v[1]),c=M(v),p=1,d=-p;(o=c(d+=p))&&(i=~~o[0],r=~~o[1],!(Math.min(Math.abs(i),Math.abs(r))>=l));)if(e.x=a+i,e.y=s+r,(!n||!u(e,t,v[0]))&&(!n||h(e,n))){for(var f,g=e.sprite,m=e.width>>5,y=v[0]>>5,b=e.x-(m<<4),_=127&b,x=32-_,w=e.y1-e.y0,S=(e.y+e.y0)*y+(b>>5),C=0;w>C;C++){f=0;for(var E=0;m>=E;E++)t[S+E]|=f<<x|(m>E?(f=g[C*m+E])>>>_:0);S+=y}return delete e.sprite,!0}return!1}var d,v=[256,256],x=n,w=o,S=r,C=i,E=i,T=a,k=s,M=p,O=[],I=1/0,P=d3.dispatch("word","end"),L=null,D=Math.random,A={},N=g;return A.canvas=function(t){return arguments.length?(N=m(t),A):N},A.start=function(){function n(){for(var t=Date.now();Date.now()-t<I&&++s<a&&L;){var n=h[s];d?(n.x=d[0],n.y=d[1]):(n.x=v[0]*(Math.random()+.5)>>1,n.y=v[1]*(Math.random()+.5)>>1),l(o,n,h,s),n.hasText&&e(i,n,r)&&(u.push(n),P.word(n),r?c(r,n):r=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=v[0]>>1,n.y-=v[1]>>1)}s>=a&&(A.stop(),P.end(u,r))}var o=t(N()),i=f((v[0]>>5)*v[1]),r=null,a=O.length,s=-1,u=[],h=O.map(function(t,e){return t.text=x.call(this,t,e),t.font=w.call(this,t,e),t.style=C.call(this,t,e),t.weight=E.call(this,t,e),t.rotate=T.call(this,t,e),t.size=~~S.call(this,t,e),t.padding=k.call(this,t,e),t}).sort(function(t,e){return e.size-t.size});return L&&clearInterval(L),L=setInterval(n,0),n(),A},A.stop=function(){return L&&(clearInterval(L),L=null),A},A.timeInterval=function(t){return arguments.length?(I=null==t?1/0:t,A):I},A.words=function(t){return arguments.length?(O=t,A):O},A.size=function(t){return arguments.length?(v=[+t[0],+t[1]],A):v},A.startPoint=function(t){return arguments.length?(d=[+t[0],+t[1]],A):d},A.font=function(t){return arguments.length?(w=m(t),A):w},A.fontStyle=function(t){return arguments.length?(C=m(t),A):C},A.fontWeight=function(t){return arguments.length?(E=m(t),A):E},A.rotate=function(t){return arguments.length?(T=m(t),A):T},A.text=function(t){return arguments.length?(x=m(t),A):x},A.spiral=function(t){return arguments.length?(M=_[t]||t,A):M},A.fontSize=function(t){return arguments.length?(S=m(t),A):S},A.padding=function(t){return arguments.length?(k=m(t),A):k},A.random=function(t){return arguments.length?(D=t,A):D},A.on=function(){var t=P.on.apply(P,arguments);return t===P?A:t},A};var v=Math.PI/180,y=64,b=2048,_={archimedean:p,rectangular:d}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){if(f.length){var t=d3.select(this),r=this.__chart__=c.copy(),s=this.__chart__=h.copy(),l=g[0],y=0;r.rangeBand&&(y=r.rangeBand()/2),u&&(f=f.filter(u));var b=["igc-data-point"];b.push("igc-data-point-"+i),_&&b.push(_);var w=t.selectAll("."+b.join(".")).data(f),S=w.enter();S.append("circle").attr("class",b.join(" ")),x?w.attr("cx",function(t){return r(t[p])+y}).attr("cy",function(){return s(0)}).attr("r",0).style("stroke","white").style("stroke-width",0).style("fill",l).transition().attr("cy",function(t){return s(t[d])}).each("start",function(){m++}).each("end",function(){0===--m&&(e(w,l),n(w,l))}).style("stroke-width",2).attr("r",function(t){return"string"==typeof t[d]?0:5}):(w.attr("cx",function(t){return r(t[p])+y}).attr("cy",function(t){return s(t[d])}).style("stroke-width",2).attr("r",function(t){return"string"==typeof t[d]?0:5}).style("stroke","white").style("fill",l),e(w,l),n(w,l)),a&&a.addListener({id:o,dispatch:v})}})}function e(t){v.on("highlightStart",function(e,n){i!==e&&o===n&&t.transition().duration(150).ease("linear").style("opacity",.3)}),v.on("highlightEnd",function(e,n){i!==e&&o===n&&t.transition().duration(150).ease("linear").style("opacity",1)})}function n(t,e){t.on("mousemove",function(t){d3.select(this).transition().duration(150).ease("linear").style("stroke",e).style("fill","white");var n,o,i=(0,l.getMousePosition)(d3.event);n=y(t),o=b(t),(0,s["default"])().setText(n).setValue(o).setPosition(i,e)}).on("mouseout",function(){d3.select(this).transition().duration(150).ease("linear").style("stroke","white").style("fill",e),(0,s["default"])().hide()})}var o,i,a,u,c=d3.scale.linear(),h=d3.scale.linear(),p="x0",d="y0",f=[],g=d3.scale.category20().range(),m=0,v=d3.dispatch("highlightStart","highlightEnd"),y=function(t){return t.x},b=function(t){return t.y},_="",x=!0,w={scaleX:function(e){return arguments.length?(c=e,t):c},scaleY:function(e){return arguments.length?(h=e,t):h},pX:function(e){return arguments.length?(p=e,t):p},pY:function(e){return arguments.length?(d=e,t):d},data:function(e){return arguments.length?(f=e,t):f},colors:function(e){return arguments.length?(g=e,t):g},groupId:function(e){return arguments.length?(i=e,t):i},chartId:function(e){return arguments.length?(o=e,t):o},legend:function(e){return arguments.length?(a=e,t):a},filterFn:function(e){return arguments.length?(u=e,t):u},tooltipText:function(e){return arguments.length?(y=e,t):y},tooltipValue:function(e){return arguments.length?(b=e,t):b},className:function(e){return arguments.length?(_=e,t):_},animate:function(e){return arguments.length?(x=e,t):x}};return(0,r.injectFunctions)(t,w),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=i;var r=n(15),a=n(67),s=o(a),l=n(22)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){t.attr("transform","translate("+o.left+","+o.top+")");var r=t.selectAll("."+h).data([n]);r.enter().append("text").attr("class",h),r.text(l.Text.unescapeHtml(n)).attr("y",0).attr("dy",null).style("font-size",null).style("visibility","hidden");var a=0,s=0,p="start";c&&_.has(i,"radius")?!function(){var t=i.radius,n={width:2*Math.cos(30*Math.PI/180)*t,height:2*Math.sin(30*Math.PI/180)*t},o=Math.cos(45*Math.PI/180)*t*2;e(r,function(t){var e=t.width,i=t.height;return e<=n.width&&i<=n.height||o>=e&&o>=i})}():c&&e(r,function(t){return i.width>t.width});var d=r.node().getBBox(),f={width:i.width-d.width,height:i.height-d.height},g=d.height+d.y;s+=g,f.height>0&&(s+=f.height/2+d.height/2+g/2),"center"===u?(p="middle",a+=i.width/2):"right"===u&&(p="end",a+=i.width),r.attr("x",a).attr("dy",s).attr("text-anchor",p).style("visibility",null)})}function e(t,e){for(var n,o=parseInt(t.style("font-size"),10);;){if(t.style("font-size",o+"px"),n=t.node().getBBox(),e(n))break;if(o--,5>o)break}}var n="",o={top:0,left:0},i={width:0,height:0},a=s["default"].prototype.defaults().style.axisTick,u="left",c=!1,h="igc-element-text-node",p={value:function(e){return arguments.length?(n=e,t):n},offset:function(e){return arguments.length?(o.left="number"==typeof e.left?e.left:o.left,o.top="number"==typeof e.top?e.top:o.top,t):o},bounds:function(e){return arguments.length?(i.width="number"==typeof e.width?e.width:i.width,i.height="number"==typeof e.height?e.height:i.height,_.has(e,"radius")&&"number"==typeof e.radius?i.radius=e.radius:_.has(i,"radius")&&delete i.radius,t):i},style:function(e){return arguments.length?(a=e,t):a},align:function(e){return arguments.length?(u=e,t):u},autoFontSize:function(e){return arguments.length?(c=e,t):c},cssClassName:function(e){return arguments.length?(h=e,t):h}};return(0,r.injectFunctions)(t,p),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Text=i;var r=n(15),a=n(30),s=o(a),l=n(432)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){if(v.length){var t=d3.select(this),n=this.__chart__=d.copy(),r=this.__chart__=f.copy(),a=p(b[0],.7),s=0;n.rangeBand&&(s=n.rangeBand()/2),h&&(v=v.filter(h));var l=t.selectAll("path").data([v[0]]);l.enter().append("path");var u=d3.svg.area().defined(function(t){return null!==t[m]}).x(function(t){return n(t[g])+s}).y0(function(t){return r(t.y0)}).y1(function(t){return r(t.y0+t[m])}).interpolate(y);l.attr("d",u(v)).style("fill",a),e(l),o(l),_.animationEnd(),c&&c.addListener({id:i,dispatch:_})}})}function e(t){_.on("highlightStart",function(e,n){a===e&&i===n&&t.transition().duration(150).ease("linear").style("fill",p(b[0],1))}),_.on("highlightEnd",function(e,n){a===e&&i===n&&t.transition().duration(150).ease("linear").style("fill",p(b[0],.7))})}function n(t,e){var n,o,i=(0,l.getMousePosition)(e),r=b[0];n=C(t),o=E(t),(0,s["default"])().setText(n).setValue(o).setPosition(i,r)}function o(t){t.on("mousemove",function(t){d3.select(this).transition().duration(150).ease("linear").style("fill",p(b[0],1)),n(t,d3.event)}).on("mouseout",function(){d3.select(this).transition().duration(150).ease("linear").style("fill",p(b[0],.7)),(0,s["default"])().hide()})}var i,a,c,h,p=u.Colors.rgbStrToRgbaStr,d=d3.scale.linear(),f=d3.scale.linear(),g="x0",m="y0",v=[],y="linear",b=d3.scale.category20().range(),_=d3.dispatch("highlightStart","highlightEnd","animationEnd"),x={x:0,y:0},w={width:0,height:0},S=!0,C=function(t){return t.groupLabel},E=function(){return""},T={scaleX:function(e){return arguments.length?(d=e,t):d},scaleY:function(e){return arguments.length?(f=e,t):f},pX:function(e){return arguments.length?(g=e,t):g},pY:function(e){return arguments.length?(m=e,t):m},data:function(e){return arguments.length?(v=e,t):v},interpolate:function(e){return arguments.length?(y=e,t):y},colors:function(e){return arguments.length?(b=e,t):b},groupId:function(e){return arguments.length?(a=e,t):a},chartId:function(e){return arguments.length?(i=e,t):i},dispatch:function(){return _},legend:function(e){return arguments.length?(c=e,t):c},filterFn:function(e){return arguments.length?(h=e,t):h},bounds:function(e){return arguments.length?(w.width="number"==typeof e.width?e.width:w.width,w.height="number"==typeof e.height?e.height:w.height,t):w},offset:function(e){return arguments.length?(x.left="number"==typeof e.left?e.left:x.left,x.top="number"==typeof e.top?e.top:x.top,t):x},animate:function(e){return arguments.length?(S=e,t):S},tooltipText:function(e){return arguments.length?(C=e,t):C},tooltipValue:function(e){return arguments.length?(E=e,t):E}};return(0,r.injectFunctions)(t,T),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Area=i;var r=n(15),a=n(67),s=o(a),l=n(22),u=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){B.duration.x=R;var n=t.size()>1;t.filter(function(t,e){return n?e===x:!0}).each(function(){if(O.length){var t=d3.select(this),n=t.selectAll("path");n.transition().duration(0);var i=e(n);t.selectAll("text").remove(),U=function(){h(t,i)};var r=i[0];o(r),u(t,i)}})}function e(t){var e,o=T.rangeBand(),i=[],r=[],a=0;O.forEach(function(t,n){var o=r[n]={},i=t[k];o.width=E(i)-E(0),o[k]=t[k],o[k+"Pos"]=Math.round(E(0)+(o.width>0?1:0)),o[k+"Label"]=t[k+"Label"],o[M]=t[M],o[M+"Pos"]=T(n),o[M+"Label"]=t[M+"Label"],o.seriesIdx=t.seriesIdx,o.color=(0,d.getColor)(t.seriesIdx,I),o.groupLabel=t.groupLabel,a=t.seriesIdx+1,e=T(t[M])});var s=d3.range(0,a),l=d3.scale.ordinal().domain(s).rangeBands([e,e+o],.2,0);return r.forEach(function(t){t[M+"Pos"]=l(t.seriesIdx),t.height=l.rangeBand()}),t.each(function(t){var e=_.merge({},t);i.push(e)}),0===i.length&&(i=r.map(function(t){var e=_.merge({},t);return e.width=0,e})),n(i,r),i}function n(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o.width=0,o[k]=e[k],o[k+"Pos"]=e[k+"Pos"],o[k+"Label"]=e[k+"Label"],o.height=e.height,o[M]=e[M],o[M+"Pos"]=e[M+"Pos"],o[M+"Label"]=e[M+"Label"],o.groupLabel=e.groupLabel,o.seriesIdx=e.seriesIdx,o.color=e.color}})}function o(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={x:["xPos","width"]};if(t){n=t.next;for(o in B.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&(B.duration[o]=0))}}function i(t,e){var n=t.insert("path","text"),o=0;n.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return A(t.xPos,t.yPos,0,t.height,0)}),n.transition().duration(R).ease("elastic").delay(function(){return V+N.apply(this,arguments)}).each("start",function(){o++}).attrTween("d",a(function(t){return t.next})).each("end",function(){0===--o&&e()})}function a(t){var e=function(t){return null===t[M]?"":A(t.xPos,t.yPos,t.width,t.height,0)};return function(n,o){var i=t.call(this,n,o);o=d3.interpolate(n,i);for(var r in i)n[r]=i[r];return function(t){return e(o(t))}}}function u(t,e){var n=t.selectAll("path").data(e),o=n.enter(),r=0===n.size()&&0<o.size(),s=B.duration,l=0;r?(z.animationStart(),z.animationUpdateStart(),z.animationUpdateEnd(),z.animationEnterStart(),o.call(i,function(){v(n),y(n),z.animationEnterEnd(),z.animationEnd()})):(z.animationStart(),z.animationUpdateStart(),n.transition().duration(s.x).attrTween("d",a(function(t){var e={};return e[k+"Pos"]=t.next[k+"Pos"],e.width=t.next.width,e})).transition().duration(s.y).each("start",function(){l++}).attrTween("d",a(function(t){return t.next})).each("end",function(){0===--l&&(z.animationUpdateEnd(),z.animationEnterStart(),o.call(i,function(){z.animationEnterEnd(),z.animationEnd(),v(n),y(t.selectAll("path"))}),0===o.size()&&(z.animationEnterEnd(),z.animationEnd(),v(n),y(t.selectAll("path"))))})),n.exit().remove(),n.style("fill",function(t){return t.next.color}).style("stroke-width",0)}function h(t,e){var n=e.map(function(t){return w?w.value(t.next.xLabel):""+t.next.xLabel}),o=(0,d.getAllTextDimensions)(n,t,D),i=d3.max(o,function(t){return t.height}),r=e[0]&&e[0].height||0,a=P&&r>=i,s=[];a&&(s=f.Bar.prepareTextData(e,o,D,2,E,L)),s.length&&a||z.animationTextEnd();var u=t.selectAll("text").data(s);u.enter().append("text"),u.exit().remove(),u.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return w?w.value(t.text):t.text}).style("cursor","default").style(D).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),u.transition().duration(B.duration.text).style("opacity",1).each("start",function(){j++}).each("end",function(){0===--j&&z.animationTextEnd()}),y(u.filter(function(t){return t.inside})),g(u)}function g(t){z.on("highlightStart.text",function(e){t.filter(m(e)).transition().duration(150).ease("linear").style("opacity",.3)}),z.on("highlightEnd.text",function(e){t.filter(m(e)).transition().duration(150).ease("linear").style("opacity",1)})}function m(t){var e=function(e){return e.seriesIdx!==t};return e}function v(t){S&&S.data().forEach(function(t,e){S.addListener({id:b+"_"+e,dispatch:z})}),z.on("highlightStart",function(e){t.filter(function(t){return t.seriesIdx!==e}).transition().duration(150).ease("linear").style("opacity",.3)}),z.on("highlightEnd",function(e){t.filter(function(t){return t.seriesIdx!==e}).transition().duration(150).ease("linear").style("opacity",1)})}function y(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event);e=H(t),n=F(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color)}).on("mouseout",function(){(0,s["default"])().hide()})}var b,x,w,S,C=f.Bar.Shapes,E=d3.scale.linear(),T=d3.scale.linear(),k="x0",M="y0",O=[],I=d3.scale.category20().range(),P=!0,L=!1,D=c["default"].prototype.defaults().style.axisTick,A=p["default"][C("bar-bar")],N=0,B={duration:{x:400,y:700,text:50}},j=0,R=700,H=function(t){return t.x},F=function(t){return t.y},z=d3.dispatch("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","animationTextEnd"),V=0,U=function(){},W={scaleX:function(e){return arguments.length?(E=e.copy(),t):E},scaleY:function(e){return arguments.length?(T=e.copy(),t):T},pX:function(e){return arguments.length?(k=e,t):k},pY:function(e){return arguments.length?(M=e,t):M},data:function(e){return arguments.length?(O=e,t):O},colors:function(e){return arguments.length?(I=e,t):I},groupId:function(e){return arguments.length?(x=e,t):x},valuesOutside:function(e){return arguments.length?(L=!!e,t):L},chartId:function(e){return arguments.length?(b=e,t):b},showValues:function(e){return arguments.length?(P=!!e,t):P},textStyle:function(e){return arguments.length?(D=e,t):D},shape:function(e){return arguments.length?(A=p["default"][C(e)||C("bar-bar")],t):A},legend:function(e){return arguments.length?(S=e,t):S},tooltipText:function(e){return arguments.length?(H=e,t):H},tooltipValue:function(e){return arguments.length?(F=e,t):F},numberFormat:function(e){return arguments.length?(w=e,t):w},transitionDelay:function(e){return arguments.length?(N=e,t):N},transitionDuration:function(e){return arguments.length?(R=e,t):R},transitionTiming:function(e){return arguments.length?(B=e,t):B},renderDelay:function(e){return arguments.length?(V=e,t):V},dispatch:function(){return z},renderText:function(){return U(),t}};return(0,r.injectFunctions)(t,W),t}Object.defineProperty(e,"__esModule",{value:!0}),e.BarGrouped=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(138),p=o(h),d=n(22),f=n(400)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){B.duration.x=H;var o=t.size()>1;t.filter(function(t,e){return o?e===S:!0}).each(function(){if(P.length){var t=d3.select(this),o=t.selectAll("path");o.transition().duration(0);var i=h(o);t.selectAll("text").remove();var r=i[0];v(r),U=function(){n(t,i)},e(t,i)}})}function e(t,e){var n=t.selectAll("path").data(e),o=n.enter(),r=0===n.size()&&n.size()<o.size(),a=B.duration,s=0;r?(F.animationStart(),F.animationUpdateStart(),F.animationUpdateEnd(),o.call(y,function(){i(n),x(n),F.animationEnterEnd(),F.animationEnd()})):(F.animationStart(),F.animationUpdateStart(),n.transition().duration(a.x).attrTween("d",b(function(t){var e={};return e[O+"Pos"]=t.next[O+"Pos"],e.width=t.next.width,e})).transition().duration(a.y).each("start",function(){s++}).attrTween("d",b(function(t){return t.next})).each("end",function(){0===--s&&(F.animationUpdateEnd(),F.animationEnterStart(),0===o.size()&&(F.animationEnterEnd(),F.animationEnd(),i(n),x(t.selectAll("path"))),o.call(y,function(){F.animationEnterEnd(),F.animationEnd(),i(n),x(t.selectAll("path"))}))})),n.exit().remove(),n.style("fill",function(t){return t.next.color}).style("stroke-width",0)}function n(t,e){var n=e.map(function(t){return C?C.value(t.next.xLabel):""+t.next.xLabel}),i=(0,d.getAllTextDimensions)(n,t,A),r=d3.max(i,function(t){return t.height}),s=M.rangeBand(),u=D&&s>=r,c=[];u&&(c=o(e,i)),c.length&&u||F.animationTextEnd();var h=t.selectAll("text").data(c);h.enter().append("text"),h.exit().remove(),h.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return C?C.value(t.text):t.text}).style("cursor","default").style(A).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),h.transition().duration(B.duration.text).style("opacity",1).each("start",function(){j++}).each("end",function(){0===--j&&F.animationTextEnd()}),x(h),a(h)}function o(t,e){var n=2,o=[];return t.forEach(function(t,i){var r=t.next;if(null!==r.y){var a,s,l={},u="start",c=e[i].width,h=c+n,p=Math.abs(r.width);if(a=A.color,p>h&&(a=g.Colors.getContrastYIQ(r.color,A.color)),l.fillColor=a,l.textY=r.yPos+r.height/2+.25*e[i].height,s=r.xPos,r.x>=0){if(!(p>h))return;s+=n}if(r.x<0){if(!(p>h))return;s-=n}l.textX=s,r.x<0&&(u="end"),l.textAnchor=u,l.text=r.xLabel,l.yLabel=r.yLabel,l.xLabel=r.xLabel,l.groupLabel=r.groupLabel,l.seriesIdx=r.seriesIdx,o.push(l)}}),o}function i(t){E&&E.data().forEach(function(t,e){E.addListener({id:w+"_"+e,dispatch:F})}),F.on("highlightStart.shape",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",.3)}),F.on("highlightEnd.shape",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)})}function a(t){F.on("highlightStart.text",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",.3)}),F.on("highlightEnd.text",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)})}function u(t){var e=function(e){return e.seriesIdx!==t};return e}function h(t){var e=[0,0],n=M.rangeBand(),o=[],i=[];return P.forEach(function(t,o){var r=i[o]={},a=t[O],s=+(a>0),l=1===s?1:0;r[O+"0"]=e[s],e[s]+=a,r[O+"1"]=e[s],r[O]=t[O],r.width=k(r[O+"1"])-k(r[O+"0"]),r[O+"Pos"]=k(r[O+"0"])+l,r[O+"Label"]=t[O+"Label"],r[I]=t[I],r.height=n,r[I+"Label"]=t[I+"Label"],r[I+"Pos"]=M(t[I]),r.groupLabel=t.groupLabel,r.seriesIdx=t.seriesIdx,r.color=(0,d.getColor)(t.seriesIdx,L)}),t.each(function(t){var e=_.merge({},t);o.push(e)}),0===o.length&&(o=i.map(function(t){var e=_.merge({},t);return e.width=0,e[O+"Pos"]=k(0),e})),m(o,i),o}function m(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o[O+"0"]=e[O+"0"],o[O+"1"]=e[O+"1"],o[O]=e[O],o.width=0,o[O+"Pos"]=e[O+"Pos"],o[O+"Label"]=e[O+"Label"],o[I]=e[I],o.height=e.height,o[I+"Label"]=e[I+"Label"],o[I+"Pos"]=e[I+"Pos"],o.groupLabel=e.groupLabel,o.seriesIdx=e.seriesIdx,o.color=e.color}})}function v(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={y:["yPos","height"]};if(t){n=t.next;for(o in B.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&(B.duration[o]=0))}}function y(t,e){var n=t.insert("path","text"),o=0;n.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return N(t.xPos,t.yPos,0,t.height,0)}),n.transition().duration(H).ease("elastic").delay(function(){return W+R.apply(this,arguments)}).each("start",function(){0===o&&F.animationEnterStart(),o++}).attrTween("d",b(function(t){return t.next})).each("end",function(){0===--o&&e()})}function b(t){var e=function(t){return null===t[I]?"":N(t.xPos,t.yPos,t.width,t.height,0)};return function(n,o){var i=t.call(this,n,o);o=d3.interpolate(n,i);for(var r in i)n[r]=i[r];return function(t){return e(o(t))}}}function x(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event),i=(0,d.getColor)(t.seriesIdx,L);e=z(t),n=V(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,i)}).on("mouseout",function(){(0,s["default"])().hide()})}var w,S,C,E,T=f.Bar.Shapes,k=d3.scale.linear(),M=d3.scale.linear(),O="x0",I="y0",P=[],L=d3.scale.category20().range(),D=!0,A=c["default"].prototype.defaults().style.axisTick,N=p["default"][T("bar-bar")],B={duration:{x:700,y:400,text:50}},j=0,R=0,H=700,F=d3.dispatch("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","animationTextEnd"),z=function(t){return t.xLabel},V=function(t){return t.yLabel},U=function(){},W=0,G={scaleX:function(e){return arguments.length?(k=e.copy(),t):k},scaleY:function(e){return arguments.length?(M=e.copy(),t):M},pX:function(e){return arguments.length?(O=e,t):O},pY:function(e){return arguments.length?(I=e,t):I},data:function(e){return arguments.length?(P=e,t):P},colors:function(e){return arguments.length?(L=e,t):L},groupId:function(e){return arguments.length?(S=e,t):S},chartId:function(e){return arguments.length?(w=e,t):w},showValues:function(e){return arguments.length?(D=!!e,
t):D},textStyle:function(e){return arguments.length?(A=e,t):A},shape:function(e){return arguments.length?(N=p["default"][T(e)||T("bar-bar")],t):N},legend:function(e){return arguments.length?(E=e,t):E},tooltipText:function(e){return arguments.length?(z=e,t):z},tooltipValue:function(e){return arguments.length?(V=e,t):V},transitionDelay:function(e){return arguments.length?(R=e,t):R},transitionDuration:function(e){return arguments.length?(H=e,t):H},transitionTiming:function(e){return arguments.length?(B=e,t):B},renderDelay:function(e){return arguments.length?(W=e,t):W},numberFormat:function(e){return arguments.length?(C=e,t):C},dispatch:function(){return F},renderText:function(){return U(),t}};return(0,r.injectFunctions)(t,G),t}Object.defineProperty(e,"__esModule",{value:!0}),e.BarStacked=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(138),p=o(h),d=n(22),f=n(400),g=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){function t(t){t.style("fill",u).attr("cx",function(t){return r(t[g])+c}).attr("cy",function(t){return s(t[m])}).attr("r",E)}if(v.length){var i=d3.select(this),r=this.__chart__=d.copy(),s=this.__chart__=f.copy(),u=p(y[0],.7),c=0;r.rangeBand&&(c=r.rangeBand()/2),h&&(v=v.filter(h));var x=["igc-circle"];S&&x.push(S);var w=i.selectAll("."+x.join(".")).data(v),T=w.enter();T.append("circle").attr("class",x.join(" ")).style("fill",p(y[0],l.eps)),C?w.transition().call(t).each("start",function(){b++}).each("end",function(){0===--b&&(e(w,y[0]),n(w,y[0]),_.animationEnd())}):(w.call(t),e(w,y[0]),n(w,y[0]),_.animationEnd()),w.exit().transition().style("fill",p(y[0],l.eps)).attr("r",0).remove(),a&&a.addListener({id:o,dispatch:_})}})}function e(t,e){_.on("highlightStart",function(n,r){i===n&&o===r&&t.transition().duration(150).ease("linear").style("fill",p(e,1))}),_.on("highlightEnd",function(n,r){i===n&&o===r&&t.transition().duration(150).ease("linear").style("fill",p(e,.7))})}function n(t,e){t.on("mousemove",function(t){d3.select(this).transition().duration(150).ease("linear").style("fill",p(e,1));var n,o,i=(0,u.getMousePosition)(d3.event);n=x(t),o=w(t),(0,s["default"])().setText(n).setValue(o).setPosition(i,e)}).on("mouseout",function(){d3.select(this).transition().duration(150).ease("linear").style("fill",p(e,.7)),(0,s["default"])().hide()})}var o,i,a,h,p=c.Colors.rgbStrToRgbaStr,d=d3.scale.linear(),f=d3.scale.linear(),g="x0",m="y0",v=[],y=d3.scale.category20().range(),b=0,_=d3.dispatch("highlightStart","highlightEnd","animationEnd"),x=function(t){return t.x},w=function(t){return t.y},S="",C=!0,E=function(t){return"string"==typeof t[m]?0:5},T={scaleX:function(e){return arguments.length?(d=e,t):d},scaleY:function(e){return arguments.length?(f=e,t):f},pX:function(e){return arguments.length?(g=e,t):g},pY:function(e){return arguments.length?(m=e,t):m},data:function(e){return arguments.length?(v=e,t):v},colors:function(e){return arguments.length?(y=e,t):y},groupId:function(e){return arguments.length?(i=e,t):i},chartId:function(e){return arguments.length?(o=e,t):o},dispatch:function(){return _},legend:function(e){return arguments.length?(a=e,t):a},filterFn:function(e){return arguments.length?(h=e,t):h},tooltipText:function(e){return arguments.length?(x=e,t):x},tooltipValue:function(e){return arguments.length?(w=e,t):w},className:function(e){return arguments.length?(S=e,t):S},animate:function(e){return arguments.length?(C=e,t):C},radius:function(e){return arguments.length?(E=e,t):E}};return(0,r.injectFunctions)(t,T),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(22),c=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){j.duration.y=F;var o=t.size()>1;t.filter(function(t,e){return o?e===C:!0}).each(function(){if(P.length){var t=d3.select(this),o=t.selectAll("path");o.transition().duration(0);var i=m(o);t.selectAll("text").remove();var r=i[0];y(r),W=function(){n(t,i)},e(t,i)}})}function e(t,e){var n=t.selectAll("path").data(e),o=n.enter(),r=0===n.size()&&n.size()<o.size(),a=j.duration,s=0;r?(z.animationStart(),z.animationUpdateStart(),z.animationUpdateEnd(),o.call(b,function(){i(n),w(n),z.animationEnterEnd(),z.animationEnd()})):(z.animationStart(),z.animationUpdateStart(),n.transition().duration(a.y).attrTween("d",x(function(t){var e={};return e[I+"Pos"]=t.next[I+"Pos"],e.height=t.next.height,e})).transition().duration(a.x).each("start",function(){s++}).attrTween("d",x(function(t){return t.next})).each("end",function(){0===--s&&(z.animationUpdateEnd(),z.animationEnterStart(),0===o.size()&&(z.animationEnterEnd(),z.animationEnd(),i(n),w(t.selectAll("path"))),o.call(b,function(){z.animationEnterEnd(),z.animationEnd(),i(n),w(t.selectAll("path"))}))})),n.exit().remove(),n.style("fill",function(t){return t.next.color}).style("stroke-width",0).style("opacity",$)}function n(t,e){var n=e.map(function(t){return E?E.value(t.next.yLabel):""+t.next.yLabel}),i=(0,d.getAllTextDimensions)(n,t,A),r=d3.max(i,function(t){return t.height}),s=k.rangeBand(),u=D&&s>=r,c=[];u&&(c=o(e,i)),u&&c.length||z.animationTextEnd();var h=t.selectAll("text").data(c);h.enter().append("text"),h.exit().remove(),h.attr("x",function(t){return t.textX}).attr("y",function(t){return t.textY}).attr("text-anchor",function(t){return t.textAnchor}).text(function(t){return E?E.value(t.text):t.text}).style("cursor","default").style(A).attr("transform",function(t){return t.transform}).attr("fill",function(t){return t.fillColor}).style("opacity",l.eps),h.transition().duration(j.duration.text).style("opacity",$?$:1).each("start",function(){R++}).each("end",function(){0===--R&&z.animationTextEnd()}),w(h),a(h)}function o(t,e){var n=2,o=[];return t.forEach(function(t,i){var r=t.next;if(null!==r.x){var a={},s=e[i],l=Math.abs(r.height),u=s.width+n,c=l>u,h=r.y<0,p=h?-1:1,d=r.xPos+r.width/2+.25*s.height,g=c?r.yPos-p*n:r.yPos;c&&(a.fillColor=c?f.Colors.getContrastYIQ(r.color,A.color):A.color,a.textX=d,a.textY=g,a.textAnchor=h?"end":"start",a.transform="rotate(-90,"+d+","+g+")",a.yLabel=r.yLabel,a.xLabel=r.xLabel,a.groupLabel=r.groupLabel,a.text=r.yLabel,a.seriesIdx=r.seriesIdx,o.push(a))}}),o}function i(t){T&&T.data().forEach(function(t,e){T.addListener({id:S+"_"+e,dispatch:z})}),$?(z.on("highlightStart.shape",function(e,n,o){t.filter(h(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)}),z.on("highlightEnd.shape",function(e,n,o){t.filter(h(e,n,o)).transition().duration(150).ease("linear").style("opacity",$)})):(z.on("highlightStart.shape",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",.3)}),z.on("highlightEnd.shape",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)}))}function a(t){$?(z.on("highlightStart.text",function(e,n,o){t.filter(h(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)}),z.on("highlightEnd.text",function(e,n,o){t.filter(h(e,n,o)).transition().duration(150).ease("linear").style("opacity",$)})):(z.on("highlightStart.text",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",.3)}),z.on("highlightEnd.text",function(e,n,o){t.filter(u(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)}))}function u(t){var e=function(e){return e.seriesIdx!==t};return e}function h(t){var e=function(e){return e.seriesIdx===t};return e}function m(t){var e=[0,0],n=k.rangeBand(),o=[],i=[];return P.forEach(function(t,o){var r=i[o]={},a=t[I],s=+(a>0),l=0===s?1:0;r[I+"0"]=e[s],e[s]+=a,r[I+"1"]=e[s],r[O]=t[O],r.width=n,r[O+"Pos"]=k(t[O]),r[O+"Label"]=t[O+"Label"],r[I]=t[I],r.height=M(r[I+"1"])-M(r[I+"0"]),r[I+"Pos"]=M(r[I+"0"])+l,r[I+"Label"]=t[I+"Label"],r.groupLabel=t.groupLabel,r.seriesIdx=t.seriesIdx,r.color=(0,d.getColor)(t.seriesIdx,L)}),t.each(function(t){var e=_.merge({},t);o.push(e)}),0===o.length&&(o=i.map(function(t){var e=_.merge({},t);return e.height=0,e[I+"Pos"]=M(0),e})),v(o,i),o}function v(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o[I+"0"]=e[I+"0"],o[I+"1"]=e[I+"1"],o[O]=e[O],o.width=e.width,o[O+"Pos"]=e[O+"Pos"],o[O+"Label"]=e[O+"Label"],o[I]=e[I],o.height=0,o[I+"Label"]=e[I+"Label"],o[I+"Pos"]=e[I+"Pos"],o.groupLabel=e.groupLabel,o.seriesIdx=e.seriesIdx,o.color=e.color}})}function y(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={x:["xPos","width"]};if(t){n=t.next;for(o in j.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&(j.duration[o]=0))}}function b(t,e){var n=t.insert("path","text"),o=0;n.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return N(t.xPos,t.yPos,t.width,0,0)}),n.transition().duration(F).ease("elastic").delay(function(){return G+H.apply(this,arguments)}).each("start",function(){0===o&&z.animationEnterStart(),o++}).attrTween("d",x(function(t){return t.next})).each("end",function(){0===--o&&e()})}function x(t){return function(e,n){var o=t.call(this,e,n);n=d3.interpolate(e,o);for(var i in o)e[i]=o[i];return function(t){return B(n(t))}}}function w(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event),i=(0,d.getColor)(t.seriesIdx,L);e=V(t),n=U(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,i),null!==$&&T&&T.sendListeners(t.seriesIdx,S,"highlightStart")}).on("mouseout",function(t){(0,s["default"])().hide(),null!==$&&T&&T.sendListeners(t.seriesIdx,S,"highlightEnd")})}var S,C,E,T,k=d3.scale.linear(),M=d3.scale.linear(),O="x",I="y",P=[],L=d3.scale.category20().range(),D=!0,A=c["default"].prototype.defaults().style.axisTick,N=p["default"].barToRight,B=g.Bar.createTweenShape(I),j={duration:{x:400,y:700,text:50}},R=0,H=0,F=700,z=d3.dispatch("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","animationTextEnd"),V=function(t){return t.xLabel},U=function(t){return t.yLabel},W=function(){},G=0,$=null,K={scaleX:function(e){return arguments.length?(k=e.copy(),t):k},scaleY:function(e){return arguments.length?(M=e.copy(),t):M},pX:function(e){return arguments.length?(O=e,t):O},pY:function(e){return arguments.length?(I=e,B=g.Bar.createTweenShape(I),t):I},data:function(e){return arguments.length?(P=e,t):P},colors:function(e){return arguments.length?(L=e,t):L},groupId:function(e){return arguments.length?(C=e,t):C},chartId:function(e){return arguments.length?(S=e,t):S},showValues:function(e){return arguments.length?(D=!!e,t):D},textStyle:function(e){return arguments.length?(A=e,t):A},legend:function(e){return arguments.length?(T=e,t):T},tooltipText:function(e){return arguments.length?(V=e,t):V},tooltipValue:function(e){return arguments.length?(U=e,t):U},transitionDelay:function(e){return arguments.length?(H=e,t):H},transitionDuration:function(e){return arguments.length?(F=e,t):F},transitionTiming:function(e){return arguments.length?(j=e,t):j},renderDelay:function(e){return arguments.length?(G=e,t):G},numberFormat:function(e){return arguments.length?(E=e,t):E},dispatch:function(){return z},renderText:function(){return W(),t},opacity:function(e){return arguments.length?($=e,t):$}};return(0,r.injectFunctions)(t,K),t}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnStacked=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(138),p=o(h),d=n(22),f=n(66),g=n(400)},function(t,e,n){"use strict";function o(){function t(t){t.each(function(){if(h.length){var t=d3.select(this),o=this.__chart__=s.copy(),i=this.__chart__=l.copy(),m=d[0],v=0;o.rangeBand&&(v=o.rangeBand()/2),a&&(h=h.filter(a));var y=d3.svg.line().defined(function(t){return null!==t[c]}).interpolate(p).x(function(t){return o(t[u])+v}).y(function(t){return i(t[c])}),b=d3.svg.line().defined(function(t){return null!==t[c]}).interpolate(p).x(function(t){return o(t[u])+v}).y(function(){return i(0)}),_=t.selectAll("path").data([0]);_.enter().append("path"),g?_.attr("d",b(h)).style("stroke",m).style("stroke-width","0").style("fill","none").transition().ease("bounce").attr("d",y(h)).style("stroke-width","2").each("end",function(){e(_),f.animationEnd()}):(_.attr("d",y(h)).style("stroke",m).style("fill","none").style("stroke-width","2"),e(_),f.animationEnd()),r&&r.addListener({id:n,dispatch:f})}})}function e(t){f.on("highlightStart",function(e,i){o!==e&&n===i&&t.transition().duration(150).ease("linear").style("opacity",.3)}),f.on("highlightEnd",function(e,i){o!==e&&n===i&&t.transition().duration(150).ease("linear").style("opacity",1)})}var n,o,r,a,s=d3.scale.linear(),l=d3.scale.linear(),u="x0",c="y0",h=[],p="linear",d=d3.scale.category20().range(),f=d3.dispatch("highlightStart","highlightEnd","animationEnd"),g=!0,m={scaleX:function(e){return arguments.length?(s=e,t):s},scaleY:function(e){return arguments.length?(l=e,t):l},pX:function(e){return arguments.length?(u=e,t):u},pY:function(e){return arguments.length?(c=e,t):c},data:function(e){return arguments.length?(h=e,t):h},interpolate:function(e){return arguments.length?(p=e,t):p},colors:function(e){return arguments.length?(d=e,t):d},groupId:function(e){return arguments.length?(o=e,t):o},chartId:function(e){return arguments.length?(n=e,t):n},dispatch:function(){return f},legend:function(e){return arguments.length?(r=e,t):r},filterFn:function(e){return arguments.length?(a=e,t):a},animate:function(e){return arguments.length?(g=e,t):g}};return(0,i.injectFunctions)(t,m),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=o;var i=n(15)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){E.duration.y=k;var o=t.size()>1;t.filter(function(t,e){return o?e===v:!0}).each(function(){var t=d3.select(this);if(t.selectAll(".picto-grid-item").remove(),b.length){var o=t.selectAll(".picto-grid-item");o.transition().duration(0);var i=a(o),r=i[0];p(r),n(t,i),e(t,x)}})}function e(t,e){t.selectAll(".overlay-pictorial").remove();var n=t.selectAll(".overlay-pictorial").data(e);n.enter().append("path").attr("class","overlay-pictorial").attr("stroke-width",0).attr("stroke","#000000").attr("fill","transparent").attr("d",function(t){return t.path})}function n(t,e){function n(){M.animationEnterEnd(),M.animationEnd(),o(i),g(t.selectAll(".overlay-pictorial"),t.selectAll(".picto-grid-item rect"))}var i=t.selectAll(".picto-grid-item").data(e),r=i.enter(),a=0===i.size()&&i.size()<r.size(),s=E.duration,u=0;a?(M.animationStart(),M.animationUpdateStart(),M.animationUpdateEnd(),r.call(d,n)):(M.animationStart(),M.animationUpdateStart(),i.style("visibility","hidden").attr("clip-path",function(t){return"url(#igc-cp-"+t.next.shape+m+")"}).attr("transform",function(t){return"translate("+t.next.x+","+t.next.y+")"}).transition().duration(s.y+s.x).each("start",function(){u++}).each("end",function(){if(d3.select(this).style("visibility",null),0===--u){if(M.animationUpdateEnd(),M.animationEnterStart(),0===r.size())return void n();r.call(d,n)}}),f(i)),i.exit().transition().style("opacity",l.eps).remove()}function o(t){y&&y.data().forEach(function(t){y.addListener({id:m+"_"+t.groupId,dispatch:M})}),M.on("highlightStart.shape",function(e,n,o){t.selectAll("rect").filter(i(e,n,o)).transition().duration(150).ease("linear").style("opacity",.3)}),M.on("highlightEnd.shape",function(e,n,o){t.selectAll("rect").filter(i(e,n,o)).transition().duration(150).ease("linear").style("opacity",1)})}function i(t){var e=function(e){return e.categoryIdx!==t};return e}function a(t){var e=[],n=[];return b.forEach(function(t,e){var o=n[e]={};o.x=t.x,o.y=t.y,o.width=t.width,o.height=t.height,o.colors=t.colors,o.shape=t.shape,o.valueLabel=t.valueLabel,o.category=t.category}),t.each(function(t){var n=_.merge({},t);e.push(n)}),0===e.length&&(e=n.map(function(t){var e={};return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.colors=t.colors,e.shape=t.shape,e.valueLabel=t.valueLabel,e.category=t.category,e})),u(e,n),e}function u(t,e){var n=e.length,o=t.length;if(o>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else e.forEach(function(e,n){if(t[n])t[n].next=e;else{var o=t[n]={next:e};o.x=e.x,o.y=e.y,o.width=e.width,o.height=e.height,o.colors=e.colors,o.shape=e.shape,o.valueLabel=e.valueLabel,o.category=e.category}})}function p(t){function e(e){var o=Math.abs(t[e]-n[e]);.2>o&&r++}var n,o,i,r,a={x:["xPos","width"]};if(t){n=t.next;for(o in E.duration)a[o]&&(i=a[o].length,r=0,a[o].forEach(e),i===r&&(E.duration[o]=0))}}function d(t,e){var n=t.insert("g","text"),o=0;n.attr("class","picto-grid-item").attr("clip-path",function(t){return"url(#igc-cp-"+t.shape+m+")"}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),n.transition().duration(k).delay(function(){return L+T.apply(this,arguments)}).each("start",function(){f(d3.select(this).selectAll("rect")),0===o&&M.animationEnterStart(),o++}).each("end",function(){0===--o&&e()})}function f(t){var e=t.data(function(t){return t.next.colors});e.enter().append("rect"),e.exit().remove(),e.attr("x",function(t){return t.x}).attr("y",0).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("fill",function(t){return t.color})}function g(t,e){D&&(t=t.filter(function(t,e){return 0===e})),t.on("mousemove",function(t){var n,o,r=(0,h.getMousePosition)(d3.event),a=t.color;D||e.filter(i(t.categoryIdx)).transition().duration(150).ease("linear").style("opacity",.3),n=O(t),o=I(t),(0,s["default"])().setText(n).setValue(o).setPosition(r,a)}).on("mouseout",function(t){D||e.filter(i(t.categoryIdx)).transition().duration(150).ease("linear").style("opacity",1),(0,s["default"])().hide()})}var m,v,y,b=[],x=[],w=d3.scale.category20().range(),S=!0,C=c["default"].prototype.defaults().style.axisTick,E={duration:{x:400,y:700,text:50}},T=0,k=700,M=d3.dispatch("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd"),O=function(t){return t.xLabel},I=function(t){return t.yLabel},P=function(){},L=0,D=!1,A={data:function(e){return arguments.length?(b=e,t):b},overlayData:function(e){return arguments.length?(x=e,t):x},colors:function(e){return arguments.length?(w=e,t):w},groupId:function(e){return arguments.length?(v=e,t):v},chartId:function(e){return arguments.length?(m=e,t):m},showValues:function(e){return arguments.length?(S=!!e,t):S},textStyle:function(e){return arguments.length?(C=e,t):C},legend:function(e){return arguments.length?(y=e,t):y},tooltipText:function(e){return arguments.length?(O=e,t):O},tooltipValue:function(e){return arguments.length?(I=e,t):I},transitionDelay:function(e){return arguments.length?(T=e,t):T},transitionDuration:function(e){return arguments.length?(k=e,t):k},transitionTiming:function(e){return arguments.length?(E=e,t):E},renderDelay:function(e){return arguments.length?(L=e,t):L},dispatch:function(){return M},renderText:function(){return P(),t},highlightFirstOnly:function(e){return arguments.length?(D=e,t):D}};return(0,r.injectFunctions)(t,A),t}Object.defineProperty(e,"__esModule",{value:!0}),e.PictorialGrid=i;var r=n(15),a=n(67),s=o(a),l=n(48),u=n(30),c=o(u),h=n(22)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){if($.length){var t,r=d3.select(this);G&&($=$.filter(G));var s=d3.layout.pie().startAngle(Z).endAngle(X).sort(null).value(function(t){return t.pct});r.attr("transform","translate("+it.x+","+it.y+")");var u=s($);tt&&(et=d3.max(u,function(t){return t.value})),o(u),r.selectAll(".igc-graph-pie-pointer").remove(),r.selectAll(".igc-graph-pie-label").remove(),nt&&(i(r,u),t=a(r),l(t));var p=u.length,d=d3.range(0,p);d=d.map(function(t,e){return{pct:1/p*100,color:u[e].data.color}});var f=r.selectAll("path.igc-graph-pie-piece"),g=[];f.each(function(t){g.push(t)}),0===g.length&&(g=s(d),o(g)),e(g,u);var m=f.data(g);m.enter().append("path").attr("class","igc-graph-pie-piece"),m.exit().transition().attrTween("d",n(function(){return{startAngle:c.PI2,endAngle:c.PI2,innerRadius:J,outerRadius:Q}})).remove(),m.attr("d",at).style("fill",function(t){return t.next.data.color}),m.transition().attrTween("d",n(function(t){return t.next})).each("start",function(){K++}).each("end",function(){0===--K&&(nt&&t&&t.length&&h(r,t),q.animationEnd(),F(m,r.selectAll(".igc-graph-pie-pointer"),r.selectAll(".igc-graph-pie-label")),j(m))}),W&&W.addListener({id:z,dispatch:q})}})}function e(t,e){var n=e.length,o=t.length;if(t.length>=n){t.forEach(function(t,n){t.next=e[n]});var i=o-n;i&&t.splice(n,i)}else{var r=J,a=Q,s=t[o-1],l=0;s&&(r=s.innerRadius,a=s.outerRadius,l=s.endAngle),e.forEach(function(e,n){t[n]?t[n].next=e:t[n]={next:e,startAngle:l,endAngle:l,padAngle:0,value:0,innerRadius:r,outerRadius:a,data:e.data}})}}function n(t){return function(e,n){var o=t.call(this,e,n),i=d3.interpolate(e,o);for(var r in o)e[r]=o[r];return function(t){return at(i(t))}}}function o(t){t.forEach(function(t){t.innerRadius=J,tt?t.outerRadius=J+(Q-J)*(t.value/et):t.outerRadius=Q})}function i(t,e){var n=(0,d.getAllTextDimensions)(e.map(ot),t,Y),o=Q+pt;e.forEach(function(t){t.arcmetrics=R(t)});var i=t.selectAll(".igc-graph-pie-label"),r=i.data(e);r.enter().append("text").attr("class","igc-graph-pie-label"),ct=d3.max(n,function(t){return t.height}),r.attr("text-anchor",function(t){return 1===t.arcmetrics.side?"start":"end"}).attr("x",function(t){return f(o,t.arcmetrics.centerAngle-c.PIhalf)}).attr("y",function(t){return g(o,t.arcmetrics.centerAngle-c.PIhalf)}).attr("fill",function(t){return t.data.color}).text(ot).style(Y).style("opacity",c.eps);var a=t.selectAll(".igc-graph-pie-pointer").data(e);a.enter().append("path").attr("class","igc-graph-pie-pointer"),a.attr("stroke",function(t){return t.data.color}).attr("fill","none").style("opacity",c.eps)}function a(t){for(var e=t.selectAll(".igc-graph-pie-label"),n=t.selectAll(".igc-graph-pie-pointer"),o=[],i={left:[],leftSlots:[],right:[],rightSlots:[]},r=rt.height>>0,a=r%ct/2,s=a;r>=s;s+=ct)i.leftSlots.push(s),i.rightSlots.push(s);return i.leftSlots.pop(),i.rightSlots.pop(),i.leftSlotsInitial=i.leftSlots.slice(0),i.rightSlotsInitial=i.rightSlots.slice(0),e.each(function(t,e){var r=t.arcmetrics,a=r.centerAngle,s=r.side,l=this,u=l.getBBox(),c={visible:!0,node:l,pointerNode:n[0][e],bbox:u,bboxTrans:b(u),data:{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,centerAngle:a},origData:t};-1===s?i.left.push(c):i.right.push(c),o.push(c)}),S("left",i),S("right",i),C("left",i),C("right",i),o}function l(t){t.forEach(function(t){var e=d3.select(t.node);if(_.has(t,"slotY")){var n=t.slotY,o=t.origData,i=o.arcmetrics.side,r=parseFloat(e.attr("y")),a=t.baseYOffs=r-t.bbox.y,s=n+a,l=Q+pt;e.attr("y",s);var u=i*P(s>0?n:s,l);e.attr("x",u)}else t.visible=!1}),t=t.filter(function(t){return _.has(t,"slotY")}),t.forEach(function(t){var e=T(t),n=L(t,e),o=t.slotIndex,i=0,r=!0;if(0===n)return void E(t);for(;r&&n>=i;)o=t.slotIndex+e*i,r=M(t,o),i++;return t.slotIndex===o?void E(t):(O(t,e,i-1),void E(t))}),t.forEach(function(t){B(t),H(t)})}function h(t,e){var n=t.selectAll(".igc-graph-pie-label"),o=t.selectAll(".igc-graph-pie-pointer");n.style("display",function(t,n){return e[n].visible?null:"none"}).style("opacity",null),o.style("display",function(t,n){return e[n].visible?null:"none"}).style("opacity",null)}function f(t,e){return t*Math.cos(e)}function g(t,e){return t*Math.sin(e)}function m(t,e){return{x:f(t,e),y:g(t,e)}}function v(t){return["M",t[0].x,t[0].y,"L",t[1].x,t[1].y,"L",t[2].x,t[2].y].join(" ")}function y(t){return["M",t[0].x,t[0].y,"L",t[1].x,t[1].y,"A",t[2].radius,t[2].radius,0,0,t[2].sweepFlag,t[2].x,t[2].y,"L",t[3].x,t[3].y].join(" ")}function b(t){return(0,d.extendBBox)({x:it.x+t.x,y:it.y+t.y,width:t.width,height:t.height})}function x(t,e){return e.y-t.y}function w(t,e){t.sort(function(t,n){return(n.data.centerAngle-t.data.centerAngle)*e})}function S(t,e){var n=e[t+"Slots"].length,o=e[t],i=o.length,r=[].concat(o);if(w(o,"left"===t?1:-1),!(n>=i)){r.sort(function(t,e){return e.origData.value-t.origData.value});for(var a=i;a--;)r[a].rank=a;for(a=i;a--;)o[a].rank>=n&&o.splice(a,1)}}function C(t,e){var n=e[t],o=n.length,i=e[t+"Slots"],r=i.length,a=[],s=i[0],l=i[r-1];return n.forEach(function(t,e){for(var n=void 0,s=t.bboxTrans.y,l=null!==i[e],u=0,c=99999;r>u;u++){var h=Math.abs(i[u]-s);c>h&&(c=h,n=u)}if(l&&e>n)n=e;else if(l&&o-e+n>r)for(n=r-o+e;null===i[n];)n++;else for(;null===i[n];)n++;a.push({i:n,y:i[n]}),i[n]=null}),a.sort(x),n.forEach(function(n){var o=n.bboxTrans.y,r=a.pop(),u=r.i,c=r.y;(o>c&&null!==i[u+1]||c>o&&null!==i[u-1])&&(c=Math.min(Math.max(s,o),l)),n.slotY=c-it.y,n.slotIndex=u,n.slotsItems=e[t],n.slots=e[t+"Slots"],n.slotsInitial=e[t+"SlotsInitial"]}),a}function E(t){var e=t.node,n=t.origData,o=n.arcmetrics.side,i=-1*(e.getBBox().y+ct/2);-1===o?i>0?(t.quadrant="q2",t.quadrantCounter=dt.q2,dt.q2++):(t.quadrant="q3",t.quadrantCounter=dt.q3,dt.q3++):i>0?(t.quadrant="q1",t.quadrantCounter=dt.q1,dt.q1++):(t.quadrant="q4",t.quadrantCounter=dt.q4,dt.q4++)}function T(t){var e=t.bbox.y+.5*t.bbox.height;return 0>e?-1:1}function k(t){var e=t.node,n=t.slotY,o=t.origData,i=d3.select(e),r=o.arcmetrics.side,a=n+t.baseYOffs,s=Q+pt;i.attr("y",a);var l=r*P(a>0?n:a,s);i.attr("x",l)}function M(t,e){var n=t.slotIndex,o=t.slotsInitial,i=t.node,r=t.origData,a=t.bbox,s=t.baseYOffs,l=r.arcmetrics.side,u=Q+pt,c=d3.select(i),h=o[e]-it.y,p=n===e?parseFloat(c.attr("y")):h+s,d=l*P(p>0?h:p,u);return Math.abs(d+l*a.width)>it.x}function O(t,e,n){for(var o=t.slotIndex,i=t.slotsInitial,r=t.slots,a=t.slotsItems;n;){o+=1*e;var s=null===r[o];s&&O(D(o,a),e,1),r[o]=null,r[t.slotIndex]=i[t.slotIndex],t.slotIndex=o,t.slotY=i[o]-it.y;var l=o+e;null===r[l]&&I(D(l,a),e),k(t),n--}}function I(t,e){var n=t.slotY,o=t.node,i=t.slotIndex,r=t.slots,a=t.slotsInitial,s=t.slotsItems,l=t.baseYOffs,u=d3.select(o),c=a[i]-it.y,h=c!==n,p=i+e;h&&(u.attr("y",c+l),null===r[p]&&I(D(p,s),e))}function P(t,e){var n=t/e;n=n>=0?Math.min(n,1):Math.max(n,-1);var o=Math.asin(n);return Math.cos(o)*e}function L(t,e){var n=t.slotIndex,o=t.slots;return-1===e?o.slice(0,n).filter(function(t){return null!==t}).length:o.slice(n).filter(function(t){return null!==t}).length}function D(t,e){for(var n=e.length,o=0;n>o;o++){var i=e[o];if(i.slotIndex===t)return i}}function A(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function N(t,e){var n=e.shift();return e.forEach(function(e){var o=A(t,e);o<A(t,n)&&(n=e)}),n}function B(t){var e=t.node,n=t.origData,o=t.baseYOffs,i=n.arcmetrics,r=i.centerAngle,a=i.side,s=-1===a?e.getBBox().x+e.getBBox().width:e.getBBox().x,l=(pt-ht)*(t.quadrantCounter/dt[t.quadrant]),u=Q+ht+l,h=m(u,r-c.PIhalf),p={x:0,y:0},d=[{x:s,y:e.getBBox().y},{x:s,y:e.getBBox().y+o/2},{x:s,y:e.getBBox().y+o}],f=N(h,d),g=f,b=d3.select(t.pointerNode),_=A(p,g),x=u/_,w={x:g.x*x,y:g.y*x},S=Math.atan2(-1*w.y,w.x);-1===a&&S===c.PIhalf&&(S+=1e-6),"q1"===t.quadrant&&(S=c.PIhalf-S),"q2"===t.quadrant&&(S=c.PI2-S+c.PIhalf),"q3"!==t.quadrant&&"q4"!==t.quadrant||(S=c.PIhalf+-1*S),w.radius=Q+ht,f=N(w,d);var C=u*Math.abs(S-r)<=10,E=m(n.outerRadius,r-c.PIhalf);return C?b.attr("d",v([E,h,f])):(w.sweepFlag=-1===a?+(w.y-h.y<0):+(w.y-h.y>0),b.attr("d",y([E,h,w,f])))}function j(t){t.on("mousemove",function(t){var e,n,o=(0,d.getMousePosition)(d3.event);e=st(t),n=lt(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.data.color)}).on("mouseout",function(){(0,s["default"])().hide()})}function R(t){var e=(t.endAngle+t.startAngle)/2,n=0>e?e>=-c.PI?-1:1:e>=c.PI?-1:1;return{side:n,centerAngle:e}}function H(t){var e=d3.select(t.node),n=t.node.getBBox(),o=parseFloat(e.attr("x")),i=0>o?-1:1,r=z+"-label-limit-"+(-1===t.origData.arcmetrics.side?"left":"right")+"-"+t.slotIndex,a="#"+r,s=ut.selectAll(a),l=!1;if(l=Math.abs(o+i*n.width)>it.x,s.remove(),l&&1!==i){var u={x:i*it.x,y:n.y,width:it.x-i*o,height:n.height},c=ut.selectAll(a).data([0]).enter().append("clipPath").attr("id",r),h=c.selectAll("path").data([0]).enter().append("path");h.attr("d",p["default"].barToRight(u.x,u.y,u.width,u.height,0)),e.attr("clip-path","url("+a+")").attr("text-anchor","start").attr("x",u.x)}}function F(t,e,n){q.on("highlightStart",function(o,i){z===i&&(t.filter(function(t,e){return o!==e}).transition().duration(150).ease("linear").style("opacity",.3),e.filter(function(t,e){return o!==e&&"none"!==d3.select(this).style("display")}).transition().duration(150).ease("linear").style("opacity",.3),n.filter(function(t,e){return o!==e&&"none"!==d3.select(this).style("display")}).transition().duration(150).ease("linear").style("opacity",.3))}),q.on("highlightEnd",function(o,i){z===i&&(t.filter(function(t,e){return o!==e}).transition().duration(150).ease("linear").style("opacity",1).each("end",function(){d3.select(this).style("opacity",null)}),e.filter(function(t,e){return o!==e&&"none"!==d3.select(this).style("display")}).transition().duration(150).ease("linear").style("opacity",1).each("end",function(){d3.select(this).style("opacity",null)}),n.filter(function(t,e){return o!==e&&"none"!==d3.select(this).style("display")}).transition().duration(150).ease("linear").style("opacity",1).each("end",function(){d3.select(this).style("opacity",null)}))})}var z,V,U,W,G,$=[],K=0,q=d3.dispatch("highlightStart","highlightEnd","animationEnd"),Y=u["default"].prototype.defaults().style.axisTick,Z=0,X=c.PI2,J=0,Q=0,tt=!1,et=0,nt=!1,ot=function(t){return""+t.data.valueLabel},it={x:0,y:0},rt={width:120,height:100},at=d3.svg.arc(),st=function(t){return t.data.categoryLabel},lt=function(t){return U?U.tooltip(t.data.valueLabel):t.data.valueLabel},ut=void 0,ct=13,ht=4,pt=10,dt={q1:0,q2:0,q3:0,q4:0},ft={data:function(e){return arguments.length?($=e,t):$},groupId:function(e){return arguments.length?(V=e,t):V},chartId:function(e){return arguments.length?(z=e,t):z},legend:function(e){return arguments.length?(W=e,t):W},textStyle:function(e){return arguments.length?(Y=e,t):Y},innerRadius:function(e){return arguments.length?(J=e,t):J},outerRadius:function(e){return arguments.length?(Q=e,t):Q},outerRadiusVaries:function(e){return arguments.length?(tt=e,t):Q},showValues:function(e){return arguments.length?(nt=!!e,t):nt},textFormat:function(e){return arguments.length?("function"==typeof e&&(ot=e),t):ot},center:function(e){return arguments.length?(it.x="number"==typeof e.x?e.x:it.x,it.y="number"==typeof e.y?e.y:it.y,t):it},bounds:function(e){return arguments.length?(rt.width="number"==typeof e.width?e.width:rt.width,rt.height="number"==typeof e.height?e.height:rt.height,t):rt},numberFormat:function(e){return arguments.length?(U=e,t):U},tooltipText:function(e){return arguments.length?(st=e,t):st},tooltipValue:function(e){return arguments.length?(lt=e,t):lt},defs:function(e){return arguments.length?(ut=e,t):ut},startAngle:function(e){return arguments.length?(Z=e,t):Z},endAngle:function(e){return arguments.length?(X=e,t):X},dispatch:function(){return q}};return(0,r.injectFunctions)(t,ft),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=i;var r=n(15),a=n(67),s=o(a),l=n(30),u=o(l),c=n(48),h=n(138),p=o(h),d=n(22)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t,e){var n=x,o=n.xScale,i=n.yScale,r=n.regularEdge,a="up"===x.direction,s=3,l=o(t[r?"index":"value"]),u=i(t.index),c=i.rangeBand(),h=o(0),p=a?u:u+c,d=y[e+1],f={top:{},bottom:{}};if(a&&(u+=c),x.singleColor&&(a?p+=2:e&&(u+=2)),d){var g=o(d[r?"index":"value"]);f.top={right:{x:g,y:p},left:{x:2*h-g,y:p}}}else x.zeroEnding?f.top.left=f.top.right={x:h,y:p}:f.top={right:{x:l,y:p},left:{x:2*h-l,y:p}};return f.bottom={left:{x:2*h-l,y:u},right:{x:l,y:u}},f.bottom.width=f.bottom.right.x-f.bottom.left.x,f.top.width=f.top.right.x-f.top.left.x,f.height=c,f.top.width<s&&d&&(f.top.left.x=h-s/2,f.top.right.x=h+s/2,f.top.width=s),f.bottom.width<s&&(f.bottom.left.x=h-s/2,f.bottom.right.x=h+s/2,f.bottom.width=s),
f}function e(t){return t.index}function n(t){var e=x.xScale(0);return S(o(t).map(function(t){return Object({x:e,y:t.y})}))}function o(t){var e=t.top,n=t.bottom;return[e.left,e.right,n.right,n.left]}function i(t){return S(o(t))}function a(t){return{d:function(e,o){return n(t[o])},fill:function(t){return t.color},"class":"entering"}}function c(t,e){return t.select(function(){return this.getAttribute("class")===e?this:null})}function h(){function n(){w--,1>w&&i()}function o(){S--,1>S&&r()}function i(){v=d(h,u),g(m),v&&v.size()&&g(v)}function r(){s()}function s(){var t=x.transitionDuration;w?b.transition().duration(t).ease("elastic").delay(function(t,e){return 50*e}).attr(p(u)).each("end",n):i()}function l(){S?_.transition().duration(x.transitionDuration).attr(p(u)).each("end",o):r()}if(!y.length)return void C.animationEnd();var u=y.map(t),h=d3.select(this),f=h.selectAll("path"),m=f.data(y,e),v=void 0;m.enter().append("path").attr(a(u)),m.exit().remove(),f.transition().duration(0);var b=c(m,"entering"),_=c(m,"entered"),w=b.size(),S=_.size();l(),v=d(h,u)}function p(t){return{fill:function(t){return t.color},d:function(e,n){return i(t[n])},"class":"entered"}}function d(t,n){function o(t,e){var o=n[e],i=o.top,r=o.bottom,u=s[e],c=(i.width+r.width)/2,h=c>u.width+5,p=a(0),d=5,f=void 0;return h?f=l.Colors.getContrastYIQ(t.color,x.textStyle.color,"#FFF"):(f=t.color,p+=c/2+d+u.width/2),{fill:f,anchor:h?"middle":"left",x:p}}var i=x,r=i.yScale,a=i.xScale,s=(0,u.getAllTextDimensions)(y.map(function(t){return t.rawValue}),t,x.textStyle),c=r.rangeBand(),h=x.showValues&&Math.abs(c)>s[0].height,p=void 0;return h?!function(){var n=y.map(o),i=t.selectAll("text");p=i.data(y,e),p.transition().duration(0),p.text(function(t){return b?b.format(t.rawValue):t.rawValue}).style("cursor","default").style(x.textStyle),p.exit().remove(),p.enter().append("text").attr({"text-anchor":"middle","dominant-baseline":"central"}),0===p.size()&&E(),p.transition().duration(x.transitionDuration).attr({x:function(t,e){return n[e].x},y:function(t){return r(t.index)+c/2},fill:function(t,e){return n[e].fill}}).each("start",function(){w++}).each("end",function(){0===--w&&E()})}():(t.selectAll("text").remove(),E()),p}function f(t){t.each(h)}function g(t){t.on("mousemove",function(t){var e,n,o=(0,u.getMousePosition)(d3.event);e=x.tooltipText(t),n=x.tooltipValue(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color)}).on("mouseout",function(){(0,s["default"])().hide()})}var m=void 0,v=void 0,y=void 0,b=void 0,x={},w=0,S=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear-closed"),C=d3.dispatch("animationEnd"),E=_.after(2,C.animationEnd);return(0,r.injectFunctions)(f,{groupId:function(t){return arguments.length?(v=t,f):v},chartId:function(t){return arguments.length?(m=t,f):m},setup:function(t){return arguments.length?(x=_.extend(t),f):x},numberFormat:function(t){return arguments.length?(b=t,f):b},data:function(t){return arguments.length?(y=t,f):y},dispatch:function(){return C}}),f}Object.defineProperty(e,"__esModule",{value:!0}),e.Pyramid=i;var r=n(15),a=n(67),s=o(a),l=n(66),u=n(22)},function(t,e,n){"use strict";function o(t){-1===g.indexOf(t)&&g.push(t),d||(d=setInterval(r,1e3))}function i(){g.forEach(function(t,e){t.active&&document.body.contains(t.options.node[0])||(t.active=!1,g.splice(e,1))})}function r(){10===v++&&(i(),v=0),g.forEach(function(t){t.active&&t.render()})}function a(t,e){return"igc-timer-"+t+(e?" igc-timer-transition":"")}function s(t){return String(t).length>=2?t:("0000"+t).substr(-2)}function l(t){var e,n=t.slice(),o=t.length;for(e=0;o>e&&"hours"!==t[e].name&&(!t[e]||!t[e].value);e++)n=t.slice(e+1);return n}function u(t,e){var n={};return m.forEach(function(o){var i=e.diff(t,o);t.add(i,o),n[o]={value:i,name:o}}),n}function c(t){var e={};return m.forEach(function(n,o){e[n]={value:t[o],name:n}}),e}function h(t){var e,n;return n=l(m.map(function(e){return t[e]})),e=n.splice(-3),[{group:"date",data:n},{group:"time",data:e}]}function p(t){this.configure(t),this.shouldLayout=!0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=p;var d,f=n(22),g=[],m=["years","months","days","hours","minutes","seconds"],v=0;p.prototype.update=function(t){this.configure(t),this.shouldLayout=!0,this.prevTime=null,this.start()},p.prototype.configure=function(t){this.options=_.merge(this.options||{},{width:parseFloat(window.getComputedStyle(t.node[0]).getPropertyValue("width")),colors:{digit:"#000",text:"#666"}},t)},p.prototype.start=function(){this.render(),this.options.animate&&"asis"!==this.options.mode?(o(this),this.active=!0):this.active=!1},p.prototype.render=function(){var t,e=this.options.time,n=this.options.mode;switch(n){case"up":t=this.getUnitsToCountUpFrom(e);break;case"down":t=this.getUnitsToCountDownTo(e);break;case"asis":t=this.getUnitsForFixedTime(e)}(0,f.requestAnimationFrame)(this.renderUnits.bind(this,t))},p.prototype.getUnitsToCountUpFrom=function(t){var e,n=moment(new Date),o=moment(t);return e=n>o?u(o,n):c([0,0,0,0,0,0]),this.translateUnitNames(e)},p.prototype.getUnitsToCountDownTo=function(t){var e,n=moment(new Date),o=moment(t);return e=o>n?u(n,o):c([0,0,0,0,0,0]),this.translateUnitNames(e)},p.prototype.getUnitsForFixedTime=function(t){var e,n=moment(t);return e=n.isValid()?[n.year(),n.month()+1,n.date(),n.hours(),n.minutes(),n.seconds()]:[0,0,0,0,0,0],this.translateUnitNames(c(e))},p.prototype.translateUnitNames=function(t,e){var n={},o=e||this.options.units||m;return m.forEach(function(e,i){n[e]=t[e],n[e].title=o[i]}.bind(this)),n},p.prototype.getRootStyle=function(){var t={};return this.options.font&&(t["font-family"]=this.options.font),t},p.prototype.checkIfSplit=function(t){var e,n=t[0],o=t[1];return n[0]&&o[0]&&!this.dontShowTime?e=(n&&n[0]&&n[0].getBoundingClientRect().top)!==(o&&o[0]&&o[0].getBoundingClientRect().top):!1},p.prototype.getClassAttr=function(t){var e=["igc-root","igc-timer"];return e.push("igc-timer-"+this.options.mode),this.options.width<200?e.push("igc-timer-xsmall"):this.options.width<300?e.push("igc-timer-small"):this.options.width<420&&e.push("igc-timer-medium"),this.shouldLayout&&e.push("igc-timer-should-layout"),this.isSplit&&e.push("igc-timer-is-split"),(""+t.years.value).length>2&&e.push("igc-timer-longyear"),this.dontShowTime&&e.push("igc-timer-no-time"),e.join(" ")},p.prototype.renderItemHtml=function(){var t=_.template("<span class='igc-timer-value' style='color: <%= colors.digits %>'><%= value %></span><span class='igc-timer-title' style='color: <%= colors.text %>'><%= title %></span>");return function(e){return t({colors:this.options.colors,value:s(e.value),title:e.title})}}(),p.prototype.setSecondWidth=function(){var t=this.options.node[0].querySelector(".igc-timer-seconds"),e=parseFloat(window.getComputedStyle(t).getPropertyValue("width"))||30;t.style.width=e+"px"},p.prototype.renderUnits=function(t){var e,n,o,i=h(t),r=this.options.animate;this.shouldLayout&&(this.dontShowTime="asis"===this.options.mode&&!t.hours.value&&!t.minutes.value&&!t.seconds.value,this.classAttr=this.getClassAttr(t)),e=d3.select(this.options.node[0]).select(".igc-root").attr("class",this.classAttr).style(this.getRootStyle()).selectAll("div.igc-timer-group").data(i),e.enter().append("div").attr("class",function(t){return"igc-timer-group igc-timer-group-"+t.group}),n=e.selectAll("div").data(function(t){return t.data}),n.enter().append("div").html(this.renderItemHtml.bind(this)),n.exit().remove(),o=n.filter(function(t){return this.prevTime?this.prevTime[t.name].value!==t.value:!0}.bind(this)).attr("class",function(t){return a(t.name,r)}).html(this.renderItemHtml.bind(this)),r&&setTimeout(function(){o.attr("class",function(t){return a(t.name,!1)})},0),this.prevTime=t,this.shouldLayout&&(this.isSplit=this.checkIfSplit(n,t),this.shouldLayout=!1,this.classAttr=this.getClassAttr(t),this.render(),this.setSecondWidth())}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){if(S.length&&0!==E.width&&0!==E.height){var t=d3.select(this),n=d3.layout.treemap().mode(B).size([E.width,E.height]).sticky(!0).value(function(t){return t.sizeAbs}).sort(M),o=f(S);t.style("position","relative");var i=t.datum(o).selectAll(".igc-treemap-node").data(n.nodes),r=i.enter(),a=0===i.size()&&i.size()<r.size();r=r.append("div"),a||(L-=150),i.call(function(){this.each(function(t){t.color=0===t.depth?null:t.color})}),i.call(h),i.attr("class","igc-treemap-node").style("background-color",function(t){return t.color}).call(p).call(d);var s=i.selectAll(".igc-treemap-node-text").data(function(t){return[t]});s.enter().append("div").attr("class","igc-treemap-node-text"),s.style("visibility","hidden");var l=s.selectAll(".igc-treemap-node-text-name").data(function(t){return[t]});l.enter().append("span").attr("class","igc-treemap-node-text-name"),l.call(e,function(t){return t.categoryLabel},"name");var c=s.selectAll("br").data(function(t){return O?[t]:[]});c.enter().append("br"),c.exit().remove();var g=s.selectAll(".igc-treemap-node-text-value").data(function(t){return O?[t]:[]});g.enter().append("span").attr("class","igc-treemap-node-text-value"),g.call(e,function(t){return y?y.format(t.valueLabel,{keepDecimals:!0}):t.valueLabel},"value"),g.exit().remove(),R.name=u.Text.lineHeight(s.select(".igc-treemap-node-text-name").node()),O&&(R.value=u.Text.lineHeight(s.select(".igc-treemap-node-text-value").node())),i.exit().remove()}})}function e(t,e,n){t.style("color",function(t){var e=k[n];return 0===t.depth?null:"contrast"===e.colorMethod?u.Colors.getContrastYIQ(t.color,e.colorDark,e.colorLight):e.color}).style("font-size",null).text(e)}function n(t,e){return e.height<=t.height&&e.width<=t.width}function o(t){var e={width:this.clientWidth,height:this.clientHeight},n={width:Math.max(0,Math.round(this.clientWidth-j.left-j.right)),height:Math.max(0,Math.round(this.clientHeight-j.top-j.bottom))},o=this.childNodes[0],i=new x({padding:j,dimensions:n,node:o,dnode:d3.select(o),d:t,textPosition:k.position});i.nameItem=new w({node:o.childNodes[0],dnode:d3.select(o.childNodes[0]),d:t,padding:j,parentBox:e,parentBoxInner:n,textPosition:k.position,defaultLineHeight:R.name,parent:i}),o.childNodes[2]&&(i.valueItem=new w({node:o.childNodes[2],dnode:d3.select(o.childNodes[2]),d:t,padding:j,parentBox:e,parentBoxInner:n,textPosition:k.position,defaultLineHeight:R.value,parent:i})),a(i)}function a(t,e){var o,i,r,s,l,u,h=t.nameItem,p=t.valueItem,d={width:t.dimensions.width,height:t.dimensions.height};return e&&t.rotate(!0),t.align(),t.resetItems(),o=t.getTextDimensions(),n(d,o)?void t.position():(r=d.width/o.width,s=d.height/o.height,i=s>r?r:s,l=Math.floor(h.lineHeight*i),h.setLineHeight(l),h.fontSize<I&&h.setFontSize(I),p&&h.fontSize<p.fontSize&&(u=h.lineHeight/p.lineHeight,p.setLineHeight(c.math.preciseNumber(u*p.lineHeight)),o=t.getTextDimensions(),(p.fontSize<I||!n(d,o))&&p.setFontSize(I)),o=t.getTextDimensions(),n(d,o)?void t.position():e?void 0:a(t,!0))}function h(){function t(t,e){return Math.pow(t.x-0,2)+Math.pow(t.y-0,2)<Math.pow(e,2)}function e(o,i,r){var a,s;if(o.length&&!(i>n)){for(s=o.length-1;s>=0;s-=1)a=o[s],t(a,i)&&(0===a.depth?a.tord=0:(a.tord=r,r++),o.splice(s,1));e(o,++i,r)}}var n=Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2)),o=[],i=0;this.each(function(t){o.push(t)}),e(o,0,i)}function p(){function t(t,e){return e=e||.5,Math.max(0,t-1)*e}this.style("width",function(){return"0px"}).style("height",function(){return"0px"}).style("left",function(e){return C.left+e.x+1+t(e.dx)+"px"}).style("top",function(e){return C.top+e.y+1+t(e.dy)+"px"})}function d(){var t=this;this.transition().duration(L).delay(P).style("left",function(t){return C.left+t.x+1+"px"}).style("top",function(t){return C.top+t.y+1+"px"}).style("width",function(t){return Math.max(0,t.dx-1)+"px"}).style("height",function(t){return Math.max(0,t.dy-1)+"px"}).each("start",function(t){0!==t.depth&&T++}).each("end",function(e){0!==e.depth&&(o.call(this,e),0===--T&&(g(t),N.animationEnd()))})}function f(t){var e={categoryLabel:"",sizeAbs:0,children:[]};return t.forEach(function(t,n){t.noneOrd=n,e.children.push(_.merge({},t))}),e}function g(t){t.on("mousemove",function(t){var e,n,o;0!==t.depth&&(o=(0,l.getMousePosition)(d3.event),e=D(t),n=A(t),(0,s["default"])().setText(e).setValue(n).setPosition(o,t.color))}).on("mouseout",function(){(0,s["default"])().hide()})}var m,v,y,b=i.LabelPositions,x=i.Label,w=i.LabelItem,S=[],C={x:0,y:0},E={width:0,height:0},T=0,k={position:b.CENTER,name:{colorMethod:"normal",color:"#ffffff"},value:{colorMethod:"normal",color:"#ffffff"}},M=i.SortFns.none,O=!1,I=11,P=0,L=700,D=function(t){return t.categoryLabel},A=function(t){return t.sizeAbs},N=d3.dispatch("animationEnd"),B="squarify",j={top:5,right:5,bottom:5,left:5},R={name:null,value:null},H={data:function(e){return arguments.length?(S=e,t):S},groupId:function(e){return arguments.length?(v=e,t):v},chartId:function(e){return arguments.length?(m=e,t):m},showValues:function(e){return arguments.length?(O=!!e,t):O},tooltipText:function(e){return arguments.length?(D=e,t):D},tooltipValue:function(e){return arguments.length?(A=e,t):A},bounds:function(e){return arguments.length?(E.width="number"==typeof e.width?e.width:E.width,E.height="number"==typeof e.height?e.height:E.height,t):E},offset:function(e){return arguments.length?(C.left="number"==typeof e.left?e.left:C.left,C.top="number"==typeof e.top?e.top:C.top,t):C},labelOptions:function(e){return arguments.length?(k=_.merge(k,e),t):k},sort:function(e){return arguments.length?(M=-1===_.keys(i.SortFns).indexOf(e)?M:i.SortFns[e],t):M},transitionDelay:function(e){return arguments.length?(P=e,t):P},transitionDuration:function(e){return arguments.length?(L=e,t):L},numberFormat:function(e){return arguments.length?(y=e,t):y},dispatch:function(){return N},layout:function(e){return arguments.length?(B=-1===_.values(i.Layout).indexOf(e)?B:e,t):B}};return(0,r.injectFunctions)(t,H),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Treemap=i;var r=n(15),a=n(67),s=o(a),l=n(22),u=n(66),c=n(48);i.LabelPositions={NORTH:"north",NORTH_EAST:"north-east",EAST:"east",SOUTH_EAST:"south-east",SOUTH:"south",SOUTH_WEST:"south-west",WEST:"west",NORTH_WEST:"north-west",CENTER:"center"},i.Layout={SQUARIFY:"squarify",DICE:"dice",SLICE:"slice"},i.SortFns={none:function(t,e){return d3.ascending(t.noneOrd,e.noneOrd)},asc:function(t,e){return d3.descending(t.size,e.size)},desc:function(t,e){return d3.ascending(t.size,e.size)}},i.Label=function(t){return _.keys(t).forEach(function(e){this[e]=t[e]}.bind(this)),this.initialize(),this},i.Label.prototype={initialize:function(){this.dnode.style({width:this.dimensions.width+"px",height:this.dimensions.height+"px",top:this.padding.top+"px",left:this.padding.left+"px","padding-top":null,"text-align":null,visibility:"hidden"}),this.dnode.classed("rotate",!1)},rotate:function(t){var e=this.dimensions.width,n=this.dimensions.height,o=this.padding.top;t=!!t,t&&(e=this.dimensions.height,n=this.dimensions.width,o+=e),this.dnode.classed({rotate:t}),this.dnode.style({width:e+"px",height:n+"px",top:o+"px"})},getTextDimensions:function(){var t=this.dnode.classed("rotate"),e=this.nameItem,n=this.valueItem,o={},i="width",r="height";return t&&(i="height",r="width"),o[i]=e[i],o[r]=e[r],n&&(o[i]=Math.max(e[i],n[i]),o[r]+=n[r]),o},align:function(){var t=this.dnode.classed("rotate"),e=i.LabelPositions,n=this.textPosition,o=null,r=this.cardinalPoints;t&&(r=this.cardinalPointsRotated),n!==e[r("CENTER")]&&n!==e[r("SOUTH")]&&n!==e[r("NORTH")]||(o="center"),n!==e[r("NORTH_EAST")]&&n!==e[r("SOUTH_EAST")]&&n!==e[r("EAST")]||(o="right"),n!==e[r("NORTH_WEST")]&&n!==e[r("WEST")]&&n!==e[r("SOUTH_WEST")]||(o="left"),this.dnode.style("text-align",o)},cardinalPointsRotated:function(t){var e={CENTER:"CENTER",NORTH:"WEST",NORTH_EAST:"NORTH_WEST",EAST:"NORTH",SOUTH_EAST:"NORTH_EAST",SOUTH:"EAST",SOUTH_WEST:"SOUTH_EAST",WEST:"SOUTH",NORTH_WEST:"SOUTH_WEST"};return e[t]},cardinalPoints:function(t){var e={CENTER:"CENTER",NORTH:"NORTH",NORTH_EAST:"NORTH_EAST",EAST:"EAST",SOUTH_EAST:"SOUTH_EAST",SOUTH:"SOUTH",SOUTH_WEST:"SOUTH_WEST",WEST:"WEST",NORTH_WEST:"SOUTH_WEST"};return e[t]},position:function(){var t=i.LabelPositions,e=this.dnode.classed("rotate"),n=null,o=this.textPosition,r="height",a=this.cardinalPoints;e&&(a=this.cardinalPointsRotated,r="width"),o!==t[a("CENTER")]&&o!==t[a("WEST")]&&o!==t[a("EAST")]||(n=(this.dimensions[r]-this.getTextDimensions()[r])/2),o!==t[a("SOUTH")]&&o!==t[a("SOUTH_EAST")]&&o!==t[a("SOUTH_WEST")]||(n=this.dimensions[r]-this.getTextDimensions()[r]),this.dnode.style({"padding-top":null===n||0===n?null:n+"px",visibility:null})},resetItems:function(){this.nameItem.reset(),this.valueItem&&this.valueItem.reset()}},i.LabelItem=function(t){return _.keys(t).forEach(function(e){this[e]=t[e]}.bind(this)),this.reset(),this},i.LabelItem.prototype={reset:function(){var t;this.dnode.style({"font-size":null}),t=this.node.getBoundingClientRect(),this.height=t.height,this.width=t.width,this.lineHeight=this.defaultLineHeight,this.fontSize=Number(this.dnode.style("font-size").replace("px",""))},setLineHeight:function(t){var e=c.math.preciseNumber(this.fontSize/this.lineHeight);this.dnode.style("font-size",c.math.preciseNumber(e*t)+"px"),this.update()},setFontSize:function(t){this.dnode.style("font-size",t+"px"),this.update()},update:function(){var t=this.node.getBoundingClientRect();this.height=t.height,this.width=t.width,this.lineHeight=u.Text.lineHeight(this.node),this.fontSize=Number(this.dnode.style("font-size").replace("px",""))}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){function t(t){t.each(function(){function t(t,i){var r=o.selectAll(".igc-wc-node").data(t),a=r.enter();a=a.append("text").attr("text-anchor","middle").attr("class","igc-wc-node"),r.call(e),o.call(n,i),r.transition().duration(x).delay(b).style("opacity",1).each("start",function(){v++}).each("end",function(){0===--v&&(s(r),S.animationEnd())}),r.exit().remove()}var o=d3.select(this);if(!f.length)return o.selectAll(".igc-wc-node").remove(),void S.animationEnd();if(0===m.width||0===m.height)return void S.animationEnd();C=g.left+(m.width>>1),E=g.top+(m.height>>1),f=f.slice(0).sort(function(t,e){return e.sizeAbs-t.sizeAbs});var i=f.length,r=d3.scale.linear().range([5,40]).domain([+f[i-1].sizeAbs||1,+f[0].sizeAbs]);(0,h["default"])().size([m.width,m.height]).startPoint([m.width/2,m.height/2]).padding(1).spiral("archimedean").rotate(y).font(w.fontFamily).fontStyle(w.fontStyle).fontWeight(w.fontWeight).fontSize(function(t){return r(t.sizeAbs)}).text(function(t){return t.categoryLabel}).on("end",t).stop().words(f).start()})}function e(t){t.style("font-size",function(t){return t.size+"px"}).style({"font-family":w.fontFamily,"font-weight":w.fontWeight,"font-style":w.fontStyle}).text(function(t){return t.text}).attr("fill",function(t){return t.color}).attr("transform",function(t){return"translate("+[t.x+C,t.y+E]+") rotate("+t.rotate+")"}).style("opacity",r.eps)}function n(t){var e,n,i,a=t.node().getBBox(),s=m.width,l=m.height,u=r.math.fitToSize(a.width,a.height,s,l),c=u.width/a.width,h="scale("+c+")";t.attr("transform",h),i=o(t.node()),e=g.left-i.x+(s-i.width)/2,n=g.top-i.y+(l-i.height)/2,t.attr("transform","translate("+[e,n]+") "+h)}function o(t){var e=t.getBBox(),n=t.ownerSVGElement,o=t.getTransformToElement(t.parentNode),i={x:e.x,y:e.y,width:e.width,height:e.height},r=[n.createSVGPoint(),n.createSVGPoint(),n.createSVGPoint(),n.createSVGPoint()];r[0].x=e.x,r[0].y=e.y,r[1].x=e.x+e.width,r[1].y=e.y,r[2].x=e.x+e.width,r[2].y=e.y+e.height,r[3].x=e.x,r[3].y=e.y+e.height;var a=1/0,s=-(1/0),l=1/0,u=-(1/0);return r.forEach(function(t){t=t.matrixTransform(o),a=Math.min(a,t.x),s=Math.max(s,t.x),l=Math.min(l,t.y),u=Math.max(u,t.y)}),i.x=a,i.width=s-a,i.y=l,i.height=u-l,i}function s(t){t.on("mousemove",function(t){var e,n,o;0!==t.depth&&(o=(0,u.getMousePosition)(d3.event),e=T(t),n=k(t),(0,l["default"])().setText(e).setValue(n).setPosition(o,t.color))}).on("mouseout",function(){(0,l["default"])().hide()})}var c,p,d=i.TextDirection,f=[],g={x:0,y:0},m={width:0,height:0},v=0,y=d.horizontalVertical,b=0,x=700,w={fontFamily:"serif",fontStyle:"normal",fontWeight:"normal"},S=d3.dispatch("animationEnd"),C=0,E=0,T=function(t){return t.categoryLabel},k=function(t){return t.sizeAbs},M={data:function(e){return arguments.length?(f=e,t):f},groupId:function(e){return arguments.length?(p=e,t):p},chartId:function(e){return arguments.length?(c=e,t):c},bounds:function(e){return arguments.length?(m.width="number"==typeof e.width?e.width:m.width,m.height="number"==typeof e.height?e.height:m.height,t):m},offset:function(e){return arguments.length?(g.left="number"==typeof e.left?e.left:g.left,g.top="number"==typeof e.top?e.top:g.top,t):g},transitionDelay:function(e){return arguments.length?(b=e,t):b},transitionDuration:function(e){return arguments.length?(x=e,t):x},dispatch:function(){return S},textDirection:function(e){return arguments.length?(y=e in d?d[e]:y,t):y},labelOptions:function(e){return arguments.length?(w=_.merge(w,e),t):w},tooltipText:function(e){return arguments.length?(T=e,t):T},tooltipValue:function(e){return arguments.length?(k=e,t):k}};return(0,a.injectFunctions)(t,M),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Wordcloud=i;var r=n(48),a=n(15),s=n(67),l=o(s),u=n(22),c=n(742),h=o(c);i.TextDirection={horizontal:0,vertical:-90,horizontalVertical:function(t,e){return e%2?-90:0},any:function(t,e){return e%2?-45:45}}},function(t,e,n){"use strict";function o(){function t(i){i.each(function(){var i=d3.select(this);i.style({width:o+"px","margin-left":n.left+"px"});var u=i.selectAll(".igc-legend-entry").data(e);u.exit().remove();var c=u.enter().append("div").attr("class","igc-legend-entry");c.append("span").attr("class","igc-legend-ico"),c.append("span").attr("class","igc-legend-label");var h=d3.rgb(a.color),p=d3.rgb(a.color);p.a=.7,h=r.Colors.rgbaToString(h),p=r.Colors.rgbaToString(p),u.on("mouseover",function(e,n){var o=_.has(e,"groupId")?e.groupId:n;d3.select(this).select(".igc-legend-label").style("color",h),t.sendListeners(o,l,"highlightStart")}).on("mouseout",function(e,n){var o=_.has(e,"groupId")?e.groupId:n;d3.select(this).select(".igc-legend-label").style("color",p),t.sendListeners(o,l,"highlightEnd")}),u.style("max-width",s.width+"px");var d=i.selectAll(".igc-legend-ico").data(e);d.style("background-color",function(t){return t.color});var f=i.selectAll(".igc-legend-label").data(e);f.text(function(t){return t.title}).style(a).style("color",p).style("height",s.label.height+"px").style("max-width",s.label.width+"px")})}var e=[],n={left:0,top:0},o=300,a={},s=null,l=1,u={},c="",h={data:function(n){return arguments.length?(e=n,t):e},offset:function(e){return arguments.length?(n.left="number"==typeof e.left?e.left:n.left,n.top="number"==typeof e.top?e.top:n.top,t):n},width:function(e){return arguments.length?(o=e,t):o},style:function(e){return arguments.length?(a=e,t):a},textMetrics:function(e){return arguments.length?(s=e,t):s},chartId:function(e){return arguments.length?(l=e,t):l},chartType:function(e){return arguments.length?(c=e,t):c},addListener:function(e){return arguments.length?(u[e.id]||(u[e.id]=[]),u[e.id].push(e.dispatch),t):t},sendListeners:function(e,n,o){var i=u[n+"_"+e];return"undefined"==typeof i&&(i=u[n]),i&&0!==i.length?(i.forEach(function(t){t[o](e,n,c)}),t):void 0}};return(0,i.injectFunctions)(t,h),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Legend=o;var i=n(15),r=n(66)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return t.insert("span",".igc-root").style(e).style("white-space","nowrap").style("line-height",1).style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px")}function r(){function t(){if(c){0===a&&(a=n),a>n&&(a=n);var t=i(c,o),s=(0,l.measureTextHtml)(e,t.node()),u=d3.max(s,function(t){return t.height});return t.remove(),{width:a,label:{width:a-r,height:u+u/4}}}}var e=[],n=300,o=s["default"].prototype.defaults().style.legend,r=0,a=0,c=void 0,h={texts:function(n){return arguments.length?(e=n.slice(0),t):e},width:function(e){return arguments.length?(n=e,t):n},style:function(e){return arguments.length?(o=e,t):o},reservedSize:function(e){return arguments.length?(r=e,t):r},maxTextWidth:function(e){return arguments.length?(a=e,t):a},parentContainer:function(e){return arguments.length?(c=e,t):c}};return(0,u.injectFunctions)(t,h),t}Object.defineProperty(e,"__esModule",{value:!0}),e.TextItemMetrics=r;var a=n(30),s=o(a),l=n(22),u=n(15)},function(t,e){"use strict";SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())},"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t})},function(t,e){"use strict";function n(){function t(e,n){function o(t){return s[((a.get(t)||NaN)-1)%s.length]}function i(t,n){return d3.range(e.length).map(function(e){return t+n*e})}function r(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}var a,s,l,u;return o.domain=function(t){if(!arguments.length)return e;e=[],a=d3.map({});for(var i,r=-1,s=t.length;++r<s;)a.has(i=t[r])||a.set(i,e.push(i));return o[n.t].apply(o,n.a)},o.range=function(){return arguments.length?o:s},o.rangeBandsByWidth=function(t,i,r){u=i||0,r=r||0;var a=e.length,c=[],h=0,p=1;for(h+=r,c.push(h),l=t;a>p;)h+=l+u,c.push(h),p++;return s=c,n={t:"rangeBandsByWidth",a:arguments},o},o.rangeBands=function(t){u=arguments.length<2?0:arguments[1];var r=arguments.length<3?0:arguments[2],a=t[1]<t[0],c=t[a-0],h=t[1-a],p=[c,h],d=e.length,f=c,g=1===p.length?p[0]:p[1],m=1,v=[];if(0===d||c===g)return s=[],l=0,u=0,o;var y=g-c,b=y;r&&(b-=2*r,f+=r),l=(b-(d-1)*u)/d;var _,x=.1;if(u>l)_=y/(d-x),s=i(c,_),l=_*(1-x),u=_*x;else{for(v.push(f);d>m;)f+=l+u,v.push(f),m++;s=v}return a&&s.reverse(),n={t:"rangeBands",a:arguments},o},o.rangeBandsFixed=function(t,r){var a=t[1]<t[0],c=t[a-0],h=t[1-a],p=h-c,d=e.length,f=void 0,g=void 0;1>r&&(r=1);var m=r*d;m>p&&(r=(p-2*d)/d),r=Math.floor(r),m=r*d,l=r,g=p-m,u=Math.floor(g/d);var v=g/d-u;isFinite(u)||(u=0),f=l+u;var y=Math.floor(.5*u+v*d*.5);return y%2!==0&&(y-=1),s=i(c+y,f),a&&s.reverse(),n={t:"rangeBandsFixed",a:arguments},o},o.rangeBandsPct=function(t,r,a){r=r||.618;var c=t[1]<t[0],h=t[c-0],p=t[1-c],d=Math.floor(p-h),f=e.length;1===f&&(a=!1);var g=void 0,m=void 0,v=Math.floor(d*r);l=v/f,1>l&&(l=1),l=Math.floor(l),v=l*f,m=d-v;var y=f-(a?1:0);u=m/y,isFinite(u)||(u=0),u=Math.floor(u);var b=m-y*u,_=a?Math.floor(.5*b):Math.floor(.5*(b+u));return g=l+u,s=i(h+_,g),c&&s.reverse(),n={t:"rangeBandsPct",a:arguments},o},o.rangeBandsCentered=function(t,r,a){arguments.length<3&&(a=0),arguments.length<2&&(r=40);var c,h,p=t[1]<t[0],d=t[p-0]+a,f=t[1-p]-a,g=f-d,m=.15,v=!1,y=e.length,b=y-1;return l=g/y,l>1&&(l=Math.floor(l)),l>r&&(l=r,v=!0),c=g-l*y,u=v?c/2/b*m:c/b,isFinite(u)||(u=0),h=l+u,d+=v?(c-u*b)/2:0,s=i(d,h),p&&s.reverse(),n={t:"rangeBandsCentered",a:arguments},o},o.rangeBand=function(){return l},o.rangeExtent=function(){return r(n.a[0])},o.padding=function(){return u},o.copy=function(){return t(e,n)},o.domain(e)}return t([],{t:"rangeBandsCentered",a:[[]]})}Object.defineProperty(e,"__esModule",{value:!0}),e.Ordinal=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={create:function(){},remove:function(){}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Colors={getContrastYIQ:function(t,e,o){var i="#000000",r="#ffffff";e=e||i,o=o||r;var a=n.getYIQ(e),s=n.getYIQ(o),l=n.getYIQ(t);return a>=128&&(e=i),128>s&&(o=r),l>=128?e:o},getYIQ:function(t){var e=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),o=parseInt(t.substr(5,2),16);return(299*e+587*n+114*o)/1e3},rgbaToString:function(t){return t.hasOwnProperty("a")?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":"rgb("+t.r+","+t.g+","+t.b+")"},rgbStrToRgbaStr:function(t,e){var o=d3.rgb(t);return o.a=e,n.rgbaToString(o)}}},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return new c}Object.defineProperty(e,"__esModule",{value:!0}),e.Measure=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e.TextMetric=r;var s=n(432),l=n(22),u=n(48),c=function(){function t(){i(this,t),this.props={style:null,text:[],limit:{},metrics:{}}}return a(t,[{key:"parent",value:function(t){return this.props.parent=d3.select(t),this}},{key:"style",value:function(t){return this.props.style=t,this}},{key:"text",value:function(t){return this.props.text=t.slice(0),this}},{key:"limit",value:function(t){return Object.assign(this.props.limit,t),this}},{key:"clear",value:function(){return this.props.metrics={},this}},{key:"clearMultiline",value:function(){return delete this.props.metrics.wrapped,this}},{key:"run",value:function(){var t=this.props,e=t.limit,n=t.parent;return n?(this.measureText(),Object.keys(e).length&&this.measureTextMultiline(),this):void 0}},{key:"out",value:function(){return _.clone(this.props.metrics)}},{key:"measureText",value:function(){var t=this.props,e=t.metrics,n=t.text,o=t.parent,i=t.style,r=t.limit;e.text||(e.text=(0,l.getAllTextDimensions)(n,o,i),e.lineHeight=e.text.max.height,e.baseLineOffset=e.text.max.baseLineOffset,e.limit=_.clone(r))}},{key:"measureTextMultiline",value:function(){var t=this.props,e=t.metrics,n=t.text,o=t.parent,i=t.style,r=t.limit;if(!e.wrapped){e.wrapped=h.wrappedText(o,r.width,n,i,e.lineHeight);var a=e.wrapped.hasHeightLimit=Object.prototype.hasOwnProperty.call(r,"height");if(a){for(var s=e.wrapped.maxLines;s*e.lineHeight>r.height;)s--;e.wrapped.linesFit=s,e.wrapped.linesFitHeight=e.lineHeight*s,e.wrapped.widthByLines=r.width*s}e.wrapped.fits=!a||e.wrapped.height<=r.height}}}]),t}(),h=e.Measure={wrappedText:function(t,e,n,i,r){var a=[],c=void 0;return a.width=0,a.height=0,a.maxLines=0,void 0===r&&(r=(0,l.getTextDimensions)(n,t,i).height),c=t.selectAll(".fm-text-tick").data(n),c.enter().append("text").attr("class","fm-text-tick"),c.style(i),c.text(function(t){return t}).attr("x",0).attr("y",0).attr("text-anchor","end").style("opacity",u.eps),s.Text.wrap(c,e,r),c[0].reduce(function(t,e,n){var i=e.getBBox(),r=Math.ceil(i.width),a=Math.ceil(i.height);t.width=Math.max(t.width,r),t.height=Math.max(t.height,a);var s=t[n]=[];s.width=r,s.height=a,s.widths=[];var l=[].concat(o(e.childNodes));return l.forEach(function(t){s.push(d3.select(t).text()),s.widths.push(t.getComputedTextLength())}),t.maxLines=Math.max(t.maxLines,s.length),t},a),a.first=a[0],a.last=a[a.length-1],c.remove(),a}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function a(t){return t=r(Math.abs(t)),t?t[1]:NaN}function s(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(e)/3)))-a(Math.abs(t)))}function l(t){return Math.max(0,-a(Math.abs(t)))}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o);
}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=n(431),h=o(c),p=function(){function t(e){i(this,t),this.config=e,this.format=this.format.bind(this),this.tooltip=this.tooltip.bind(this),this.value=this.value.bind(this),this.tick=this.tick.bind(this),void 0!==e.decimal&&".,"!==e.decimal||(e.decimal="."),e.numberParser?this.numberParser=e.numberParser:this.numberParser=new h["default"](h["default"].PARSERS.firstNumber,e.decimal),this.prefixTranslate={G:"B"},this.locale=d3.locale({decimal:e.decimal,thousands:void 0===e.grouping?",":e.grouping,grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})}return u(t,[{key:"getScaleInfo",value:function(t){if(this.hasScaleChanged(t)){var e=t.ticks(),n=d3.max(e);return this._cachedScaleInfo={step:Math.abs(e[1]-e[0]),prefix:d3.formatPrefix(n),max:n}}return this._cachedScaleInfo}},{key:"hasScaleChanged",value:function(t){var e=void 0;return e=this._scale?!(this._scale===t):!0,this._scale=t,e}},{key:"translatePrefix",value:function(t){return t in this.prefixTranslate?this.prefixTranslate[t]:t}},{key:"format",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2];if(void 0===t||""===t)return t;var o=this.numberParser(t),i=void 0,r=!!/[^\d\.\,\-\s]+/g.exec(t),a=_.extend({},this.config,e);if(e.skipZero&&("0"===t||0===t))return String(t);if("function"==typeof n){var u=this.getScaleInfo(n),c=u.step,h=u.prefix,p=u.max;if(a.useSIPrefixes&&t){o=h.scale(o);var d=Math.min(s(c,p),4);i=Math.round(o)===o?this.locale.numberFormat(",f")(o):this.locale.numberFormat(",."+d+"f")(o),i+=this.translatePrefix(h.symbol)}else if(0===t)i="0";else{var f;f=a.keepDecimals?Math.min(2,(String(o).split(".")[1]||[]).length):l(c),void 0!==a.maxPrecision&&(f=Math.min(f,a.maxPrecision)),i=this.locale.numberFormat(",."+f+"f")(o)}}else if(a.useSIPrefixes){var g=d3.formatPrefix(o);i=g.scale(o),i+=this.translatePrefix(g.symbol)}else{var m=void 0;m=a.keepDecimals?(String(o).split(".")[1]||[]).length:0,void 0!==a.maxPrecision&&(m=Math.min(m,a.maxPrecision)),i=this.locale.numberFormat(",."+m+"f")(o)}if(i=this.addPadding(i,a.prefix,a.suffix),r){var v=!!/^%/.exec(a.suffix),y=new RegExp("[\\d-]?[\\d.,\\s]*[\\d"+(v?"%":"")+"]");i=String(t).replace(y,i)}return i}},{key:"addPadding",value:function(t,e,n){return e&&(t=e+t),n&&(t+=n),t}},{key:"tooltip",value:function(t,e){return this.format(t,{keepDecimals:!0,useSIPrefixes:!1},e)}},{key:"value",value:function(t,e){return this.format(t,{keepDecimals:!0,useSIPrefixes:!1},e)}},{key:"tick",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.format(t,_.merge({skipZero:!0},n),e)}}]),t}();e["default"]=p},function(t,e,n){var o={EventEmitter:n(766)};t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(767),r=n(769),a=n(71),s=n(7),l=function(){function t(){o(this,t),this._subscriber=new r,this._currentSubscription=null}return t.prototype.addListener=function(t,e,n){return this._subscriber.addSubscription(t,new i(this._subscriber,e,n))},t.prototype.once=function(t,e,n){var o=this;return this.addListener(t,function(){o.removeCurrentListener(),e.apply(n,arguments)})},t.prototype.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},t.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:s(!1),this._subscriber.removeSubscription(this._currentSubscription)},t.prototype.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(a.thatReturnsTrue).map(function(t){return t.listener}):[]},t.prototype.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var n=Object.keys(e),o=0;o<n.length;o++){var i=n[o],r=e[i];r&&(this._currentSubscription=r,this.__emitToSubscription.apply(this,[r].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.prototype.__emitToSubscription=function(t,e){var n=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,n)},t}();t.exports=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(768),a=function(t){function e(n,i,r){o(this,e),t.call(this,n),this.listener=i,this.context=r}return i(e,t),e}(r);t.exports=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e){n(this,t),this.subscriber=e}return t.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},t}();t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(7),r=function(){function t(){o(this,t),this._subscriptionsForType={},this._currentSubscription=null}return t.prototype.addSubscription=function(t,e){e.subscriber!==this?i(!1):void 0,this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var n=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=n,e},t.prototype.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},t.prototype.removeSubscription=function(t){var e=t.eventType,n=t.key,o=this._subscriptionsForType[e];o&&delete o[n]},t.prototype.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();t.exports=r},function(t,e,n){"use strict";function o(t){return i(t.replace(r,"ms-"))}var i=n(556),r=/^-ms-/;t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.match(c);return e&&e[1].toLowerCase()}function i(t,e){var n=u;u?void 0:l(!1);var i=o(t),r=i&&s(i);if(r){n.innerHTML=r[1]+t+r[2];for(var c=r[0];c--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e?void 0:l(!1),a(h).forEach(e));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var r=n(75),a=n(557),s=n(772),l=n(7),u=r.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=i},function(t,e,n){"use strict";function o(t){return a?void 0:r(!1),p.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?p[t]:null}var i=n(75),r=n(7),a=i.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){p[t]=h,s[t]=!0}),t.exports=o},function(t,e,n){"use strict";function o(t){return i(t).replace(r,"-ms-")}var i=n(559),r=/^ms-/;t.exports=o},function(t,e){"use strict";function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e,n){"use strict";function o(t){return i(t)&&3==t.nodeType}var i=n(774);t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(7),r="ID_",a=function(){function t(){o(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e=r+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]?void 0:i(!1),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching?void 0:i(!1);for(var e=0;e<t.length;e++){var n=t[e];this._isPending[n]?this._isHandled[n]?void 0:i(!1):(this._callbacks[n]?void 0:i(!1),this._invokeCallback(n))}},t.prototype.dispatch=function(t){this._isDispatching?i(!1):void 0,this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){s(t);var n=l({},p,e||{}),r=function(e){function r(i){o(this,r),e.call(this,i),this.state=n.withProps?t.calculateState(null,i):t.calculateState(null,void 0)}return i(r,e),r.prototype.componentDidMount=function(){var o=this;e.prototype.componentDidMount&&e.prototype.componentDidMount.call(this);var i=t.getStores(),r=!1,a=function(){r=!0};this._fluxContainerSubscriptions=i.map(function(t){return t.addListener(a)});var s=function(){r&&o.setState(function(e){return n.withProps?t.calculateState(e,o.props):t.calculateState(e,void 0)}),r=!1};this._fluxContainerStoreGroup=new u(i,s)},r.prototype.componentWillReceiveProps=function(o,i){e.prototype.componentWillReceiveProps&&e.prototype.componentWillReceiveProps.call(this,o,i),n.withProps&&(n.pure&&h(this.props,o)||this.setState(function(e){return t.calculateState(e,o)}))},r.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount&&e.prototype.componentWillUnmount.call(this),this._fluxContainerStoreGroup.release();for(var t=this._fluxContainerSubscriptions,n=Array.isArray(t),o=0,t=n?t:t[Symbol.iterator]();;){var i;if(n){if(o>=t.length)break;i=t[o++]}else{if(o=t.next(),o.done)break;i=o.value}var r=i;r.remove()}this._fluxContainerSubscriptions=[]},r}(t),c=n.pure?a(r):r,d=t.displayName||t.name;return c.displayName="FluxContainer("+d+")",c}function a(t){var e=function(t){function e(){o(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.shouldComponentUpdate=function(t,e){return!h(this.props,t)||!h(this.state,e)},e}(t);return e}function s(t){t.getStores?void 0:c(!1),t.calculateState?void 0:c(!1)}var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=n(523),c=n(7),h=n(203),p={pure:!0,withProps:!1};t.exports={create:r}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(521),a=n(10),s=n(7),l=function(t){function e(){o(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.getInitialState=function(){return a.Map()},e.prototype.at=function(t){return this.has(t)?void 0:s(!1),this.get(t)},e.prototype.has=function(t){return this.getState().has(t)},e.prototype.get=function(t){return this.getState().get(t)},e.prototype.getAll=function(t,e){var n=this,o=a.Set(t),i=e||a.Map();return i.withMutations(function(t){for(var e=i,r=Array.isArray(e),a=0,e=r?e:e[Symbol.iterator]();;){var s;if(r){if(a>=e.length)break;s=e[a++]}else{if(a=e.next(),a.done)break;s=a.value}var l=s,u=l[0];o.has(u)&&n.has(u)||t["delete"](u)}for(var c=o,h=Array.isArray(c),p=0,c=h?c:c[Symbol.iterator]();;){var d;if(h){if(p>=c.length)break;d=c[p++]}else{if(p=c.next(),p.done)break;d=p.value}var f=d;n.has(f)&&t.set(f,n.at(f))}})},e}(r);t.exports=l},function(t,e,n){"use strict";function o(t){return{getInitialState:function(){return i(this),this.constructor.calculateState(null)},componentDidMount:function(){var e=this,n=!1,o=function(){n=!0};this._fluxMixinSubscriptions=t.map(function(t){return t.addListener(o)});var i=function(){n&&e.setState(function(t){return e.constructor.calculateState(e.state)}),n=!1};this._fluxMixinStoreGroup=new r(t,i)},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();for(var t=this._fluxMixinSubscriptions,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var o;if(e){if(n>=t.length)break;o=t[n++]}else{if(n=t.next(),n.done)break;o=n.value}var i=o;i.remove()}this._fluxMixinSubscriptions=[]}}}function i(t){t.constructor.calculateState?void 0:a(!1)}var r=n(523),a=n(7);t.exports=o},function(t,e,n){"use strict";function o(t,e){i(!1)}var i=n(7);t.exports=o},function(t,e,n){var o,i;!function(r,a,s){function l(){var t=r.L;u.noConflict=function(){return r.L=t,this},r.L=u}var u={version:"1.0.0"};"object"==typeof t&&"object"==typeof t.exports?t.exports=u:(o=u,i="function"==typeof o?o.call(e,n,e,t):o,!(i!==s&&(t.exports=i))),"undefined"!=typeof r&&l(),u.Util={extend:function(t){var e,n,o,i;for(n=1,o=arguments.length;o>n;n++){i=arguments[n];for(e in i)t[e]=i[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++u.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var o,i,r,a;return a=function(){o=!1,i&&(r.apply(n,i),i=!1)},r=function(){o?i=arguments:(t.apply(n,arguments),setTimeout(a,e),o=!0)}},wrapNum:function(t,e,n){var o=e[1],i=e[0],r=o-i;return t===o&&n?t:((t-i)%r+r)%r+i},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return u.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?u.Util.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var o=[];for(var i in t)o.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")},template:function(t,e){return t.replace(u.Util.templateRe,function(t,n){var o=e[n];if(o===s)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return r["webkit"+t]||r["moz"+t]||r["ms"+t]}function e(t){var e=+new Date,o=Math.max(0,16-(e-n));return n=e+o,r.setTimeout(t,o)}var n=0,o=r.requestAnimationFrame||t("RequestAnimationFrame")||e,i=r.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){r.clearTimeout(t)};u.Util.requestAnimFrame=function(t,n,i){return i&&o===e?void t.call(n):o.call(r,u.bind(t,n))},u.Util.cancelAnimFrame=function(t){t&&i.call(r,t)}}(),u.extend=u.Util.extend,u.bind=u.Util.bind,u.stamp=u.Util.stamp,u.setOptions=u.Util.setOptions,u.Class=function(){},u.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=u.Util.create(n);o.constructor=e,e.prototype=o;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(e[i]=this[i]);return t.statics&&(u.extend(e,t.statics),delete t.statics),t.includes&&(u.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=u.Util.extend(u.Util.create(o.options),t.options)),u.extend(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;e>t;t++)o._initHooks[t].call(this)}},e},u.Class.include=function(t){return u.extend(this.prototype,t),this},u.Class.mergeOptions=function(t){return u.extend(this.prototype.options,t),this},u.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},u.Evented=u.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else{t=u.Util.splitWords(t);for(var i=0,r=t.length;r>i;i++)this._on(t[i],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else{t=u.Util.splitWords(t);for(var i=0,r=t.length;r>i;i++)this._off(t[i],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=s);for(var i={fn:e,ctx:n},r=o,a=0,l=r.length;l>a;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(i),o.count++},_off:function(t,e,n){var o,i,r;if(this._events&&(o=this._events[t])){if(!e){for(i=0,r=o.length;r>i;i++)o[i].fn=u.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=s),o)for(i=0,r=o.length;r>i;i++){var a=o[i];if(a.ctx===n&&a.fn===e)return a.fn=u.Util.falseFn,this._firingCount&&(this._events[t]=o=o.slice()),void o.splice(i,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=u.Util.extend({},e,{type:t,target:this});if(this._events){var i=this._events[t];if(i){this._firingCount=this._firingCount+1||1;for(var r=0,a=i.length;a>r;r++){var s=i[r];s.fn.call(s.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var i=u.bind(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u.extend({layer:t.target},t),!0)}});var c=u.Evented.prototype;c.addEventListener=c.on,c.removeEventListener=c.clearAllEventListeners=c.off,c.addOneTimeEventListener=c.once,c.fireEvent=c.fire,c.hasEventListeners=c.listens,u.Mixin={Events:c},function(){var t=navigator.userAgent.toLowerCase(),e=a.documentElement,n="ActiveXObject"in r,o=-1!==t.indexOf("webkit"),i=-1!==t.indexOf("phantom"),s=-1!==t.search("android [23]"),l=-1!==t.indexOf("chrome"),c=-1!==t.indexOf("gecko")&&!o&&!r.opera&&!n,h=0===navigator.platform.indexOf("Win"),p="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),d=!r.PointerEvent&&r.MSPointerEvent,f=r.PointerEvent||d,g=n&&"transition"in e.style,m="WebKitCSSMatrix"in r&&"m11"in new r.WebKitCSSMatrix&&!s,v="MozPerspective"in e.style,y="OTransition"in e.style,b=!r.L_NO_TOUCH&&(f||"ontouchstart"in r||r.DocumentTouch&&a instanceof r.DocumentTouch);u.Browser={ie:n,ielt9:n&&!a.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in a),webkit:o,gecko:c,android:-1!==t.indexOf("android"),android23:s,chrome:l,safari:!l&&-1!==t.indexOf("safari"),win:h,ie3d:g,webkit3d:m,gecko3d:v,opera12:y,any3d:!r.L_DISABLE_3D&&(g||m||v)&&!y&&!i,mobile:p,mobileWebkit:p&&o,mobileWebkit3d:p&&m,mobileOpera:p&&r.opera,mobileGecko:p&&c,touch:!!b,msPointer:!!d,pointer:!!f,retina:(r.devicePixelRatio||r.screen.deviceXDPI/r.screen.logicalXDPI)>1}}(),u.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},u.Point.prototype={clone:function(){return new u.Point(this.x,this.y)},add:function(t){return this.clone()._add(u.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(u.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new u.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new u.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=u.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=u.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=u.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u.Util.formatNum(this.x)+", "+u.Util.formatNum(this.y)+")"}},u.point=function(t,e,n){return t instanceof u.Point?t:u.Util.isArray(t)?new u.Point(t[0],t[1]):t===s||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new u.Point(t.x,t.y):new u.Point(t,e,n)},u.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;i>o;o++)this.extend(n[o])},u.Bounds.prototype={extend:function(t){return t=u.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new u.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new u.Point(this.min.x,this.max.y)},getTopRight:function(){return new u.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof u.Point?u.point(t):u.bounds(t),t instanceof u.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=u.bounds(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>=e.x&&o.x<=n.x,a=i.y>=e.y&&o.y<=n.y;return r&&a},overlaps:function(t){t=u.bounds(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>e.x&&o.x<n.x,a=i.y>e.y&&o.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},u.bounds=function(t,e){return!t||t instanceof u.Bounds?t:new u.Bounds(t,e)},u.Transformation=function(t,e,n,o){this._a=t,this._b=e,this._c=n,this._d=o},u.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new u.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},u.DomUtil={get:function(t){return"string"==typeof t?a.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&a.defaultView){var o=a.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n},create:function(t,e,n){var o=a.createElement(t);return o.className=e||"",n&&n.appendChild(o),o},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==s)return t.classList.contains(e);var n=u.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==s)for(var n=u.Util.splitWords(e),o=0,i=n.length;i>o;o++)t.classList.add(n[o]);else if(!u.DomUtil.hasClass(t,e)){var r=u.DomUtil.getClass(t);u.DomUtil.setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==s?t.classList.remove(e):u.DomUtil.setClass(t,u.Util.trim((" "+u.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===s?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===s?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&u.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"},testProp:function(t){for(var e=a.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var o=e||new u.Point(0,0);t.style[u.DomUtil.TRANSFORM]=(u.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,u.Browser.any3d?u.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new u.Point(0,0)}},function(){u.DomUtil.TRANSFORM=u.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=u.DomUtil.TRANSITION=u.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(u.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in a)u.DomUtil.disableTextSelection=function(){u.DomEvent.on(r,"selectstart",u.DomEvent.preventDefault)},u.DomUtil.enableTextSelection=function(){u.DomEvent.off(r,"selectstart",u.DomEvent.preventDefault)};else{var e=u.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);u.DomUtil.disableTextSelection=function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},u.DomUtil.enableTextSelection=function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}}u.DomUtil.disableImageDrag=function(){u.DomEvent.on(r,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.enableImageDrag=function(){u.DomEvent.off(r,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(u.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",u.DomEvent.on(r,"keydown",u.DomUtil.restoreOutline,this))},u.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,u.DomEvent.off(r,"keydown",u.DomUtil.restoreOutline,this))}}(),u.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==s&&(this.alt=+n)},u.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=u.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return(e===s?1e-9:e)>=n},toString:function(t){return"LatLng("+u.Util.formatNum(this.lat,t)+", "+u.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return u.CRS.Earth.distance(this,u.latLng(t))},wrap:function(){return u.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return u.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new u.LatLng(this.lat,this.lng,this.alt)}},u.latLng=function(t,e,n){return t instanceof u.LatLng?t:u.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new u.LatLng(t[0],t[1],t[2]):2===t.length?new u.LatLng(t[0],t[1]):null:t===s||null===t?t:"object"==typeof t&&"lat"in t?new u.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===s?null:new u.LatLng(t,e,n)},u.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;i>o;o++)this.extend(n[o])},u.LatLngBounds.prototype={extend:function(t){var e,n,o=this._southWest,i=this._northEast;if(t instanceof u.LatLng)e=t,n=t;else{if(!(t instanceof u.LatLngBounds))return t?this.extend(u.latLng(t)||u.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return o||i?(o.lat=Math.min(e.lat,o.lat),o.lng=Math.min(e.lng,o.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new u.LatLng(e.lat,e.lng),this._northEast=new u.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new u.LatLngBounds(new u.LatLng(e.lat-o,e.lng-i),new u.LatLng(n.lat+o,n.lng+i))},getCenter:function(){return new u.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new u.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new u.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof u.LatLng?u.latLng(t):u.latLngBounds(t);var e,n,o=this._southWest,i=this._northEast;return t instanceof u.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=o.lat&&n.lat<=i.lat&&e.lng>=o.lng&&n.lng<=i.lng},intersects:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>=e.lat&&o.lat<=n.lat,a=i.lng>=e.lng&&o.lng<=n.lng;return r&&a},overlaps:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>e.lat&&o.lat<n.lat,a=i.lng>e.lng&&o.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=u.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},u.latLngBounds=function(t,e){return t instanceof u.LatLngBounds?t:new u.LatLngBounds(t,e)},u.Projection={},u.Projection.LonLat={project:function(t){return new u.Point(t.lng,t.lat)},unproject:function(t){return new u.LatLng(t.y,t.x)},bounds:u.bounds([-180,-90],[180,90])},u.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),i=Math.sin(o*e);return new u.Point(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2);
},unproject:function(t){var e=180/Math.PI;return new u.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return u.bounds([-t,-t],[t,t])}()},u.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),o=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return u.bounds(o,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?u.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return u.latLng(n,e,o)}},u.CRS.Simple=u.extend({},u.CRS,{projection:u.Projection.LonLat,transformation:new u.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0}),u.CRS.Earth=u.extend({},u.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,i=e.lat*n,r=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(r,1))}}),u.CRS.EPSG3857=u.extend({},u.CRS.Earth,{code:"EPSG:3857",projection:u.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*u.Projection.SphericalMercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.CRS.EPSG900913=u.extend({},u.CRS.EPSG3857,{code:"EPSG:900913"}),u.CRS.EPSG4326=u.extend({},u.CRS.Earth,{code:"EPSG:4326",projection:u.Projection.LonLat,transformation:new u.Transformation(1/180,1,-1/180,.5)}),u.Map=u.Evented.extend({options:{crs:u.CRS.EPSG3857,center:s,zoom:s,minZoom:s,maxZoom:s,layers:[],maxBounds:s,renderer:s,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=u.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==s&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==s&&this.setView(u.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(t,e){return e=e===s?this.getZoom():e,this._resetView(u.latLng(t),e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),i=this.getSize().divideBy(2),r=t instanceof u.Point?t:this.latLngToContainerPoint(t),a=r.subtract(i).multiplyBy(1-1/o),s=this.containerPointToLatLng(i.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():u.latLngBounds(t);var n=u.point(e.paddingTopLeft||e.padding||[0,0]),o=u.point(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(o));i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i;var r=o.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i),l=this.unproject(a.add(s).divideBy(2).add(r),i);return{center:l,zoom:i}},fitBounds:function(t,e){if(t=u.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(u.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=u.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,u.latLngBounds(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=u.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),i=n.divideBy(2).round(),r=o.subtract(i);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=s,this._containerId=s}u.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=u.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new u.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===s?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===s?this._layersMaxZoom===s?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=u.latLngBounds(t),n=u.point(n||[0,0]);var o=this.getZoom()||0,i=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),c=this.project(s,o).subtract(this.project(a,o)),h=u.Browser.any3d?this.options.zoomSnap:1,p=Math.min(l.x/c.x,l.y/c.y);return o=this.getScaleZoom(p,o),h&&(o=Math.round(o/(h/100))*(h/100),o=e?Math.ceil(o/h)*h:Math.floor(o/h)*h),Math.max(i,Math.min(r,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new u.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new u.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===s?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===s?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===s?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===s?this._zoom:e,this.options.crs.latLngToPoint(u.latLng(t),e)},unproject:function(t,e){return e=e===s?this._zoom:e,this.options.crs.pointToLatLng(u.point(t),e)},layerPointToLatLng:function(t){var e=u.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(u.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(u.latLng(t))},distance:function(t,e){return this.options.crs.distance(u.latLng(t),u.latLng(e))},containerPointToLayerPoint:function(t){return u.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return u.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(u.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(u.latLng(t)))},mouseEventToContainerPoint:function(t){return u.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=u.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");u.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=u.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&u.Browser.any3d,u.DomUtil.addClass(t,"leaflet-container"+(u.Browser.touch?" leaflet-touch":"")+(u.Browser.retina?" leaflet-retina":"")+(u.Browser.ielt9?" leaflet-oldie":"")+(u.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=u.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),u.DomUtil.setPosition(this._mapPane,new u.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(u.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),u.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){u.DomUtil.setPosition(this._mapPane,new u.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===s&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return u.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){u.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(u.DomEvent){this._targets={},this._targets[u.stamp(this._container)]=this;var e=t?"off":"on";u.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&u.DomEvent[e](r,"resize",this._onResize,this),u.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){u.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=u.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,o=[],i="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if(n=this._targets[u.stamp(r)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!u.DomEvent._isExternalTarget(r,t))break;if(o.push(n),i)break}if(r===this._container)break;r=r.parentNode}return o.length||a||i||!u.DomEvent._isExternalTarget(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!u.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&u.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=u.Util.extend({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e)),n.length)){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&u.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=i instanceof u.Marker;r.containerPoint=a?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?i.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,r,!0),r.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==u.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return u.DomUtil.getPosition(this._mapPane)||new u.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==s?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),i=this.getSize().divideBy(2),r=new u.Bounds(o.subtract(i),o.add(i)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(o.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new u.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=u.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=o.min.subtract(t.min),r=o.max.subtract(t.max),a=this._rebound(i.x,-r.x),s=this._rebound(i.y,-r.y);return new u.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=u.Browser.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))}}),u.map=function(t,e){return new u.Map(t,e)},u.Layer=u.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[u.stamp(t)],this},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),u.Map.include({addLayer:function(t){var e=u.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=u.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&u.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?u.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[u.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=u.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var i=this._zoomBoundLayers[o].options;t=i.minZoom===s?t:Math.min(t,i.minZoom),e=i.maxZoom===s?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-(1/0)?s:e,this._layersMinZoom=t===1/0?s:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),u.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:u.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,i=this.R_MINOR/n,r=Math.sqrt(1-i*i),a=r*Math.sin(o),s=Math.tan(Math.PI/4-o/2)/Math.pow((1-a)/(1+a),r/2);return o=-n*Math.log(Math.max(s,1e-10)),new u.Point(t.lng*e*n,o)},unproject:function(t){for(var e,n=180/Math.PI,o=this.R,i=this.R_MINOR/o,r=Math.sqrt(1-i*i),a=Math.exp(-t.y/o),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;15>l&&Math.abs(c)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),c=Math.PI/2-2*Math.atan(a*e)-s,s+=c;return new u.LatLng(s*n,t.x*n/o)}},u.CRS.EPSG3395=u.extend({},u.CRS.Earth,{code:"EPSG:3395",projection:u.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*u.Projection.Mercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.GridLayer=u.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:u.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:s,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),u.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(u.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(u.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return a.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof u.Point?t:new u.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==s&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,o=-t(-(1/0),1/0),i=0,r=n.length;r>i;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!u.Browser.ielt9){u.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var i=this._tiles[o];if(i.current&&i.loaded){var r=Math.min(1,(t-i.loaded)/200);u.DomUtil.setOpacity(i.el,r),1>r?e=!0:(i.active&&(n=!0),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=u.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===s)return s;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(u.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var o=this._levels[t],i=this._map;return o||(o=this._levels[t]={},o.el=u.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,i.getCenter(),i.getZoom()),u.Util.falseFn(o.el.offsetWidth)),this._level=o,o},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)u.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,o){var i=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new u.Point(+i,+r);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>o?this._retainParent(i,r,a,o):!1)},_retainChildren:function(t,e,n,o){for(var i=2*t;2*t+2>i;i++)for(var r=2*e;2*e+2>r;r++){var a=new u.Point(i,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),o>n+1&&this._retainChildren(i,r,n+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,o){var i=Math.round(e);(this.options.maxZoom!==s&&i>this.options.maxZoom||this.options.minZoom!==s&&i<this.options.minZoom)&&(i=s);var r=this.options.updateWhenZooming&&i!==this._tileZoom;o&&!r||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==s&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();u.Browser.any3d?u.DomUtil.setTransform(t.el,i,o):u.DomUtil.setPosition(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*o);return new u.Bounds(i.subtract(r),i.add(r))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(t===s&&(t=e.getCenter()),this._tileZoom!==s){var o=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(o),r=i.getCenter(),l=[],c=this.options.keepBuffer,h=new u.Bounds(i.getBottomLeft().subtract([c,-c]),i.getTopRight().add([c,-c]));for(var p in this._tiles){var d=this._tiles[p].coords;d.z===this._tileZoom&&h.contains(u.point(d.x,d.y))||(this._tiles[p].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var f=i.min.y;f<=i.max.y;f++)for(var g=i.min.x;g<=i.max.x;g++){var m=new u.Point(g,f);if(m.z=this._tileZoom,this._isValidTile(m)){var v=this._tiles[this._tileCoordsToKey(m)];v?v.current=!0:l.push(m)}}if(l.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var y=a.createDocumentFragment();for(g=0;g<l.length;g++)this._addTile(l[g],y);this._level.el.appendChild(y)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return u.latLngBounds(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),i=o.add(n),r=e.unproject(o,t.z),a=e.unproject(i,t.z);return this.options.noWrap||(r=e.wrapLatLng(r),a=e.wrapLatLng(a)),new u.LatLngBounds(r,a)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new u.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(u.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){u.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,u.Browser.ielt9&&this.options.opacity<1&&u.DomUtil.setOpacity(t,this.options.opacity),u.Browser.android&&!u.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),i=this.createTile(this._wrapCoords(t),u.bind(this._tileReady,this,t));this._initTile(i),this.createTile.length<2&&u.Util.requestAnimFrame(u.bind(this._tileReady,this,t,null,i)),u.DomUtil.setPosition(i,n),this._tiles[o]={el:i,coords:t,current:!0},e.appendChild(i),this.fire("tileloadstart",{tile:i,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);n=this._tiles[o],n&&(n.loaded=+new Date,this._map._fadeAnimated?(u.DomUtil.setOpacity(n.el,0),u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),u.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),u.Browser.ielt9||!this._map._fadeAnimated?u.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(u.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new u.Point(this._wrapX?u.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?u.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new u.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),u.gridLayer=function(t){return new u.GridLayer(t)},u.TileLayer=u.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=u.setOptions(this,e),e.detectRetina&&u.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),u.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=a.createElement("img");return u.DomEvent.on(n,"load",u.bind(this._tileOnLoad,this,e,n)),u.DomEvent.on(n,"error",u.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:u.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return u.Util.template(this._url,u.extend(e,this.options))},_tileOnLoad:function(t,e){u.Browser.ielt9?setTimeout(u.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&(e.src=o),t(n,e)},getTileSize:function(){var t=this._map,e=u.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,o=this.options.maxNativeZoom;return null!==o&&n>o?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,e=this._tileZoom;return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,null!==t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=u.Util.falseFn,e.onerror=u.Util.falseFn,e.complete||(e.src=u.Util.emptyImageUrl,u.DomUtil.remove(e)))}}),u.tileLayer=function(t,e){return new u.TileLayer(t,e)},u.TileLayer.WMS=u.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",
layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=u.extend({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);e=u.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&u.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,u.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),o=this._crs.project(e.getSouthEast()),i=(this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[o.y,n.x,n.y,o.x]:[n.x,o.y,o.x,n.y]).join(","),r=u.TileLayer.prototype.getTileUrl.call(this,t);return r+u.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(t,e){return u.extend(this.wmsParams,t),e||this.redraw(),this}}),u.tileLayer.wms=function(t,e){return new u.TileLayer.WMS(t,e)},u.ImageOverlay=u.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=u.latLngBounds(e),u.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(u.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){u.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=u.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,t.onload=u.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center);u.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new u.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();u.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){u.DomUtil.setOpacity(this._image,this.options.opacity)}}),u.imageOverlay=function(t,e,n){return new u.ImageOverlay(t,e,n)},u.Icon=u.Class.extend({initialize:function(t){u.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];"number"==typeof o&&(o=[o,o]);var i=u.point(o),r=u.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return e=e||a.createElement("img"),e.src=t,e},_getIconUrl:function(t){return u.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),u.icon=function(t){return new u.Icon(t)},u.Icon.Default=u.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return u.Icon.Default.imagePath||(u.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||u.Icon.Default.imagePath)+u.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=u.DomUtil.create("div","leaflet-default-icon-path",a.body),e=u.DomUtil.getStyle(t,"background-image")||u.DomUtil.getStyle(t,"backgroundImage");return a.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/[\"\']?\)$/,""):""}}),u.Marker=u.Layer.extend({options:{icon:new u.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=u.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),u.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&u.DomUtil.addClass(i,e),this._shadow=i,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),u.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&u.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){u.DomUtil.setPosition(this._icon,t),this._shadow&&u.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(u.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),u.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new u.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;u.DomUtil.setOpacity(this._icon,t),this._shadow&&u.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),u.marker=function(t,e){return new u.Marker(t,e)},u.DivIcon=u.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:a.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var o=u.point(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),u.divIcon=function(t){return new u.DivIcon(t)},u.DivOverlay=u.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){u.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(u.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(u.bind(u.DomUtil.remove,u.DomUtil,this._container),200)):u.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=u.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=u.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?u.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var o=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),u.Popup=u.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){u.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof u.Path||this._source.on("preclick",u.DomEvent.stopPropagation))},onRemove:function(t){u.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof u.Path||this._source.off("preclick",u.DomEvent.stopPropagation))},getEvents:function(){var t=u.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=u.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=u.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",u.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var o=this._wrapper=u.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=u.DomUtil.create("div",t+"-content",o),u.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,"contextmenu",u.DomEvent.stopPropagation),this._tipContainer=u.DomUtil.create("div",t+"-tip-container",e),this._tip=u.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,i=this.options.maxHeight,r="leaflet-popup-scrolled";i&&o>i?(e.height=i+"px",u.DomUtil.addClass(t,r)):u.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();u.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(u.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,o=this._containerWidth,i=new u.Point(this._containerLeft,-n-this._containerBottom);i._add(u.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(i),a=u.point(this.options.autoPanPadding),s=u.point(this.options.autoPanPaddingTopLeft||a),l=u.point(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),h=0,p=0;r.x+o+l.x>c.x&&(h=r.x+o-c.x+l.x),r.x-h-s.x<0&&(h=r.x-s.x),r.y+n+l.y>c.y&&(p=r.y+n-c.y+l.y),r.y-p-s.y<0&&(p=r.y-s.y),(h||p)&&t.fire("autopanstart").panBy([h,p])}},_onCloseButtonClick:function(t){this._close(),u.DomEvent.stop(t)},_getAnchor:function(){return u.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),u.popup=function(t,e){return new u.Popup(t,e)},u.Map.mergeOptions({closePopupOnClick:!0}),u.Map.include({openPopup:function(t,e,n){return t instanceof u.Popup||(t=new u.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),u.Layer.include({bindPopup:function(t,e){return t instanceof u.Popup?(u.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new u.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof u.Layer||(e=t,t=this),t instanceof u.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return u.DomEvent.stop(t),e instanceof u.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),u.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),u.Tooltip=u.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){u.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){u.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=u.DivOverlay.prototype.getEvents.call(this);return u.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=u.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,o=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=u.point(this.options.offset),c=this._getAnchor();"top"===r?t=t.add(u.point(-a/2+l.x,-s+l.y+c.y)):"bottom"===r?t=t.subtract(u.point(a/2-l.x,-l.y)):"center"===r?t=t.subtract(u.point(a/2+l.x,s/2-c.y+l.y)):"right"===r||"auto"===r&&i.x<o.x?(r="right",t=t.add([l.x+c.x,c.y-s/2+l.y])):(r="left",t=t.subtract(u.point(a+c.x-l.x,s/2-c.y-l.y))),u.DomUtil.removeClass(n,"leaflet-tooltip-right"),u.DomUtil.removeClass(n,"leaflet-tooltip-left"),u.DomUtil.removeClass(n,"leaflet-tooltip-top"),u.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),u.DomUtil.addClass(n,"leaflet-tooltip-"+r),u.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&u.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return u.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),u.tooltip=function(t,e){return new u.Tooltip(t,e)},u.Map.include({openTooltip:function(t,e,n){return t instanceof u.Tooltip||(t=new u.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),u.Layer.include({bindTooltip:function(t,e){return t instanceof u.Tooltip?(u.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=u.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),u.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof u.Layer||(e=t,t=this),t instanceof u.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(u.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(u.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:s)},_moveTooltip:function(t){var e,n,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),o=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(o)}}),u.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),u.LayerGroup=u.Layer.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,o=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,o);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u.stamp(t)}}),u.layerGroup=function(t){return new u.LayerGroup(t)},u.FeatureGroup=u.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),u.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),u.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new u.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),u.featureGroup=function(t){return new u.FeatureGroup(t)},u.Renderer=u.Layer.extend({options:{padding:.1},initialize:function(t){u.setOptions(this,t),u.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&u.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){u.DomUtil.remove(this._container)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=u.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(r),l=i.multiplyBy(-n).add(o).add(i).subtract(s);u.Browser.any3d?u.DomUtil.setTransform(this._container,l,n):u.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new u.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),u.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&u.canvas()||u.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===s)return!1;var e=this._paneRenderers[t];return e===s&&(e=u.SVG&&u.svg({pane:t})||u.Canvas&&u.canvas({pane:t}),this._paneRenderers[t]=e),e}}),u.Path=u.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this),this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this),this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(u.Browser.touch?10:0)}}),u.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=s+""?Uint8Array:Array,i=new o(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var r,a=[];for(r=0;n>r;r++)i[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,n,o,i){var r,a,s,l=0;for(a=o+1;i-1>=a;a++)s=this._sqClosestPointOnSegment(t[a],t[o],t[i],!0),s>l&&(r=a,l=s);l>n&&(e[r]=1,this._simplifyDPStep(t,e,n,o,r),this._simplifyDPStep(t,e,n,r,i))},_reducePoints:function(t,e){for(var n=[t[0]],o=1,i=0,r=t.length;r>o;o++)this._sqDist(t[o],t[i])>e&&(n.push(t[o]),i=o);return r-1>i&&n.push(t[r-1]),n},clipSegment:function(t,e,n,o,i){var r,a,s,l=o?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(l|u))return[t,e];if(l&u)return!1;r=l||u,a=this._getEdgeIntersection(t,e,r,n,i),s=this._getBitCode(a,n),r===l?(t=a,l=s):(e=a,u=s)}},_getEdgeIntersection:function(t,e,n,o,i){var r,a,s=e.x-t.x,l=e.y-t.y,c=o.min,h=o.max;return 8&n?(r=t.x+s*(h.y-t.y)/l,a=h.y):4&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):2&n?(r=h.x,a=t.y+l*(h.x-t.x)/s):1&n&&(r=c.x,a=t.y+l*(c.x-t.x)/s),new u.Point(r,a,i)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o},_sqClosestPointOnSegment:function(t,e,n,o){var i,r=e.x,a=e.y,s=n.x-r,l=n.y-a,c=s*s+l*l;return c>0&&(i=((t.x-r)*s+(t.y-a)*l)/c,i>1?(r=n.x,a=n.y):i>0&&(r+=s*i,a+=l*i)),s=t.x-r,l=t.y-a,o?s*s+l*l:new u.Point(r,a)}},u.Polyline=u.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,o=1/0,i=null,r=u.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;s>a;a++)for(var l=this._parts[a],c=1,h=l.length;h>c;c++){e=l[c-1],n=l[c];var p=r(t,e,n,!0);o>p&&(o=p,i=r(t,e,n))}return i&&(i.distance=Math.sqrt(o)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;l-1>t;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,o=0;l-1>t;t++)if(i=s[t],r=s[t+1],n=i.distanceTo(r),o+=n,o>e)return a=(o-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-i.x),r.y-a*(r.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=u.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new u.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return u.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=u.Polyline._flat(t),o=0,i=t.length;i>o;o++)n?(e[o]=u.latLng(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new u.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new u.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var o,i,r=t[0]instanceof u.LatLng,a=t.length;if(r){for(i=[],o=0;a>o;o++)i[o]=this._map.latLngToLayerPoint(t[o]),n.extend(i[o]);e.push(i)}else for(o=0;a>o;o++)this._projectLatlngs(t[o],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,o,i,r,a,s,l=this._parts;for(e=0,o=0,i=this._rings.length;i>e;e++)for(s=this._rings[e],n=0,r=s.length;r-1>n;n++)a=u.LineUtil.clipSegment(s[n],s[n+1],t,n,!0),a&&(l[o]=l[o]||[],l[o].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[o].push(a[1]),o++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;o>n;n++)t[n]=u.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),u.polyline=function(t,e){return new u.Polyline(t,e)},u.Polyline._flat=function(t){return!u.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},u.PolyUtil={},u.PolyUtil.clipPolygon=function(t,e,n){var o,i,r,a,s,l,c,h,p,d=[1,4,2,8],f=u.LineUtil;for(i=0,c=t.length;c>i;i++)t[i]._code=f._getBitCode(t[i],e);for(a=0;4>a;a++){for(h=d[a],o=[],i=0,c=t.length,r=c-1;c>i;r=i++)s=t[i],l=t[r],s._code&h?l._code&h||(p=f._getEdgeIntersection(l,s,h,e,n),p._code=f._getBitCode(p,e),o.push(p)):(l._code&h&&(p=f._getEdgeIntersection(l,s,h,e,n),p._code=f._getBitCode(p,e),o.push(p)),o.push(s));t=o}return t},u.Polygon=u.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=a=s=0,t=0,e=c-1;c>t;e=t++)n=u[t],o=u[e],i=n.y*o.x-o.y*n.x,a+=(n.x+o.x)*i,s+=(n.y+o.y)*i,r+=3*i;return l=0===r?u[0]:[a/r,s/r],
this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=u.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof u.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){u.Polyline.prototype._setLatLngs.call(this,t),u.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new u.Point(e,e);if(t=new u.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var o,i=0,r=this._rings.length;r>i;i++)o=u.PolyUtil.clipPolygon(this._rings[i],t,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),u.polygon=function(t,e){return new u.Polygon(t,e)},u.Rectangle=u.Polygon.extend({initialize:function(t,e){u.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=u.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),u.rectangle=function(t,e){return new u.Rectangle(t,e)},u.CircleMarker=u.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=u.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return u.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new u.Bounds(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),u.circleMarker=function(t,e){return new u.CircleMarker(t,e)},u.Circle=u.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=u.extend({},n,{radius:e})),u.setOptions(this,e),this._latlng=u.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new u.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:u.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===u.CRS.Earth.distance){var i=Math.PI/180,r=this._mRadius/u.CRS.Earth.R/i,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),c=n.unproject(l).lat,h=Math.acos((Math.cos(r*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(h)||0===h)&&(h=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:Math.max(Math.round(l.x-n.project([c,t-h]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var p=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(p).x}this._updateBounds()}}),u.circle=function(t,e,n){return new u.Circle(t,e,n)},u.SVG=u.Renderer.extend({getEvents:function(){var t=u.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=u.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=u.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){u.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),u.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=u.SVG.create("path");t.options.className&&u.DomUtil.addClass(e,t.options.className),t.options.interactive&&u.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t)},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){u.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path)},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,u.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,o=t._radiusY||n,i="a"+n+","+o+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){u.DomUtil.toFront(t._path)},_bringToBack:function(t){u.DomUtil.toBack(t._path)}}),u.extend(u.SVG,{create:function(t){return a.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,o,i,r,a,s,l="";for(n=0,i=t.length;i>n;n++){for(a=t[n],o=0,r=a.length;r>o;o++)s=a[o],l+=(o?"L":"M")+s.x+" "+s.y;l+=e?u.Browser.svg?"z":"x":""}return l||"M0 0"}}),u.Browser.svg=!(!a.createElementNS||!u.SVG.create("svg").createSVGRect),u.svg=function(t){return u.Browser.svg||u.Browser.vml?new u.SVG(t):null},u.Browser.vml=!u.Browser.svg&&function(){try{var t=a.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),u.SVG.include(u.Browser.vml?{_initContainer:function(){this._container=u.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||u.Renderer.prototype._update.call(this)},_initPath:function(t){var e=t._container=u.SVG.create("shape");u.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=u.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;u.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,i=t._container;i.stroked=!!o.stroke,i.filled=!!o.fill,o.stroke?(e||(e=t._stroke=u.SVG.create("stroke")),i.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=u.Util.isArray(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(i.removeChild(e),t._stroke=null),o.fill?(n||(n=t._fill=u.SVG.create("fill")),i.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){u.DomUtil.toFront(t._container)},_bringToBack:function(t){u.DomUtil.toBack(t._container)}}:{}),u.Browser.vml&&(u.SVG.create=function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return a.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),u.Canvas=u.Renderer.extend({onAdd:function(){u.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var t=this._container=a.createElement("canvas");u.DomEvent.on(t,"mousemove",u.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},u.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),o=u.Browser.retina?2:1;u.DomUtil.setPosition(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",u.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_initPath:function(t){this._updateDashArray(t),this._layers[u.stamp(t)]=t},_addPath:u.Util.falseFn,_removePath:function(t){t._removed=!0,this._requestRedraw(t)},_updatePath:function(t){this._redrawBounds=t._pxBounds,this._draw(!0),t._project(),t._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),o=[];for(e=0;e<n.length;e++)o.push(Number(n[e]));t.options._dashArray=o}},_requestRedraw:function(t){if(this._map){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new u.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])),this._redrawRequest=this._redrawRequest||u.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(t){this._clear=t;var e,n=this._redrawBounds;this._ctx.save(),n&&(this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,n.max.x-n.min.x,n.max.y-n.min.y),this._ctx.clip());for(var o in this._layers)e=this._layers[o],(!n||e._pxBounds&&e._pxBounds.intersects(n))&&e._updatePath(),t&&e._removed&&(delete e._removed,delete this._layers[o]);this._ctx.restore()},_updatePoly:function(t,e){var n,o,i,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),n=0;s>n;n++){for(o=0,i=a[n].length;i>o;o++)r=a[n][o],l[o?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}},_updateCircle:function(t){if(!t._empty()){var e=t._point,n=this._ctx,o=t._radius,i=(t._radiusY||o)/o;this._drawnLayers[t._leaflet_id]=t,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,o,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=this._clear,o=e.options;t.globalCompositeOperation=n?"destination-out":"source-over",o.fill&&(t.globalAlpha=n?1:o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&0!==o.weight&&(t.globalAlpha=n?1:o.opacity,e._prevWeight=t.lineWidth=n?e._prevWeight+1:o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){var e,n=this._map.mouseEventToLayerPoint(t),o=[];for(var i in this._layers)e=this._layers[i],e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(u.DomEvent._fakeStop(t),o.push(e));o.length&&this._fireEvent(o,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseOut(t,e),this._handleMouseHover(t,e)}},_handleMouseOut:function(t,e){var n=this._hoveredLayer;!n||"mouseout"!==t.type&&n._containsPoint(e)||(u.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){var n,o;for(n in this._drawnLayers)o=this._drawnLayers[n],o.options.interactive&&o._containsPoint(e)&&(u.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:u.Util.falseFn,_bringToBack:u.Util.falseFn}),u.Browser.canvas=function(){return!!a.createElement("canvas").getContext}(),u.canvas=function(t){return u.Browser.canvas?new u.Canvas(t):null},u.Polyline.prototype._containsPoint=function(t,e){var n,o,i,r,a,s,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;r>n;n++)for(s=this._parts[n],o=0,a=s.length,i=a-1;a>o;i=o++)if((e||0!==o)&&u.LineUtil.pointToSegmentDistance(t,s[i],s[o])<=l)return!0;return!1},u.Polygon.prototype._containsPoint=function(t){var e,n,o,i,r,a,s,l,c=!1;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;s>i;i++)for(e=this._parts[i],r=0,l=e.length,a=l-1;l>r;a=r++)n=e[r],o=e[a],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(c=!c);return c||u.Polyline.prototype._containsPoint.call(this,t,!0)},u.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},u.GeoJSON=u.FeatureGroup.extend({initialize:function(t,e){u.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,o,i=u.Util.isArray(t)?t:t.features;if(i){for(e=0,n=i.length;n>e;e++)o=i[e],(o.geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=u.GeoJSON.geometryToLayer(t,r);return a?(a.feature=u.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=u.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),u.extend(u.GeoJSON,{geometryToLayer:function(t,e){var n,o,i,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,h=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=h(s),c?c(t,n):new u.Marker(n);case"MultiPoint":for(i=0,r=s.length;r>i;i++)n=h(s[i]),l.push(c?c(t,n):new u.Marker(n));return new u.FeatureGroup(l);case"LineString":case"MultiLineString":return o=this.coordsToLatLngs(s,"LineString"===a.type?0:1,h),new u.Polyline(o,e);case"Polygon":case"MultiPolygon":return o=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,h),new u.Polygon(o,e);case"GeometryCollection":for(i=0,r=a.geometries.length;r>i;i++){var p=this.geometryToLayer({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);p&&l.push(p)}return new u.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new u.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var o,i=[],r=0,a=t.length;a>r;r++)o=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),i.push(o);return i},latLngToCoords:function(t){return t.alt!==s?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var o=[],i=0,r=t.length;r>i;i++)o.push(e?u.GeoJSON.latLngsToCoords(t[i],e-1,n):u.GeoJSON.latLngToCoords(t[i]));return!e&&n&&o.push(o[0]),o},getFeature:function(t,e){return t.feature?u.extend({},t.feature,{geometry:e}):u.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var h={toGeoJSON:function(){return u.GeoJSON.getFeature(this,{type:"Point",coordinates:u.GeoJSON.latLngToCoords(this.getLatLng())})}};u.Marker.include(h),u.Circle.include(h),u.CircleMarker.include(h),u.Polyline.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=u.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return u.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},u.Polygon.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=t&&!u.Polyline._flat(this._latlngs[0]),n=u.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),u.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},u.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),u.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var o=t.toGeoJSON();n.push(e?o.geometry:u.GeoJSON.asFeature(o))}}),e?u.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),u.geoJSON=function(t,e){return new u.GeoJSON(t,e)},u.geoJson=u.geoJSON;var p="_leaflet_events";u.DomEvent={on:function(t,e,n,o){if("object"==typeof e)for(var i in e)this._on(t,i,e[i],n);else{e=u.Util.splitWords(e);for(var r=0,a=e.length;a>r;r++)this._on(t,e[r],n,o)}return this},off:function(t,e,n,o){if("object"==typeof e)for(var i in e)this._off(t,i,e[i],n);else{e=u.Util.splitWords(e);for(var r=0,a=e.length;a>r;r++)this._off(t,e[r],n,o)}return this},_on:function(t,e,n,o){var i=e+u.stamp(n)+(o?"_"+u.stamp(o):"");if(t[p]&&t[p][i])return this;var a=function(e){return n.call(o||t,e||r.event)},s=a;return u.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,i):u.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener?this.addDoubleTapListener(t,a,i):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||r.event,u.DomEvent._isExternalTarget(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&u.Browser.android&&(a=function(t){return u.DomEvent._filterClick(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a),t[p]=t[p]||{},t[p][i]=a,this},_off:function(t,e,n,o){var i=e+u.stamp(n)+(o?"_"+u.stamp(o):""),r=t[p]&&t[p][i];return r?(u.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):u.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[p][i]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,u.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return u.DomEvent.on(t,"mousewheel",u.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=u.DomEvent.stopPropagation;return u.DomEvent.on(t,u.Draggable.START.join(" "),e),u.DomEvent.on(t,{click:u.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return u.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new u.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new u.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:u.Browser.win&&u.Browser.chrome?2:u.Browser.gecko?r.devicePixelRatio:1,getWheelDelta:function(t){return u.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/u.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){u.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(o){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,o=u.DomEvent._lastClick&&n-u.DomEvent._lastClick;return o&&o>100&&500>o||t.target._simulatedClick&&!t._simulated?void u.DomEvent.stop(t):(u.DomEvent._lastClick=n,void e(t))}},u.DomEvent.addListener=u.DomEvent.on,u.DomEvent.removeListener=u.DomEvent.off,u.Draggable=u.Evented.extend({options:{clickTolerance:3},statics:{START:u.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(u.DomEvent.on(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(u.DomEvent.off(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!u.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(u.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&this._enabled&&(u.Draggable._dragging=!0,this._preventOutline&&u.DomUtil.preventOutline(this._element),u.DomUtil.disableImageDrag(),u.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new u.Point(e.clientX,e.clientY),u.DomEvent.on(a,u.Draggable.MOVE[t.type],this._onMove,this).on(a,u.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new u.Point(e.clientX,e.clientY),o=n.subtract(this._startPoint);(o.x||o.y)&&(Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(u.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=u.DomUtil.getPosition(this._element).subtract(o),u.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,r.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),u.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,u.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=u.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),u.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){if(!t._simulated&&this._enabled){u.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(u.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in u.Draggable.MOVE)u.DomEvent.off(a,u.Draggable.MOVE[e],this._onMove,this).off(a,u.Draggable.END[e],this._onUp,this);u.DomUtil.enableImageDrag(),u.DomUtil.enableTextSelection(),this._moved&&this._moving&&(u.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,u.Draggable._dragging=!1}}}),u.Handler=u.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),u.Map.mergeOptions({dragging:!0,inertia:!u.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),u.Map.Drag=u.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new u.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}u.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-grab"),u.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=u.latLngBounds(this._map.options.maxBounds);this._offsetLimit=u.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,i=(o-e+n)%t+e-n,r=(o+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(r+n)?i:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,o=!n.inertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/r),l=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),h=s.multiplyBy(c/l),p=c/(n.inertiaDeceleration*a),d=h.multiplyBy(-p/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),u.Util.requestAnimFrame(function(){e.panBy(d,{duration:p,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),u.Map.addInitHook("addHandler","dragging",u.Map.Drag),u.Map.mergeOptions({doubleClickZoom:!0}),u.Map.DoubleClickZoom=u.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-o:n+o;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),u.Map.addInitHook("addHandler","doubleClickZoom",u.Map.DoubleClickZoom),u.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),u.Map.ScrollWheelZoom=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){u.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=u.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u.bind(this._performZoom,this),o),u.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),u.Map.addInitHook("addHandler","scrollWheelZoom",u.Map.ScrollWheelZoom),u.extend(u.DomEvent,{_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",_touchend:u.Browser.msPointer?"MSPointerUp":u.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function o(t){var e;if(e=u.Browser.pointer?u.DomEvent._pointersCount:t.touches.length,!(e>1)){var n=Date.now(),o=n-(r||n);a=t.touches?t.touches[0]:t,s=o>0&&l>=o,r=n}}function i(){if(s&&!a.cancelBubble){if(u.Browser.pointer){var t,n,o={};for(n in a)t=a[n],o[n]=t&&t.bind?t.bind(a):t;a=o}a.type="dblclick",e(a),r=null}}var r,a,s=!1,l=250,c="_leaflet_",h=this._touchstart,p=this._touchend;return t[c+h+n]=o,t[c+p+n]=i,t[c+"dblclick"+n]=e,t.addEventListener(h,o,!1),t.addEventListener(p,i,!1),u.Browser.edge||t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",o=t[n+this._touchstart+e],i=t[n+this._touchend+e],r=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,o,!1),t.removeEventListener(this._touchend,i,!1),u.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),u.extend(u.DomEvent,{POINTER_DOWN:u.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:u.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:u.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:u.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,o){return"touchstart"===e?this._addPointerStart(t,n,o):"touchmove"===e?this._addPointerMove(t,n,o):"touchend"===e&&this._addPointerEnd(t,n,o),this},removePointerListener:function(t,e,n){var o=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,o,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,o,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)),this},_addPointerStart:function(t,e,n){var o=u.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;u.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=o,t.addEventListener(this.POINTER_DOWN,o,!1),!this._pointerDocListener){var i=u.bind(this._globalPointerUp,this);a.documentElement.addEventListener(this.POINTER_DOWN,u.bind(this._globalPointerDown,this),!0),a.documentElement.addEventListener(this.POINTER_MOVE,u.bind(this._globalPointerMove,this),!0),
a.documentElement.addEventListener(this.POINTER_UP,i,!0),a.documentElement.addEventListener(this.POINTER_CANCEL,i,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var n in this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var o=u.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1)},_addPointerEnd:function(t,e,n){var o=u.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=o,t.addEventListener(this.POINTER_UP,o,!1),t.addEventListener(this.POINTER_CANCEL,o,!1)}}),u.Map.mergeOptions({touchZoom:u.Browser.touch&&!u.Browser.android23,bounceAtZoomLimits:!0}),u.Map.TouchZoom=u.Handler.extend({addHooks:function(){u.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),u.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),u.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>i||this._zoom>e.getMaxZoom()&&i>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),u.Util.cancelAnimFrame(this._animRequest);var a=u.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=u.Util.requestAnimFrame(a,this,!0),u.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,u.Util.cancelAnimFrame(this._animRequest),u.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),u.Map.addInitHook("addHandler","touchZoom",u.Map.TouchZoom),u.Map.mergeOptions({tap:!0,tapTolerance:15}),u.Map.Tap=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){u.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(u.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new u.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(u.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),u.DomEvent.on(a,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),u.DomEvent.off(a,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new u.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=a.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,r,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),u.Browser.touch&&!u.Browser.pointer&&u.Map.addInitHook("addHandler","tap",u.Map.Tap),u.Map.mergeOptions({boxZoom:!0}),u.Map.BoxZoom=u.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){u.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){u.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(this._resetState(),u.DomUtil.disableTextSelection(),u.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void u.DomEvent.on(a,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=u.DomUtil.create("div","leaflet-zoom-box",this._container),u.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new u.Bounds(this._point,this._startPoint),n=e.getSize();u.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(u.DomUtil.remove(this._box),u.DomUtil.removeClass(this._container,"leaflet-crosshair")),u.DomUtil.enableTextSelection(),u.DomUtil.enableImageDrag(),u.DomEvent.off(a,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(u.bind(this._resetState,this),0);var e=new u.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),u.Map.addInitHook("addHandler","boxZoom",u.Map.BoxZoom),u.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),u.Map.Keyboard=u.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),u.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),u.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=a.body,e=a.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),r.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,o=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;n>e;e++)o[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;n>e;e++)o[i.right[e]]=[t,0];for(e=0,n=i.down.length;n>e;e++)o[i.down[e]]=[0,t];for(e=0,n=i.up.length;n>e;e++)o[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,o=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;n>e;e++)o[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;n>e;e++)o[i.zoomOut[e]]=-t},_addHooks:function(){u.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){u.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,o=this._map;if(n in this._panKeys){if(o._panAnim&&o._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=u.point(e).multiplyBy(3)),o.panBy(e),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds)}else if(n in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;o.closePopup()}u.DomEvent.stop(t)}}}),u.Map.addInitHook("addHandler","keyboard",u.Map.Keyboard),u.Handler.MarkerDrag=u.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new u.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),u.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&u.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,o=u.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(o);n&&u.DomUtil.setPosition(n,o),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),u.Control=u.Class.extend({options:{position:"topright"},initialize:function(t){u.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return u.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},remove:function(){return this._map?(u.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),u.control=function(t){return new u.Control(t)},u.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,i){var r=n+t+" "+n+i;e[t+i]=u.DomUtil.create("div",r,o)}var e=this._controlCorners={},n="leaflet-",o=this._controlContainer=u.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){u.DomUtil.remove(this._controlContainer)}}),u.Control.Zoom=u.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=u.DomUtil.create("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,i){var r=u.DomUtil.create("a",n,o);return r.innerHTML=t,r.href="#",r.title=e,u.DomEvent.on(r,"mousedown dblclick",u.DomEvent.stopPropagation).on(r,"click",u.DomEvent.stop).on(r,"click",i,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";u.DomUtil.removeClass(this._zoomInButton,e),u.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&u.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&u.DomUtil.addClass(this._zoomInButton,e)}}),u.Map.mergeOptions({zoomControl:!0}),u.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new u.Control.Zoom,this.addControl(this.zoomControl))}),u.control.zoom=function(t){return new u.Control.Zoom(t)},u.Control.Attribution=u.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=u.DomUtil.create("div","leaflet-control-attribution"),u.DomEvent&&u.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),u.Map.mergeOptions({attributionControl:!0}),u.Map.addInitHook(function(){this.options.attributionControl&&(new u.Control.Attribution).addTo(this)}),u.control.attribution=function(t){return new u.Control.Attribution(t)},u.Control.Scale=u.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=u.DomUtil.create("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=u.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=u.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=1e3>e?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,o,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(o=this._getRoundNum(i),this._updateScale(this._iScale,o+" ft",o/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),u.control.scale=function(t){return new u.Control.Scale(t)},u.Control.Layers=u.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(t,e,n){u.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(u.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){u.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(u.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):u.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return u.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=u.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),u.DomEvent.disableClickPropagation(e),u.Browser.touch||u.DomEvent.disableScrollPropagation(e);var n=this._form=u.DomUtil.create("form",t+"-list");if(this.options.collapsed){u.Browser.android||u.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this);var o=this._layersLink=u.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",u.Browser.touch?u.DomEvent.on(o,"click",u.DomEvent.stop).on(o,"click",this.expand,this):u.DomEvent.on(o,"focus",this.expand,this),u.DomEvent.on(n,"click",function(){setTimeout(u.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=u.DomUtil.create("div",t+"-base",n),this._separator=u.DomUtil.create("div",t+"-separator",n),this._overlaysList=u.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&u.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;u.DomUtil.empty(this._baseLayersList),u.DomUtil.empty(this._overlaysList);var t,e,n,o,i=0;for(n=0;n<this._layers.length;n++)o=this._layers[n],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,i+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(u.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=a.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e,n=a.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=a.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=u.stamp(t.layer),u.DomEvent.on(e,"click",this._onInputClick,this);var i=a.createElement("span");i.innerHTML=" "+t.name;var r=a.createElement("div");n.appendChild(r),r.appendChild(e),r.appendChild(i);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,o=this._form.getElementsByTagName("input"),i=[],r=[];this._handlingClick=!0;for(var a=o.length-1;a>=0;a--)t=o[a],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?i.push(e):!t.checked&&n&&r.push(e);for(a=0;a<r.length;a++)this._map.removeLayer(r[a]);for(a=0;a<i.length;a++)this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),o=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==s&&o<e.options.minZoom||e.options.maxZoom!==s&&o>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),u.control.layers=function(t,e,n){return new u.Control.Layers(t,e,n)},u.PosAnimation=u.Evented.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=u.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=u.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;n>e?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),u.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){u.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),u.Map.include({setView:function(t,e,n){if(e=e===s?this._zoom:this._limitZoom(e),t=this._limitCenter(u.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==s&&(n.zoom=u.extend({animate:n.animate},n.zoom),n.pan=u.extend({animate:n.animate,duration:n.duration},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=u.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new u.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){u.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){u.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),u.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var d=u.DomUtil.TRANSITION&&u.Browser.any3d&&!u.Browser.mobileOpera;d&&u.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),u.DomEvent.on(this._proxy,u.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),u.Map.include(d?{_createAnimProxy:function(){var t=this._proxy=u.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=u.DomUtil.TRANSFORM,o=t.style[n];u.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();u.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/o);return n.animate===!0||this.getSize().contains(i)?(u.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0):!1},_animateZoom:function(t,e,n,o){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,u.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(u.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(u.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),u.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),u.Map.include({flyTo:function(t,e,n){function o(t){var e=t?-1:1,n=t?y:v,o=y*y-v*v+e*x*x*b*b,i=2*n*x*b,r=o/i,a=Math.sqrt(r*r+1)-r,s=1e-9>a?-18:Math.log(a);return s}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return i(t)/r(t)}function l(t){return v*(r(w)/r(w+_*t))}function c(t){return v*(r(w)*a(w+_*t)-i(w))/x}function h(t){return 1-Math.pow(1-t,1.5)}function p(){var n=(Date.now()-S)/E,o=h(n)*C;1>=n?(this._flyToFrame=u.Util.requestAnimFrame(p,this),this._move(this.unproject(d.add(f.subtract(d).multiplyBy(c(o)/b)),m),this.getScaleZoom(v/l(o),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!u.Browser.any3d)return this.setView(t,e,n);this._stop();var d=this.project(this.getCenter()),f=this.project(t),g=this.getSize(),m=this._zoom;t=u.latLng(t),e=e===s?m:e;var v=Math.max(g.x,g.y),y=v*this.getZoomScale(m,e),b=f.distanceTo(d)||1,_=1.42,x=_*_,w=o(0),S=Date.now(),C=(o(1)-w)/_,E=n.duration?1e3*n.duration:1e3*C*.8;return this._moveStart(!0),p.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)}}),u.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=u.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=u.bind(this._handleGeolocationResponse,this),n=u.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,o=new u.LatLng(e,n),i=o.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(i);this.setView(o,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:o,bounds:i,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)}})}(window,document)},function(t,e){(function(){var e,n;n=[],e={},t.exports=function(t,o){var i,r,a,s,l,u,c,h;if("string"==typeof o){if(2!==o.length)throw{name:"ArgumentException",message:"The format for string options is '<thousands><decimal>' (exactly two characters)"};h=o[0],i=o[1]}else if(o instanceof Array){if(2!==o.length)throw{name:"ArgumentException",message:"The format for array options is ['<thousands>','[<decimal>'] (exactly two elements)"};h=o[0],i=o[1]}else h=(null!=o?o.thousands:void 0)||e.thousands,i=(null!=o?o.decimal:void 0)||e.decimal;return u=""+h+i,l=n[u],l||(l=n[u]=new RegExp("^\\s*(-?(?:(?:\\d{1,3}(?:\\"+h+"\\d{3})+)|\\d*))(?:\\"+i+"(\\d*))?\\s*$")),c=t.match(l),c&&3===c.length?(a=c[1].replace(new RegExp("\\"+h,"g"),""),r=c[2],s=parseFloat(a+"."+r)):NaN},t.exports.setOptions=function(t){var n,o;for(n in t)o=t[n],e[n]=o},t.exports.factoryReset=function(){return e={thousands:",",decimal:"."}},t.exports.factoryReset()}).call(this)},function(t,e){t.exports=".moveable {\n    margin-bottom: <%= spacing %>px !important;\n}\n.download-mode .moveable_w:last-child .moveable:last-child,\n.web-mode .moveable_w:last-child .moveable:last-child,\n.embed-mode .moveable_w:last-child .moveable:last-child,\n.capture-mode .moveable_w:last-child .moveable:last-child {\n    margin-bottom: 0!important;\n}\n\n.ig-separator {\n    margin-bottom: 0!important;\n    margin-top: -<%= spacing %>px;\n    padding-bottom: <%= spacing %>px;\n    padding-top: <%= spacing %>px;\n}\n\n\n.video {\n    padding-bottom: 75%;\n    height: 0;\n}\n.video iframe {\n    border: 0;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n}\n.ig-items {\n    margin: <%= padding %>px;\n    padding-top: <%= top %>px;\n}\n\n/* Doughnut chart text in center */\nsvg .igc-pie-center-text .igc-pie-center-text-node {\n    font-family: 'PT Sans Narrow', 'Arial Narrow';\n    font-size: 24px;\n    fill: #626262;\n    font-weight: 400;\n    font-style: normal;\n}\n\n/* Semi pie chart text in center defaults */\nsvg .igc-semi-pie-center-text .igc-semi-pie-center-text-node {\n    font-family: 'PT Sans Narrow', 'Arial Narrow';\n    font-size: 30px;\n    fill: #626262;\n    font-weight: 400;\n    font-style: normal;\n}\n\n/* Wordcloud text node */\nsvg .igc-wc-node {\n    cursor: default;\n}\n\n<% if (treemapTextName) { %>\n/* Treemap text category name label */\n.igc-treemap-node-text-name {\n<%= treemapTextName %>\n}\n<% } %>\n<% if (treemapTextValue) { %>\n/* Treemap text category value label */\n.igc-treemap-node-text-value {\n<%= treemapTextValue %>\n}\n<% } %>\n\n<% if (timer) { %>\n\n/* Timer */\n\n<% if (timer.digits) { %>\n.igc-timer-value {\n<%= timer.digits %>\n}\n<% } %>\n\n<% if (timer.units) { %>\n.igc-timer-title {\n<%= timer.units %>\n}\n<% } %>\n\n<% if (timer.dots) { %>\n.igc-timer-value:after {\n<%= timer.dots %>\n}\n<% } %>\n<% } %>\n\n/* / Timer */\n\n<%= css %>\n#footer {\n    margin-left: <%= padding %>px;\n    margin-right: <%= padding %>px;\n}\n\n\n.bodytext .innertext a,\n.bodytext .innertext a:visited {\n    color: <%= color.link || '#0000EE' %>;\n}\n"},function(t,e){t.exports="<% var props = {\n    fontFamily: 'font-family',\n    fontStyle: 'font-style',\n    fontWeight: 'font-weight',\n    textAlign: 'text-align',\n    fontSize: 'font-size',\n    color: 'color'\n};\n_.each(_.keys(props), function(prop) {\n    if (prop in style) { %><%= [props[prop], \": \", style[prop],((prop === \"fontSize\") ? \"px\" : \"\"), \";\"].join(\"\") %><% } %>\n<% }) %>\n"},function(t,e){t.exports=".relative .moveable {\n    margin-bottom: <%= spacingElementMin %>px !important;\n    margin-left: 20px;\n    margin-right: 20px;\n    min-height: 30px;\n}\n.video {\n    padding-bottom: 75%;\n    height: 0;\n}\n.video iframe {\n    border: 0;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n}\n\n.ig-container {\n    background-color: <%= color.bg %>;\n    color: <%= color.text %>;\n}\n\n.ig-items {\n    padding-top: <%= top %>px;\n}\n\n/* template element spacing regarding to bg color */\n.ig-theme-group-text {\n    background-color: <%= color.element.bg %>;\n<% if(color.element.bg === 'transparent') { %>\n    margin-bottom: <%= spacingElementMax %>px !important;\n<% } else { %>\n    margin-bottom: <%= spacingElementMin %>px;\n    padding: <%= spacingElementMin %>px;\n<% } %>\n}\n.ig-theme-group-chart {\n    background-color: <%= color.chart.bg %>;\n<% if(color.chart.bg === 'transparent') { %>\n    margin-bottom: <%= spacingElementMax %>px !important;\n<% } else { %>\n    margin-bottom: <%= spacingElementMin %>px;\n    padding: <%= spacingElementMin %>px;\n<% } %>\n}\n\n/* template fonts */\n.headline .innertext {\n<%= _.template(elementTpl)(font.title) %>\n}\n.body-text .innertext {\n<%= _.template(elementTpl)(font.bodyText) %>\n    background-color: <%= color.element.bg %>;\n}\n.quoted .quotetext .innertext {\n<%= _.template(elementTpl)(font.quoteText) %>\n}\n.quoted .quotetitle .innertext {\n<%= _.template(elementTpl)(font.quoteAuthor) %>\n}\n.chart-title .innertext {\n<%= _.template(elementTpl)(font.chartTitle) %>\n}\n\n/* footer style */\n#footer {\n    margin-left: <%= padding %>px;\n    margin-right: <%= padding %>px;\n}\n\n.ig-copyright {\n    margin-bottom: 20px;\n    font-family: <%= font.valueLabel.fontFamily %>;\n    font-size: <%= font.valueLabel.fontSize %>px;\n    font-style: <%= font.valueLabel.fontStyle %>;\n}\n\n.footer-bottom {\n    border-top-color: <%= color.textRgba %>;\n    border-top-width: 2px;\n    border-top-style: solid;\n    padding-top: 20px;\n\n}\n\n.ig-logo {\n    margin-left: 10px;\n}\n\n/* Doughnut chart text in center */\nsvg .igc-pie-center-text .igc-pie-center-text-node {\n    font-family: 'PT Sans Narrow', 'Arial Narrow';\n    font-size: 24px;\n    fill: #626262;\n    font-weight: 400;\n    font-style: normal;\n}\n\n/* Theme css customisations */\n<%= css %>\n";
},function(t,e){t.exports="    font-family: <%= fontFamily %>;\n    font-size: <%= fontSize %>px;\n    font-style: <%= fontStyle %>;\n    font-weight: <%= fontWeight %>;\n    text-align: <%= textAlign %>;"},function(t,e){t.exports='<div class="bg_layer"></div>\n\n<% if (app && app.view === \'embed\') { %>\n<div class="share_wrap">\n<% } %>\n    <div class="share_v3 <%= self.model.get(\'public\') ? \'public\' : \'private\' %>">\n        <div class="sh_inner">\n            <h2><%= i18n.t("app.share.share") || \'Share\' %></h2>\n            <%= template(\'unpublish\') %>\n\n            <%if (canChooseType) {%>\n                <div class="type_select">\n                    <%= i18n.t(\'app.share.change_type\') || \'Change type\' %>: <a class="switcher" href="javascript:;">\n                        <%= type === \'interactive\' ? (i18n.t(\'app.share.interactive\') || \'Interactive\') : (i18n.t(\'app.share.image\') || \'Image\') %> </a>\n                    <ul class="type_dropdown">\n                        <li data-type="interactive"><%= i18n.t(\'app.share.interactive\') || \'Interactive\' %></li>\n                        <li data-type="image"><%= i18n.t(\'app.share.image\') || \'Image\' %></li>\n                    </ul>\n                </div>\n            <%}%>\n            <% if (type === \'interactive\') { %>\n                <div class="sh_url">\n                    <input readonly class="sh_inp" value="<%= url %>" >\n                    <a data-ga-event-click="edit:publish:View on Web" class="sh_view share_view_web" href="<%= url %>" title="<%= i18n.t("app.share.view_on_web") || \'View on Web\' %>" target="_blank"><%= i18n.t("app.share.view_on_web") || \'View on Web\' %></a>\n                </div>\n            <% } else { %>\n                <div class="sh_image">\n                    <input readonly class="sh_inp" value="<%= imageUrl %>" >\n                    <a data-ga-event-click="edit:publish:View image" class="sh_view share_view_web" href="<%= imageUrl %>" title="<%= i18n.t("app.share.view_image") || \'View Image\' %>" target="_blank"><%= i18n.t("app.share.view_image") || \'View Image\' %></a>\n                </div>\n            <% }%>\n\n            <% if (self.model.get(\'public\')) { %>\n            <div class="sh_soc share_social">\n                <a data-ga-event-click="edit:publish:Facebook" target="_blank" class="sh_a sh_fb" href="http://www.facebook.com/sharer/sharer.php?u=<%= urlEncoded %>"></a>\n                <a data-ga-event-click="edit:publish:Twitter" target="_blank" class="sh_a sh_tw" href="http://twitter.com/share?text=<%= titleEncode %>%20-%20&url=<%= urlEncoded %>"></a>\n                <a data-ga-event-click="edit:publish:Google+" target="_blank" class="sh_a sh_gp" href="https://plus.google.com/share?url=<%= urlEncoded %>"></a>\n                <a data-ga-event-click="edit:publish:Linkedin" target="_blank" class="sh_a sh_in" href="http://www.linkedin.com/shareArticle?mini=true&url=<%= urlEncoded %>&title=<%= titleEncode %>"></a>\n                <a data-ga-event-click="edit:publish:Pinterest" target="_blank" class="sh_a sh_pi" href="http://pinterest.com/pin/create/button/?url=<%= urlEncoded %>&description=<%= titleEncode %>&media=<%= media %>"></a>\n                <a data-ga-event-click="edit:publish:Reddit" target="_blank" class="sh_a sh_rd" href="http://reddit.com/submit?url=<%= urlEncoded %>&title=<%= titleEncode %>"></a>\n                <a data-ga-event-click="edit:publish:Tumblr" target="_blank" class="sh_a sh_tm" href="https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=link&content=<%= urlEncoded %>&url=<%= urlEncoded %>&caption=<%= titleEncode %>"></a>\n                <!--<a target="_blank" href="http://vk.com/share.php?url=<%= urlEncoded %>&title=<%= titleEncode %>">vk.com</a>\n                <a target="_blank" href="http://www.ok.ru/dk?st.cmd=addShare&st.s=1&st._surl=<%= urlEncoded %>&st.comments=<%= titleEncode %>">ok.com</a>-->\n            </div>\n            <% } %>\n\n            <%= template(\'body\') %>\n\n        </div>\n    </div>\n<% if (app && app.view === \'embed\') { %>\n</div>\n<% } %>\n'},function(t,e){t.exports='<%= template(\'embed\') %>\n<button data-action="close" class="btn_bottom share_button_close">Close</button>\n'},function(t,e){t.exports='<div class="embed_tabs share_tabs share_embed_tabs">\n    <ul class="em_nav">\n        <li class="em_li"><%= i18n.t("app.share.responsive") || "Responsive" %>\n            <%= template(\'tooltip\', {\'msg\': (i18n.t("app.share.adjust_to_its_container") || "Your embedded infographic will adjust to its container." )}) %>\n        </li>\n        <li class="em_li active"><%= i18n.t("app.share.async") || "Async" %>\n            <%= template(\'tooltip\', {\'msg\': (i18n.t("app.share.adjust_to_its_container") || "Your embedded infographic will adjust to its container." )}) %>\n        </li>\n        <li class="em_li"><%= i18n.t("app.share.fixed") || "Fixed" %>\n            <%= template(\'tooltip\', {\'msg\': (i18n.t("app.share.embed_size_will_be_fixed") || "Not recommended, as the infographic size may vary across different platforms, but your embed size will be fixed.")}) %>\n        </li>\n    </ul>\n\n    <div id="em_tab_1" class="em_tab">\n        <textarea readonly id="emt_1" class="em_code"><%= embedResponsive %></textarea>\n    </div>\n    <div id="em_tab_2" class="em_tab active">\n        <textarea readonly id="emt_2" class="em_code"><%= embedAsync %></textarea>\n    </div>\n    <div id="em_tab_3" class="em_tab">\n        <textarea readonly id="emt_3" class="em_code"><%= embedFixed %></textarea>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="ig-items">\n</div>\n<div id="footer"></div>\n<div style="clear: both;"></div>\n'},function(t,e){t.exports='<div class="bodytext">\n  <div class="innertext" data-placeholder="<%= i18n.t("app.infographic.dummy_text") %>"><%= text %></div>\n</div>\n'},function(t,e){t.exports='<div class="bodytitle">\n<div class="innertext" data-placeholder="<%= i18n.t("app.infographic.dummy_text") %>"><%= text %></div>\n</div>\n'},function(t,e){t.exports='<div id="Chart_<%= id %>" class="inner notranslate"></div>\n'},function(t,e){t.exports='<% if (typeof (tableCaption) !== \'undefined\') { %>\n<h2 class="moveable particle table-caption">\n    <div class="chart-title">\n        <div class="innertext"><%= tableCaption %></div>\n    </div>\n</h2>\n<% } %>\n<div id="Chart_<%= id %>" class="igc-chart inner">\n    <div class="igc-textual">\n    <% _.each(data, function(entry, i) {\n        if (entry.sheet === sheet && (i > 0 || !hideFirstRow)) {\n    %>\n        <div class="igc-textual-entry">\n            <div class="igc-textual-icon"><%= entry.value[2] %></div>\n            <div class="igc-textual-text innertext">\n                <div style="color: <%- entry.color %>" class="igc-textual-figure"><%= entry.value[0] %></div>\n                <div class="igc-textual-fact"><%= entry.value[1] %></div>\n            </div>\n        </div>\n    <%\n        }\n    }); %>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="heatmap-legend">\n    <label class="heatmap-label"><%= title %></label>\n    <% _.each(entries, function(entry) { %>\n        <div class="heatmap-legend-item">\n            <span class="heatmap-background" style="background: <%= entry.color %>"></span><%= entry.label %>\n        </div>\n    <% }) %>\n</div>'},function(t,e){t.exports='<b class="p1"></b>\n<b class="p2"></b>\n<img width="<%= width %>" src="<%= src %>" alt="">\n'},function(t,e){t.exports='<div class="ig-logo <%= infogram ? \' infogram_logo\' : \'\' %>">\n<% if (customLink) { %>\n    <a href="<%= customLink %>" target="_blank">\n        <img src="<%= url %>" alt=""/>\n    </a>\n<% } else { %>\n    <img src="<%= url %>" alt=""/>\n<% } %>\n</div>\n'},function(t,e){t.exports='<% if (typeof (tableCaption) !== \'undefined\') { %>\n<h2 class="moveable particle table-caption">\n    <div class="chart-title">\n        <div class="innertext"><%= tableCaption %></div>\n    </div>\n</h2>\n<% } %>\n<div class="map" id="map_container_<%= id %>">\n	<div id="map_<%= id %>" class="igc-submap" style=""></div>\n	<div class="igc-legend"></div>\n</div>\n'},function(t,e){t.exports='<div style="margin-left: -<%= width/2 %>px; margin-top: -<%= height/2 %>px;" class="map-marker-container">\n    <svg data-id="<%= val %>" height="<%= height %>" width="<%= width %>" version="1.1"  viewBox="0 0 <%= shapeWidth %> <%= shapeHeight %>"\n        xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" class="igc-table-scaledpath" <% if (typeof offsetX !== "undefined"){ %>transform="translate(<%=offsetX %>,<%=offsetY %>)"<% } %> fill="<%= fill %>" d="<%= shape %>" />\n    </svg>\n</div>\n'},function(t,e){t.exports="<img src='<%= image %>'>\n"},function(t,e){t.exports='<iframe src="//www.slideshare.net/slideshow/embed_code/<%= url %>" frameborder="0" allowfullscreen> </iframe>\n'},function(t,e){t.exports='<% if (image) { %>\n    <img alt="image" src="<%= image %>" />\n<% } %>\n\n<div class="text">\n    <h2><%= title %></h2>\n    <p><%= description %></p>\n    <a href="<%= url %>" title="<%= url %>" target="_blank" rel="nofollow"><%= url %></a>\n</div>\n\n<div class="clear"></div>\n'},function(t,e){t.exports='<iframe src="<%= src %>?wmode=transparent" frameBorder="0" allowfullscreen=""></iframe>\n'},function(t,e){t.exports='<div class="quote">\n  <div class="quotetext">\n    <div class="innertext" data-placeholder="<%= i18n.t("app.infographic.dummy_quote_text") %>"><%= text %></div>\n  </div>\n  <div class="quotetitle">\n    <div class="innertext" data-placeholder="<%= i18n.t("app.infographic.enter_quote_author") %>"><%= author %></div>\n  </div>\n</div>\n'},function(t,e){t.exports='<svg width="<%= height %>" height="<%= (width + 10) %>" version="1.1"\n    xmlns="http://www.w3.org/2000/svg">\n    <text transform="matrix(0,-1,1,0,0,0)" x="-<%= (width + 11) %>" y="<%= (height-4.5) %>" class="igc-table-header">\n        <%= text %>\n    </text>\n</svg>\n'},function(t,e){t.exports='<div class="ig-separator-line"></div>\n'},function(t,e){t.exports='<% if (typeof (tableCaption) !== \'undefined\') { %>\n<h2 class="moveable particle table-caption chart-title">\n    <div class="bodytitle">\n        <div class="innertext"><%= tableCaption %></div>\n    </div>\n</h2>\n<% } %>\n<style>\n#igc-subtable-<%= id %> .igc-table-header,\n#igc-subtable-<%= id %> thead .igc-table-cell {\n    <%= headerStyle %>\n}\n#igc-subtable-<%= id %> tbody tr:nth-child(odd) .igc-table-cell {\n    <%= oddStyle %>\n}\n#igc-subtable-<%= id %> tbody tr:nth-child(even) .igc-table-cell,\n.search-<%= id %> {\n    <%= evenStyle %>\n}\n#igc-subtable-<%= id %> .has-first-column tr .igc-table-header:first-child {\n    <%= firstColumnStyle %>\n}\n#igc-subtable-<%= id %> .igc-table .igc-table-image {\n    height: <%= imageHeight %>px;\n}\n\n#igc-subtable-<%= id %> .igc-table svg.igc-table-image {\n    max-width: <%= imageHeight * 2 %>px;\n}\n\n</style>\n<div id="igc-subtable-<%= id%>" class="igc-chart inner">\n    <% if (custom.showSearch) { %>\n    <div class="igc-table-search-container igicon-search search-<%= id %>">\n        <input type="text" placeholder="search" class=" igc-table-search-input" />\n    </div>\n    <% } %>\n    <div class="igc-table-container">\n        <table class="<%= classNames %>" id="Chart_<%= id %>">\n            <colgroup>\n            <% _.each(data[0], function(entry) { %>\n                <col></col>\n            <% }); %>\n            </colgroup>\n        <% if (data.length > 0) { %>\n            <% if (custom.showColHeader !== false && custom.rowHeader !== false) { %>\n            <thead>\n                <tr>\n                    <th data-column="0" class="igc-table-header igicon-sort <% if (!custom.A1cell) { %>igc-hidden-cell<% } %>">\n                        <span class="igc-table-header-span"><%= data[0][0] %></span>\n                    </th>\n                    <% _.each(data[0], function(entry, i) {\n                        if (i !== 0) { %>\n                    <th data-column="<%= i %>" class="igc-table-header igc-table-dynamic-column igicon-sort">\n                        <span class="igc-table-header-span"><%= entry %></span>\n                    </th>\n                    <%\n                    }\n                    }); %>\n                </tr>\n            </thead>\n            <% } %>\n            <tbody class="igc-table-body">\n                <% _.each(data, function(row, i) {\n                    if (i !== 0 || custom.rowHeader === false) { %>\n                        <tr class="igc-table-row">\n                            <% if (custom.headerColumn) { %>\n                            <th class="igc-table-header<% if (custom.firstColumnTextAlign){%> __<%= textFormat.firstColumnTextAlign %><% }%>">\n                                <span class="igc-table-header-span"><%= row[0] %></span>\n                            </th>\n                            <% } %>\n                            <% _.each(row, function(cell, j) {\n                                if (j !== 0 || ! custom.headerColumn) {%>\n                                    <td class="igc-table-cell">\n                                        <span class="igc-table-cell-span">\n                                            <%= cell %>\n                                        </span>\n                                    </td>\n                                <% } %>\n                            <% }); %>\n                        </tr>\n                    <% } %>\n                <% }); %>\n            </tbody>\n        <% } %>\n        </table>\n    </div>\n    <% if (custom.showDownload) { %>\n        <div style="color: <%= downloadColor %>;" class="igc-table-export">\n            <span class="icon-download"></span>\n            <span class="igc-table-export-text">\n                Download data\n            </span>\n        </div>\n    <% } %>\n</div>\n'},function(t,e){t.exports='<div class="igc-table-fixed-header" id="hd<%= id %>">\n    <table class="<%= className %> igc-table-copy">\n        <thead><%= html %></thead>\n    </table>\n</div>\n'},function(t,e){t.exports='<div class="maintitle">\n    <div class="innertext" data-placeholder="<%= i18n.t("app.infographic.double_click_to_add_title") %>"><% if (url) { %><a href="<%= url %>" class="link-no-underline" target="_blank"><%= text %></a><% } else { %><%= text %><% } %></div>\n</div>\n'},function(t,e){t.exports='<iframe src="<%= src %>?wmode=transparent" frameBorder="0" allowfullscreen=""></iframe>\n'},function(t,e,n){"use strict";var o=n(56),i=n(520),r={focusDOMComponent:function(){i(o.getNodeFromInstance(this))}};t.exports=r},function(t,e,n){"use strict";function o(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function r(t){switch(t){case M.topCompositionStart:return O.compositionStart;case M.topCompositionEnd:return O.compositionEnd;case M.topCompositionUpdate:return O.compositionUpdate}}function a(t,e){return t===M.topKeyDown&&e.keyCode===x}function s(t,e){switch(t){case M.topKeyUp:return-1!==_.indexOf(e.keyCode);case M.topKeyDown:return e.keyCode!==x;case M.topKeyPress:case M.topMouseDown:case M.topBlur:return!0;default:return!1}}function l(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function u(t,e,n,o){var i,u;if(w?i=r(t):P?s(t,n)&&(i=O.compositionEnd):a(t,n)&&(i=O.compositionStart),!i)return null;E&&(P||i!==O.compositionStart?i===O.compositionEnd&&P&&(u=P.getData()):P=m.getPooled(o));var c=v.getPooled(i,e,n,o);if(u)c.data=u;else{var h=l(n);null!==h&&(c.data=h)}return f.accumulateTwoPhaseDispatches(c),c}function c(t,e){switch(t){case M.topCompositionEnd:return l(e);case M.topKeyPress:var n=e.which;return n!==T?null:(I=!0,k);case M.topTextInput:var o=e.data;return o===k&&I?null:o;default:return null}}function h(t,e){if(P){if(t===M.topCompositionEnd||s(t,e)){var n=P.getData();return m.release(P),P=null,n}return null}switch(t){case M.topPaste:return null;case M.topKeyPress:return e.which&&!i(e)?String.fromCharCode(e.which):null;case M.topCompositionEnd:return E?null:e.data;default:return null}}function p(t,e,n,o){var i;if(i=C?c(t,n):h(t,n),!i)return null;var r=y.getPooled(O.beforeInput,e,n,o);return r.data=i,f.accumulateTwoPhaseDispatches(r),r}var d=n(127),f=n(198),g=n(75),m=n(818),v=n(854),y=n(857),b=n(139),_=[9,13,27,32],x=229,w=g.canUseDOM&&"CompositionEvent"in window,S=null;g.canUseDOM&&"documentMode"in document&&(S=document.documentMode);var C=g.canUseDOM&&"TextEvent"in window&&!S&&!o(),E=g.canUseDOM&&(!w||S&&S>8&&11>=S),T=32,k=String.fromCharCode(T),M=d.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[M.topCompositionEnd,M.topKeyPress,M.topTextInput,M.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[M.topBlur,M.topCompositionEnd,M.topKeyDown,M.topKeyPress,M.topKeyUp,M.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[M.topBlur,M.topCompositionStart,M.topKeyDown,M.topKeyPress,M.topKeyUp,M.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[M.topBlur,M.topCompositionUpdate,M.topKeyDown,M.topKeyPress,M.topKeyUp,M.topMouseDown]}},I=!1,P=null,L={eventTypes:O,extractEvents:function(t,e,n,o){return[u(t,e,n,o),p(t,e,n,o)]}};t.exports=L},function(t,e,n){"use strict";var o=n(525),i=n(75),r=(n(96),n(770),n(864)),a=n(773),s=n(560),l=(n(31),s(function(t){return a(t)})),u=!1,c="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(p){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(t,e){var n="";for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];null!=i&&(n+=l(o)+":",n+=r(o,i,e)+";")}return n||null},setValueForStyles:function(t,e,n){var i=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=r(a,e[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)i[a]=s;else{var l=u&&o.shorthandPropertyExpansions[a];if(l)for(var h in l)i[h]="";else i[a]=""}}}};t.exports=d},function(t,e,n){"use strict";function o(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function i(t){var e=C.getPooled(I.change,L,t,E(t));_.accumulateTwoPhaseDispatches(e),S.batchedUpdates(r,e)}function r(t){b.enqueueEvents(t),b.processEventQueue(!1)}function a(t,e){P=t,L=e,P.attachEvent("onchange",i)}function s(){P&&(P.detachEvent("onchange",i),P=null,L=null)}function l(t,e){return t===O.topChange?e:void 0}function u(t,e,n){t===O.topFocus?(s(),a(e,n)):t===O.topBlur&&s()}function c(t,e){P=t,L=e,D=t.value,A=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(P,"value",j),P.attachEvent?P.attachEvent("onpropertychange",p):P.addEventListener("propertychange",p,!1)}function h(){P&&(delete P.value,P.detachEvent?P.detachEvent("onpropertychange",p):P.removeEventListener("propertychange",p,!1),P=null,L=null,D=null,A=null)}function p(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==D&&(D=e,i(t))}}function d(t,e){return t===O.topInput?e:void 0}function f(t,e,n){t===O.topFocus?(h(),c(e,n)):t===O.topBlur&&h()}function g(t,e){return t!==O.topSelectionChange&&t!==O.topKeyUp&&t!==O.topKeyDown||!P||P.value===D?void 0:(D=P.value,L)}function m(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function v(t,e){return t===O.topClick?e:void 0}var y=n(127),b=n(197),_=n(198),x=n(75),w=n(56),S=n(123),C=n(128),E=n(451),T=n(452),k=n(549),M=n(139),O=y.topLevelTypes,I={change:{phasedRegistrationNames:{bubbled:M({onChange:null}),captured:M({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},P=null,L=null,D=null,A=null,N=!1;x.canUseDOM&&(N=T("change")&&(!("documentMode"in document)||document.documentMode>8));var B=!1;x.canUseDOM&&(B=T("input")&&(!("documentMode"in document)||document.documentMode>11));var j={get:function(){return A.get.call(this)},set:function(t){D=""+t,A.set.call(this,t)}},R={eventTypes:I,extractEvents:function(t,e,n,i){var r,a,s=e?w.getNodeFromInstance(e):window;if(o(s)?N?r=l:a=u:k(s)?B?r=d:(r=g,a=f):m(s)&&(r=v),r){var c=r(t,e);if(c){var h=C.getPooled(I.change,c,n,i);return h.type="change",_.accumulateTwoPhaseDispatches(h),h}}a&&a(t,s,e)}};t.exports=R},function(t,e,n){"use strict";var o=n(29),i=n(181),r=n(75),a=n(771),s=n(71),l=(n(7),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(r.canUseDOM?void 0:o("56"),e?void 0:o("57"),"HTML"===t.nodeName?o("58"):void 0,"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else i.replaceChildWithTree(t,e)}});t.exports=l},function(t,e,n){"use strict";var o=n(139),i=[o({ResponderEventPlugin:null}),o({SimpleEventPlugin:null}),o({TapEventPlugin:null}),o({EnterLeaveEventPlugin:null}),o({ChangeEventPlugin:null}),o({SelectEventPlugin:null}),o({BeforeInputEventPlugin:null})];t.exports=i},function(t,e,n){"use strict";var o=n(127),i=n(198),r=n(56),a=n(404),s=n(139),l=o.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(t,e,n,o){if(t===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==l.topMouseOut&&t!==l.topMouseOver)return null;var s;if(o.window===o)s=o;else{var c=o.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var h,p;if(t===l.topMouseOut){h=e;var d=n.relatedTarget||n.toElement;p=d?r.getClosestInstanceFromNode(d):null}else h=null,p=e;if(h===p)return null;var f=null==h?s:r.getNodeFromInstance(h),g=null==p?s:r.getNodeFromInstance(p),m=a.getPooled(u.mouseLeave,h,n,o);m.type="mouseleave",m.target=f,m.relatedTarget=g;var v=a.getPooled(u.mouseEnter,p,n,o);return v.type="mouseenter",v.target=g,v.relatedTarget=f,i.accumulateEnterLeaveDispatches(m,v,h,p),[m,v]}};t.exports=c},function(t,e,n){"use strict";function o(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(32),r=n(140),a=n(547);i(o.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,o=n.length,i=this.getText(),r=i.length;for(t=0;o>t&&n[t]===i[t];t++);var a=o-t;for(e=1;a>=e&&n[o-e]===i[r-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),r.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";var o=n(182),i=o.injection.MUST_USE_PROPERTY,r=o.injection.HAS_BOOLEAN_VALUE,a=o.injection.HAS_NUMERIC_VALUE,s=o.injection.HAS_POSITIVE_NUMERIC_VALUE,l=o.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+o.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:r,allowTransparency:0,alt:0,async:r,autoComplete:0,autoPlay:r,capture:r,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|r,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:r,coords:0,crossOrigin:0,data:0,dateTime:0,"default":r,defer:r,dir:0,disabled:r,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:r,formTarget:0,frameBorder:0,headers:0,height:0,hidden:r,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:r,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|r,muted:i|r,name:0,nonce:0,noValidate:r,open:r,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:r,referrerPolicy:0,rel:0,required:r,reversed:r,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:r,scrolling:0,seamless:r,selected:i|r,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:r,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},function(t,e,n){"use strict";(function(e){function o(t,e,n,o){var i=void 0===t[n];null!=e&&i&&(t[n]=r(e,!0))}var i=n(183),r=n(548),a=(n(437),n(453)),s=n(454),l=(n(31),{instantiateChildren:function(t,e,n,i){if(null==t)return null;var r={};return s(t,o,r),r},updateChildren:function(t,e,n,o,s,l,u,c,h){if(e||t){var p,d;for(p in e)if(e.hasOwnProperty(p)){d=t&&t[p];var f=d&&d._currentElement,g=e[p];if(null!=d&&a(f,g))i.receiveComponent(d,g,s,c),e[p]=d;else{d&&(o[p]=i.getHostNode(d),i.unmountComponent(d,!1));var m=r(g,!0);e[p]=m;var v=i.mountComponent(m,s,l,u,c,h);n.push(v)}}for(p in t)!t.hasOwnProperty(p)||e&&e.hasOwnProperty(p)||(d=t[p],o[p]=i.getHostNode(d),i.unmountComponent(d,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];i.unmountComponent(o,e)}}});t.exports=l}).call(e,n(131))},function(t,e,n){"use strict";var o=n(433),i=n(829),r={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup};t.exports=r},function(t,e,n){"use strict";function o(t){}function i(t,e){}function r(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var s=n(29),l=n(32),u=n(440),c=n(141),h=n(122),p=n(442),d=n(190),f=(n(96),n(538)),g=(n(445),n(183)),m=n(863),v=n(196),y=(n(7),n(203)),b=n(453),_=(n(31),{ImpureClass:0,PureClass:1,StatelessFunctional:2});o.prototype.render=function(){var t=d.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return i(t,e),e};var x=1,w={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,l){this._context=l,this._mountOrder=x++,this._hostParent=e,this._hostContainerInfo=n;var u,c=this._currentElement.props,p=this._processContext(l),f=this._currentElement.type,g=t.getUpdateQueue(),m=r(f),y=this._constructComponent(m,c,p,g);m||null!=y&&null!=y.render?a(f)?this._compositeType=_.PureClass:this._compositeType=_.ImpureClass:(u=y,i(f,u),null===y||y===!1||h.isValidElement(y)?void 0:s("105",f.displayName||f.name||"Component"),y=new o(f),this._compositeType=_.StatelessFunctional);y.props=c,y.context=p,y.refs=v,y.updater=g,this._instance=y,d.set(y,this);var b=y.state;void 0===b&&(y.state=b=null),"object"!=typeof b||Array.isArray(b)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var w;return w=y.unstable_handleError?this.performInitialMountWithErrorHandling(u,e,n,t,l):this.performInitialMount(u,e,n,t,l),y.componentDidMount&&t.getReactMountReady().enqueue(y.componentDidMount,y),w},_constructComponent:function(t,e,n,o){return this._constructComponentWithoutOwner(t,e,n,o)},_constructComponentWithoutOwner:function(t,e,n,o){var i,r=this._currentElement.type;return i=t?new r(e,n,o):r(e,n,o)},performInitialMountWithErrorHandling:function(t,e,n,o,i){var r,a=o.checkpoint();try{r=this.performInitialMount(t,e,n,o,i)}catch(s){o.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=o.checkpoint(),this._renderedComponent.unmountComponent(!0),o.rollback(a),r=this.performInitialMount(t,e,n,o,i)}return r},performInitialMount:function(t,e,n,o,i){var r=this._instance;r.componentWillMount&&(r.componentWillMount(),this._pendingStateQueue&&(r.state=this._processPendingState(r.props,r.context))),void 0===t&&(t=this._renderValidatedComponent());var a=f.getType(t);this._renderedNodeType=a;var s=this._instantiateReactComponent(t,a!==f.EMPTY);this._renderedComponent=s;var l=0,u=g.mountComponent(s,o,e,n,this._processChildContext(i),l);return u},getHostNode:function(){return g.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(g.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return v;var o={};for(var i in n)o[i]=t[i];return o},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof e.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in o)i in e.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return l({},t,o)}return t},_checkContextTypes:function(t,e,n){m(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,o,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?g.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,o,i){var r=this._instance;null==r?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,l=!1;this._context===i?a=r.context:(a=this._processContext(i),l=!0);var u=e.props,c=n.props;e!==n&&(l=!0),l&&r.componentWillReceiveProps&&r.componentWillReceiveProps(c,a);var h=this._processPendingState(c,a),p=!0;this._pendingForceUpdate||(r.shouldComponentUpdate?p=r.shouldComponentUpdate(c,h,a):this._compositeType===_.PureClass&&(p=!y(u,c)||!y(r.state,h))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,h,a,t,i)):(this._currentElement=n,this._context=i,r.props=c,r.state=h,r.context=a)},_processPendingState:function(t,e){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=l({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];l(r,"function"==typeof s?s.call(n,r,t,e):s)}return r},_performComponentUpdate:function(t,e,n,o,i,r){var a,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);
c&&(a=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(e,n,o),this._currentElement=t,this._context=r,u.props=e,u.state=n,u.context=o,this._updateRenderedComponent(i,r),c&&i.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,l),u)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(b(o,i))g.receiveComponent(n,i,t,this._processChildContext(e));else{var r=g.getHostNode(n);g.unmountComponent(n,!1);var a=f.getType(i);this._renderedNodeType=a;var s=this._instantiateReactComponent(i,a!==f.EMPTY);this._renderedComponent=s;var l=0,u=g.mountComponent(s,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),l);this._replaceNodeWithMarkup(r,u,n)}},_replaceNodeWithMarkup:function(t,e,n){u.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;if(this._compositeType!==_.StatelessFunctional){c.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||h.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var o=e.getPublicInstance(),i=n.refs===v?n.refs={}:n.refs;i[t]=o},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===_.StatelessFunctional?null:t},_instantiateReactComponent:null},S={Mixin:w};t.exports=S},function(t,e,n){"use strict";var o=n(402),i={getHostProps:o.getHostProps};t.exports=i},function(t,e,n){"use strict";function o(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t,e){e&&(X[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?g("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?g("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&G in e.dangerouslySetInnerHTML?void 0:g("61")),null!=e.style&&"object"!=typeof e.style?g("62",o(t)):void 0)}function r(t,e,n,o){if(!(o instanceof N)){var i=t._hostContainerInfo,r=i._node&&i._node.nodeType===K,s=r?i._node:i._ownerDocument;z(e,s),o.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;C.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;I.postMountWrapper(t)}function l(){var t=this;D.postMountWrapper(t)}function u(){var t=this;P.postMountWrapper(t)}function c(){var t=this;t._rootNodeID?void 0:g("63");var e=F(t);switch(e?void 0:g("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[T.trapBubbledEvent(S.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in q)q.hasOwnProperty(n)&&t._wrapperState.listeners.push(T.trapBubbledEvent(S.topLevelTypes[n],q[n],e));break;case"source":t._wrapperState.listeners=[T.trapBubbledEvent(S.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[T.trapBubbledEvent(S.topLevelTypes.topError,"error",e),T.trapBubbledEvent(S.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[T.trapBubbledEvent(S.topLevelTypes.topReset,"reset",e),T.trapBubbledEvent(S.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[T.trapBubbledEvent(S.topLevelTypes.topInvalid,"invalid",e)]}}function h(){L.postUpdateWrapper(this)}function p(t){tt.call(Q,t)||(J.test(t)?void 0:g("65",t),Q[t]=!0)}function d(t,e){return t.indexOf("-")>=0||null!=e.is}function f(t){var e=t.type;p(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(29),m=n(32),v=n(811),y=n(813),b=n(181),_=n(434),x=n(182),w=n(527),S=n(127),C=n(197),E=n(435),T=n(403),k=n(823),M=n(530),O=n(56),I=n(830),P=n(831),L=n(531),D=n(834),A=(n(96),n(842)),N=n(847),B=(n(71),n(405)),j=(n(7),n(452),n(139)),R=(n(203),n(455),n(31),M),H=C.deleteListener,F=O.getNodeFromInstance,z=T.listenTo,V=E.registrationNameModules,U={string:!0,number:!0},W=j({style:null}),G=j({__html:null}),$={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},K=11,q={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Z={listing:!0,pre:!0,textarea:!0},X=m({menuitem:!0},Y),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Q={},tt={}.hasOwnProperty,et=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(t,e,n,o){this._rootNodeID=et++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var r=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(c,this);break;case"button":r=k.getHostProps(this,r,e);break;case"input":I.mountWrapper(this,r,e),r=I.getHostProps(this,r),t.getReactMountReady().enqueue(c,this);break;case"option":P.mountWrapper(this,r,e),r=P.getHostProps(this,r);break;case"select":L.mountWrapper(this,r,e),r=L.getHostProps(this,r),t.getReactMountReady().enqueue(c,this);break;case"textarea":D.mountWrapper(this,r,e),r=D.getHostProps(this,r),t.getReactMountReady().enqueue(c,this)}i(this,r);var a,h;null!=e?(a=e._namespaceURI,h=e._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===_.svg&&"foreignobject"===h)&&(a=_.html),a===_.html&&("svg"===this._tag?a=_.svg:"math"===this._tag&&(a=_.mathml)),this._namespaceURI=a;var p;if(t.useCreateElement){var d,f=n._ownerDocument;if(a===_.html)if("script"===this._tag){var g=f.createElement("div"),m=this._currentElement.type;g.innerHTML="<"+m+"></"+m+">",d=g.removeChild(g.firstChild)}else d=r.is?f.createElement(this._currentElement.type,r.is):f.createElement(this._currentElement.type);else d=f.createElementNS(a,this._currentElement.type);O.precacheNode(this,d),this._flags|=R.hasCachedChildNodes,this._hostParent||w.setAttributeForRoot(d),this._updateDOMProperties(null,r,t);var y=b(d);this._createInitialChildren(t,r,o,y),p=y}else{var x=this._createOpenTagMarkupAndPutListeners(t,r),S=this._createContentMarkup(t,r,o);p=!S&&Y[this._tag]?x+"/>":x+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),r.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(l,this),r.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"select":r.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"button":r.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(u,this)}return p},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];if(null!=i)if(V.hasOwnProperty(o))i&&r(this,o,i,t);else{o===W&&(i&&(i=this._previousStyleCopy=m({},e.style)),i=y.createMarkupForStyles(i,this));var a=null;null!=this._tag&&d(this._tag,e)?$.hasOwnProperty(o)||(a=w.createMarkupForCustomAttribute(o,i)):a=w.createMarkupForProperty(o,i),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+w.createMarkupForRoot()),n+=" "+w.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var o="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(o=i.__html);else{var r=U[typeof e.children]?e.children:null,a=null!=r?null:e.children;if(null!=r)o=B(r);else if(null!=a){var s=this.mountChildren(a,t,n);o=s.join("")}}return Z[this._tag]&&"\n"===o.charAt(0)?"\n"+o:o},_createInitialChildren:function(t,e,n,o){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(o,i.__html);else{var r=U[typeof e.children]?e.children:null,a=null!=r?null:e.children;if(null!=r)b.queueText(o,r);else if(null!=a)for(var s=this.mountChildren(a,t,n),l=0;l<s.length;l++)b.queueChild(o,s[l])}},receiveComponent:function(t,e,n){var o=this._currentElement;this._currentElement=t,this.updateComponent(e,o,t,n)},updateComponent:function(t,e,n,o){var r=e.props,a=this._currentElement.props;switch(this._tag){case"button":r=k.getHostProps(this,r),a=k.getHostProps(this,a);break;case"input":r=I.getHostProps(this,r),a=I.getHostProps(this,a);break;case"option":r=P.getHostProps(this,r),a=P.getHostProps(this,a);break;case"select":r=L.getHostProps(this,r),a=L.getHostProps(this,a);break;case"textarea":r=D.getHostProps(this,r),a=D.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(r,a,t),this._updateDOMChildren(r,a,t,o),this._tag){case"input":I.updateWrapper(this);break;case"textarea":D.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(t,e,n){var o,i,a;for(o in t)if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&null!=t[o])if(o===W){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else V.hasOwnProperty(o)?t[o]&&H(this,o):d(this._tag,t)?$.hasOwnProperty(o)||w.deleteValueForAttribute(F(this),o):(x.properties[o]||x.isCustomAttribute(o))&&w.deleteValueForProperty(F(this),o);for(o in e){var l=e[o],u=o===W?this._previousStyleCopy:null!=t?t[o]:void 0;if(e.hasOwnProperty(o)&&l!==u&&(null!=l||null!=u))if(o===W)if(l?l=this._previousStyleCopy=m({},l):this._previousStyleCopy=null,u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(a=a||{},a[i]=l[i])}else a=l;else if(V.hasOwnProperty(o))l?r(this,o,l,n):u&&H(this,o);else if(d(this._tag,e))$.hasOwnProperty(o)||w.setValueForAttribute(F(this),o,l);else if(x.properties[o]||x.isCustomAttribute(o)){var c=F(this);null!=l?w.setValueForProperty(c,o,l):w.deleteValueForProperty(c,o)}}a&&y.setValueForStyles(F(this),a,this)},_updateDOMChildren:function(t,e,n,o){var i=U[typeof t.children]?t.children:null,r=U[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=null!=i?null:t.children,u=null!=r?null:e.children,c=null!=i||null!=a,h=null!=r||null!=s;null!=l&&null==u?this.updateChildren(null,n,o):c&&!h&&this.updateTextContent(""),null!=r?i!==r&&this.updateTextContent(""+r):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,o)},getHostNode:function(){return F(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(t),O.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},m(f.prototype,f.Mixin,A.Mixin),t.exports=f},function(t,e,n){"use strict";function o(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===i?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var i=(n(455),9);t.exports=o},function(t,e,n){"use strict";var o=n(32),i=n(181),r=n(56),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};o(a.prototype,{mountComponent:function(t,e,n,o){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return r.precacheNode(this,u),i(u)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return r.getNodeFromInstance(this)},unmountComponent:function(){r.uncacheNode(this)}}),t.exports=a},function(t,e,n){"use strict";var o=n(122),i=o.createFactory,r={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),"var":i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=r},function(t,e){"use strict";var n={useCreateElement:!0};t.exports=n},function(t,e,n){"use strict";var o=n(433),i=n(56),r={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);o.processUpdates(n,e)}};t.exports=r},function(t,e,n){"use strict";function o(){this._rootNodeID&&p.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);h.asap(o,this);var i=e.name;if("radio"===e.type&&null!=i){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),p=0;p<l.length;p++){var d=l[p];if(d!==a&&d.form===a.form){var f=c.getInstanceFromNode(d);f?void 0:r("90"),h.asap(o,f)}}}return n}var r=n(29),a=n(32),s=n(402),l=n(527),u=n(438),c=n(56),h=n(123),p=(n(7),n(31),{getHostProps:function(t,e){var n=u.getValue(e),o=u.getChecked(e),i=a({type:void 0,step:void 0,min:void 0,max:void 0},s.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=o?o:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(t),"checked",n||!1);var o=c.getNodeFromInstance(t),i=u.getValue(e);if(null!=i){var r=""+i;r!==o.value&&(o.value=r)}else null==e.value&&null!=e.defaultValue&&(o.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(o.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=c.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var o=n.name;""!==o&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==o&&(n.name=o)}});t.exports=p},function(t,e,n){"use strict";function o(t){var e="";return r.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:l||(l=!0))}),e}var i=n(32),r=n(528),a=n(56),s=n(531),l=(n(31),!1),u={mountWrapper:function(t,e,n){var i=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._hostParent),null!=r&&"select"===r._tag&&(i=s.getSelectValueContext(r))}var a=null;if(null!=i){var l;if(l=null!=e.value?e.value+"":o(e.children),a=!1,Array.isArray(i)){for(var u=0;u<i.length;u++)if(""+i[u]===l){a=!0;break}}else a=""+i===l}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=a.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var r=o(e.children);return r&&(n.children=r),n}};t.exports=u},function(t,e,n){"use strict";function o(t,e,n,o){return t===n&&e===o}function i(t){var e=document.selection,n=e.createRange(),o=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var r=i.text.length,a=r+o;return{start:r,end:a}}function r(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,r=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(l){return null}var u=o(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,h=s.cloneRange();h.selectNodeContents(t),h.setEnd(s.startContainer,s.startOffset);var p=o(h.startContainer,h.startOffset,h.endContainer,h.endOffset),d=p?0:h.toString().length,f=d+c,g=document.createRange();g.setStart(n,i),g.setEnd(r,a);var m=g.collapsed;return{start:m?f:d,end:m?d:f}}function a(t,e){var n,o,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,o=n):e.start>e.end?(n=e.end,o=e.start):(n=e.start,o=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",o-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),o=t[c()].length,i=Math.min(e.start,o),r=void 0===e.end?i:Math.min(e.end,o);if(!n.extend&&i>r){var a=r;r=i,i=a}var s=u(t,i),l=u(t,r);if(s&&l){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(h),n.extend(l.node,l.offset)):(h.setEnd(l.node,l.offset),n.addRange(h))}}}var l=n(75),u=n(867),c=n(547),h=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:h?i:r,setOffsets:h?a:s};t.exports=p},function(t,e,n){"use strict";var o=n(29),i=n(32),r=n(433),a=n(181),s=n(56),l=n(405),u=(n(7),n(455),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(u.prototype,{mountComponent:function(t,e,n,o){var i=n._idCounter++,r=" react-text: "+i+" ",u=" /react-text ";if(this._domID=i,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,h=c.createComment(r),p=c.createComment(u),d=a(c.createDocumentFragment());return a.queueChild(d,a(h)),this._stringText&&a.queueChild(d,a(c.createTextNode(this._stringText))),a.queueChild(d,a(p)),s.precacheNode(this,h),this._closingComment=p,d}var f=l(this._stringText);return t.renderToStaticMarkup?f:"<!--"+r+"-->"+f+"<!--"+u+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var o=this.getHostNode();r.replaceDelimitedText(o[0],o[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?o("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=u},function(t,e,n){"use strict";function o(){this._rootNodeID&&h.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);return c.asap(o,this),n}var r=n(29),a=n(32),s=n(402),l=n(438),u=n(56),c=n(123),h=(n(7),n(31),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?r("91"):void 0;var n=a({},s.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=l.getValue(e),o=n;if(null==n){var a=e.defaultValue,s=e.children;null!=s&&(null!=a?r("92"):void 0,Array.isArray(s)&&(s.length<=1?void 0:r("93"),s=s[0]),a=""+s),null==a&&(a=""),o=a}t._wrapperState={initialValue:""+o,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),o=l.getValue(e);if(null!=o){var i=""+o;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t);e.value=e.textContent}});t.exports=h},function(t,e,n){"use strict";function o(t,e){"_hostNode"in t?void 0:l("33"),"_hostNode"in e?void 0:l("33");for(var n=0,o=t;o;o=o._hostParent)n++;for(var i=0,r=e;r;r=r._hostParent)i++;for(;n-i>0;)t=t._hostParent,n--;for(;i-n>0;)e=e._hostParent,i--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t?void 0:l("35"),"_hostNode"in e?void 0:l("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function r(t){return"_hostNode"in t?void 0:l("36"),t._hostParent}function a(t,e,n){for(var o=[];t;)o.push(t),t=t._hostParent;var i;for(i=o.length;i-- >0;)e(o[i],!1,n);for(i=0;i<o.length;i++)e(o[i],!0,n)}function s(t,e,n,i,r){for(var a=t&&e?o(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var l=[];e&&e!==a;)l.push(e),e=e._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],!0,i);for(u=l.length;u-- >0;)n(l[u],!1,r)}var l=n(29);n(7);t.exports={isAncestor:i,getLowestCommonAncestor:o,getParentInstance:r,traverseTwoPhase:a,traverseEnterLeave:s}},function(t,e,n){"use strict";function o(){this.reinitializeTransaction()}var i=n(32),r=n(123),a=n(200),s=n(71),l={initialize:s,close:function(){p.isBatchingUpdates=!1}},u={initialize:s,close:r.flushBatchedUpdates.bind(r)},c=[u,l];i(o.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var h=new o,p={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,o,i,r){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?t(e,n,o,i,r):h.perform(t,null,e,n,o,i,r)}};t.exports=p},function(t,e,n){"use strict";function o(){w||(w=!0,v.EventEmitter.injectReactEventListener(m),v.EventPluginHub.injectEventPluginOrder(a),v.EventPluginUtils.injectComponentTree(h),v.EventPluginUtils.injectTreeTraversal(d),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:x,EnterLeaveEventPlugin:s,ChangeEventPlugin:r,SelectEventPlugin:_,BeforeInputEventPlugin:i}),v.HostComponent.injectGenericComponentClass(c),v.HostComponent.injectTextComponentClass(f),v.DOMProperty.injectDOMPropertyConfig(l),v.DOMProperty.injectDOMPropertyConfig(b),v.EmptyComponent.injectEmptyComponentFactory(function(t){return new p(t)}),v.Updates.injectReconcileTransaction(y),v.Updates.injectBatchingStrategy(g),v.Component.injectEnvironment(u))}var i=n(812),r=n(814),a=n(816),s=n(817),l=n(819),u=n(821),c=n(824),h=n(56),p=n(826),d=n(835),f=n(833),g=n(836),m=n(839),v=n(840),y=n(845),b=n(849),_=n(850),x=n(851),w=!1;t.exports={inject:o}},function(t,e,n){"use strict";function o(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(197),r={handleTopLevel:function(t,e,n,r){var a=i.extractEvents(t,e,n,r);o(a)}};t.exports=r},function(t,e,n){"use strict";function o(t){for(;t._hostParent;)t=t._hostParent;var e=h.getNodeFromInstance(t),n=e.parentNode;return h.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function r(t){var e=d(t.nativeEvent),n=h.getClosestInstanceFromNode(e),i=n;do t.ancestors.push(i),i=i&&o(i);while(i);for(var r=0;r<t.ancestors.length;r++)n=t.ancestors[r],g._handleTopLevel(t.topLevelType,n,t.nativeEvent,d(t.nativeEvent))}function a(t){var e=f(window);t(e)}var s=n(32),l=n(519),u=n(75),c=n(140),h=n(56),p=n(123),d=n(451),f=n(558);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(t){g._handleTopLevel=t},setEnabled:function(t){g._enabled=!!t},isEnabled:function(){return g._enabled},trapBubbledEvent:function(t,e,n){var o=n;return o?l.listen(o,e,g.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var o=n;return o?l.capture(o,e,g.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);l.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(g._enabled){var n=i.getPooled(t,e);try{p.batchedUpdates(r,n)}finally{i.release(n)}}}};t.exports=g},function(t,e,n){"use strict";var o=n(182),i=n(197),r=n(436),a=n(440),s=n(529),l=n(532),u=n(403),c=n(534),h=n(123),p={Component:a.injection,Class:s.injection,DOMProperty:o.injection,EmptyComponent:l.injection,EventPluginHub:i.injection,EventPluginUtils:r.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:h.injection};t.exports=p},function(t,e,n){"use strict";var o=n(862),i=/\/?>/,r=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=o(t);return r.test(t)?t:t.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=o(t);return i===n}};t.exports=a},function(t,e,n){"use strict";function o(t,e,n){return{type:p.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:p.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:d.getHostNode(t),toIndex:n,afterNode:e}}function r(t,e){return{type:p.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:p.SET_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:p.TEXT_CONTENT,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(t,e){return e&&(t=t||[],t.push(e)),t}function u(t,e){h.processChildrenUpdates(t,e)}var c=n(29),h=n(440),p=(n(190),n(96),n(537)),d=(n(141),n(183)),f=n(820),g=(n(71),n(625)),m=(n(7),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return f.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,o,i,r){var a,s=0;return a=g(e,s),f.updateChildren(t,a,n,o,i,this,this._hostContainerInfo,r,s),a},mountChildren:function(t,e,n){var o=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=o;var i=[],r=0;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a],l=0,u=d.mountComponent(s,e,this,this._hostContainerInfo,n,l);s._mountIndex=r++,i.push(u)}return i},updateTextContent:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var o=[s(t)];u(this,o)},updateMarkup:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var o=[a(t)];u(this,o)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var o=this._renderedChildren,i={},r=[],a=this._reconcilerUpdateChildren(o,t,r,i,e,n);if(a||o){var s,c=null,h=0,p=0,f=0,g=null;for(s in a)if(a.hasOwnProperty(s)){var m=o&&o[s],v=a[s];m===v?(c=l(c,this.moveChild(m,g,h,p)),p=Math.max(m._mountIndex,p),m._mountIndex=h):(m&&(p=Math.max(m._mountIndex,p)),c=l(c,this._mountChildAtIndex(v,r[f],g,h,e,n)),f++),h++,g=d.getHostNode(v)}for(s in i)i.hasOwnProperty(s)&&(c=l(c,this._unmountChild(o[s],i[s])));c&&u(this,c),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;f.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,o){return t._mountIndex<o?i(t,e,n):void 0},createChild:function(t,e,n){return o(n,e,t._mountIndex)},removeChild:function(t,e){return r(t,e)},_mountChildAtIndex:function(t,e,n,o,i,r){return t._mountIndex=o,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=m},function(t,e,n){"use strict";var o=n(29),i=(n(7),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){i.isValidOwner(n)?void 0:o("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){i.isValidOwner(n)?void 0:o("120");var r=n.getPublicInstance();r&&r.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=i},function(t,e,n){"use strict";function o(t,e,n){this.props=t,this.context=e,this.refs=l,this.updater=n||s}function i(){}var r=n(32),a=n(439),s=n(443),l=n(196);i.prototype=a.prototype,o.prototype=new i,o.prototype.constructor=o,r(o.prototype,a.prototype),o.prototype.isPureReactComponent=!0,t.exports=o},function(t,e,n){"use strict";function o(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=t}var i=n(32),r=n(526),a=n(140),s=n(403),l=n(535),u=(n(96),n(200)),c=n(447),h={initialize:l.getSelectionInformation,close:l.restoreSelection},p={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[h,p,d],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};i(o.prototype,u.Mixin,g),a.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t,e,n){"function"==typeof t?t(e.getPublicInstance()):r.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):r.removeComponentAsRefFrom(e,t,n)}var r=n(843),a={};a.attachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&o(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null===t||t===!1,o=null===e||e===!1;return n||o||e.ref!==t.ref||"string"==typeof e.ref&&e._owner!==t._owner},a.detachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&i(n,t,e._owner);
}},t.exports=a},function(t,e,n){"use strict";function o(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(32),r=n(140),a=n(200),s=(n(96),n(848)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(o.prototype,a.Mixin,c),r.addPoolingTo(o),t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){}var r=n(447),a=(n(200),n(31),function(){function t(e){o(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&r.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?r.enqueueForceUpdate(t):i(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?r.enqueueReplaceState(t,e):i(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?r.enqueueSetState(t,e):i(t,"setState")},t}());t.exports=a},function(t,e){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(t){i.Properties[t]=0,o[t]&&(i.DOMAttributeNames[t]=o[t])}),t.exports=i},function(t,e,n){"use strict";function o(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(x||null==y||y!==h())return null;var n=o(y);if(!_||!f(_,n)){_=n;var i=c.getPooled(v.select,b,t,e);return i.type="select",i.target=y,a.accumulateTwoPhaseDispatches(i),i}return null}var r=n(127),a=n(198),s=n(75),l=n(56),u=n(535),c=n(128),h=n(407),p=n(549),d=n(139),f=n(203),g=r.topLevelTypes,m=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,v={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[g.topBlur,g.topContextMenu,g.topFocus,g.topKeyDown,g.topMouseDown,g.topMouseUp,g.topSelectionChange]}},y=null,b=null,_=null,x=!1,w=!1,S=d({onSelect:null}),C={eventTypes:v,extractEvents:function(t,e,n,o){if(!w)return null;var r=e?l.getNodeFromInstance(e):window;switch(t){case g.topFocus:(p(r)||"true"===r.contentEditable)&&(y=r,b=e,_=null);break;case g.topBlur:y=null,b=null,_=null;break;case g.topMouseDown:x=!0;break;case g.topContextMenu:case g.topMouseUp:return x=!1,i(n,o);case g.topSelectionChange:if(m)break;case g.topKeyDown:case g.topKeyUp:return i(n,o)}return null},didPutListener:function(t,e,n){e===S&&(w=!0)}};t.exports=C},function(t,e,n){"use strict";function o(t){return"."+t._rootNodeID}var i=n(29),r=n(127),a=n(519),s=n(198),l=n(56),u=n(852),c=n(853),h=n(128),p=n(856),d=n(858),f=n(404),g=n(855),m=n(859),v=n(860),y=n(199),b=n(861),_=n(71),x=n(449),w=(n(7),n(139)),S=r.topLevelTypes,C={abort:{phasedRegistrationNames:{bubbled:w({onAbort:!0}),captured:w({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:w({onAnimationEnd:!0}),captured:w({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:w({onAnimationIteration:!0}),captured:w({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:w({onAnimationStart:!0}),captured:w({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:w({onBlur:!0}),captured:w({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:w({onCanPlay:!0}),captured:w({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:w({onCanPlayThrough:!0}),captured:w({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:w({onClick:!0}),captured:w({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:w({onContextMenu:!0}),captured:w({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:w({onCopy:!0}),captured:w({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:w({onCut:!0}),captured:w({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:w({onDoubleClick:!0}),captured:w({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:w({onDrag:!0}),captured:w({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:w({onDragEnd:!0}),captured:w({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:w({onDragEnter:!0}),captured:w({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:w({onDragExit:!0}),captured:w({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:w({onDragLeave:!0}),captured:w({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:w({onDragOver:!0}),captured:w({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:w({onDragStart:!0}),captured:w({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:w({onDrop:!0}),captured:w({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:w({onDurationChange:!0}),captured:w({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:w({onEmptied:!0}),captured:w({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:w({onEncrypted:!0}),captured:w({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:w({onEnded:!0}),captured:w({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:w({onError:!0}),captured:w({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:w({onFocus:!0}),captured:w({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:w({onInput:!0}),captured:w({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:w({onInvalid:!0}),captured:w({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:w({onKeyDown:!0}),captured:w({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:w({onKeyPress:!0}),captured:w({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:w({onKeyUp:!0}),captured:w({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:w({onLoad:!0}),captured:w({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:w({onLoadedData:!0}),captured:w({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:w({onLoadedMetadata:!0}),captured:w({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:w({onLoadStart:!0}),captured:w({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:w({onMouseDown:!0}),captured:w({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:w({onMouseMove:!0}),captured:w({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:w({onMouseOut:!0}),captured:w({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:w({onMouseOver:!0}),captured:w({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:w({onMouseUp:!0}),captured:w({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:w({onPaste:!0}),captured:w({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:w({onPause:!0}),captured:w({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:w({onPlay:!0}),captured:w({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:w({onPlaying:!0}),captured:w({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:w({onProgress:!0}),captured:w({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:w({onRateChange:!0}),captured:w({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:w({onReset:!0}),captured:w({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:w({onScroll:!0}),captured:w({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:w({onSeeked:!0}),captured:w({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:w({onSeeking:!0}),captured:w({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:w({onStalled:!0}),captured:w({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:w({onSubmit:!0}),captured:w({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:w({onSuspend:!0}),captured:w({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:w({onTimeUpdate:!0}),captured:w({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:w({onTouchCancel:!0}),captured:w({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:w({onTouchEnd:!0}),captured:w({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:w({onTouchMove:!0}),captured:w({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:w({onTouchStart:!0}),captured:w({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:w({onTransitionEnd:!0}),captured:w({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:w({onVolumeChange:!0}),captured:w({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:w({onWaiting:!0}),captured:w({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:w({onWheel:!0}),captured:w({onWheelCapture:!0})}}},E={topAbort:C.abort,topAnimationEnd:C.animationEnd,topAnimationIteration:C.animationIteration,topAnimationStart:C.animationStart,topBlur:C.blur,topCanPlay:C.canPlay,topCanPlayThrough:C.canPlayThrough,topClick:C.click,topContextMenu:C.contextMenu,topCopy:C.copy,topCut:C.cut,topDoubleClick:C.doubleClick,topDrag:C.drag,topDragEnd:C.dragEnd,topDragEnter:C.dragEnter,topDragExit:C.dragExit,topDragLeave:C.dragLeave,topDragOver:C.dragOver,topDragStart:C.dragStart,topDrop:C.drop,topDurationChange:C.durationChange,topEmptied:C.emptied,topEncrypted:C.encrypted,topEnded:C.ended,topError:C.error,topFocus:C.focus,topInput:C.input,topInvalid:C.invalid,topKeyDown:C.keyDown,topKeyPress:C.keyPress,topKeyUp:C.keyUp,topLoad:C.load,topLoadedData:C.loadedData,topLoadedMetadata:C.loadedMetadata,topLoadStart:C.loadStart,topMouseDown:C.mouseDown,topMouseMove:C.mouseMove,topMouseOut:C.mouseOut,topMouseOver:C.mouseOver,topMouseUp:C.mouseUp,topPaste:C.paste,topPause:C.pause,topPlay:C.play,topPlaying:C.playing,topProgress:C.progress,topRateChange:C.rateChange,topReset:C.reset,topScroll:C.scroll,topSeeked:C.seeked,topSeeking:C.seeking,topStalled:C.stalled,topSubmit:C.submit,topSuspend:C.suspend,topTimeUpdate:C.timeUpdate,topTouchCancel:C.touchCancel,topTouchEnd:C.touchEnd,topTouchMove:C.touchMove,topTouchStart:C.touchStart,topTransitionEnd:C.transitionEnd,topVolumeChange:C.volumeChange,topWaiting:C.waiting,topWheel:C.wheel};for(var T in E)E[T].dependencies=[T];var k=w({onClick:null}),M={},O={eventTypes:C,extractEvents:function(t,e,n,o){var r=E[t];if(!r)return null;var a;switch(t){case S.topAbort:case S.topCanPlay:case S.topCanPlayThrough:case S.topDurationChange:case S.topEmptied:case S.topEncrypted:case S.topEnded:case S.topError:case S.topInput:case S.topInvalid:case S.topLoad:case S.topLoadedData:case S.topLoadedMetadata:case S.topLoadStart:case S.topPause:case S.topPlay:case S.topPlaying:case S.topProgress:case S.topRateChange:case S.topReset:case S.topSeeked:case S.topSeeking:case S.topStalled:case S.topSubmit:case S.topSuspend:case S.topTimeUpdate:case S.topVolumeChange:case S.topWaiting:a=h;break;case S.topKeyPress:if(0===x(n))return null;case S.topKeyDown:case S.topKeyUp:a=d;break;case S.topBlur:case S.topFocus:a=p;break;case S.topClick:if(2===n.button)return null;case S.topContextMenu:case S.topDoubleClick:case S.topMouseDown:case S.topMouseMove:case S.topMouseOut:case S.topMouseOver:case S.topMouseUp:a=f;break;case S.topDrag:case S.topDragEnd:case S.topDragEnter:case S.topDragExit:case S.topDragLeave:case S.topDragOver:case S.topDragStart:case S.topDrop:a=g;break;case S.topTouchCancel:case S.topTouchEnd:case S.topTouchMove:case S.topTouchStart:a=m;break;case S.topAnimationEnd:case S.topAnimationIteration:case S.topAnimationStart:a=u;break;case S.topTransitionEnd:a=v;break;case S.topScroll:a=y;break;case S.topWheel:a=b;break;case S.topCopy:case S.topCut:case S.topPaste:a=c}a?void 0:i("86",t);var l=a.getPooled(r,e,n,o);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(t,e,n){if(e===k){var i=o(t),r=l.getNodeFromInstance(t);M[i]||(M[i]=a.listen(r,"click",_))}},willDeleteListener:function(t,e){if(e===k){var n=o(t);M[n].remove(),delete M[n]}}};t.exports=O},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r={data:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(404),r={dataTransfer:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(199),r={relatedTarget:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r={data:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(199),r=n(449),a=n(866),s=n(450),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?r(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?r(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(o,l),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(199),r=n(450),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r};i.augmentClass(o,a),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(128),r={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(o,r),t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){return i.call(this,t,e,n,o)}var i=n(404),r={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(o,r),t.exports=o},function(t,e){"use strict";function n(t){for(var e=1,n=0,i=0,r=t.length,a=-4&r;a>i;){for(var s=Math.min(i+4096,a);s>i;i+=4)n+=(e+=t.charCodeAt(i))+(e+=t.charCodeAt(i+1))+(e+=t.charCodeAt(i+2))+(e+=t.charCodeAt(i+3));e%=o,n%=o}for(;r>i;i++)n+=e+=t.charCodeAt(i);return e%=o,n%=o,e|n<<16}var o=65521;t.exports=n},function(t,e,n){"use strict";(function(e){function o(t,e,n,o,l,u){for(var c in t)if(t.hasOwnProperty(c)){var h;try{"function"!=typeof t[c]?i("84",o||"React class",r[n],c):void 0,h=t[c](e,c,o,n,null,a)}catch(p){h=p}if(h instanceof Error&&!(h.message in s)){s[h.message]=!0}}}var i=n(29),r=n(444),a=n(446),s=(n(7),n(31),{});t.exports=o}).call(e,n(131))},function(t,e,n){"use strict";function o(t,e,n){var o=null==e||"boolean"==typeof e||""===e;if(o)return"";var i=isNaN(e);if(i||0===e||r.hasOwnProperty(t)&&r[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var i=n(525),r=(n(31),i.isUnitlessNumber);t.exports=o},function(t,e,n){"use strict";function o(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);return e?(e=s(e),e?r.getNodeFromInstance(e):null):void("function"==typeof t.render?i("44"):i("45",Object.keys(t)))}var i=n(29),r=(n(141),n(56)),a=n(190),s=n(545);n(7),n(31);t.exports=o},function(t,e,n){"use strict";function o(t){if(t.key){var e=r[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(449),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=o},function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),r=0,a=0;i;){if(3===i.nodeType){if(a=r+i.textContent.length,e>=r&&a>=e)return{node:i,offset:e-r};r=a}i=n(o(i))}}t.exports=i},function(t,e,n){"use strict";function o(t){return'"'+i(t)+'"'}var i=n(405);t.exports=o},function(t,e,n){"use strict";var o=n(536);t.exports=o.renderSubtreeIntoContainer},function(t,e,n){var o;!function(){function i(t,e,n){return t.call.apply(t.bind,arguments)}function r(t,e,n){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function a(t,e,n){return a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:r,a.apply(null,arguments)}function s(t,e){this.a=t,this.m=e||t,this.c=this.m.document}function l(t,e,n,o){if(e=t.c.createElement(e),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return o&&e.appendChild(t.c.createTextNode(o)),e}function u(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function c(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,n){e=e||[],n=n||[];for(var o=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var r=!1,a=0;a<o.length;a+=1)if(e[i]===o[a]){r=!0;break}r||o.push(e[i])}for(e=[],i=0;i<o.length;i+=1){for(r=!1,a=0;a<n.length;a+=1)if(o[i]===n[a]){r=!0;break}r||e.push(o[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function p(t,e){for(var n=t.className.split(/\s+/),o=0,i=n.length;i>o;o++)if(n[o]==e)return!0;return!1}function d(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function f(t){return t.m.location.hostname||t.a.location.hostname}function g(t,e,n){function o(){s&&i&&r&&(s(a),s=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,r=!0,a=null,s=n||null;st?(e.onload=function(){i=!0,o()},e.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),o()}):setTimeout(function(){i=!0,o()},0),u(t,"head",e)}function m(t,e,n,o){var i=t.c.getElementsByTagName("head")[0];if(i){var r=l(t,"script",{src:e}),a=!1;return r.onload=r.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&i.removeChild(r))},i.appendChild(r),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},o||5e3),r}return null}function v(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,_(t)}}function b(t,e){t.c=e,_(t)}function _(t){0==t.a&&t.c&&(t.c(),t.c=null)}function x(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function S(t){return T(t)+" "+(t.f+"00")+" 300px "+C(t.c)}function C(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var o=t[n].replace(/['"]/g,"");-1!=o.indexOf(" ")||/^\d/.test(o)?e.push("'"+o+"'"):e.push(o)}return e.join(",")}function E(t){return t.a+t.f}function T(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function k(t){var e=4,n="n",o=null;return t&&((o=t.match(/(normal|oblique|italic)/i))&&o[1]&&(n=o[1].substr(0,1).toLowerCase()),(o=t.match(/([1-9]00|normal|bold)/i))&&o[1]&&(/bold/i.test(o[1])?e=7:/[1-9]00/.test(o[1])&&(e=parseInt(o[1].substr(0,1),10)))),n+e}function M(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new x("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function O(t){t.g&&h(t.f,[t.a.c("wf","loading")]),P(t,"loading")}function I(t){if(t.g){var e=p(t.f,t.a.c("wf","active")),n=[],o=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),h(t.f,n,o)}P(t,"inactive")}function P(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,E(n)):t.h[e]())}function L(){this.c={}}function D(t,e,n){var o,i=[];for(o in e)if(e.hasOwnProperty(o)){var r=t.c[o];r&&i.push(r(e[o],n))}return i}function A(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function N(t){u(t.c,"body",t.a)}function B(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+C(t.c)+";"+("font-style:"+T(t)+";font-weight:"+(t.f+"00")+";")}function j(t,e,n,o,i,r){this.g=t,this.j=e,this.a=o,this.c=n,this.f=i||3e3,this.h=r||void 0}function R(t,e,n,o,i,r,a){this.v=t,this.B=e,this.c=n,this.a=o,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=r||null,this.o=this.j=this.h=this.g=null,this.g=new A(this.c,this.s),this.h=new A(this.c,this.s),this.j=new A(this.c,this.s),this.o=new A(this.c,this.s),t=new w(this.a.c+",serif",E(this.a)),t=B(t),this.g.a.style.cssText=t,t=new w(this.a.c+",sans-serif",E(this.a)),t=B(t),this.h.a.style.cssText=t,t=new w("serif",E(this.a)),t=B(t),this.j.a.style.cssText=t,t=new w("sans-serif",E(this.a)),t=B(t),this.o.a.style.cssText=t,N(this.g),N(this.h),N(this.j),N(this.o)}function H(){if(null===ut){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ut=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return ut}function F(t,e,n){for(var o in lt)if(lt.hasOwnProperty(o)&&e===t.f[lt[o]]&&n===t.f[lt[o]])return!0;return!1}function z(t){var e,n=t.g.a.offsetWidth,o=t.h.a.offsetWidth;(e=n===t.f.serif&&o===t.f["sans-serif"])||(e=H()&&F(t,n,o)),e?at()-t.A>=t.w?H()&&F(t,n,o)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?U(t,t.v):U(t,t.B):V(t):U(t,t.v)}function V(t){setTimeout(a(function(){z(this)},t),50)}function U(t,e){setTimeout(a(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.o.a),e(this.a)},t),0)}function W(t,e,n){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=n}function G(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),P(t,"active")):I(t.a))}function $(t){this.j=t,this.a=new L,this.h=0,this.f=this.g=!0}function K(t,e,n,o,i){var r=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=i||null,s=o||null||{};if(0===n.length&&r)I(e.a);else{e.f+=n.length,r&&(e.j=r);var l,u=[];for(l=0;l<n.length;l++){var c=n[l],p=s[c.c],d=e.a,f=c;d.g&&h(d.f,[d.a.c("wf",f.c,E(f).toString(),"loading")]),P(d,"fontloading",f),d=null,null===ct&&(ct=window.FontFace?(f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(f[1],10):!0:!1),d=ct?new j(a(e.g,e),a(e.h,e),e.c,c,e.s,p):new R(a(e.g,e),a(e.h,e),e.c,c,e.s,t,p),u.push(d)}for(l=0;l<u.length;l++)u[l].start()}},0)}function q(t,e,n){var o=[],i=n.timeout;O(e);var o=D(t.a,n,t.c),r=new W(t.c,e,i);for(t.h=o.length,e=0,n=o.length;n>e;e++)o[e].load(function(e,n,o){K(t,r,e,n,o)})}function Y(t,e){this.c=t,this.a=e}function Z(t,e,n){var o=d(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),o+"//"+t+"/"+e+".js"+(n?"?v="+n:"")}function X(t,e){this.c=t,this.a=e}function J(t,e,n){t?this.c=t:this.c=e+ht,this.a=[],this.f=[],this.g=n||""}function Q(t,e){for(var n=e.length,o=0;n>o;o++){var i=e[o].split(":");3==i.length&&t.f.push(i.pop());var r="";2==i.length&&""!=i[1]&&(r=":"),t.a.push(i.join(r))}}function tt(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],o=0;e>o;o++)n.push(t.a[o].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function et(t){this.f=t,this.a=[],this.c={}}function nt(t){for(var e=t.f.length,n=0;e>n;n++){var o=t.f[n].split(":"),i=o[0].replace(/\+/g," "),r=["n4"];if(2<=o.length){var a,s=o[1];if(a=[],s)for(var s=s.split(","),l=s.length,u=0;l>u;u++){var c;if(c=s[u],c.match(/^[\w-]+$/)){var h=gt.exec(c.toLowerCase());if(null==h)c="";else{if(c=h[2],c=null==c||""==c?"n":ft[c],h=h[1],null==h||""==h)h="4";else var p=dt[h],h=p?p:isNaN(h)?"4":h.substr(0,1);c=[c,h].join("")}}else c="";c&&a.push(c)}0<a.length&&(r=a),3==o.length&&(o=o[2],a=[],o=o?o.split(","):a,0<o.length&&(o=pt[o[0]])&&(t.c[i]=o))}for(t.c[i]||(o=pt[i])&&(t.c[i]=o),o=0;o<r.length;o+=1)t.a.push(new w(i,r[o]))}}function ot(t,e){this.c=t,this.a=e}function it(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}var at=Date.now||function(){return+new Date},st=!!window.FontFace;x.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},j.prototype.start=function(){var t=this.c.m.document,e=this,n=at(),o=new Promise(function(o,i){function r(){at()-n>=e.f?i():t.fonts.load(S(e.a),e.h).then(function(t){1<=t.length?o():setTimeout(r,25)},function(){i()})}r()}),i=new Promise(function(t,n){setTimeout(n,e.f)});Promise.race([i,o]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var lt={D:"serif",C:"sans-serif"},ut=null;R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=at(),z(this)};var ct=null;W.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,E(t).toString(),"active")],[e.a.c("wf",t.c,E(t).toString(),"loading"),e.a.c("wf",t.c,E(t).toString(),"inactive")]),P(e,"fontactive",t),this.o=!0,G(this)},W.prototype.h=function(t){var e=this.a;if(e.g){var n=p(e.f,e.a.c("wf",t.c,E(t).toString(),"active")),o=[],i=[e.a.c("wf",t.c,E(t).toString(),"loading")];n||o.push(e.a.c("wf",t.c,E(t).toString(),"inactive")),h(e.f,o,i);
}P(e,"fontinactive",t),G(this)},$.prototype.load=function(t){this.c=new s(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,q(this,new M(this.c,t),t)},Y.prototype.load=function(t){function e(){if(r["__mti_fntLst"+o]){var n,i=r["__mti_fntLst"+o](),a=[];if(i)for(var s=0;s<i.length;s++){var l=i[s].fontfamily;void 0!=i[s].fontStyle&&void 0!=i[s].fontWeight?(n=i[s].fontStyle+i[s].fontWeight,a.push(new w(l,n))):a.push(new w(l))}t(a)}else setTimeout(function(){e()},50)}var n=this,o=n.a.projectId,i=n.a.version;if(o){var r=n.c.m;m(this.c,Z(n,o,i),function(i){i?t([]):(r["__MonotypeConfiguration__"+o]=function(){return n.a},e())}).id="__MonotypeAPIScript__"+o}else t([])},X.prototype.load=function(t){var e,n,o=this.a.urls||[],i=this.a.families||[],r=this.a.testStrings||{},a=new v;for(e=0,n=o.length;n>e;e++)g(this.c,o[e],y(a));var s=[];for(e=0,n=i.length;n>e;e++)if(o=i[e].split(":"),o[1])for(var l=o[1].split(","),u=0;u<l.length;u+=1)s.push(new w(o[0],l[u]));else s.push(new w(o[0]));b(a,function(){t(s,r)})};var ht="//fonts.googleapis.com/css",pt={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},dt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ft={i:"i",italic:"i",n:"n",normal:"n"},gt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,mt={Arimo:!0,Cousine:!0,Tinos:!0};ot.prototype.load=function(t){var e=new v,n=this.c,o=new J(this.a.api,d(n),this.a.text),i=this.a.families;Q(o,i);var r=new et(i);nt(r),g(n,tt(o),y(e)),b(e,function(){t(r.a,r.c,mt)})},it.prototype.load=function(t){var e=this.a.id,n=this.c.m;e?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var o=[],i=0;i<e.length;i+=2)for(var r=e[i],a=e[i+1],s=0;s<a.length;s++)o.push(new w(r,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}t(o)}},2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.m,o=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var i=0,r=n.fonts.length;r>i;++i){var a=n.fonts[i];o.a.push(new w(a.name,k("font-weight:"+a.weight+";font-style:"+a.style)))}t(o.a)},m(this.c,d(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+f(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var vt=new $(window);vt.a.c.custom=function(t,e){return new X(e,t)},vt.a.c.fontdeck=function(t,e){return new rt(e,t)},vt.a.c.monotype=function(t,e){return new Y(e,t)},vt.a.c.typekit=function(t,e){return new it(e,t)},vt.a.c.google=function(t,e){return new ot(e,t)};var yt={load:a(vt.load,vt)};o=function(){return yt}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))}()},function(t,e,n){var o;o=function(t){return{hexToRgb:function(t){var e,n,o;return t=t.replace("#",""),3!==t.length&&6!==t.length?[255,255,255]:(3==t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),[e,n,o])},rgbToHex:function(t){return t[0]=t[0]>255?255:t[0]<0?0:t[0],t[1]=t[1]>255?255:t[1]<0?0:t[1],t[2]=t[2]>255?255:t[2]<0?0:t[2],this.zeroFill(t[0].toString(16),2)+this.zeroFill(t[1].toString(16),2)+this.zeroFill(t[2].toString(16),2)},zeroFill:function(t,e){return e-=t.toString().length,e>0?new Array(e+(/\./.test(t)?2:1)).join("0")+t:t},generateGradient:function(t,e,n){var o=[];t||(colorBA="#000000"),e||(e="#ffffff"),t=this.hexToRgb(t),e=this.hexToRgb(e),n-=1;var i=(Math.max(t[0],e[0])-Math.min(t[0],e[0]))/n,r=(Math.max(t[1],e[1])-Math.min(t[1],e[1]))/n,a=(Math.max(t[2],e[2])-Math.min(t[2],e[2]))/n;o.push("#"+this.rgbToHex(t));for(var s=t[0],l=t[1],u=t[2],c=0;n-1>c;c++)s=t[0]<e[0]?s+Math.round(i):s-Math.round(i),l=t[1]<e[1]?l+Math.round(r):l-Math.round(r),u=t[2]<e[2]?u+Math.round(a):u-Math.round(a),o.push("#"+this.rgbToHex([s,l,u]));return o.push("#"+this.rgbToHex(e)),o}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(37),u=o(l),c=n(65),h=n(480),p=n(873),d=o(p),f=n(478),g=n(456),m=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"getInitialState",value:function(){return null}},{key:"reduce",value:function(t,e){switch(e.type){case f.EDITOR_STATE_CHANGE:return e.editorState;case f.EDITOR_RTE_UPDATE:var n=e.entityKey,o=e.editorState,i=(0,g.convertToRaw)(o.getCurrentContent()),r=h.EditorState.setEntity(t,n,{props:{content:null}});return r=h.EditorState.setEntity(r,n,{props:{content:i}});case f.EDITOR_CHANGE_ENTITY_PROPERTY:var a=e.name,s=e.parsedValue,l=e.valid,u=e.lockAspectRatio,c=e.aspectRatio;if(l){var p={},m=t.getCurrentSelection().getEntities().first();if("rotate"===a){var v=t.getEntity(m),y=v.getTransform().set("rotate",s);p.transform=y}else u?p=(0,d["default"])(a,s,c):p[a]=s;return h.EditorState.setEntity(t,m,p)}return t;default:return t}}}]),e}(c.ReduceStore),v=new m(u["default"]);e["default"]=v},function(t,e){"use strict";function n(t,e,n){var o=void 0,i=void 0;return"width"===t?(o=e,i=Math.round(o/n)):"height"==t&&(i=e,o=Math.round(i*n)),{width:o,height:i}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(38),h=o(c),p=n(47),d=o(p),f=n(92),g=(o(f),n(142)),m=(o(g),n(877)),v=o(m),y=n(891),b=o(y),_=n(890),x=o(_),w=n(892),S=o(w),C=n(889),E=o(C),T=n(886),k=o(T),M=n(879),O=o(M),I=n(887),P=o(I),L={edit:k["default"],drag:O["default"],handle:P["default"]},D=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._onKeyDown=n._createHandler("onKeyDown"),n._onKeyUp=n._createHandler("onKeyUp"),n._onMouseDown=n._createHandler("onMouseDown"),n._onMouseMove=n._createHandler("onMouseMove"),n._onMouseUp=n._createHandler("onMouseUp"),n._onMouseLeave=n._createHandler("onMouseLeave"),n._onDoubleClick=n._createHandler("onDoubleClick"),n.exitCurrentMode(),n}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.editorState,e=t.getActiveHandle(),n=void 0;return e&&(n="__handle-"+e.toString().toLowerCase()),u["default"].createElement("div",{className:(0,h["default"])("InfographicEditor",n,{"__read-only":this.props.readOnly}),onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp,onMouseLeave:this._onMouseLeave,onDoubleClick:this._onDoubleClick,tabIndex:this.props.tabIndex},u["default"].createElement(v["default"],{editorState:t,zoom:this.props.zoom,renderItemContentsFn:this.props.renderItemContentsFn}),u["default"].createElement(E["default"],{editorState:t,zoom:this.props.zoom,decoratorFn:this.props.blockDecoratorFn}),u["default"].createElement(x["default"],{editorState:t,zoom:this.props.zoom}),u["default"].createElement(S["default"],{editorState:t,zoom:this.props.zoom}),u["default"].createElement(b["default"],{editorState:t,zoom:this.props.zoom,entityDecoratorFn:this.props.selectedEntityDecoratorFn,blockDecoratorFn:this.props.selectedBlockDecoratorFn,customEntityRenderFn:this.props.renderEntitySelectorFn,selectorTypeFromElementFn:this.props.selectorTypeFromElementFn}))}},{key:"update",value:function(t){this.props.onChange&&this.props.onChange(t)}},{key:"setMode",value:function(t){this._handler=L[t]}},{key:"exitCurrentMode",value:function(){this.setMode("edit")}},{key:"_createHandler",value:function(t){var e=this;return function(n){if(!e.props.readOnly){var o=e._handler&&e._handler[t];o&&o.call(e,n)}}}}]),e}(u["default"].Component);D.defaultProps={allowDragAndDrop:!0,readOnly:!1,zoom:1},D.propTypes={allowDragAndDrop:u["default"].PropTypes.bool,readOnly:u["default"].PropTypes.bool,editorState:u["default"].PropTypes.instanceOf(d["default"]).isRequired,onChange:u["default"].PropTypes.func.isRequired,onItemEdit:u["default"].PropTypes.func,tabIndex:u["default"].PropTypes.number,zoom:function(t,e,n){var o=t[e];return 0===parseFloat(o)?new Error("Invalid prop '"+e+"' supplied to "+n+". It must not be 0"):void 0},blockDecoratorFn:u["default"].PropTypes.func},e["default"]=D},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(38),h=o(c),p=(n(10),n(142)),d=(o(p),n(92)),f=(o(d),n(408)),g=(o(f),n(876)),m=o(g),v=n(878),y=o(v),b=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n.state={backgroundImage:""},n}return a(e,t),s(e,[{key:"render",value:function(){var t=this,e={width:this.props.width+"px",height:this.props.height+"px",transform:"scale("+this.props.zoom+")"};if(this.props.displayGrid){var n=this.props.gridSize;this.props.gridColor;e.backgroundImage="url("+this.state.backgroundImage+")",e.backgroundSize=n+"px "+n+"px"}var o={width:this.props.width*this.props.zoom+"px",height:this.props.height*this.props.zoom+"px",marginBottom:(this.props.marginBottom||0)+"px"};return u["default"].createElement("div",{className:"InfographicEditor-Contents-Block_w",style:o},u["default"].createElement("div",{className:(0,h["default"])("InfographicEditor-Contents-Block",{__grid:this.props.displayGrid}),"data-block-index":this.props.index,"data-block-key":this.props.block.getKey(),style:e},this.props.block.getEntities().map(function(e){var n=t.props.getEntity(e),o=t.props.selection.containsEntity(e),i=t.props.hiddenEntities.contains(e);return u["default"].createElement(m["default"],{key:e,entity:n,parentIndex:t.props.index,selected:o,hidden:i,renderItemContentsFn:t.props.renderItemContentsFn})})))}},{key:"componentWillMount",value:function(){this._updateBackgroundImage()}},{key:"componentDidUpdate",value:function(t){this.props.gridSize===t.gridSize&&this.props.gridColor===t.gridColor||this._updateBackgroundImage()}},{key:"_updateBackgroundImage",value:function(){var t=this.props,e=t.gridSize,n=t.gridColor;this.setState({backgroundImage:this.props.getBackgroundImage(e,n)})}}]),e}(u["default"].Component);b.defaultProps={getBackgroundImage:y["default"],zoom:1},e["default"]=b},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(978),h=o(c),p=n(92),d=(o(p),n(38)),f=o(d),g=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._handleFocus=n._handleFocus.bind(n),n._handleKeyDown=n._handleKeyDown.bind(n),n.shouldComponentUpdate=h["default"].shouldComponentUpdate.bind(n),n}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.entity,e={top:t.getTop()+"px",left:t.getLeft()+"px",width:t.getWidth()+"px",height:t.getHeight()+"px"},n=t.getTransform(),o=n.getRotate();o&&(e.transform="rotate("+o+"deg)");var i={__selected:this.props.selected,__hidden:this.props.hidden},r=void 0;return this.props.renderItemContentsFn&&(r=this.props.renderItemContentsFn(t)),u["default"].createElement("div",{className:(0,f["default"])("InfographicEditor-Contents-Item",i),"data-key":t.getKey(),style:e,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,tabIndex:"0"},r)}},{key:"_handleFocus",value:function(t){this.props.onFocus&&this.props.onFocus(this.props.entity)}},{key:"_handleKeyDown",value:function(t){this.props.onKeyDown&&this.props.onKeyDown(this.props.entity)}}]),e}(u["default"].Component);e["default"]=g},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(875),h=o(c),p=n(47),d=(o(p),n(142)),f=(o(d),n(92)),g=(o(f),n(408)),m=(o(g),function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._getEntity=function(t){return n.props.editorState.getEntity(t)},n}return a(e,t),s(e,[{key:"render",value:function(){var t=this,e=this.props.editorState,n=e.getCurrentContent(),o=e.getPageSize(),i=e.getCurrentSelection(),r=e.getEditorConfiguration(),a=n.getBlocks(),s={paddingTop:r.get("blockSpacing")+"px",paddingBottom:r.get("blockSpacing")+"px"};return u["default"].createElement("div",{className:"InfographicEditor-Contents",style:s},a.map(function(n,s){var l=s===a.size-1?0:r.get("blockSpacing");return u["default"].createElement(h["default"],{key:n.getKey(),getEntity:t._getEntity,block:n,index:s,height:o.screenHeight,width:o.screenWidth,marginBottom:l,selection:i,hiddenEntities:e.getHiddenEntityKeys(),displayGrid:r.get("displayGrid"),gridSize:r.get("gridSize"),gridColor:r.get("gridColor"),zoom:t.props.zoom,renderItemContentsFn:t.props.renderItemContentsFn})}))}}]),e}(u["default"].Component));e["default"]=m},function(t,e){"use strict";function n(t,e){var n=document.createElement("canvas");if(!(n instanceof HTMLCanvasElement))throw new Error("Unable to construct HTMLCanvasElement");var o=window.devicePixelRatio;n.width=n.height=t*o;var i=n.getContext("2d");i.scale(o,o),i.strokeStyle=e,i.beginPath();for(var r=t,a=0;t>a;a+=5)i.moveTo(r,a),i.lineTo(r,a+2);for(var s=0;t>s;s+=5)i.moveTo(s,r),i.lineTo(s+2,r);return i.stroke(),n.toDataURL("image/png",1)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){this.exitCurrentMode(),this.update((0,u["default"])(this.props.editorState))}Object.defineProperty(e,"__esModule",{value:!0});var r=(n(10),n(47)),a=o(r),s=n(409),l=n(565),u=o(l),c=4,h={onMouseMove:function(t){t.preventDefault();var e=(t.pageX-this._dragStartX)/this.props.zoom,n=(t.pageY-this._dragStartY)/this.props.zoom,o={dx:(t.pageX-this._dragPrevX)/this.props.zoom,dy:(t.pageY-this._dragPrevY)/this.props.zoom},i=this._dragPrevX-t.pageX;Math.abs(i)>c&&(this._dragPrevX=t.pageX);var r=this._dragPrevY-t.pageY;Math.abs(r)>c&&(this._dragPrevY=t.pageY);var l=this.props.editorState;l=(0,s.moveEntitiesBy)(l,e,n,{direction:o});var u=!l.isDragging();l=a["default"].set(l,{dragging:!0}),u&&(l=a["default"].push(l,l.getCurrentContent())),this.update(l)},onMouseUp:function(t){i.call(this,t)},onMouseLeave:function(t){i.call(this,t)}};e["default"]=h},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.target;if(e instanceof Element&&(0,a["default"])(e,"InfographicEditor-Contents")){var n=this.props.editorState,o=n.getCurrentSelection();if(!o.isEmpty()){var i=o.getEntities();1===i.size&&this.props.onItemEdit&&this.props.onItemEdit(i.first())}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(568),a=o(r)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=this.props.handleKeyboardEvent;if(!e||!e(t)){var n=(0,h["default"])(t);if(n){var o=this.props.editorState;if(!o.getCurrentSelection().isEmpty()){var i=0,r=0;switch(t.keyCode){case a["default"].UP:r=-1;break;case a["default"].DOWN:r=1;break;case a["default"].RIGHT:i=1;break;case a["default"].LEFT:i=-1}0===i&&0===r||(t.preventDefault(),o.isArrowKeyDown()||(o=l["default"].push(o,o.getCurrentContent())),o=l["default"].set(o,{arrowKeyDown:!0}),this.update((0,u.moveEntitiesBy)(o,i,r,{force:!0})))}}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(563),a=o(r),s=n(47),l=o(s),u=n(409),c=n(566),h=o(c)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(u.includes(t.keyCode)){var e=this.props.editorState;this.update(l["default"].set(e,{arrowKeyDown:!1}))}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(563),a=o(r),s=n(47),l=o(s),u=[a["default"].UP,a["default"].DOWN,a["default"].LEFT,a["default"].RIGHT]},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.classList;if(e.contains("__nw"))return"NW";if(e.contains("__ne"))return"NE";if(e.contains("__se"))return"SE";if(e.contains("__sw"))return"SW";if(e.contains("__rotate"))return"ROTATE";if(e.contains("__beginning"))return"BEGINNING";if(e.contains("__end"))return"END";throw new Error("Cannot resolve handle type")}function r(t){if(!("button"in t&&0!==t.button)&&this.props.allowDragAndDrop){var e=t.target;if(e instanceof Element&&!(0,m["default"])(e,"InfographicEditor-SelectionOverlay-Decorator")){var n=this.props.editorState,o=n.getPageSize();this._dragPageStartWidth=o.screenWidth,this._dragPageStartHeight=o.screenHeight,this._dragStartX=this._dragPrevX=t.pageX,this._dragStartY=this._dragPrevY=t.pageY;var r=void 0,a=(0,m["default"])(e,"InfographicEditor-Overlay-Selector-Handle");if(a){if(r=n.getCurrentSelection(),r.isEmpty()&&r.hasNoBlocks())throw new Error("There is no selection while pointer is down on selector handle");return void this.update(h["default"].set(n,{pointerDown:!0,activeHandle:i(a)}))}n=f["default"].clear(n);var l=null,c=(0,s["default"])(t);if(c||(l=(0,u["default"])(t)),!c&&!l)return void this.update(n);c&&(n=f["default"].addEntities(n,c)),l&&(n=f["default"].addBlocks(n,l)),this.update(h["default"].set(n,{pointerDown:!0}))}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var a=(n(10),n(566)),s=o(a),l=n(888),u=o(l),c=n(47),h=o(c),p=n(408),d=(o(p),n(172)),f=o(d),g=n(568),m=o(g)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=this.props.editorState;e.isPointerDown()&&(this.setMode(e.getActiveHandle()?"handle":"drag"),this._handler&&this._handler.onMouseMove&&this._handler.onMouseMove.call(this,t))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47);o(r)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){this.update(a["default"].set(this.props.editorState,{pointerDown:!1}))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47),a=o(r)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(881),r=o(i),a=n(882),s=o(a),l=n(883),u=o(l),c=n(884),h=o(c),p=n(885),d=o(p),f=n(880),g=o(f),m={onKeyDown:r["default"],onKeyUp:s["default"],onMouseDown:u["default"],onMouseMove:h["default"],onMouseUp:d["default"],onDoubleClick:g["default"]};e["default"]=m},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(){this.exitCurrentMode(),this.update((0,p["default"])(this.props.editorState))}function r(t,e){var n=t.getEditorConfiguration();if(!n.get("displayGrid"))return e;var o=n.get("gridSize"),i=n.get("snapToGridThreshold");return(0,f["default"])(e,o,i)}function a(t,e,n){var o=t.getCurrentSelection();return o.hasNoBlocks()?t:l["default"].setPageSize(t,this._dragPageStartWidth+e,this._dragPageStartHeight+n)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(47),l=o(s),u=n(570),c=o(u),h=n(565),p=o(h),d=n(459),f=o(d),g={onMouseMove:function(t,e){t.preventDefault();var n=this.props.editorState;n.isResizing()||(n=l["default"].push(n,n.getCurrentContent()));var o=n.getActiveHandle(),i=0,s=Math.round((t.pageX-this._dragStartX)/this.props.zoom),u=Math.round((t.pageY-this._dragStartY)/this.props.zoom);if("ROTATE"===o){var h=s;i=h%360}var p=n.getCurrentSelection(),d=n.getActiveEntities(),g=n;g=a.call(this,g,s,u),p.getEntities().forEach(function(e){var a=d.get(e);if(!a)throw new Error("No active entity identified by path "+e+" is present");var h=a.getLeft()+a.getWidth(),p=a.getTop()+a.getHeight(),m={},v=void 0,y=void 0,b=void 0,_=void 0;if("BEGINNING"===o||"END"===o){var x=a.getProps(),w=Math.round(a.getLeft()+x.get("x1")),S=Math.round(a.getTop()+x.get("y1")),C=Math.round(a.getLeft()+x.get("x2")),E=Math.round(a.getTop()+x.get("y2"));"BEGINNING"===o?(w=r(n,w+s),S=r(n,S+u)):(C=r(n,C+s),E=r(n,E+u));var T=Math.min(w,C),k=Math.min(S,E);m.left=T,m.top=k,m.width=Math.abs(w-C),m.height=Math.abs(S-E),x=x.merge({x1:w-T,y1:S-k,x2:C-T,y2:E-k}),m.props=x.toJS()}else{if("NW"!==o&&"SW"!==o||(s&&(m.left=r(n,a.getLeft()+s)),y=m.left||a.getLeft(),m.width=h-y),"NW"!==o&&"NE"!==o||(u&&(m.top=r(n,a.getTop()+u)),v=m.top||a.getTop(),m.height=p-v),("NE"===o||"SE"===o)&&s){b=r(n,a.getLeft()+a.getWidth()+s);var M=b-a.getLeft();"END"!==o&&(M=Math.abs(M)),m.width=M}if(("SW"===o||"SE"===o)&&u){_=r(n,a.getTop()+a.getHeight()+u);var O=_-a.getTop();"END"!==o&&(O=Math.abs(O)),m.height=O}}if(i){var I=a.getTransform();I||(I=new c["default"]);var P=I.getRotate()||0;P=(P+i)%360,t.shiftKey&&(P=(0,f["default"])(P,15,5)),I=I.set("rotate",P),m.transform=I}g=l["default"].setEntity(g,e,m,!1)}),this.update(l["default"].set(g,{resizing:!0}))},onMouseUp:function(t){i.call(this)},onMouseLeave:function(t){i.call(this)}};e["default"]=g},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t.hasAttribute("data-block-key")}function r(t){var e=t.target;return e instanceof Element?(e=(0,s["default"])(e,i),e?e.getAttribute("data-block-key")||null:null):null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var a=n(564),s=o(a)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(47),h=(o(c),function(){function t(e){a(this,t),this._items=e.slice(0)}return s(t,[{key:"add",value:function(t){this._items.push(t)}},{key:"items",get:function(){return this._items}}]),t}()),p=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t))}return r(e,t),s(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.editorState,o=e.decoratorFn;if(!o)return null;var i=n.getPageSize(),r={width:i.screenWidth+"px"},a=n.getEditorConfiguration().get("blockSpacing");return u["default"].createElement("div",{className:"InfographicEditor-Overlay InfographicEditor-BlockDecoratorsOverlay",style:r},n.getCurrentContent().getBlocks().map(function(e,n){var r=i.screenHeight*t.props.zoom+a,s=new h([]),l=new h([]);o(n,s,l);var c=void 0,p=void 0;if(s.items.length){var d={top:r*n+"px",height:a+"px"};c=u["default"].createElement("div",{className:"InfographicEditor-BlockDecoratorsOverlay-Decorator __before",style:d},s.items)}if(l.items.length){var f={top:r*(n+1)+"px",height:a+"px"};p=u["default"].createElement("div",{className:"InfographicEditor-BlockDecoratorsOverlay-Decorator __after",style:f},l.items)}return c||p?u["default"].createElement("div",{className:"InfographicEditor-BlockDecoratorsOverlay-Decorators",key:"blockDecorator-before-"+e.getKey()},c,p):null}))}}]),e}(u["default"].Component);p.defaultProps={zoom:1},e["default"]=p},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(21),h=o(c),p=n(47),d=o(p),f=n(567),g=o(f),m=function(t){function e(t){return i(this,e),r(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){var t=this,e=this.props.editorState,n=e.getCurrentContent(),o=e.getPageSize(),i=e.getEditorConfiguration(),r=i.get("blockSpacing"),a=(o.screenHeight+r,[]),s=this._root?this._root.clientWidth:0;return n.getBlocks().forEach(function(e,i){var l=(o.screenHeight*t.props.zoom+r)*i+r;e.getEntities().forEach(function(e){var i=n.getEntity(e),r=i.bounds(),c=r.left+r.width<0||r.left>o.screenWidth||r.top+r.height<0||r.top>o.screenHeight;if(c){var h=0,p=i.getTransform();p&&(h=p.getRotate()||0);var d=i.getLeft()*t.props.zoom+(s-o.screenWidth*t.props.zoom)/2;a.push(u["default"].createElement(g["default"],{className:"__out-of-bounds",x:d,y:l+i.getTop()*t.props.zoom,width:i.getWidth()*t.props.zoom,height:i.getHeight()*t.props.zoom,rotate:h,key:"outofbounds-"+i.getKey()},u["default"].createElement("div",{className:"InfographicEditor-OutOfBoundsElementsOverlay-OutOfBounds_c","data-key":i.getKey()})))}})}),u["default"].createElement("div",{className:"InfographicEditor-Overlay InfographicEditor-OutOfBoundsElementsOverlay"},a)}},{key:"componentDidMount",value:function(){this._root=h["default"].findDOMNode(this)}},{key:"componentWillUnmount",value:function(){this._root=null}}]),e}(u["default"].Component);m.propTypes={editorState:u["default"].PropTypes.instanceOf(d["default"]).isRequired,zoom:u["default"].PropTypes.number},m.defaultProps={zoom:1},e["default"]=m},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(21),h=o(c),p=n(38),d=o(p),f=n(47),g=o(f),m=n(92),v=(o(m),n(142)),y=(o(v),n(567)),b=o(y),_=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._updateSelectorOffset=n._updateSelectorOffset.bind(n),n.state={selectorOffset:0},n}return a(e,t),s(e,[{key:"renderRectangleSelector",value:function(t,e,n){var o=t.bounds(),i=o.left,r=this._absoluteTop(e,o.top),a=0,s=t.getTransform(),l=s.getRotate();l&&(a=l%360||0);var c={left:(i+this.state.selectorOffset)*this.props.zoom+"px",top:r+"px",width:o.width*this.props.zoom+"px",height:o.height*this.props.zoom+"px"},h=(0,d["default"])("InfographicEditor-SelectionOverlay-Selector_w",{__rotated:!!a});return u["default"].createElement("div",{className:h,
style:c,key:"selector-"+t.getKey()},u["default"].createElement(b["default"],{x:(t.getLeft()-i)*this.props.zoom,y:this._absoluteTop(e,t.getTop())-r,width:t.getWidth()*this.props.zoom,height:t.getHeight()*this.props.zoom,rotate:a},u["default"].createElement("div",{className:"InfographicEditor-Overlay-Selector-Handle __nw"}),u["default"].createElement("div",{className:"InfographicEditor-Overlay-Selector-Handle __ne"}),u["default"].createElement("div",{className:"InfographicEditor-Overlay-Selector-Handle __se"}),u["default"].createElement("div",{className:"InfographicEditor-Overlay-Selector-Handle __sw"}),u["default"].createElement("div",{className:"InfographicEditor-Overlay-Selector-Handle __rotate"})),n)}},{key:"renderLineSelector",value:function(t,e,n){var o=t.bounds(),i={top:this._absoluteTop(e,o.top)+"px",left:(o.left+this.state.selectorOffset)*this.props.zoom+"px",width:o.width*this.props.zoom+"px",height:o.height*this.props.zoom+"px"},r=t.getProperty("x1")>t.getProperty("x2"),a=t.getProperty("y1")>t.getProperty("y2"),s=(0,d["default"])("InfographicEditor-Overlay-Selector-Handle","__beginning",{"__flip-x":r,"__flip-y":a}),l=(0,d["default"])("InfographicEditor-Overlay-Selector-Handle","__end",{"__flip-x":r,"__flip-y":a});return u["default"].createElement("div",{className:"InfographicEditor-SelectionOverlay-LineSelector_w",key:"selector-"+t.getKey(),style:i},u["default"].createElement("div",{className:"InfographicEditor-SelectionOverlay-LineSelector"},u["default"].createElement("div",{className:s}),u["default"].createElement("div",{className:l})),n)}},{key:"render",value:function(){var t=this,e=this.props.editorState,n=e.getCurrentSelection(),o=e.getCurrentContent(),i=e.getEditorConfiguration(),r=n.getEntities(),a=n.getBlocks(),s=e.getPageSize(),l=i.get("blockSpacing"),c={width:s.screenWidth*this.props.zoom+"px",transformOrigin:s.screenWidth/2+"px 0px"};return u["default"].createElement("div",{className:"InfographicEditor-Overlay InfographicEditor-SelectionOverlay",style:c},u["default"].createElement("div",null,r.map(function(n){if(e.entityIsHidden(n))return null;var i=o.getEntity(n);if(!i)return null;if(t.props.customEntityRenderFn){var r=t.props.customEntityRenderFn(i);if(r)return r}var a=i.getBlockKey(),s=o.getBlock(a);if(!s)throw new Error("Cannot find block "+a);var l=void 0;l=t.props.selectorTypeFromElementFn?t.props.selectorTypeFromElementFn(i):"RECTANGLE";var c=o.getBlocks().indexOf(s),h=null;switch(t.props.entityDecoratorFn&&(h=u["default"].createElement("div",{className:"InfographicEditor-SelectionOverlay-Decorator"},t.props.entityDecoratorFn(i))),l){case"RECTANGLE":return t.renderRectangleSelector(i,c,h);case"LINE":return t.renderLineSelector(i,c,h);default:return console.warn("Unknown selector type",l),null}})),u["default"].createElement("div",null,a.map(function(e){var n=o.getBlock(e),i=o.getBlockIndex(e),r=(s.screenHeight*t.props.zoom+l)*i+l,a=null;return t.props.blockDecoratorFn&&(a=u["default"].createElement("div",{className:"InfographicEditor-SelectionOverlay-Decorator"},t.props.blockDecoratorFn(n))),u["default"].createElement(b["default"],{x:0,y:r,width:s.screenWidth*t.props.zoom,height:s.screenHeight*t.props.zoom,key:"block-selector-"+n.getKey(),rotate:0},a)})))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._updateSelectorOffset,!1),this._updateSelectorOffset()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._updateSelectorOffset,!1)}},{key:"componentDidUpdate",value:function(t,e){t.zoom!==this.props.zoom&&this._updateSelectorOffset()}},{key:"_updateSelectorOffset",value:function(){var t=h["default"].findDOMNode(this),e=t.getBoundingClientRect().width;this.setState({selectorOffset:Math.max(0,Math.round((e-t.parentNode.offsetWidth)/2/this.props.zoom))})}},{key:"_absoluteTop",value:function(t,e){var n=this.props.editorState,o=n.getPageSize(),i=n.getEditorConfiguration().get("blockSpacing");return(o.screenHeight*this.props.zoom+i)*t+e*this.props.zoom+i}}]),e}(u["default"].Component);_.defaultProps={zoom:1},_.propTypes={editorState:u["default"].PropTypes.instanceOf(g["default"]).isRequired,zoom:u["default"].PropTypes.number},e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(21),h=o(c),p=n(38),d=o(p),f=n(47),g=(o(f),n(572)),m=o(g),v=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=(0,d["default"])("InfographicEditor-SmartGuidesOverlay-guide",{"__dir-horizontal":"horizontal"===this.props.direction,"__dir-vertical":"vertical"===this.props.direction}),e={};switch(this.props.direction){case"horizontal":e.left=0,e.right=0,e.top=this.props.coordinate;break;case"vertical":e.top=0,e.bottom=0,e.left=this.props.coordinate}return u["default"].createElement("div",{className:t,style:e})}}]),e}(u["default"].Component);v.propTypes={direction:u["default"].PropTypes.oneOf(["horizontal","vertical"]).isRequired,coordinate:u["default"].PropTypes.number.isRequired};var y=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n.state={displayGuides:!1},n._root=null,n._handleWindowResize=n._handleWindowResize.bind(n),n}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.editorState,e=[];if(this.state.displayGuides){var n=t.getPageSize(),o=t.getEditorConfiguration(),i=(0,m["default"])(t);if(i){var r=t.getCurrentContent(),a=t.getCurrentSelection(),s=t.getEntity(a.getEntities().first()),l=t.accessIndex(),c=l.query(i,o.get("snapToGridThreshold")),h={},p=!0,d=!1,f=void 0;try{for(var g,y=c[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value,_=b.match,x=_.entityKey,w=_.blockKey,S=_.coordinate,C=_.direction;if(!a.containsEntity(x)&&w===s.getBlockKey()){var E=r.getBlockIndex(w);if("horizontal"===C)S=(n.screenHeight*this.props.zoom+o.get("blockSpacing"))*E+S*this.props.zoom+o.get("blockSpacing");else if("vertical"===C){var T=0;this._root&&(T=this._root.clientWidth||0);var k=Math.max(0,(T-n.screenWidth*this.props.zoom)/2);S=S*this.props.zoom+k}var M="guide-"+x+"-"+C+"-"+S;M in h||(e.push(u["default"].createElement(v,{coordinate:S,direction:C,key:M})),h[M]=!0)}}}catch(O){d=!0,f=O}finally{try{!p&&y["return"]&&y["return"]()}finally{if(d)throw f}}}}return u["default"].createElement("div",{className:"InfographicEditor-Overlay InfographicEditor-SmartGuidesOverlay"},e)}},{key:"componentDidMount",value:function(){this._updateGuideDisplay(),this._root=h["default"].findDOMNode(this),window.addEventListener("resize",this._handleWindowResize,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleWindowResize,!1),this._root=null}},{key:"componentWillReceiveProps",value:function(t){this._updateGuideDisplay(t)}},{key:"_handleWindowResize",value:function(){this.forceUpdate()}},{key:"_updateGuideDisplay",value:function(t){var e=this.props.editorState,n=!1;if(t){var o=t.editorState;o.isDragging()||o.isArrowKeyDown()?n=!0:!o.isDragging()&&e.isArrowKeyDown()&&(n=!0)}else n=e.isDragging()||e.isArrowKeyDown();this.setState({displayGuides:n})}}]),e}(u["default"].Component);y.defaultProps={zoom:1},e["default"]=y},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={"us letter":{title:"us letter",screenWidth:782,screenHeight:1012},a4:{title:"a4",screenWidth:796,screenHeight:1123},presentation:{title:"presentation",screenWidth:960,screenHeight:720}};e["default"]=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t.getLayout(),n=t.getCurrentContent();return{layout:e,content:{blocks:Array.from(n.getBlocks(),function(e){return{entities:Array.from(e.getEntities(),function(e){var n=t.getEntity(e).toJS();return delete n.key,delete n.blockKey,n})}})}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(47);o(r)},function(t,e){"use strict";function n(t){if(t||(t=[]),!Array.isArray(t))throw new Error("The passed in JSON object is not an array");return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){if(!Array.isArray(t))throw new Error("The passed in JSON object is not an array");return t.map(function(t){return{type:t.type,key:t.key,left:parseInt(t.left),top:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height),transform:t.transform,props:t.props}})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(10),l={blockSpacing:40,displayGrid:!0,gridSize:60,gridColor:"rgba(192,192,192,1)",snapToGridThreshold:5},u=(0,s.Record)(l),c=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,null,[{key:"createDefault",value:function(){return new e}}]),e}(u);e["default"]=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return Math.round((t+e)/2)}function s(t){var e="horizontal"===t.direction?"h":"v";return e+"-"+t.coordinate}function l(t,e){return 0==e?t:t-t%e}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(l){i=!0,r=l}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=n(10),p=n(47),d=(o(p),n(409)),f=n(172),g=o(f),m=function(){function t(){r(this,t),this._hash={}}return c(t,[{key:"add",value:function(t,e){var n=s(t);n in this._hash||(this._hash[n]=[]),this._hash[n].push(e)}},{key:"get",value:function(t){var e=s(t);return e in this._hash?this._hash[e]:[]}},{key:"size",value:function(){return Object.keys(this._hash).length}}]),t}(),v=function(){function t(){r(this,t),this._storage=null,this._currentEditorState=null}return c(t,[{key:"clear",value:function(){this._storage=null,this._currentEditorState=null}},{key:"collect",value:function(t){this.clear();var e=new m,n=t.getEntities(),o=t.getEditorConfiguration(),i=o.get("snapToGridThreshold");n.forEach(function(t){var n=t.bounds(),o=n.left,r=n.top,s=o+n.width,u=r+n.height,c=a(n.left,n.left+n.width),h=a(n.top,n.top+n.height),p=({entityKey:t.getKey(),blockKey:t.getBlockKey()},t.getKey()),d=t.getBlockKey();[{coordinate:o,direction:"vertical",edge:"left"},{coordinate:s,direction:"vertical",edge:"right"},{coordinate:c,direction:"vertical",edge:"vertical-center"},{coordinate:r,direction:"horizontal",edge:"top"},{coordinate:u,direction:"horizontal",edge:"bottom"},{coordinate:h,direction:"horizontal",edge:"horizontal-center"}].forEach(function(t){var n=t.coordinate,o=t.direction,r=t.edge;e.add({coordinate:l(n,i),direction:o},{entityKey:p,blockKey:d,direction:o,edge:r,coordinate:n}),n%i===0&&e.add({coordinate:l(n-i,i),direction:o},{entityKey:p,blockKey:d,direction:o,edge:r,coordinate:n})})}),this._storage=e,this._currentEditorState=t}},{key:"isUpToDate",value:function(t){var e=this._currentEditorState;if(!e)return!1;var n=e.getCurrentContent(),o=t.getCurrentContent();if((0,h.is)(n,o))return!0;var r=t.getCurrentSelection(),a=r.getEntities().toJS();if(!n.containsEntities.apply(n,i(a)))return!1;e=g["default"].addEntities.apply(g["default"],[e].concat(i(a))),e=(0,d.removeEntities)(e);var s=(0,d.removeEntities)(t);return(0,h.is)(e.getCurrentContent(),s.getCurrentContent())}},{key:"update",value:function(t){this.isUpToDate(t)||this.collect(t)}},{key:"query",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=this._storage;if(!n)return[];var o=u(t,4),i=o[0],r=o[1],s=o[2],c=o[3];i=l(i,e),s=l(s,e),r=l(r,e),c=l(c,e);var h=l(a(t[0],t[2]),e),p=l(a(t[1],t[3]),e),d=[{key:{direction:"vertical",coordinate:i},edge:"left"},{key:{direction:"vertical",coordinate:s},edge:"right"},{key:{direction:"vertical",coordinate:h},edge:"vertical-center"},{key:{direction:"horizontal",coordinate:r},edge:"top"},{key:{direction:"horizontal",coordinate:c},edge:"bottom"},{key:{direction:"horizontal",coordinate:p},edge:"horizontal-center"}],f=[],g=!0,m=!1,v=void 0;try{for(var y,b=function(){var t=y.value,e=n.get(t.key);e.length&&Array.prototype.push.apply(f,e.map(function(e){return{match:e,rectEdge:t.edge}}))},_=d[Symbol.iterator]();!(g=(y=_.next()).done);g=!0)b()}catch(x){m=!0,v=x}finally{try{!g&&_["return"]&&_["return"]()}finally{if(m)throw v}}return new Set(f)}},{key:"storage",get:function(){return this._storage}}]),t}();e["default"]=v},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e=t.getCurrentSelection();if(e.hasNoBlocks())return t;var n=t.getCurrentContent(),o=(0,m.List)().asMutable(),r=[],s=!0,u=!1,c=void 0;try{for(var p,f=function(){var i=p.value,a=n.findBlockByKey(i);if(!a)return{v:t};var s=n.getBlockIndex(i),u=(0,h["default"])("block");a.getEntities().map(function(t){var e=n.getEntity(t).merge({key:(0,h["default"])("entity"),blockKey:u});return o.push(e),e});a=a.merge({key:u,entities:a.getEntities().clear()});var c=n.getBlocks().splice(s+1,0,a);r.push(u),n=n.set("blocks",c),t=l["default"].set(t,{currentContent:n,currentSelection:e})},v=e.getBlocks()[Symbol.iterator]();!(s=(p=v.next()).done);s=!0){var y=f();if("object"===("undefined"==typeof y?"undefined":a(y)))return y.v}}catch(b){u=!0,c=b}finally{try{!s&&v["return"]&&v["return"]()}finally{if(u)throw c}}return t=g["default"].apply(void 0,[t].concat(i(Array.from(o.asImmutable())))),d["default"].addBlocks.apply(d["default"],[d["default"].clear(t)].concat(r))}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e["default"]=r;var s=n(47),l=o(s),u=n(92),c=(o(u),n(205)),h=o(c),p=n(172),d=o(p),f=n(571),g=o(f),m=n(10)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e=t.getCurrentSelection();if(e.hasNoBlocks())return t;var n=t.getCurrentContent(),o=n.getBlocks(),r=n.getEntities(),a=[],l=[],u=!0,h=!1,p=void 0;try{for(var d,f=e.getBlocks()[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var g=d.value,m=n.getBlock(g),v=Array.from(m.getEntities());Array.prototype.push.apply(l,v);var y=n.getBlockIndex(g);a.push(y);var b=!0,_=!1,x=void 0;try{for(var w,S=v[Symbol.iterator]();!(b=(w=S.next()).done);b=!0){var C=w.value;r=r.remove(C)}}catch(E){_=!0,x=E}finally{try{!b&&S["return"]&&S["return"]()}finally{if(_)throw x}}}}catch(E){h=!0,p=E}finally{try{!u&&f["return"]&&f["return"]()}finally{if(h)throw p}}return o=o.filter(function(t,e){return!a.includes(e)}),t=c["default"].removeBlocks.apply(c["default"],[t].concat(i(Array.from(e.getBlocks())))),t=c["default"].removeEntities.apply(c["default"],[t].concat(l)),s["default"].set(t,{currentContent:n.merge({blocks:o,entities:r})})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var a=n(47),s=o(a),l=n(92),u=(o(l),n(172)),c=o(u)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=(0,c["default"])(t);if(!n)return null;var o=t.getCurrentSelection(),i=new r.Set(o.getEntities().map(function(e){return t.getEntity(e).getBlockKey()})),a=t.getEditorConfiguration(),s=a.get("snapToGridThreshold"),u=t.accessIndex(),h=Array.from(u.query(n,s)).filter(function(e){var n=e.match,r=n.entityKey,a=n.blockKey;if(o.containsEntity(r))return!1;var s=t.getEntity(r);return i.contains(s.getBlockKey())?s.getBlockKey()===a:!1}),p=null,d=null;if(h.length)for(var f=0;f<h.length;f++){var g=h[f],m=g.match;if(d||"vertical"!==m.direction||(d=h[f]),p||"horizontal"!==m.direction||(p=h[f]),d&&p)break}var v=a.get("gridSize"),y=n[0],b=n[1],_=n[2]-n[0],x=n[3]-n[1];if(d){var w=d,m=w.match,S=w.rectEdge;if("left"===S)y=m.coordinate;else if("vertical-center"===S)y=Math.round(m.coordinate-_/2);else{if("right"!==S)throw new Error("Unrecognized rectEdge value in vertical guide context: "+S);y=m.coordinate-_}}else if(e.dx<0)y=(0,l["default"])(y,v,s);else if(e.dx>0){var C=y+_,E=(0,l["default"])(C,v,s);y=C===E?(0,l["default"])(y,v,s):E-_}if(p){var T=p,k=T.match,M=T.rectEdge;if("top"===M)b=k.coordinate;else if("horizontal-center"===M)b=Math.round(k.coordinate-x/2);else{if("bottom"!==M)throw new Error("Unrecognized rectEdge value in horizontal guide context: "+M);b=k.coordinate-x}}else if(e.dy<0)b=(0,l["default"])(b,v,s);else if(e.dy>0){var O=b+x,I=(0,l["default"])(O,v,s);b=O===I?(0,l["default"])(b,v,s):I-x}return{dx:y-n[0],dy:b-n[1]}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=n(10),a=n(47),s=(o(a),n(459)),l=o(s),u=n(572),c=o(u)},,,function(t,e,n){"use strict";var o=n(206),i=n(97),r=n(173),a=n(78),s=n(43),l=n(10),u=n(124),c=l.List,h=l.Repeat,p={insertAtomicBlock:function(t,e,n){var l=t.getCurrentContent(),p=t.getSelection(),d=a.removeRange(l,p,"backward"),f=d.getSelectionAfter(),g=a.splitBlock(d,f),m=g.getSelectionAfter(),v=a.setBlockType(g,m,"atomic"),y=i.create({entity:e}),b=[new r({key:u(),type:"atomic",text:n,characterList:c(h(y,n.length))}),new r({key:u(),type:"unstyled",text:"",characterList:c()})],_=o.createFromArray(b),x=a.replaceWithFragment(v,m,_),w=x.merge({selectionBefore:p,selectionAfter:x.getSelectionAfter().set("hasFocus",!0)});return s.push(t,w,"insert-fragment")}};t.exports=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){for(var o=e;n>o;o++)if(null!=t[o])return!1;return!0}function r(t,e,n,o){for(var i=e;n>i;i++)t[i]=o}var a=n(10),s=a.List,l=".",u=function(){function t(e){o(this,t),this._decorators=e.slice()}return t.prototype.getDecorations=function(t){var e=Array(t.getText().length).fill(null);return this._decorators.forEach(function(n,o){var a=0,s=n.strategy;s(t,function(t,n){i(e,t,n)&&(r(e,t,n,o+l+a),a++)})}),s(e)},t.prototype.getComponentForKey=function(t){var e=parseInt(t.split(l)[0],10);return this._decorators[e].component},t.prototype.getPropsForKey=function(t){var e=parseInt(t.split(l)[0],10);return this._decorators[e].props},t}();t.exports=u},function(t,e,n){"use strict";function o(t,e,n,o){var r=t.getBlockMap(),s=e.getStartKey(),l=e.getStartOffset(),u=e.getEndKey(),c=e.getEndOffset(),h=r.skipUntil(function(t,e){return e===s}).takeUntil(function(t,e){return e===u}).concat(a([[u,r.get(u)]])).map(function(t,e){var r,a;s===u?(r=l,a=c):(r=e===s?l:0,a=e===u?c:t.getLength());for(var h,p=t.getCharacterList();a>r;)h=p.get(r),p=p.set(r,o?i.applyStyle(h,n):i.removeStyle(h,n)),r++;return t.set("characterList",p)});return t.merge({blockMap:r.merge(h),selectionBefore:e,selectionAfter:e})}var i=n(97),r=n(10),a=r.Map,s={add:function(t,e,n){return o(t,e,n,!0)},remove:function(t,e,n){return o(t,e,n,!1)}};t.exports=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(32),s=a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l=n(461),u=n(574),c=n(908),h=n(909),p=n(910),d=n(911),f=n(913),g=n(43),m=n(1),v=n(21),y=n(593),b=n(468),_=n(125),x=n(208),w=n(71),S=n(124),C=n(580),E=n(93),T=n(470),k=_.isBrowser("IE"),M=!k,O={edit:d,composite:c,drag:p,cut:null,render:null},I=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._blockSelectEvents=!1,r._clipboard=null,r._guardAgainstRender=!1,r._handler=null,r._dragCount=0,r._editorKey=S(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.focus=r._focus.bind(r),r.blur=r._blur.bind(r),r.setMode=r._setMode.bind(r),r.exitCurrentMode=r._exitCurrentMode.bind(r),r.restoreEditorDOM=r._restoreEditorDOM.bind(r),r.setRenderGuard=r._setRenderGuard.bind(r),r.removeRenderGuard=r._removeRenderGuard.bind(r),r.setClipboard=r._setClipboard.bind(r),r.getClipboard=r._getClipboard.bind(r),r.getEditorKey=function(){return r._editorKey},r.update=r._update.bind(r),r.onDragEnter=r._onDragEnter.bind(r),r.onDragLeave=r._onDragLeave.bind(r),r.state={containerKey:0},r}return r(e,t),e.prototype._buildHandler=function(t){var e=this;return function(n){if(!e.props.readOnly){var o=e._handler&&e._handler[t];o&&o.call(e,n)}}},e.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},e.prototype._renderPlaceholder=function(){return this._showPlaceholder()?m.createElement(f,{text:E(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID}):null},e.prototype.render=function(){var t=this.props,e=t.readOnly,n=t.textAlignment,o=x({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===n,"DraftEditor/alignRight":"right"===n,"DraftEditor/alignCenter":"center"===n}),i={outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"};return m.createElement("div",{className:o},this._renderPlaceholder(),m.createElement("div",{className:x("DraftEditor/editorContainer"),key:"editor"+this.state.containerKey,ref:"editorContainer"},m.createElement("div",{"aria-activedescendant":e?null:this.props.ariaActiveDescendantID,"aria-autocomplete":e?null:this.props.ariaAutoComplete,"aria-describedby":this._showPlaceholder()?this._placeholderAccessibilityID:null,"aria-expanded":e?null:this.props.ariaExpanded,"aria-haspopup":e?null:this.props.ariaHasPopup,"aria-label":this.props.ariaLabel,"aria-owns":e?null:this.props.ariaOwneeID,className:x("public/DraftEditor/content"),contentEditable:!e,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:"editor",role:e?null:this.props.role||"textbox",spellCheck:M&&this.props.spellCheck,style:i,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},m.createElement(h,{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:s({},u,this.props.customStyleMap),customStyleFn:this.props.customStyleFn,editorKey:this._editorKey,editorState:this.props.editorState}))))},e.prototype.componentDidMount=function(){this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)},e.prototype.componentWillUpdate=function(){this._blockSelectEvents=!0},e.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1},e.prototype._focus=function(t){var e=this.props.editorState,n=e.getSelection().getHasFocus(),o=v.findDOMNode(this.refs.editor),i=b.getScrollParent(o),r=t||T(i),a=r.x,s=r.y;o.focus(),i===window?window.scrollTo(a,s):y.setTop(i,s),n||this.update(g.forceSelection(e,e.getSelection()))},e.prototype._blur=function(){v.findDOMNode(this.refs.editor).blur()},e.prototype._setMode=function(t){this._handler=O[t]},e.prototype._exitCurrentMode=function(){this.setMode("edit")},e.prototype._restoreEditorDOM=function(t){var e=this;this.setState({containerKey:this.state.containerKey+1},function(){e._focus(t)})},e.prototype._setRenderGuard=function(){this._guardAgainstRender=!0},e.prototype._removeRenderGuard=function(){this._guardAgainstRender=!1},e.prototype._setClipboard=function(t){this._clipboard=t},e.prototype._getClipboard=function(){return this._clipboard},e.prototype._update=function(t){this.props.onChange(t)},e.prototype._onDragEnter=function(){this._dragCount++},e.prototype._onDragLeave=function(){this._dragCount--,0===this._dragCount&&this.exitCurrentMode()},e}(m.Component);I.defaultProps={blockRenderMap:l,blockRendererFn:w.thatReturnsNull,blockStyleFn:w.thatReturns(""),keyBindingFn:C,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},t.exports=I},function(t,e,n){"use strict";var o=n(78),i=n(43),r=n(467),a=n(464),s=n(589),l=20,u=!1,c=!1,h="",p={onBeforeInput:function(t){h=(h||"")+t.data},onCompositionStart:function(){c=!0},onCompositionEnd:function(){var t=this;u=!1,c=!1,setTimeout(function(){u||p.resolveComposition.call(t)},l)},onKeyDown:function(t){t.which!==r.RIGHT&&t.which!==r.LEFT||t.preventDefault()},onKeyPress:function(t){t.which===r.RETURN&&t.preventDefault()},resolveComposition:function(){if(!c){u=!0;var t=h;h="";var e=i.set(this.props.editorState,{inCompositionMode:!1}),n=e.getCurrentInlineStyle(),r=a(e.getCurrentContent(),e.getSelection()),l=!t||s(e)||n.size>0||null!==r;if(l&&this.restoreEditorDOM(),this.exitCurrentMode(),this.removeRenderGuard(),t){var p=o.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return void this.update(i.push(e,p,"insert-characters"))}l&&this.update(i.set(e,{nativelyRenderedContent:null,forceSelection:!0}))}}};t.exports=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,n,o){return p({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===t,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===t,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===e,"public/DraftStyleDefault/depth1":1===e,"public/DraftStyleDefault/depth2":2===e,"public/DraftStyleDefault/depth3":3===e,"public/DraftStyleDefault/depth4":4===e,"public/DraftStyleDefault/listLTR":"LTR"===o,"public/DraftStyleDefault/listRTL":"RTL"===o})}var s=n(32),l=s||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=n(575),c=n(410),h=(n(43),n(1)),p=n(208),d=n(976),f=n(93),g=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.shouldComponentUpdate=function(t){var e=this.props.editorState,n=t.editorState,o=e.getDirectionMap(),i=n.getDirectionMap();if(o!==i)return!0;var r=e.getSelection().getHasFocus(),a=n.getSelection().getHasFocus();if(r!==a)return!0;var s=n.getNativelyRenderedContent(),l=e.isInCompositionMode(),u=n.isInCompositionMode();if(e===n||null!==s&&n.getCurrentContent()===s||l&&u)return!1;var c=e.getCurrentContent(),h=n.getCurrentContent(),p=e.getDecorator(),d=n.getDecorator();return l!==u||c!==h||p!==d||n.mustForceSelection()},e.prototype.render=function(){for(var t=this.props,e=t.blockRenderMap,n=t.blockRendererFn,o=t.customStyleMap,i=t.customStyleFn,r=t.editorState,s=r.getCurrentContent(),p=r.getSelection(),g=r.mustForceSelection(),m=r.getDecorator(),v=f(r.getDirectionMap()),y=s.getBlocksAsArray(),b=[],_=null,x=null,w=null,S=void 0,C=void 0,E=void 0,T=void 0,k=void 0,M=void 0,O=void 0,I=0;I<y.length;I++){C=y[I],E=C.getKey(),T=C.getType();var P=n(C),L=void 0,D=void 0,A=void 0;P&&(L=P.component,D=P.props,A=P.editable);var N=v.get(E),B=c.encode(E,0,0),j={block:C,blockProps:D,customStyleMap:o,customStyleFn:i,decorator:m,direction:N,forceSelection:g,key:E,offsetKey:B,selection:p,tree:r.getBlockTree(E)},R=e.get(T);O=R.wrapper;var H=O!==x,F=R.element||e.get("unstyled").element,z=C.getDepth(),V=this.props.blockStyleFn(C);if("li"===F){var U=H||null===w||z>w;V=d(V,a(T,z,U,N))}var W=L||u;M={className:V,"data-block":!0,"data-editor":this.props.editorKey,"data-offset-key":B,key:E},void 0!==A&&(M=l({},M,{contentEditable:A,suppressContentEditableWarning:!0
})),k=h.createElement(F,M,h.createElement(W,j)),O?(H&&(S=[],_=h.cloneElement(O,{key:E+"-wrap","data-offset-key":B},S),x=O,b.push(_)),w=C.getDepth(),f(S).push(k)):(S=null,_=null,x=null,w=null,b.push(k))}return h.createElement("div",{"data-contents":"true"},b)},e}(h.Component);t.exports=g},function(t,e,n){"use strict";function o(t,e){var n=null,o=null;if(document.caretRangeFromPoint){var i=document.caretRangeFromPoint(t.x,t.y);n=i.startContainer,o=i.startOffset}else{if(!t.rangeParent)return null;n=t.rangeParent,o=t.rangeOffset}n=p(n),o=p(o);var r=p(u(n));return h(e,r,o,r,o)}function i(t,e){var n=s.moveText(t.getCurrentContent(),t.getSelection(),e);return l.push(t,n,"insert-fragment")}function r(t,e,n){var o=s.insertText(t.getCurrentContent(),e,n,t.getCurrentInlineStyle());return l.push(t,o,"insert-fragment")}var a=n(592),s=n(78),l=n(43),u=n(463),c=n(586),h=n(587),p=n(93),d={onDragEnd:function(){this.exitCurrentMode()},onDrop:function(t){var e=this,n=new a(t.nativeEvent.dataTransfer),s=this.props.editorState,l=o(t.nativeEvent,s);if(t.preventDefault(),this.exitCurrentMode(),null!=l){var u=n.getFiles();if(u.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(l,u))return;return void c(u,function(t){t&&e.update(r(s,p(l),t))})}var h=this._internalDrag?"internal":"external";if(!this.props.handleDrop||!this.props.handleDrop(l,n,h))return this._internalDrag?void this.update(i(s,l)):void this.update(r(s,l,n.getText()))}}};t.exports=d},function(t,e,n){"use strict";var o=n(928),i=n(929),r=n(930),a=n(931),s=n(932),l=n(933),u=n(934),c=n(935),h=n(936),p=n(937),d=n(938),f=n(939),g={onBeforeInput:o,onBlur:i,onCompositionStart:r,onCopy:a,onCut:s,onDragOver:l,onDragStart:u,onFocus:c,onInput:h,onKeyDown:p,onPaste:d,onSelect:f};t.exports=g},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(32),s=n(914),l=n(1),u=n(21),c=(n(186),n(962)),h=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._setSelection=function(){var t=this.props.selection;if(null!=t&&t.getHasFocus()){var e=this.props,n=e.blockKey,o=e.start,i=e.text,r=o+i.length;if(t.hasEdgeWithin(n,o,r)){var a=u.findDOMNode(this),s=a.firstChild,l=void 0;l=s.nodeType===Node.TEXT_NODE?s:"BR"===s.tagName?a:s.firstChild,c(t,l,n,o,r)}}},e.prototype.shouldComponentUpdate=function(t){return u.findDOMNode(this.refs.leaf).textContent!==t.text||t.styleSet!==this.props.styleSet||t.forceSelection},e.prototype.componentDidUpdate=function(){this._setSelection()},e.prototype.componentDidMount=function(){this._setSelection()},e.prototype.render=function(){var t=this.props.text;t.endsWith("\n")&&this.props.isLast&&(t+="\n");var e=this.props,n=e.customStyleMap,o=e.customStyleFn,i=e.offsetKey,r=e.styleSet,u=r.reduce(function(t,e){var o={},i=n[e];return void 0!==i&&t.textDecoration!==i.textDecoration&&(o.textDecoration=[t.textDecoration,i.textDecoration].join(" ").trim()),a(t,i,o)},{});if(o){var c=o(r);u=a(u,c)}return l.createElement("span",{"data-offset-key":i,ref:"leaf",style:u},l.createElement(s,null,t))},e}(l.Component);t.exports=h},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(208),l=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype.shouldComponentUpdate=function(t){return this.props.text!==t.text||this.props.editorState.getSelection().getHasFocus()!==t.editorState.getSelection().getHasFocus()},e.prototype.render=function(){var t=this.props.editorState.getSelection().getHasFocus(),e=s({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":t});return a.createElement("div",{className:e},a.createElement("div",{className:s("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID},this.props.text))},e}(a.Component);t.exports=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return c?"\n"===t.textContent:"BR"===t.tagName}var s=n(1),l=n(21),u=n(125),c=u.isBrowser("IE <= 11"),h=c?s.createElement("span",{key:"A","data-text":"true"},"\n"):s.createElement("br",{key:"A","data-text":"true"}),p=c?s.createElement("span",{key:"B","data-text":"true"},"\n"):s.createElement("br",{key:"B","data-text":"true"}),d=function(t){function e(n){o(this,e);var r=i(this,t.call(this,n));return r._forceFlag=!1,r}return r(e,t),e.prototype.shouldComponentUpdate=function(t){var e=l.findDOMNode(this),n=""===t.children;return n?!a(e):e.textContent!==t.children},e.prototype.componentWillUpdate=function(){this._forceFlag=!this._forceFlag},e.prototype.render=function(){return""===this.props.children?this._forceFlag?h:p:s.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},e}(s.Component);t.exports=d},function(t,e){"use strict";var n={getRemovalRange:function(t,e,n,o,i){var r=n.split(" ");r=r.map(function(t,e){if("forward"===i){if(e>0)return" "+t}else if(e<r.length-1)return t+" ";return t});for(var a,s,l=o,u=null,c=null,h=0;h<r.length;h++){if(s=r[h],a=l+s.length,a>t&&e>l)null!==u?c=a:(u=l,c=a);else if(null!==u)break;l=a}var p=o+n.length,d=u===o,f=c===p;return(!d&&f||d&&!f)&&("forward"===i?c!==p&&c++:u!==o&&u--),{start:u,end:c}}};t.exports=n},function(t,e,n){"use strict";var o=(n(97),n(173)),i=n(10),r=n(579),a=n(124),s=n(584),l=n(466),u=i.List,c=i.Repeat,h={processHTML:function(t,e){return r(t,s,e)},processText:function(t,e){return t.map(function(t){return t=l(t),new o({key:a(),type:"unstyled",text:t,characterList:u(c(e,t.length))})})}};t.exports=h},function(t,e,n){"use strict";var o,i=n(10),r=n(968),a=n(93),s=i.OrderedMap,l={getDirectionMap:function(t,e){o?o.reset():o=new r;var n=t.getBlockMap(),l=n.valueSeq().map(function(t){return a(o).getDirection(t.getText())}),u=s(n.keySeq().zip(l));return null!=e&&i.is(e,u)?e:u}};t.exports=l},function(t,e,n){"use strict";var o=n(129),i=n(78),r=n(43),a=(n(186),n(920)),s=n(93),l={currentBlockContainsLink:function(t){var e=t.getSelection();return t.getCurrentContent().getBlockForKey(e.getAnchorKey()).getCharacterList().slice(e.getStartOffset(),e.getEndOffset()).some(function(t){var e=t.getEntity();return!!e&&"LINK"===o.get(e).getType()})},getCurrentBlockType:function(t){var e=t.getSelection();return t.getCurrentContent().getBlockForKey(e.getStartKey()).getType()},getDataObjectForLinkURL:function(t){return{url:t.toString()}},handleKeyCommand:function(t,e){switch(e){case"bold":return l.toggleInlineStyle(t,"BOLD");case"italic":return l.toggleInlineStyle(t,"ITALIC");case"underline":return l.toggleInlineStyle(t,"UNDERLINE");case"code":return l.toggleCode(t);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return l.onBackspace(t);case"delete":case"delete-word":case"delete-to-end-of-block":return l.onDelete(t);default:return null}},insertSoftNewline:function(t){var e=i.insertText(t.getCurrentContent(),t.getSelection(),"\n",t.getCurrentInlineStyle(),null),n=r.push(t,e,"insert-characters");return r.forceSelection(n,e.getSelectionAfter())},onBackspace:function(t){var e=t.getSelection();if(!e.isCollapsed()||e.getAnchorOffset()||e.getFocusOffset())return null;var n=t.getCurrentContent(),o=e.getStartKey(),a=n.getBlockBefore(o);if(a&&"atomic"===a.getType()){var s=e.merge({anchorKey:a.getKey(),anchorOffset:0}),u=i.setBlockType(n,s,n.getBlockForKey(o).getType()),c=i.removeRange(u,s,"backward");if(c!==n)return r.push(t,c,"remove-range")}var h=l.tryToRemoveBlockStyle(t);return h?r.push(t,h,"change-block-type"):null},onDelete:function(t){var e=t.getSelection();if(!e.isCollapsed())return null;var n=t.getCurrentContent(),o=e.getStartKey(),a=n.getBlockForKey(o),s=a.getLength();if(e.getStartOffset()<s)return null;var l=n.getBlockAfter(o);if(!l||"atomic"!==l.getType())return null;var u=e.merge({focusKey:l.getKey(),focusOffset:l.getLength()}),c=i.removeRange(n,u,"forward");return c!==n?r.push(t,c,"remove-range"):null},onTab:function(t,e,n){var o=e.getSelection(),i=o.getAnchorKey();if(i!==o.getFocusKey())return e;var s=e.getCurrentContent(),l=s.getBlockForKey(i),u=l.getType();if("unordered-list-item"!==u&&"ordered-list-item"!==u)return e;t.preventDefault();var c=s.getBlockBefore(i);if(!c)return e;var h=c.getType();if("unordered-list-item"!==h&&"ordered-list-item"!==h)return e;var p=l.getDepth();if(!t.shiftKey&&p===n)return e;n=Math.min(c.getDepth()+1,n);var d=a(s,o,t.shiftKey?-1:1,n);return r.push(e,d,"adjust-depth")},toggleBlockType:function(t,e){var n=t.getSelection(),o=n.getStartKey(),a=n.getEndKey(),l=t.getCurrentContent(),u=n;if(o!==a&&0===n.getEndOffset()){var c=s(l.getBlockBefore(a));a=c.getKey(),u=u.merge({anchorKey:o,anchorOffset:n.getStartOffset(),focusKey:a,focusOffset:c.getLength(),isBackward:!1})}var h=l.getBlockMap().skipWhile(function(t,e){return e!==o}).takeWhile(function(t,e){return e!==a}).some(function(t){return"atomic"===t.getType()});if(h)return t;var p=l.getBlockForKey(o).getType()===e?"unstyled":e;return r.push(t,i.setBlockType(l,u,p),"change-block-type")},toggleCode:function(t){var e=t.getSelection(),n=e.getAnchorKey(),o=e.getFocusKey();return e.isCollapsed()||n!==o?l.toggleBlockType(t,"code-block"):l.toggleInlineStyle(t,"CODE")},toggleInlineStyle:function(t,e){var n=t.getSelection(),o=t.getCurrentInlineStyle();if(n.isCollapsed())return r.setInlineStyleOverride(t,o.has(e)?o.remove(e):o.add(e));var a,s=t.getCurrentContent();return a=o.has(e)?i.removeInlineStyle(s,n,e):i.applyInlineStyle(s,n,e),r.push(t,a,"change-inline-style")},toggleLink:function(t,e,n){var o=i.applyEntity(t.getCurrentContent(),e,n);return r.push(t,o,"apply-entity")},tryToRemoveBlockStyle:function(t){var e=t.getSelection(),n=e.getAnchorOffset();if(e.isCollapsed()&&0===n){var o=e.getAnchorKey(),r=t.getCurrentContent(),a=r.getBlockForKey(o);if(a.getLength()>0)return null;var s=a.getType(),l=r.getBlockBefore(o);if("code-block"===s&&l&&"code-block"===l.getType())return null;if("unstyled"!==s)return i.setBlockType(r,e,"unstyled")}return null}};t.exports=l},function(t,e,n){"use strict";var o=n(78),i=n(43),r=n(412),a=n(93),s=null,l={cut:function(t){var e=t.getCurrentContent(),n=t.getSelection(),l=null;if(n.isCollapsed()){var u=n.getAnchorKey(),c=e.getBlockForKey(u).getLength();if(c===n.getAnchorOffset())return t;l=n.set("focusOffset",c)}else l=n;l=a(l),s=r(e,l);var h=o.removeRange(e,l,"forward");return h===e?t:i.push(t,h,"remove-range")},paste:function(t){if(!s)return t;var e=o.replaceWithFragment(t.getCurrentContent(),t.getSelection(),s);return i.push(t,e,"insert-fragment")}};t.exports=l},function(t,e){"use strict";function n(t,e,n,o){var i=e.getStartKey(),r=e.getEndKey(),a=t.getBlockMap(),s=a.toSeq().skipUntil(function(t,e){return e===i}).takeUntil(function(t,e){return e===r}).concat([[r,a.get(r)]]).map(function(t){var e=t.getDepth()+n;return e=Math.max(0,Math.min(e,o)),t.set("depth",e)});return a=a.merge(s),t.merge({blockMap:a,selectionBefore:e,selectionAfter:e})}t.exports=n},function(t,e,n){"use strict";function o(t,e,n,o){for(var r=t.getCharacterList();n>e;)r=r.set(e,i.applyEntity(r.get(e),o)),e++;return t.set("characterList",r)}var i=n(97);t.exports=o},function(t,e,n){"use strict";function o(t,e,n){var o=t.getBlockMap(),a=e.getStartKey(),s=e.getStartOffset(),l=e.getEndKey(),u=e.getEndOffset(),c=o.skipUntil(function(t,e){return e===a}).takeUntil(function(t,e){return e===l}).toOrderedMap().merge(i.OrderedMap([[l,o.get(l)]])).map(function(t,e){var o=e===a?s:0,i=e===l?u:t.getLength();return r(t,o,i,n)});return t.merge({blockMap:o.merge(c),selectionBefore:e,selectionAfter:e})}var i=n(10),r=n(921);t.exports=o},function(t,e,n){"use strict";function o(t){var e=0,n={},o=[];t.getBlockMap().forEach(function(t,r){t.findEntityRanges(function(t){return null!==t.getEntity()},function(o){var i=a.stringify(t.getEntityAt(o));n.hasOwnProperty(i)||(n[i]=""+e++)}),o.push({key:r,text:t.getText(),type:t.getType(),depth:i(t)?t.getDepth():0,inlineStyleRanges:l(t),entityRanges:s(t,n),data:t.getData().toObject()})});var u=Object.keys(n),c={};return u.forEach(function(t,e){var n=r.get(a.unstringify(t));c[e]={type:n.getType(),mutability:n.getMutability(),data:n.getData()}}),{entityMap:c,blocks:o}}function i(t){var e=t.getType();return"ordered-list-item"===e||"unordered-list-item"===e}var r=n(129),a=n(578),s=n(940),l=n(941);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.blocks,n=t.entityMap,o={};Object.keys(n).forEach(function(t){var e=n[t],i=e.type,r=e.mutability,a=e.data,s=l.create(i,r,a||{});o[t]=s});var i=e.map(function(t){var e=t.key,n=t.type,i=t.text,s=t.depth,l=t.inlineStyleRanges,u=t.entityRanges,g=t.data;e=e||d(),s=s||0,l=l||[],u=u||[],g=f(g);var m=p(i,l),v=u.filter(function(t){return o.hasOwnProperty(t.key)}).map(function(t){return r({},t,{key:o[t.key]})}),y=h(i,v),b=c(m,y);return new a({key:e,type:n,text:i,depth:s,characterList:b,data:g})});return s.createFromBlockArray(i)}var i=n(32),r=i||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a=n(173),s=n(460),l=n(129),u=n(10),c=n(925),h=n(926),p=n(927),d=n(124),f=u.Map;t.exports=o},function(t,e,n){"use strict";function o(t,e){var n=t.map(function(t,n){var o=e[n];return i.create({style:t,entity:o})});return a(n)}var i=n(97),r=n(10),a=r.List;t.exports=o},function(t,e,n){"use strict";function o(t,e){var n=Array(t.length).fill(null);return e&&e.forEach(function(e){for(var o=r(t,0,e.offset).length,i=o+r(t,e.offset,e.length).length,a=o;i>a;a++)n[a]=e.key}),n}var i=n(174),r=i.substr;t.exports=o},function(t,e,n){"use strict";function o(t,e){var n=Array(t.length).fill(l);return e&&e.forEach(function(e){for(var o=s(t,0,e.offset).length,i=o+s(t,e.offset,e.length).length;i>o;)n[o]=n[o].add(e.style),o++}),n}var i=n(174),r=n(10),a=r.OrderedSet,s=i.substr,l=a();t.exports=o},function(t,e,n){"use strict";function o(t){return g&&(t==d||t==f)}function i(t,e,n,o){var i=s.replaceText(t.getCurrentContent(),t.getSelection(),e,n,o);return l.push(t,i,"insert-characters")}function r(t){var e=t.data;if(e){if(this.props.handleBeforeInput&&this.props.handleBeforeInput(e))return void t.preventDefault();var n=this.props.editorState,r=n.getSelection();if(!r.isCollapsed())return t.preventDefault(),void this.update(i(n,e,n.getCurrentInlineStyle(),c(n.getCurrentContent(),n.getSelection())));var s=!h(n),u=i(n,e,n.getCurrentInlineStyle(),c(n.getCurrentContent(),n.getSelection()));if(!s)return t.preventDefault(),void this.update(u);var d=r.getAnchorKey(),f=n.getBlockTree(d),g=a.getFingerprint(f),m=a.getFingerprint(u.getBlockTree(d));o(e)||g!==m||p(u.getDirectionMap()).get(d)!==p(n.getDirectionMap()).get(d)?t.preventDefault():u=l.set(u,{nativelyRenderedContent:u.getCurrentContent()}),this.update(u)}}var a=n(573),s=n(78),l=n(43),u=n(125),c=n(464),h=n(589),p=n(93),d="'",f="/",g=u.isBrowser("Firefox");t.exports=r},function(t,e,n){"use strict";(function(e){function o(t){s&&a()===document.body&&e.getSelection().removeAllRanges();var n=this.props.editorState,o=n.getSelection();if(o.getHasFocus()){var r=o.set("hasFocus",!1);this.props.onBlur&&this.props.onBlur(t),this.update(i.acceptSelection(n,r))}}var i=n(43),r=n(125),a=n(407),s=r.isEngine("WebKit");t.exports=o}).call(e,n(72))},function(t,e,n){"use strict";function o(){this.setRenderGuard(),this.setMode("composite"),this.update(i.set(this.props.editorState,{inCompositionMode:!0}))}var i=n(43);t.exports=o},function(t,e,n){"use strict";function o(t){var e=this.props.editorState,n=e.getSelection();return n.isCollapsed()?void t.preventDefault():void this.setClipboard(i(this.props.editorState))}var i=n(582);t.exports=o},function(t,e,n){"use strict";function o(t){var e=this,n=this.props.editorState,o=n.getSelection();if(o.isCollapsed())return void t.preventDefault();var r=s.getScrollParent(t.target),a=u(r),c=a.x,h=a.y,p=l(n);this.setClipboard(p),this.setRenderGuard(),this.setMode("cut"),setTimeout(function(){e.restoreEditorDOM({x:c,y:h}),e.removeRenderGuard(),e.exitCurrentMode(),e.update(i(n))},0)}function i(t){var e=r.removeRange(t.getCurrentContent(),t.getSelection(),"forward");return a.push(t,e,"remove-range")}var r=n(78),a=n(43),s=n(468),l=n(582),u=n(470);t.exports=o},function(t,e){"use strict";function n(t){this._internalDrag=!1,this.setMode("drag"),t.preventDefault()}t.exports=n},function(t,e){"use strict";function n(){this._internalDrag=!0,this.setMode("drag")}t.exports=n},function(t,e,n){"use strict";function o(t){var e=this.props.editorState,n=e.getSelection();if(!n.getHasFocus()){var o=n.set("hasFocus",!0);this.props.onFocus&&this.props.onFocus(t),this.update(i.forceSelection(e,o))}}var i=n(43);t.exports=o},function(t,e,n){"use strict";(function(e){function o(){var t=e.getSelection(),n=t.anchorNode,o=t.isCollapsed;if(n.nodeType===Node.TEXT_NODE){var l=n.textContent,d=this.props.editorState,f=c(u(n)),g=r.decode(f),m=g.blockKey,v=g.decoratorKey,y=g.leafKey,b=d.getBlockTree(m).getIn([v,"leaves",y]),_=b.start,x=b.end,w=d.getCurrentContent(),S=w.getBlockForKey(m),C=S.getText().slice(_,x);if(l.endsWith(p)&&(l=l.slice(0,-1)),l!==C){var E,T,k,M,O=d.getSelection(),I=O.merge({anchorOffset:_,focusOffset:x,isBackward:!1}),P=S.getEntityAt(_),L=P&&s.get(P),D=L&&L.getMutability(),A="MUTABLE"===D,N=A?"spellcheck-change":"apply-entity",B=i.replaceText(w,I,l,S.getInlineStyleAt(_),A?S.getEntityAt(_):null);if(h)E=t.anchorOffset,T=t.focusOffset,k=_+Math.min(E,T),M=k+Math.abs(E-T),E=k,T=M;else{var j=l.length-C.length;k=O.getStartOffset(),M=O.getEndOffset(),E=o?M+j:k,T=M+j}var R=B.merge({selectionBefore:w.getSelectionAfter(),selectionAfter:O.merge({anchorOffset:E,focusOffset:T})});this.update(a.push(d,R,N))}}}var i=n(78),r=n(410),a=n(43),s=n(129),l=n(125),u=n(463),c=n(93),h=l.isEngine("Gecko"),p="\n\n";t.exports=o}).call(e,n(72))},function(t,e,n){"use strict";function o(t,e){switch(t){case"redo":return a.redo(e);case"delete":return m(e);case"delete-word":return d(e);case"backspace":return g(e);case"backspace-word":return p(e);case"backspace-to-start-of-line":return h(e);case"split-block":return f(e);case"transpose-characters":return b(e);case"move-selection-to-start-of-block":return y(e);case"move-selection-to-end-of-block":return v(e);case"secondary-cut":return u.cut(e);case"secondary-paste":return u.paste(e);default:return e}}function i(t){var e=t.which,n=this.props.editorState;switch(e){case l.RETURN:if(t.preventDefault(),this.props.handleReturn&&this.props.handleReturn(t))return;break;case l.ESC:return t.preventDefault(),void(this.props.onEscape&&this.props.onEscape(t));case l.TAB:return void(this.props.onTab&&this.props.onTab(t));case l.UP:return void(this.props.onUpArrow&&this.props.onUpArrow(t));case l.DOWN:return void(this.props.onDownArrow&&this.props.onDownArrow(t));case l.SPACE:if(w&&x(t)){t.preventDefault();var i=r.replaceText(n.getCurrentContent(),n.getSelection()," ");return void this.update(a.push(n,i,"insert-characters"))}}var s=this.props.keyBindingFn(t);if(s){if("undo"===s)return void _(t,n,this.update);if(t.preventDefault(),!this.props.handleKeyCommand||!this.props.handleKeyCommand(s)){var u=o(s,n);u!==n&&this.update(u)}}}var r=n(78),a=n(43),s=n(462),l=n(467),u=n(919),c=n(125),h=n(950),p=n(951),d=n(952),f=n(953),g=n(956),m=n(957),v=n(954),y=n(955),b=n(958),_=n(959),x=s.isOptionKeyCommand,w=c.isBrowser("Chrome");t.exports=i},function(t,e,n){"use strict";function o(t){var e=this;t.preventDefault();var n=new l(t.clipboardData);if(!n.isRichText()){var o=n.getFiles(),g=n.getText();if(o.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(o))return;return void d(o,function(t){if(t=t||g){var n=e.props.editorState,o=f(t),i=s.create({style:n.getCurrentInlineStyle(),entity:p(n.getCurrentContent(),n.getSelection())}),r=c.processText(o,i),l=a.createFromArray(r),d=u.replaceWithFragment(n.getCurrentContent(),n.getSelection(),l);e.update(h.push(n,d,"insert-fragment"))}})}}var m=[],v=n.getText(),y=n.getHTML();if(!this.props.handlePastedText||!this.props.handlePastedText(v,y)){if(v&&(m=f(v)),!this.props.stripPastedStyles){var b=this.getClipboard();if(n.isRichText()&&b){if(-1!==y.indexOf(this.getEditorKey())||1===m.length&&1===b.size&&b.first().getText()===v)return void this.update(i(this.props.editorState,b))}else if(b&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&r(m,b))return void this.update(i(this.props.editorState,b));if(y){var _=c.processHTML(y,this.props.blockRenderMap);if(_){var x=a.createFromArray(_);return void this.update(i(this.props.editorState,x))}}this.setClipboard(null)}if(m){var w=this.props.editorState,S=s.create({style:w.getCurrentInlineStyle(),entity:p(w.getCurrentContent(),w.getSelection())}),C=c.processText(m,S),E=a.createFromArray(C);this.update(i(this.props.editorState,E))}}}function i(t,e){var n=u.replaceWithFragment(t.getCurrentContent(),t.getSelection(),e);return h.push(t,n,"insert-fragment")}function r(t,e){return t.length===e.size&&e.valueSeq().every(function(e,n){return e.getText()===t[n]})}var a=n(206),s=n(97),l=n(592),u=n(78),c=n(916),h=n(43),p=n(464),d=n(586),f=n(964);t.exports=o},function(t,e,n){"use strict";function o(){if(!this._blockSelectEvents){var t=this.props.editorState,e=a(t,r.findDOMNode(this.refs.editorContainer).firstChild),n=e.selectionState;n!==t.getSelection()&&(t=e.needsRecovery?i.forceSelection(t,n):i.acceptSelection(t,n),this.update(t))}}var i=n(43),r=n(21),a=n(944);t.exports=o},function(t,e,n){"use strict";function o(t,e){var n=[];return t.findEntityRanges(function(t){return!!t.getEntity()},function(o,r){var s=t.getText(),l=t.getEntityAt(o);n.push({offset:a(s.slice(0,o)),length:a(s.slice(o,r)),key:Number(e[i.stringify(l)])})}),n}var i=n(578),r=n(174),a=r.strlen;t.exports=o},function(t,e,n){"use strict";function o(t,e,n){var o=[],i=e.map(function(t){return t.has(n)}).toList();return a(i,s,l,function(e,i){var a=t.getText();o.push({offset:r.strlen(a.slice(0,e)),length:r.strlen(a.slice(e,i)),style:n})}),o}function i(t){var e=t.getCharacterList().map(function(t){return t.getStyle()}).toList(),n=e.flatten().toSet().map(function(n){return o(t,e,n)});return Array.prototype.concat.apply(u,n.toJS())}var r=n(174),a=n(411),s=function(t,e){return t===e},l=function(t){return!!t},u=[];t.exports=i},function(t,e,n){"use strict";function o(t){var e=getComputedStyle(t),n=document.createElement("div");n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize,n.style.fontStyle=e.fontStyle,n.style.fontWeight=e.fontWeight,n.style.lineHeight=e.lineHeight,n.style.position="absolute",n.textContent="M",document.body.appendChild(n);var o=n.getBoundingClientRect();return document.body.removeChild(n),o.height}function i(t,e){for(var n=1/0,o=1/0,i=-(1/0),r=-(1/0),a=0;a<t.length;a++){var s=t[a];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),o=Math.min(o,s.bottom),i=Math.max(i,s.top),r=Math.max(r,s.bottom))}return o>=i&&e>i-n&&e>r-o}function r(t){switch(t.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return t.length;default:return t.childNodes.length}}function a(t){t.collapsed?void 0:u(!1),t=t.cloneRange();var e=t.startContainer;1!==e.nodeType&&(e=e.parentNode);var n=o(e),a=t.endContainer,c=t.endOffset;for(t.setStart(t.startContainer,0);i(l(t),n)&&(a=t.startContainer,c=t.startOffset,a.parentNode?void 0:u(!1),t.setStartBefore(a),1!==a.nodeType||"inline"===getComputedStyle(a).display););for(var h=a,p=c-1;;){for(var d=h.nodeValue,f=p;f>=0;f--)if(!(null!=d&&f>0&&s.isSurrogatePair(d,f-1))){if(t.setStart(h,f),!i(l(t),n))break;a=h,c=f}if(-1===f||0===h.childNodes.length)break;h=h.childNodes[f],p=r(h)}return t.setStart(a,c),t}var s=n(174),l=n(583),u=n(7);t.exports=a},function(t,e,n){"use strict";function o(t,e,n){var o=e.getStartOffset(),l=e.getEndOffset(),u=t.getEntityAt(o);if(!u)return e;var c=i.get(u),h=c.getMutability();if("MUTABLE"===h)return e;var p=a(t,u).filter(function(t){return o<t.end&&l>t.start});1!=p.length?s(!1):void 0;var d=p[0];if("IMMUTABLE"===h)return e.merge({anchorOffset:d.start,focusOffset:d.end,isBackward:!1});var f=r.getRemovalRange(o,l,t.getText().slice(d.start,d.end),d.start,n);return e.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1})}var i=n(129),r=n(915),a=n(946),s=n(7);t.exports=o},function(t,e,n){"use strict";(function(e){function o(t,n){var o=e.getSelection();return 0===o.rangeCount?{selectionState:t.getSelection().set("hasFocus",!1),needsRecovery:!1}:i(t,n,o.anchorNode,o.anchorOffset,o.focusNode,o.focusOffset)}var i=n(581);t.exports=o}).call(e,n(72))},function(t,e,n){"use strict";function o(t){var e=i(t),n=0,o=0,r=0,a=0;if(e.length){var s=e[0];n=s.top,o=s.right,r=s.bottom,a=s.left;for(var l=1;l<e.length;l++){var u=e[l];0===u.height&&0===u.width||(n=Math.min(n,u.top),o=Math.max(o,u.right),r=Math.max(r,u.bottom),a=Math.min(a,u.left))}}return{top:n,right:o,bottom:r,left:a,width:o-a,height:r-n}}var i=n(583);t.exports=o},function(t,e,n){"use strict";function o(t,e){var n=[];return t.findEntityRanges(function(t){return t.getEntity()===e},function(t,e){n.push({start:t,end:e})}),n.length?void 0:i(!1),n}var i=n(7);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.getSelection();if(!e.rangeCount)return null;var n=e.getRangeAt(0),o=i(n),r=o.top,a=o.right,s=o.bottom,l=o.left;return 0===r&&0===a&&0===s&&0===l?null:o}var i=n(945);t.exports=o},function(t,e,n){"use strict";function o(t,e,n){e.isCollapsed()?void 0:s(!1);var o,l,u=e.getStartKey(),c=e.getStartOffset(),h=t.getBlockMap(),p=n.size;if(1===p){var d=h.get(u),f=n.first(),g=d.getText(),m=d.getCharacterList(),v=d.merge({text:g.slice(0,c)+f.getText()+g.slice(c),characterList:a(m,f.getCharacterList(),c),data:f.getData()});return h=h.set(u,v),o=u,l=c+f.getText().length,t.merge({blockMap:h.set(u,v),selectionBefore:e,selectionAfter:e.merge({anchorKey:o,anchorOffset:l,focusKey:o,focusOffset:l,isBackward:!1})})}var y=[];return t.getBlockMap().forEach(function(t,e){if(e!==u)return void y.push(t);var i=t.getText(),a=t.getCharacterList(),s=i.length,l=i.slice(0,c),h=a.slice(0,c),d=n.first(),f=t.merge({text:l+d.getText(),characterList:h.concat(d.getCharacterList()),type:l?t.getType():d.getType(),data:d.getData()});y.push(f),n.slice(1,p-1).forEach(function(t){y.push(t.set("key",r()))});var g=i.slice(c,s),m=a.slice(c,s),v=n.last();o=r();var b=v.merge({key:o,text:v.getText()+g,characterList:v.getCharacterList().concat(m),data:v.getData()});y.push(b)}),l=n.last().getLength(),t.merge({blockMap:i.createFromArray(y),selectionBefore:e,selectionAfter:e.merge({anchorKey:o,anchorOffset:l,focusKey:o,focusOffset:l,isBackward:!1})})}var i=n(206),r=n(124),a=n(588),s=n(7);t.exports=o},function(t,e,n){"use strict";function o(t,e,n,o){e.isCollapsed()?void 0:a(!1);var i=n.length;if(!i)return t;var l=t.getBlockMap(),u=e.getStartKey(),c=e.getStartOffset(),h=l.get(u),p=h.getText(),d=h.merge({text:p.slice(0,c)+n+p.slice(c,h.getLength()),characterList:r(h.getCharacterList(),s(o,i).toList(),c)}),f=c+i;return t.merge({blockMap:l.set(u,d),selectionAfter:e.merge({anchorOffset:f,focusOffset:f})})}var i=n(10),r=n(588),a=n(7),s=i.Repeat;t.exports=o},function(t,e,n){"use strict";(function(e){function o(t){var n=l(t,function(t){var n=t.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return s(t,1);var o=e.getSelection(),i=o.getRangeAt(0);return i=r(i),a(t,null,i.endContainer,i.endOffset,i.startContainer,i.startOffset).selectionState},"backward");return n===t.getCurrentContent()?t:i.push(t,n,"remove-range")}var i=n(43),r=n(942),a=n(581),s=n(465),l=n(207);t.exports=o}).call(e,n(72))},function(t,e,n){"use strict";function o(t){var e=s(t,function(t){var e=t.getSelection(),n=e.getStartOffset();if(0===n)return a(t,1);var o=e.getStartKey(),r=t.getCurrentContent(),s=r.getBlockForKey(o).getText().slice(0,n),l=i.getBackward(s);return a(t,l.length||1)},"backward");return e===t.getCurrentContent()?t:r.push(t,e,"remove-range")}var i=n(577),r=n(43),a=n(465),s=n(207);t.exports=o},function(t,e,n){"use strict";function o(t){var e=s(t,function(t){var e=t.getSelection(),n=e.getStartOffset(),o=e.getStartKey(),r=t.getCurrentContent(),s=r.getBlockForKey(o).getText().slice(n),l=i.getForward(s);return a(t,l.length||1)},"forward");return e===t.getCurrentContent()?t:r.push(t,e,"remove-range")}var i=n(577),r=n(43),a=n(590),s=n(207);t.exports=o},function(t,e,n){"use strict";function o(t){var e=i.splitBlock(t.getCurrentContent(),t.getSelection());return r.push(t,e,"split-block")}var i=n(78),r=n(43);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.getSelection(),n=e.getEndKey(),o=t.getCurrentContent(),r=o.getBlockForKey(n).getLength();return i.set(t,{selection:e.merge({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r,isBackward:!1}),forceSelection:!0})}var i=n(43);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.getSelection(),n=e.getStartKey();return i.set(t,{selection:e.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}var i=n(43);t.exports=o},function(t,e,n){"use strict";function o(t){var e=s(t,function(t){var e=t.getSelection(),n=t.getCurrentContent(),o=e.getAnchorKey(),i=e.getAnchorOffset(),s=n.getBlockForKey(o).getText()[i-1];return a(t,s?r.getUTF16Length(s,0):1)},"backward");if(e===t.getCurrentContent())return t;var n=t.getSelection();return i.push(t,e.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}var i=n(43),r=n(174),a=n(465),s=n(207);t.exports=o},function(t,e,n){"use strict";function o(t){var e=s(t,function(t){var e=t.getSelection(),n=t.getCurrentContent(),o=e.getAnchorKey(),i=e.getAnchorOffset(),s=n.getBlockForKey(o).getText()[i];return a(t,s?r.getUTF16Length(s,0):1)},"forward");if(e===t.getCurrentContent())return t;var n=t.getSelection();return i.push(t,e.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}var i=n(43),r=n(174),a=n(590),s=n(207);t.exports=o},function(t,e,n){"use strict";function o(t){var e=t.getSelection();if(!e.isCollapsed())return t;var n=e.getAnchorOffset();if(0===n)return t;var o=e.getAnchorKey(),s=t.getCurrentContent(),l=s.getBlockForKey(o),u=l.getLength();if(1>=u)return t;var c,h;n===u?(c=e.set("anchorOffset",n-1),h=e):(c=e.set("focusOffset",n+1),h=c.set("anchorOffset",n+1));var p=a(s,c),d=i.removeRange(s,c,"backward"),f=d.getSelectionAfter(),g=f.getAnchorOffset()-1,m=f.merge({anchorOffset:g,focusOffset:g}),v=i.replaceWithFragment(d,m,p),y=r.push(t,v,"insert-fragment");return r.acceptSelection(y,h)}var i=n(78),r=n(43),a=n(412);t.exports=o},function(t,e,n){"use strict";
function o(t,e,n){var o=i.undo(e);if("spellcheck-change"===e.getLastChangeType()){var r=o.getCurrentContent();return void n(i.set(o,{nativelyRenderedContent:r}))}return t.preventDefault(),e.getNativelyRenderedContent()?(n(i.set(e,{nativelyRenderedContent:null})),void setTimeout(function(){n(o)},0)):void n(o)}var i=n(43);t.exports=o},function(t,e,n){"use strict";function o(t,e,n){var o=e.getStartKey(),i=e.getEndKey(),a=t.getBlockMap(),s=a.toSeq().skipUntil(function(t,e){return e===o}).takeUntil(function(t,e){return e===i}).concat(r([[i,a.get(i)]])).map(n);return t.merge({blockMap:a.merge(s),selectionBefore:e,selectionAfter:e})}var i=n(10),r=i.Map;t.exports=o},function(t,e,n){"use strict";function o(t,e){if(e.isCollapsed())return t;var n,o=t.getBlockMap(),a=e.getStartKey(),s=e.getStartOffset(),l=e.getEndKey(),u=e.getEndOffset(),c=o.get(a),h=o.get(l);n=c===h?i(c.getCharacterList(),s,u):c.getCharacterList().slice(0,s).concat(h.getCharacterList().slice(u));var p=c.merge({text:c.getText().slice(0,s)+h.getText().slice(u),characterList:n}),d=o.toSeq().skipUntil(function(t,e){return e===a}).takeUntil(function(t,e){return e===l}).concat(r.Map([[l,null]])).map(function(t,e){return e===a?p:null});return o=o.merge(d).filter(function(t){return!!t}),t.merge({blockMap:o,selectionBefore:e,selectionAfter:e.merge({anchorKey:a,anchorOffset:s,focusKey:a,focusOffset:s,isBackward:!1})})}function i(t,e,n){if(0===e)for(;n>e;)t=t.shift(),e++;else if(n===t.count())for(;n>e;)t=t.pop(),n--;else{var o=t.slice(0,e),i=t.slice(n);t=o.concat(i).toList()}return t}var r=n(10);t.exports=o},function(t,e,n){"use strict";(function(e){function o(t,n,o,s,l){if(a(document.documentElement,n)){var u=e.getSelection(),c=t.getAnchorKey(),h=t.getAnchorOffset(),p=t.getFocusKey(),d=t.getFocusOffset(),f=t.getIsBackward();if(!u.extend&&f){var g=c,m=h;c=p,h=d,p=g,d=m,f=!1}var v=c===o&&h>=s&&l>=h,y=p===o&&d>=s&&l>=d;if(v&&y)return u.removeAllRanges(),r(u,n,h-s),void i(u,n,d-s);if(f){if(y&&(u.removeAllRanges(),r(u,n,d-s)),v){var b=u.focusNode,_=u.focusOffset;u.removeAllRanges(),r(u,n,h-s),i(u,b,_)}}else v&&(u.removeAllRanges(),r(u,n,h-s)),y&&i(u,n,d-s)}}function i(t,e,n){if(t.extend&&a(s(),e))t.extend(e,n);else{var o=t.getRangeAt(0);o.setEnd(e,n),t.addRange(o.cloneRange())}}function r(t,e,n){var o=document.createRange();o.setStart(e,n),t.addRange(o)}var a=n(458),s=n(407);t.exports=o}).call(e,n(72))},function(t,e,n){"use strict";function o(t,e){e.isCollapsed()?void 0:a(!1);var n=e.getAnchorKey(),o=e.getAnchorOffset(),i=t.getBlockMap(),l=i.get(n),u=l.getText(),c=l.getCharacterList(),h=l.merge({text:u.slice(0,o),characterList:c.slice(0,o)}),p=r(),d=h.merge({key:p,text:u.slice(o),characterList:c.slice(o),data:s()}),f=i.toSeq().takeUntil(function(t){return t===l}),g=i.toSeq().skipUntil(function(t){return t===l}).rest(),m=f.concat([[h.getKey(),h],[d.getKey(),d]],g).toOrderedMap();return t.merge({blockMap:m,selectionBefore:e,selectionAfter:e.merge({anchorKey:p,anchorOffset:0,focusKey:p,focusOffset:0,isBackward:!1})})}var i=n(10),r=n(124),a=n(7),s=i.Map;t.exports=o},function(t,e){"use strict";function n(t){return t.split(o)}var o=/\r\n?|\n/g;t.exports=n},function(t,e){"use strict";function n(t){return t.split("/")}var o={isImage:function(t){return"image"===n(t)[0]},isJpeg:function(t){var e=n(t);return o.isImage(t)&&("jpeg"===e[1]||"pjpeg"===e[1])}};t.exports=o},function(t,e){"use strict";var n="[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]";t.exports={getPunctuation:function(){return n}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e){n(this,t),this._uri=e}return t.prototype.toString=function(){return this._uri},t}();t.exports=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(594),r=n(469),a=n(7),s=function(){function t(e){o(this,t),e?r.isStrong(e)?void 0:a(!1):e=r.getGlobalDir(),this._defaultDir=e,this.reset()}return t.prototype.reset=function(){this._lastDir=this._defaultDir},t.prototype.getDirection=function(t){return this._lastDir=i.getDirection(t,this._lastDir),this._lastDir},t}();t.exports=s},function(t,e,n){"use strict";function o(t){return s[t]||t}function i(t){if(!t)return{major:"",minor:""};var e=t.split(".");return{major:e[0],minor:e[1]}}var r=n(981),a="Unknown",s={"Mac OS":"Mac OS X"},l=new r,u=l.getResult(),c=i(u.browser.version),h={browserArchitecture:u.cpu.architecture||a,browserFullVersion:u.browser.version||a,browserMinorVersion:c.minor||a,browserName:u.browser.name||a,browserVersion:u.browser.major||a,deviceName:u.device.model||a,engineName:u.engine.name||a,engineVersion:u.engine.version||a,platformArchitecture:u.cpu.architecture||a,platformName:o(u.os.name)||a,platformVersion:u.os.version||a,platformFullVersion:u.os.version||a};t.exports=h},function(t,e,n){"use strict";function o(t,e){var n=t.split(w);return n.length>1?n.some(function(t){return T.contains(t,e)}):(t=n[0].trim(),i(t,e))}function i(t,e){var n=t.split(S);if(n.length>0&&n.length<=2?void 0:_(!1),1===n.length)return r(n[0],e);var o=n[0],i=n[1];return f(o)&&f(i)?void 0:_(!1),r(">="+o,e)&&r("<="+i,e)}function r(t,e){if(t=t.trim(),""===t)return!0;var n=e.split(x),o=p(t),i=o.modifier,r=o.rangeComponents;switch(i){case"<":return a(n,r);case"<=":return s(n,r);case">=":return u(n,r);case">":return c(n,r);case"~":case"~>":return h(n,r);default:return l(n,r)}}function a(t,e){return-1===b(t,e)}function s(t,e){var n=b(t,e);return-1===n||0===n}function l(t,e){return 0===b(t,e)}function u(t,e){var n=b(t,e);return 1===n||0===n}function c(t,e){return 1===b(t,e)}function h(t,e){var n=e.slice(),o=e.slice();o.length>1&&o.pop();var i=o.length-1,r=parseInt(o[i],10);return d(r)&&(o[i]=r+1+""),u(t,n)&&a(t,o)}function p(t){var e=t.split(x),n=e[0].match(C);return n?void 0:_(!1),{modifier:n[1],rangeComponents:[n[2]].concat(e.slice(1))}}function d(t){return!isNaN(t)&&isFinite(t)}function f(t){return!p(t).modifier}function g(t,e){for(var n=t.length;e>n;n++)t[n]="0"}function m(t,e){t=t.slice(),e=e.slice(),g(t,e.length);for(var n=0;n<e.length;n++){var o=e[n].match(/^[x*]$/i);if(o&&(e[n]=t[n]="0","*"===o[0]&&n===e.length-1))for(var i=n;i<t.length;i++)t[i]="0"}return g(e,t.length),[t,e]}function v(t,e){var n=t.match(E)[1],o=e.match(E)[1],i=parseInt(n,10),r=parseInt(o,10);return d(i)&&d(r)&&i!==r?y(i,r):y(t,e)}function y(t,e){return typeof t!=typeof e?_(!1):void 0,t>e?1:e>t?-1:0}function b(t,e){for(var n=m(t,e),o=n[0],i=n[1],r=0;r<i.length;r++){var a=v(o[r],i[r]);if(a)return a}return 0}var _=n(7),x=/\./,w=/\|\|/,S=/\s+\-\s+/,C=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,E=/^(\d*)(.*)/,T={contains:function(t,e){return o(t.trim(),e.trim())}};t.exports=T},function(t,e){"use strict";function n(t){return t=t||document,o||"CSS1Compat"!==t.compatMode?t.body:t.documentElement}var o="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;t.exports=n},function(t,e,n){"use strict";function o(t){var e=i(t);return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}var i=n(973);t.exports=o},function(t,e,n){"use strict";function o(t){var e=document.documentElement;if(!("getBoundingClientRect"in t&&i(e,t)))return{left:0,right:0,top:0,bottom:0};var n=t.getBoundingClientRect();return{left:Math.round(n.left)-e.clientLeft,right:Math.round(n.right)-e.clientLeft,top:Math.round(n.top)-e.clientTop,bottom:Math.round(n.bottom)-e.clientTop}}var i=n(458);t.exports=o},function(t,e,n){"use strict";function o(t){return null==t?t:String(t)}function i(t,e){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(t,null)))return o(n.getPropertyValue(a(e)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(t,null))return o(n.getPropertyValue(a(e)));if("display"===e)return"none"}return o(t.currentStyle?"float"===e?t.currentStyle.cssFloat||t.currentStyle.styleFloat:t.currentStyle[r(e)]:t.style&&t.style[r(e)])}var r=n(556),a=n(559);t.exports=i},function(t,e){"use strict";function n(){var t=void 0;return document.documentElement&&(t=document.documentElement.clientWidth),!t&&document.body&&(t=document.body.clientWidth),t||0}function o(){var t=void 0;return document.documentElement&&(t=document.documentElement.clientHeight),!t&&document.body&&(t=document.body.clientHeight),t||0}function i(){return{width:window.innerWidth||n(),height:window.innerHeight||o()}}i.withoutScrollbars=function(){return{width:n(),height:o()}},t.exports=i},function(t,e){"use strict";function n(t){t||(t="");var e=void 0,n=arguments.length;if(n>1)for(var o=1;n>o;o++)e=arguments[o],e&&(t=(t?t+" ":"")+e);return t}t.exports=n},function(t,e){"use strict";function n(t,e,n){if(!t)return null;var i={};for(var r in t)o.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var o=Object.prototype.hasOwnProperty;t.exports=n},function(t,e,n){t.exports=n(979)},function(t,e,n){"use strict";var o=n(980),i={shouldComponentUpdate:function(t,e){return o(this,t,e)}};t.exports=i},function(t,e,n){"use strict";function o(t,e,n){return!i(t.props,e)||!i(t.state,n)}var i=n(203);t.exports=o},function(t,e,n){var o;!function(i,r){"use strict";var a="0.7.10",s="",l="?",u="function",c="undefined",h="object",p="string",d="major",f="model",g="name",m="type",v="vendor",y="version",b="architecture",_="console",x="mobile",w="tablet",S="smarttv",C="wearable",E="embedded",T={extend:function(t,e){for(var n in e)-1!=="browser cpu device engine os".indexOf(n)&&e[n].length%2===0&&(t[n]=e[n].concat(t[n]));return t},has:function(t,e){return"string"==typeof t?-1!==e.toLowerCase().indexOf(t.toLowerCase()):!1},lowerize:function(t){return t.toLowerCase()},major:function(t){return typeof t===p?t.split(".")[0]:r}},k={rgx:function(){for(var t,e,n,o,i,a,s,l=0,p=arguments;l<p.length&&!a;){var d=p[l],f=p[l+1];if(typeof t===c){t={};for(o in f)f.hasOwnProperty(o)&&(i=f[o],typeof i===h?t[i[0]]=r:t[i]=r)}for(e=n=0;e<d.length&&!a;)if(a=d[e++].exec(this.getUA()))for(o=0;o<f.length;o++)s=a[++n],i=f[o],typeof i===h&&i.length>0?2==i.length?typeof i[1]==u?t[i[0]]=i[1].call(this,s):t[i[0]]=i[1]:3==i.length?typeof i[1]!==u||i[1].exec&&i[1].test?t[i[0]]=s?s.replace(i[1],i[2]):r:t[i[0]]=s?i[1].call(this,s,i[2]):r:4==i.length&&(t[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):r):t[i]=s?s:r;l+=2}return t},str:function(t,e){for(var n in e)if(typeof e[n]===h&&e[n].length>0){for(var o=0;o<e[n].length;o++)if(T.has(e[n][o],t))return n===l?r:n}else if(T.has(e[n],t))return n===l?r:n;return t}},M={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},O={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,y],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],y],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[g,y],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],y],[/(edge)\/((\d+)?[\w\.]+)/i],[g,y],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],y],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],y],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[g,y],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],y],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],y],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],y],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[y,[g,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[y,[g,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[y,[g,"Facebook"]],[/fxios\/([\w\.-]+)/i],[y,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[y,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[y,g],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[y,k.str,M.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,y],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],y],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,T.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[b,/ower/,"",T.lowerize]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[b,T.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,v,[m,w]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[v,"Apple"],[m,w]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[v,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,f,[m,w]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[v,"Amazon"],[m,w]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,k.str,M.device.amazon.model],[v,"Amazon"],[m,x]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,v,[m,x]],[/\((ip[honed|\s\w*]+);/i],[f,[v,"Apple"],[m,x]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,f,[m,x]],[/\(bb10;\s(\w+)/i],[f,[v,"BlackBerry"],[m,x]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[f,[v,"Asus"],[m,w]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[f,"Xperia Tablet"],[m,w]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[v,"Sony"],[f,"Xperia Phone"],[m,x]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,f,[m,_]],[/android.+;\s(shield)\sbuild/i],[f,[v,"Nvidia"],[m,_]],[/(playstation\s[34portablevi]+)/i],[f,[v,"Sony"],[m,_]],[/(sprint\s(\w+))/i],[[v,k.str,M.device.sprint.vendor],[f,k.str,M.device.sprint.model],[m,x]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[v,f,[m,w]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[v,[f,/_/g," "],[m,x]],[/(nexus\s9)/i],[f,[v,"HTC"],[m,w]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[v,"Microsoft"],[m,_]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,"Microsoft"],[m,x]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[f,[v,"Motorola"],[m,x]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[v,"Motorola"],[m,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],f,[m,w]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[v,"Samsung"],f,[m,x]],[/(samsung);smarttv/i],[v,f,[m,S]],[/\(dtv[\);].+(aquos)/i],[f,[v,"Sharp"],[m,S]],[/sie-(\w+)*/i],[f,[v,"Siemens"],[m,x]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[v,"Nokia"],f,[m,x]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[v,"Acer"],[m,w]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],f,[m,w]],[/(lg) netcast\.tv/i],[v,f,[m,S]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[v,"LG"],[m,x]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[v,"Lenovo"],[m,w]],[/linux;.+((jolla));/i],[v,f,[m,x]],[/((pebble))app\/[\d\.]+\s/i],[v,f,[m,C]],[/android.+;\s(glass)\s\d/i],[f,[v,"Google"],[m,C]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[v,"Xiaomi"],[m,x]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[m,T.lowerize],v,f]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[y,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,y],[/rv\:([\w\.]+).*(gecko)/i],[y,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,y],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[y,k.str,M.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[y,k.str,M.os.windows.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],y],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[g,y],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[g,"Symbian"],y],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],y],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[g,y],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],y],[/(sunos)\s?([\w\.]+\d)*/i],[[g,"Solaris"],y],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[g,y],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[g,"iOS"],[y,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[y,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[g,y]]},I=function(t,e){if(!(this instanceof I))return new I(t,e).getResult();var n=t||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:s),o=e?T.extend(O,e):O;return this.getBrowser=function(){var t=k.rgx.apply(this,o.browser);return t.major=T.major(t.version),t},this.getCPU=function(){return k.rgx.apply(this,o.cpu)},this.getDevice=function(){return k.rgx.apply(this,o.device)},this.getEngine=function(){return k.rgx.apply(this,o.engine)},this.getOS=function(){return k.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this.setUA(n),this};I.VERSION=a,I.BROWSER={NAME:g,MAJOR:d,VERSION:y},I.CPU={ARCHITECTURE:b},I.DEVICE={MODEL:f,VENDOR:v,TYPE:m,CONSOLE:_,MOBILE:x,SMARTTV:S,TABLET:w,WEARABLE:C,EMBEDDED:E},I.ENGINE={NAME:g,VERSION:y},I.OS={NAME:g,VERSION:y},typeof e!==c?(typeof t!==c&&t.exports&&(e=t.exports=I),e.UAParser=I):"function"===u&&n(982)?(o=function(){return I}.call(e,n,e,t),!(o!==r&&(t.exports=o))):i.UAParser=I;var P=i.jQuery||i.Zepto;if(typeof P!==c){var L=new I;P.ua=L.getResult(),P.ua.get=function(){return L.getUA()},P.ua.set=function(t){L.setUA(t);var e=L.getResult();for(var n in e)P.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(e,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function n(t){return"SHAPE"===t.getType()&&"line"===t.getProperty("type")?"LINE":"RECTANGLE"}function o(t){var e=t.get("elements");if(!e)throw new Error("Model must have the `elements` field present");var n=e.hash,o=e.content;if(!n)throw new Error("Model must have current hash defined");if(!o)throw new Error("Model must have content defined");if("string"==typeof o)try{o=JSON.parse(o)}catch(i){throw new Error("Cannot parse infographic content JSON")}return e.content=o,e}Object.defineProperty(e,"__esModule",{value:!0}),e.mapEntityToSelector=n,e.readInfographicData=o,e["default"]={mapEntityToSelector:n,readInfographicData:o}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(65),u=n(37),c=o(u),h=n(456),p=n(478);e["default"]=new(function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n.items={},n.activeKey=null,n.currentEditorState=null,n}return a(e,t),s(e,[{key:"__onDispatch",value:function(t){var e=this;switch(t.type){case p.EDITOR_RTE_ACTIVATE:var n=t.entityKey;this.activeKey=n,this.__emitChange();break;case p.EDITOR_RTE_DEACTIVATE:this.activeKey=null,this.__emitChange();break;case p.EDITOR_RTE_UPDATE:var o=t.entityKey,i=t.editorState,r=o in this.items,a=r&&this.items[o]===i;if(!a){var s=this.items[o],l=s.getSelection().getHasFocus();l&&!i.getSelection().getHasFocus()&&(this.activeKey=null),this.items[o]=i,this.__emitChange()}break;case p.EDITOR_STATE_CHANGE:var u=function(){var n=t.editorState;if(!n)return e.items={},e.activeKey=null,e.__emitChange(),"break";var o=e.currentEditorState,i=0;return n.getEntities().forEach(function(t){if("TEXT"===t.getType()){var n=t.getKey(),r=!0;if(o&&o.getEntities().has(n)&&(r=o.getEntity(n)===t),r){var a=t.getProperty("content").toJS();e.items[n]=h.EditorState.createWithContent((0,h.convertFromRaw)(a)),i++}}}),e.currentEditorState=n,i>0&&e.__emitChange(),"break"}();if("break"===u)break}}},{key:"getEditorState",value:function(t){return this.items[t]}},{key:"getActiveEntityKey",value:function(){return this.activeKey}}]),e}(l.Store))(c["default"])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(10),h=o(c),p=n(191),d=o(p),f=n(185),g=o(f),m=n(133),v=o(m),y=n(95),b=function(t){function e(t){return i(this,e),r(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.width,e=this.props.height,n={width:t+"px",height:e+"px"};return u["default"].createElement("div",{id:"Chart_"+this.props.chartId,className:"ItemContent-chart",style:n})}},{key:"componentDidMount",value:function(){this._renderChart()}},{key:"componentDidUpdate",value:function(){this._renderChart()}},{key:"shouldComponentUpdate",value:function(t){return t.width!==this.props.width||t.height!==this.props.height}},{key:"_renderChart",value:function(){var t=this.props.externalData;if(t&&t&&t.has(this.props.chartId)){var e=t.get(this.props.chartId).toJS(),n=v["default"].getEntity(e.chart_id);if(n)n.resize(this.props.width,this.props.height);else{e.custom.height=this.props.height;var o=new d["default"](e);o.set("entityKey",this.props.entityKey);var i=this.props.infographicModel,r=!0,a=i.get("properties");a&&(r=a.tabs),n=g["default"].create({chart:o,theme:i.get("theme"),tabs:r}),setTimeout(function(){(0,y.addEntity)(e.chart_id,n)},1)}}}}]),e}(u["default"].Component);b.propTypes={width:u["default"].PropTypes.number.isRequired,height:u["default"].PropTypes.number.isRequired,entityKey:u["default"].PropTypes.string.isRequired,chartId:u["default"].PropTypes.string.isRequired,externalData:u["default"].PropTypes.instanceOf(h["default"].Map).isRequired,infographicModel:u["default"].PropTypes.any.isRequired},b.displayName="Chart",b.defaultProps={},e["default"]=b},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(10),h=o(c),p=n(191),d=o(p),f=n(506),g=o(f),m=n(133),v=o(m),y=n(95),b=function(t){function e(t){return i(this,e),r(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props.width,e=this.props.height,n={width:t,height:e};return u["default"].createElement("div",{className:"map",id:"map_container_"+this.props.chartId},u["default"].createElement("div",{id:"map_"+this.props.chartId,className:"ItemContent-chart igc-submap",style:n}),u["default"].createElement("div",{className:"igc-legend"}))}},{key:"componentDidMount",value:function(){this._renderMap()}},{key:"componentDidUpdate",value:function(){this._renderMap()}},{key:"shouldComponentUpdate",value:function(t){return t.width!==this.props.width||t.height!==this.props.height}},{key:"_renderMap",value:function(){var t=this.props.externalData;if(t&&t.has(this.props.chartId)){var e=t.get(this.props.chartId).toJS(),n=v["default"].getEntity(e.chart_id);if(n)n.resize(this.props.width,this.props.height);else{e.custom.height=this.props.height;var o=new d["default"](e);o.set("entityKey",this.props.entityKey);var i=this.props.infographicModel,r=!0,a=i.get("properties");a&&(r=a.tabs),n=new g["default"]({model:o,infographic:i,tabs:r,width:this.props.width,parent:{viewMode:"freeLayout"}}),n.prepare(),n.initChart(),requestAnimationFrame(function(){(0,y.addEntity)(e.chart_id,n)})}}}}]),e}(u["default"].Component);b.propTypes={width:u["default"].PropTypes.number.isRequired,height:u["default"].PropTypes.number.isRequired,entityKey:u["default"].PropTypes.string.isRequired,chartId:u["default"].PropTypes.string.isRequired,externalData:u["default"].PropTypes.instanceOf(h["default"].Map).isRequired,infographicModel:u["default"].PropTypes.any.isRequired},b.displayName="Map",e["default"]=b},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n){var o=n.getType();if("TEXT"===o)return h["default"].createElement(C,{entityKey:n.getKey(),width:n.getWidth(),height:n.getHeight()});if("IMAGE"===o){var i={width:n.getWidth()+"px",height:n.getHeight()+"px"};return h["default"].createElement("img",{className:"ItemContent-image",src:n.getProperty("url"),style:i})}if("SHAPE"===o){var r=void 0,a=n.getProperty("type");if("line"===a){var s=n.getProperty("strokeWidth")||1,u={x1:n.getProperty("x1")+s,y1:n.getProperty("y1")+s,x2:n.getProperty("x2")+s,y2:n.getProperty("y2")+s,strokeWidth:s},c=n.getProperty("stroke");c&&(u.stroke=c);var p={top:-s+"px",left:-s+"px",right:-s+"px",bottom:-s+"px"};r=h["default"].createElement("div",{className:"ItemContent-shape_c",style:p},h["default"].createElement("svg",{width:"100%",height:"100%",preserveAspectRatio:"none"},h["default"].createElement("line",u)))}else if("rectangle"===a){var f={strokeWidth:n.getProperty("strokeWidth"),fill:n.getProperty("fill"),stroke:n.getProperty("stroke")};r=h["default"].createElement("svg",{width:"100%",height:"100%",preserveAspectRatio:"none"},h["default"].createElement("rect",l({x:"0",y:"0",width:"100%",height:"100%"},f)))}else if("ellipse"===a){var m={strokeWidth:n.getProperty("strokeWidth"),fill:n.getProperty("fill"),stroke:n.getProperty("stroke")};r=h["default"].createElement("svg",{width:"100%",height:"100%",preserveAspectRatio:"none"},h["default"].createElement("ellipse",l({cx:"50%",cy:"50%",rx:"50%",ry:"50%"},m)))}if(r)return h["default"].createElement("div",{className:"ItemContent-shape",style:{width:n.getWidth()+"px",height:n.getHeight()+"px"}},r)}else{if("CHART"===o){var v=n.getWidth(),y=n.getHeight();return h["default"].createElement(d["default"],{width:v,height:y,entityKey:n.get("key"),chartId:n.getProperty("chartId")+"",infographicModel:t,externalData:e.get("charts")})}if("IMAGE"===o){var b=n.getWidth(),_=n.getHeight();return h["default"].createElement("img",{src:n.getProperty("url"),width:b,height:_})}if("MAP"===o){var x=n.getWidth(),w=n.getHeight();return h["default"].createElement(g["default"],{width:x,height:w,entityKey:n.get("key"),chartId:n.getProperty("chartId")+"",infographicModel:t,externalData:e.get("charts")})}}return null}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e["default"]=s;var c=n(1),h=o(c),p=n(1227),d=o(p),f=n(1228),g=o(f),m=n(1226),v=o(m),y=n(1231),b=o(y),_=n(209),x=n(605),w=n(38),S=o(w),C=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n.state=n._createStateFromStore(),n._handleStoreChange=n._handleStoreChange.bind(n),n._handleDocumentClick=n._handleDocumentClick.bind(n),n._handleEditorChange=n._handleEditorChange.bind(n),
n._handleClick=n._handleClick.bind(n),n}return a(e,t),u(e,[{key:"componentDidMount",value:function(){this._rteStoreToken=v["default"].addListener(this._handleStoreChange)}},{key:"componentWillUnmount",value:function(){this._rteStoreToken.remove(),document.removeEventListener("click",this._handleDocumentClick,!1)}},{key:"componentDidUpdate",value:function(t,e){e.readOnly&&!this.state.readOnly?document.addEventListener("click",this._handleDocumentClick,!1):!e.readOnly&&this.state.readOnly&&document.removeEventListener("click",this._handleDocumentClick,!1)}},{key:"render",value:function(){var t=this,e=this.props,n=e.width,o=e.height,i=this.state,r=i.editorState,a=i.readOnly;if(!r)return h["default"].createElement("noscript",null);var s={width:n+"px",height:o+"px"},l=(0,S["default"])("ItemContent-text",{__editable:!a});return h["default"].createElement("div",{className:l,style:s,onClick:this._handleClick,ref:function(e){t._root=e}},h["default"].createElement(b["default"],{ref:"editor",editorState:r,onChange:this._handleEditorChange,readOnly:a}))}},{key:"_createStateFromStore",value:function(){var t=this.props.entityKey,e=v["default"].getEditorState(t),n=v["default"].getActiveEntityKey()!==t;return{editorState:e,readOnly:n}}},{key:"_handleStoreChange",value:function(){this.setState(this._createStateFromStore())}},{key:"_handleDocumentClick",value:function(t){this.props.readOnly||(0,_.elementIsAncestorOf)(t.target,this._root)||(0,x.endEditingText)()}},{key:"_handleClick",value:function(){this.refs.editor&&this.refs.editor.focus()}},{key:"_handleEditorChange",value:function(t){var e=this.props.entityKey;(0,x.updateEditorText)(e,t)}}]),e}(c.PureComponent);C.propTypes={entityKey:h["default"].PropTypes.string.isRequired,width:h["default"].PropTypes.number.isRequired,height:h["default"].PropTypes.number.isRequired,readOnly:h["default"].PropTypes.bool}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(1),c=o(u),h=n(38),p=o(h),d=n(456),f=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Strike through",style:"STRIKETHROUGH"}],g=[{label:"Unordered list",style:"unordered-list-item"},{label:"Ordered list",style:"ordered-list-item"}],m=function(t){function e(t){r(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t));return n.onToggle=function(t){t.preventDefault(),t.stopPropagation(),n.props.onToggle(n.props.style)},n}return s(e,t),l(e,[{key:"render",value:function(){var t,e=(0,p["default"])("RichTextEditor-toolbar-button",(t={},i(t,"__"+this.props.style,!0),i(t,"__active",this.props.active),t));return c["default"].createElement("li",{className:"RichTextEditor-toolbar-item"},c["default"].createElement("a",{className:e,role:"button",onMouseDown:this.onToggle,onTouchStart:this.onToggle,title:this.props.label}))}}]),e}(u.PureComponent);m.propTypes={active:u.PropTypes.bool.isRequired,style:u.PropTypes.string.isRequired,label:u.PropTypes.string.isRequired,onToggle:u.PropTypes.func.isRequired};var v=function(t){function e(){return r(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.props.editorState,n=e.getCurrentInlineStyle(),o=e.getSelection(),i=e.getCurrentContent().getBlockForKey(o.getStartKey()).getType();return c["default"].createElement("div",{className:"RichTextEditor-toolbar"},c["default"].createElement("ul",{className:"RichTextEditor-toolbar-items"},f.map(function(e){var o=e.label,i=e.style;return c["default"].createElement(m,{onToggle:t.props.onInlineStyle,active:n.has(i),style:i,label:o,key:i})})),c["default"].createElement("ul",{className:"RichTextEditor-toolbar-items"},g.map(function(e){var n=e.label,o=e.style;return c["default"].createElement(m,{onToggle:t.props.onBlockStyle,active:o===i,style:o,label:n,key:o})})))}}]),e}(u.PureComponent);v.propTypes={editorState:u.PropTypes.object.isRequired,onInlineStyle:u.PropTypes.func.isRequired,onBlockStyle:u.PropTypes.func.isRequired};var y=function(t){function e(t){r(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t));return n._handleKeyCommand=n._handleKeyCommand.bind(n),n._handleInlineStyle=n._handleInlineStyle.bind(n),n._handleBlockStyle=n._handleBlockStyle.bind(n),n}return s(e,t),l(e,[{key:"render",value:function(){var t=(0,p["default"])("RichTextEditor",this.props.className),e=this.props.readOnly,n=void 0;return e||(n=c["default"].createElement(v,{onInlineStyle:this._handleInlineStyle,onBlockStyle:this._handleBlockStyle,editorState:this.props.editorState})),c["default"].createElement("div",{className:t},n,c["default"].createElement(d.Editor,{editorState:this.props.editorState,onChange:this.props.onChange,handleKeyCommand:this._handleKeyCommand,readOnly:this.props.readOnly,ref:"editor"}))}},{key:"focus",value:function(){this.refs.editor.focus()}},{key:"blur",value:function(){this.refs.editor.blur()}},{key:"_handleInlineStyle",value:function(t){var e=this.props,n=e.editorState,o=e.onChange;o(d.RichUtils.toggleInlineStyle(n,t))}},{key:"_handleBlockStyle",value:function(t){this.props.onChange(d.RichUtils.toggleBlockType(this.props.editorState,t))}},{key:"_handleKeyCommand",value:function(t){var e=d.RichUtils.handleKeyCommand(this.props.editorState,t);return e?(this.props.onChange(e),!0):!1}}]),e}(u.PureComponent);y.propTypes={editorState:u.PropTypes.object.isRequired,onChange:u.PropTypes.func.isRequired,className:u.PropTypes.string,readOnly:u.PropTypes.bool},e["default"]=y},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1230),r=o(i);e["default"]=r["default"]},,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(133),r=o(i),a=function(){return this.assignVars.apply(this,arguments),this.init(),this};a.prototype={init:function(){var t=!0,e={};e.message=function(e){var n=e.data.split(":"),o=n.shift();"iframeWidth"===o&&(this.adjustBody(n[0],t),this.resizeImages(),this.resizeFreeLayout&&this.resizeFreeLayout(),t?t=!1:(this.resizeParticles(),this.resizeCharts(),this.resizeMaps(),this.resizeTables(),this.recalculateMargin()),this.startHeightListener||(this.startHeightListener=!0))}.bind(this),this.addEvt(window,e),this.listenForHeightChange(200,parent)},adjustBody:function(t,e){var n,o;t&&(n=$("body"),t=parseInt(t,10),o=parseInt(n.css("width"),10),(o!==t||e)&&n.css("width",t))},listenForHeightChange:function(t,e){var n=0,o=document.getElementsByClassName("ig-container")[0];o||(o=document.getElementsByClassName("InfographicEditor-Contents")[0]),function i(){var r=o.offsetHeight+5;this.startHeightListener&&n!==r&&(n=r,this.sendHeight.call(this,e,n)),setTimeout(i.bind(this),t)}.bind(this)()},assignVars:function(t,e){var n={path:1,realpath:1,title:1};for(var o in n)if(n.hasOwnProperty(o)){var i=t[o];if(void 0===i||null===i)throw{name:"Missing required property",message:"Property "+o+" does not exist"};this[o]=t[o]}this.resizeFreeLayout=e},sendHeight:function(t,e){var n="iframeHeight"+this.path+"#"+this.realpath+":"+e;t.postMessage(n,"*"),window.parent.postMessage(JSON.stringify({src:window.location.toString(),context:"iframe.resize",height:e}),"*")},sendReady:function(){var t="iframeLoaded"+this.path+"#"+this.realpath+":"+this.title;parent.postMessage(t,"*"),this.startHeightListener=!0},resizeImages:_.debounce(function(){$("div.particle.picture img").each(function(t,e){var n=$(e).parent()[0],o=$(n).width();e.naturalWidth<=o?e.width=e.naturalWidth:e.width=o})},300),resizeParticles:function(){var t;$(".shrink .moveable.particle").toArray().forEach(function(e){$(e).hasClass("chart-title")?t="bodytitle":$(e).hasClass("quoted")&&(t="quote"),Shrink.boxWidth(t,$(e))},this)},resizeCharts:_.debounce(function(){$('div.moveable.chart div[id^="Chart_"]').each(function(t,e){var n,o,i,a,s,l=$(e).attr("id").split("_").pop(),u=$(e),c=r["default"].getEntity(l),h=c.instance;"InfoCharts"===c.version&&h&&(s=h.options.shrink),"Infogram.Charts"===c.version&&h.options.custom&&h.options.custom.shrink&&(s=h.options.custom.shrink);var p=c.options&&c.options.model;if(p&&p.get("custom").shrink&&(s=p.get("custom").shrink),s?a=Shrink.chartWidth(s):(n=$(e).parent()[0],o=$(n).width(),i=$(e).outerWidth(!0)-$(e).width(),a=o-i),"InfoCharts"===c.version)c.resize(a);else if("Infogram.Charts"===c.version)c.resize(a),u.css("width",a+"px");else{if(u.find(".igc-textual").length){u=u.parent();var d=r["default"].getEntity(l);d.render(d.activeSheet)}u.css("width",a+"px")}})},300),resizeTables:_.debounce(function(){$('div[id^="table_"]').each(function(t,e){var n=$(e).attr("id");if(n&&""!==n){var o=n.split("_").pop(),i=r["default"].getEntity(o);i&&i.render(i.activeSheet)}})},300),resizeMaps:_.debounce(function(){$('div.moveable.chart div[id^="map_"]').each(function(t,e){var n=$(e).attr("id");if(n&&""!==n){var o=n.split("_").pop(),i=$(e).parent().width(),a=$(e).outerWidth(!0)-$(e).width(),s=i-a,l=r["default"].getEntity(o);if(l&&l.options){var u=l.options.canvasWidth/l.options.canvasHeight,c=s/u;l.options.canvasWidth=s,l.options.canvasHeight=c,l.options.canvasSelectorId&&$("#"+l.options.canvasSelectorId).width(s).height(c).empty(),l.init(l.data,l.options)}}})},300),recalculateMargin:_.debounce(Shrink.recalculateMargin,300),addEvt:function(t,e,n){n=n||!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];t.addEventListener?t.addEventListener(o,i,n):t.attachEvent?t.attachEvent("on"+o,a.prototype.bind(t,i,window.event)):t["on"+o]=i}},removeEvt:function(t,e,n){n=n||!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];t.removeEventListener?t.removeEventListener(o,i,n):t.detachEvent?t.detachEvent("on"+o,i):t["on"+o]=!1}},bind:function(t,e){return function(){return e.apply(t,arguments)}}},e["default"]=a},,,,,function(t,e,n){"use strict";var o;o=function(t){var e=n(49);return e.extend({template:n(1257),className:"popup popup-protected",events:{"keyup input":function(){this.$password.val().length>0?this.$button.removeAttr("disabled"):this.$button.attr("disabled","")},"submit form":"submit"},initialize:function(t){this.options=t||{}},submit:function(t){t.preventDefault(),this.options.submit({password:this.$password.val()}),this.remove()},focus:function(){this.$password.focus()},render:function(){return this.$el.html(_.template(this.template)()),this.$password=this.$("input"),this.$button=this.$("button"),this}})}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},,,,,,,,,,,,,,,,,,function(t,e){t.exports='<div>\n    <h2>Infographic is password protected</h2>\n    <form>\n        <label>Enter password:</label>\n        <input type="password" autofocus/><br />\n        <button type="submit" disabled>Open</button>\n    </form>\n</div>\n\n<a class="top-logo" href="/" title="infogr.am">\n    <img src="/i/www-logo.png" alt="infogr.am">\n</a>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o;o=function(t){var e=n(49),o=e.extend({className:"signup-callout",template:n(1730),events:{"click .signup-callout-close":"removePopup","click .signup-callout-button":"onButtonClick"},initialize:function(){$("#footer").one("mouseover",function(){this.$el.addClass("animate")}.bind(this)),this.calculateWidth(),$(window).on("resize",this.calculateWidth.bind(this))},render:function(){this.$el.html(_.template(this.template)),$("#footer").append(this.el)},calculateWidth:function(){this.$el.removeClass("wide"),$(window).width()>=675&&this.$el.addClass("wide")},onButtonClick:function(){ga("Embed.send","event","Footer Signup Modal","cta")},removePopup:function(){this.remove()}});return o}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports='<span class="signup-callout-text">\n    Create interactive charts and graphs like this one\n</span>\n<br class="signup-callout-break">\n<a class="signup-callout-button" href="https://infogr.am/" target="_blank">Try Infogram for free!</a>\n<a class="signup-callout-close">&times;</a>\n'}]);